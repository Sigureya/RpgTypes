{"version":3,"file":"rpgTypes.cjs.js","sources":["../../src/libs/folderNames/asset/audio.ts","../../src/libs/folderNames/asset/images.ts","../../src/libs/folderNames/data/fileNames.ts","../../src/libs/folderNames/folderName.ts","../../src/libs/namedItemSource/labels/mergeLabel.ts","../../src/libs/namedItemSource/transformers/data/system/getSystemTypeNames.ts","../../src/libs/namedItemSource/transformers/constants.ts","../../src/libs/schema/data/rpg/main/traitContainers/trait/constants/traitCode.ts","../../src/libs/schema/data/rpg/main/traitContainers/trait/options/types/collaps/constants.ts","../../src/libs/schema/data/rpg/main/traitContainers/trait/options/types/partyAbility/constants.ts","../../src/libs/schema/data/rpg/main/traitContainers/trait/options/types/specialFlags/constants.ts","../../src/libs/schema/data/rpg/main/traitContainers/trait/options/types/paramExtra/constants.ts","../../src/libs/schema/data/rpg/main/traitContainers/trait/options/types/paramRegular/constants.ts","../../src/libs/schema/data/rpg/main/traitContainers/trait/options/types/paramSpecial/constants.ts","../../src/libs/schema/data/rpg/main/traitContainers/trait/options/battlerParam.ts","../../src/libs/schema/data/rpg/main/traitContainers/trait/options/makeOptions.ts","../../src/libs/schema/data/rpg/main/traitContainers/trait/options/buildSource.ts","../../src/libs/schema/data/rpg/main/traitContainers/trait/options/default.ts","../../src/libs/schema/data/rpg/main/traitContainers/trait/traitLabelDescriptor.ts","../../src/libs/schema/data/rpg/main/traitContainers/trait/labelDefine.ts","../../src/libs/schema/data/rpg/main/traitContainers/trait/types/schema.ts","../../src/libs/schema/data/rpg/main/traitContainers/actor/make.ts","../../src/libs/schema/data/rpg/main/traitContainers/actor/schema.ts","../../src/libs/schema/data/rpg/main/traitContainers/armor/make.ts","../../src/libs/schema/data/rpg/main/traitContainers/armor/schema.ts","../../src/libs/schema/data/rpg/main/traitContainers/class/make.ts","../../src/libs/schema/data/rpg/main/traitContainers/class/schema.ts","../../src/libs/schema/data/rpg/main/traitContainers/state/make.ts","../../src/libs/schema/data/rpg/main/traitContainers/state/schema.ts","../../src/libs/schema/data/rpg/main/traitContainers/weapon/weaponDefault.ts","../../src/libs/schema/data/rpg/main/traitContainers/weapon/make.ts","../../src/libs/schema/data/rpg/main/traitContainers/weapon/schema.ts","../../src/libs/schema/data/rpg/main/traitContainers/enemy/make.ts","../../src/libs/schema/data/rpg/main/traitContainers/enemy/schema.ts","../../src/libs/schema/data/rpg/main/usableItems/make.ts","../../src/libs/schema/data/rpg/main/usableItems/schema.ts","../../src/libs/schema/data/rpg/main/usableItems/types/hitType/constants.ts","../../src/libs/schema/data/rpg/main/usableItems/types/itemEffect/labels/defaultLabelSet.ts","../../src/libs/schema/data/rpg/main/usableItems/types/itemEffect/constants/effectCode.ts","../../src/libs/schema/data/rpg/main/usableItems/types/itemEffect/constants/specialEffect.ts","../../src/libs/schema/namedItemSource/sourceIdentifier/make.ts","../../src/libs/schema/namedItemSource/lisrSrc/constants.ts","../../src/libs/schema/data/rpg/main/usableItems/types/itemEffect/itemEffectDescriptor.ts","../../src/libs/schema/data/rpg/main/usableItems/types/itemEffect/define.ts","../../src/libs/schema/data/rpg/main/usableItems/types/labels/item/itemDefault.ts","../../src/libs/schema/data/rpg/main/usableItems/types/labels/skill/skillDefault.ts","../../src/libs/schema/data/rpg/main/usableItems/types/labels/usableItemDefault.ts","../../src/libs/schema/data/rpg/main/defaultDataLabels.ts","../../src/libs/schema/data/rpg/main/members/damage/damageDefault.ts","../../src/libs/schema/data/rpg/main/members/damage/make.ts","../../src/libs/schema/data/rpg/main/members/damage/schema.ts","../../node_modules/ajv/dist/compile/codegen/code.js","../../node_modules/ajv/dist/compile/codegen/scope.js","../../node_modules/ajv/dist/compile/codegen/index.js","../../node_modules/ajv/dist/compile/util.js","../../node_modules/ajv/dist/compile/names.js","../../node_modules/ajv/dist/compile/errors.js","../../node_modules/ajv/dist/compile/validate/boolSchema.js","../../node_modules/ajv/dist/compile/rules.js","../../node_modules/ajv/dist/compile/validate/applicability.js","../../node_modules/ajv/dist/compile/validate/dataType.js","../../node_modules/ajv/dist/compile/validate/defaults.js","../../node_modules/ajv/dist/vocabularies/code.js","../../node_modules/ajv/dist/compile/validate/keyword.js","../../node_modules/ajv/dist/compile/validate/subschema.js","../../node_modules/fast-deep-equal/index.js","../../node_modules/json-schema-traverse/index.js","../../node_modules/ajv/dist/compile/resolve.js","../../node_modules/ajv/dist/compile/validate/index.js","../../node_modules/ajv/dist/runtime/validation_error.js","../../node_modules/ajv/dist/compile/ref_error.js","../../node_modules/ajv/dist/compile/index.js","../../node_modules/fast-uri/lib/scopedChars.js","../../node_modules/fast-uri/lib/utils.js","../../node_modules/fast-uri/lib/schemes.js","../../node_modules/fast-uri/index.js","../../node_modules/ajv/dist/runtime/uri.js","../../node_modules/ajv/dist/core.js","../../node_modules/ajv/dist/vocabularies/core/id.js","../../node_modules/ajv/dist/vocabularies/core/ref.js","../../node_modules/ajv/dist/vocabularies/core/index.js","../../node_modules/ajv/dist/vocabularies/validation/limitNumber.js","../../node_modules/ajv/dist/vocabularies/validation/multipleOf.js","../../node_modules/ajv/dist/runtime/ucs2length.js","../../node_modules/ajv/dist/vocabularies/validation/limitLength.js","../../node_modules/ajv/dist/vocabularies/validation/pattern.js","../../node_modules/ajv/dist/vocabularies/validation/limitProperties.js","../../node_modules/ajv/dist/vocabularies/validation/required.js","../../node_modules/ajv/dist/vocabularies/validation/limitItems.js","../../node_modules/ajv/dist/runtime/equal.js","../../node_modules/ajv/dist/vocabularies/validation/uniqueItems.js","../../node_modules/ajv/dist/vocabularies/validation/const.js","../../node_modules/ajv/dist/vocabularies/validation/enum.js","../../node_modules/ajv/dist/vocabularies/validation/index.js","../../node_modules/ajv/dist/vocabularies/applicator/additionalItems.js","../../node_modules/ajv/dist/vocabularies/applicator/items.js","../../node_modules/ajv/dist/vocabularies/applicator/prefixItems.js","../../node_modules/ajv/dist/vocabularies/applicator/items2020.js","../../node_modules/ajv/dist/vocabularies/applicator/contains.js","../../node_modules/ajv/dist/vocabularies/applicator/dependencies.js","../../node_modules/ajv/dist/vocabularies/applicator/propertyNames.js","../../node_modules/ajv/dist/vocabularies/applicator/additionalProperties.js","../../node_modules/ajv/dist/vocabularies/applicator/properties.js","../../node_modules/ajv/dist/vocabularies/applicator/patternProperties.js","../../node_modules/ajv/dist/vocabularies/applicator/not.js","../../node_modules/ajv/dist/vocabularies/applicator/anyOf.js","../../node_modules/ajv/dist/vocabularies/applicator/oneOf.js","../../node_modules/ajv/dist/vocabularies/applicator/allOf.js","../../node_modules/ajv/dist/vocabularies/applicator/if.js","../../node_modules/ajv/dist/vocabularies/applicator/thenElse.js","../../node_modules/ajv/dist/vocabularies/applicator/index.js","../../node_modules/ajv/dist/vocabularies/format/format.js","../../node_modules/ajv/dist/vocabularies/format/index.js","../../node_modules/ajv/dist/vocabularies/metadata.js","../../node_modules/ajv/dist/vocabularies/draft7.js","../../node_modules/ajv/dist/vocabularies/discriminator/types.js","../../node_modules/ajv/dist/vocabularies/discriminator/index.js","../../node_modules/ajv/dist/ajv.js","../../src/libs/schema/data/rpg/main/validate.ts","../../src/libs/schema/data/rpg/event/map/event/eventCommand/eventCommandCodes.ts","../../src/libs/schema/data/rpg/event/map/event/eventCommand/types/domains/moveRoute/constants.ts","../../src/libs/schema/data/rpg/event/map/mapInfo/schema.ts","../../src/libs/schema/data/rpg/event/map/make.ts","../../src/libs/schema/data/rpg/event/makeEvent.ts","../../src/libs/schema/data/rpg/system/systemLabels.ts","../../src/libs/schema/labelUtils/default.ts","../../src/libs/schema/labelRegistryDefault.ts","../../src/libs/utils/types/audioFileParams/make.ts"],"sourcesContent":["export const FOLDER_AUDIO_BGM = \"bgm\" as const;\r\nexport const FOLDER_AUDIO_SE = \"se\" as const;\r\nexport const FOLDER_AUDIO_ME = \"me\" as const;\r\nexport const FOLDER_AUDIO_BGS = \"bgs\" as const;\r\n","export const FOLDER_IMG_BATTLEBACK1 = \"battlebacks1\" as const;\r\nexport const FOLDER_IMG_BATTLEBACK2 = \"battlebacks2\" as const;\r\nexport const FOLDER_IMG_CHACTERS = \"characters\" as const;\r\nexport const FOLDER_IMG_ENEMIES = \"enemies\" as const;\r\nexport const FOLDER_IMG_FACES = \"faces\" as const;\r\nexport const FOLDER_IMG_PARALLACES = \"parallaxes\" as const;\r\nexport const FOLDER_IMG_PICTURES = \"pictures\" as const;\r\nexport const FOLDER_IMG_SV_ACTORS = \"sv_actors\" as const;\r\nexport const FOLDER_IMG_SV_ENEMIES = \"sv_enemies\" as const;\r\nexport const FOLDER_IMG_SYSTEM = \"system\" as const;\r\nexport const FOLDER_IMG_TILESETS = \"tilesets\" as const;\r\nexport const FOLDER_IMG_TITLES1 = \"titles1\" as const;\r\nexport const FOLDER_IMG_TITLES2 = \"titles2\" as const;\r\n","export const FILENAME_SYSTEM = \"System.json\";\r\nexport const FILENAME_ACTORS = \"Actors.json\";\r\nexport const FILANAME_CLASSES = \"Classes.json\";\r\nexport const FILENAME_SKILLS = \"Skills.json\";\r\nexport const FILENAME_ITEMS = \"Items.json\";\r\nexport const FILENAME_WEAPONS = \"Weapons.json\";\r\nexport const FILENAME_ARMORS = \"Armors.json\";\r\nexport const FILENAME_ENEMIES = \"Enemies.json\";\r\nexport const FILENAME_TROOPS = \"Troops.json\";\r\nexport const FILENAME_STATES = \"States.json\";\r\nexport const FILENAME_ANIMATIONS = \"Animations.json\";\r\nexport const FILENAME_TILESET = \"Tilesets.json\";\r\nexport const FILENAME_COMMON_EVENTS = \"CommonEvents.json\";\r\nexport const FILENAME_MAP_INFOS = \"MapInfos.json\";\r\n","export const FOLDER_DATA = \"data\" as const;\r\nexport const FOLDER_IMG = \"img\" as const;\r\nexport const FOLDER_AUDIO = \"audio\" as const;\r\nexport const FOLDER_JS = \"js\" as const;\r\n","import type { DomainLabel } from \"@RpgTypes/templates\";\r\n\r\nexport type PrimitiveRecord<T> = Record<keyof T, string>;\r\n\r\nexport const mergeWithDefaults = <T>(\r\n  defaultLabels: Record<keyof T, string>,\r\n  labels: Partial<T>\r\n): {\r\n  [K in keyof T]: string;\r\n} => {\r\n  const reulst = { ...defaultLabels };\r\n  for (const key in defaultLabels) {\r\n    const value = labels[key];\r\n    if (typeof value === \"string\") {\r\n      reulst[key] = value;\r\n    }\r\n  }\r\n  return reulst;\r\n};\r\n\r\nexport const mergeDomainLabel = <T>(\r\n  base: DomainLabel<PrimitiveRecord<T>>,\r\n  override: Partial<DomainLabel<Partial<T>>>\r\n): DomainLabel<{ [K in keyof T]: string }> => {\r\n  return {\r\n    domainName: override.domainName ?? base.domainName,\r\n    options: mergeWithDefaults(base.options, override.options ?? {}),\r\n  };\r\n};\r\n\r\nexport const mergeNestedPrimitiveRecords = <T>(\r\n  base: T,\r\n  override: Partial<{ [K in keyof T]: Partial<PrimitiveRecord<T[K]>> }>\r\n): T => {\r\n  const result: Partial<T> = {};\r\n  for (const domain in base) {\r\n    const domainBase = base[domain];\r\n    const domainOverride = override[domain] ?? {};\r\n    result[domain] = mergeWithDefaults(\r\n      domainBase as Required<typeof domainOverride>,\r\n      domainOverride\r\n    ) as T[typeof domain];\r\n  }\r\n  return result as T;\r\n};\r\n","import type {\r\n  Data_NamedItem,\r\n  Data_System,\r\n  System_ParamNames,\r\n} from \"@RpgTypes/schema\";\r\n\r\nconst makeNamedItem = (name: string, index: number): Data_NamedItem => ({\r\n  name: name,\r\n  id: index,\r\n});\r\n\r\nexport const getVariableNames = (\r\n  system: Pick<Data_System, \"variables\">\r\n): Data_NamedItem[] => {\r\n  return system.variables.map(makeNamedItem);\r\n};\r\n\r\nexport const getElementTypes = (\r\n  system: Pick<Data_System, \"elements\">\r\n): Data_NamedItem[] => {\r\n  return system.elements.map(makeNamedItem);\r\n};\r\n\r\nexport const getEquipTypes = (\r\n  system: Pick<Data_System, \"equipTypes\">\r\n): Data_NamedItem[] => {\r\n  return system.equipTypes.map(makeNamedItem);\r\n};\r\n\r\nexport const getSkillTypes = (\r\n  system: Pick<Data_System, \"skillTypes\">\r\n): Data_NamedItem[] => {\r\n  return system.skillTypes.map(makeNamedItem);\r\n};\r\n\r\nexport const getWeaponTypes = (\r\n  system: Pick<Data_System, \"weaponTypes\">\r\n): Data_NamedItem[] => {\r\n  return system.weaponTypes.map(makeNamedItem);\r\n};\r\n\r\nexport const getArmorTypes = (\r\n  system: Pick<Data_System, \"armorTypes\">\r\n): Data_NamedItem[] => {\r\n  return system.armorTypes.map(makeNamedItem);\r\n};\r\n\r\nexport const getParamNames = (system: System_ParamNames): Data_NamedItem[] => {\r\n  return system.terms.params.map(makeNamedItem);\r\n};\r\n","export const AUTHOR_RMMZ = \"rmmz\" as const;\r\nexport const MODULE_TRAIT = \"trait\" as const;\r\nexport const MODULE_DATA = \"data\" as const;\r\nexport const MODULE_SYSTEM = \"system\" as const;\r\n","export const TRAIT_ELEMENT_RATE = 11 as const;\r\nexport const TRAIT_DEBUFF_RATE = 12 as const;\r\nexport const TRAIT_STATE_RATE = 13 as const;\r\nexport const TRAIT_STATE_RESIST = 14 as const;\r\nexport const TRAIT_PARAM = 21 as const;\r\nexport const TRAIT_XPARAM = 22 as const;\r\nexport const TRAIT_SPARAM = 23 as const;\r\nexport const TRAIT_ATTACK_ELEMENT = 31 as const;\r\nexport const TRAIT_ATTACK_STATE = 32 as const;\r\nexport const TRAIT_ATTACK_SPEED = 33 as const;\r\nexport const TRAIT_ATTACK_TIMES = 34 as const;\r\nexport const TRAIT_ATTACK_SKILL = 35 as const;\r\nexport const TRAIT_SKILL_TYPE_ADD = 41 as const;\r\nexport const TRAIT_SKILL_TYPE_SEAL = 42 as const;\r\nexport const TRAIT_SKILL_ADD = 43 as const;\r\nexport const TRAIT_SKILL_SEAL = 44 as const;\r\nexport const TRAIT_EQUIP_WEAPON_TYPE = 51 as const;\r\nexport const TRAIT_EQUIP_ARMOR_TYPE = 52 as const;\r\nexport const TRAIT_EQUIP_LOCK = 53 as const;\r\nexport const TRAIT_EQUIP_SEAL = 54 as const;\r\nexport const TRAIT_SLOT_TYPE = 55 as const;\r\nexport const TRAIT_ACTION_PLUS = 61 as const;\r\nexport const TRAIT_SPECIAL_FLAG = 62 as const;\r\nexport const TRAIT_COLLAPSE_TYPE = 63 as const;\r\nexport const TRAIT_PARTY_ABILITY = 64 as const;\r\n","export const COLLAPS_NORMAL = 0 as const;\r\nexport const COLLAPS_BOSS = 1 as const;\r\nexport const COLLAPS_INSTANT = 2 as const;\r\nexport const COLLAPS_NONE = 3 as const;\r\n","export const PARTY_ABILITY_ENCOUNTER_HALF = 0 as const;\r\nexport const PARTY_ABILITY_ENCOUNTER_NONE = 1 as const;\r\nexport const PARTY_ABILITY_CANCEL_SURPRISE = 2 as const;\r\nexport const PARTY_ABILITY_RAISE_PREEMPTIVE = 3 as const;\r\nexport const PARTY_ABILITY_GOLD_DOUBLE = 4 as const;\r\nexport const PARTY_ABILITY_DROP_ITEM_DOUBLE = 5 as const;\r\n","export const FLAG_ID_AUTO_BATTLE = 0 as const;\r\nexport const FLAG_ID_GUARD = 1 as const;\r\nexport const FLAG_ID_SUBSTITUTE = 2 as const;\r\nexport const FLAG_ID_PRESERVE_TP = 3 as const;\r\n","/**\r\n * * Hit Rate\r\n */\r\nexport const EXTRA_PARAM_HIT = 0 as const;\r\n\r\n/**\r\n * * Evasion Rate\r\n */\r\nexport const EXTRA_PARAM_EVA = 1 as const;\r\n\r\n/**\r\n * * Critical Hit Rate\r\n */\r\nexport const EXTRA_PARAM_CRI = 2 as const;\r\n\r\n/**\r\n * * Critical Evasion Rate\r\n */\r\nexport const EXTRA_PARAM_CEV = 3 as const;\r\n\r\n/**\r\n * * Magic Evasion Rate\r\n */\r\nexport const EXTRA_PARAM_MEV = 4 as const;\r\n/**\r\n * * Magic Reflection Rate\r\n */\r\n\r\nexport const EXTRA_PARAM_MRF = 5 as const;\r\n/**\r\n * * Counter Attack Rate\r\n */\r\n\r\nexport const EXTRA_PARAM_CNT = 6 as const;\r\n/**\r\n * * HP Regeneration Rate\r\n */\r\n\r\nexport const EXTRA_PARAM_HRG = 7 as const;\r\n/**\r\n * * MP Regeneration Rate\r\n */\r\n\r\nexport const EXTRA_PARAM_MRG = 8 as const;\r\n/**\r\n * * TP Regeneration Rate\r\n * */\r\n\r\nexport const EXTRA_PARAM_TRG = 9 as const;\r\n","/**\r\n * * Maximum HP\r\n */\r\nexport const REGULAR_PARAM_MAX_HP = 0 as const;\r\n\r\n/**\r\n * * Maximum MP\r\n */\r\nexport const REGULAR_PARAM_MAX_MP = 1 as const;\r\n/**\r\n * * Attack Power\r\n */\r\nexport const REGULAR_PARAM_ATK = 2 as const;\r\n/**\r\n * * Defense Power\r\n */\r\nexport const REGULAR_PARAM_DEF = 3 as const;\r\n/**\r\n * * Magic Attack Power\r\n */\r\nexport const REGULAR_PARAM_MATK = 4 as const;\r\n\r\n/**\r\n * * Magic Defense Power\r\n */\r\nexport const REGULAR_PARAM_MDEF = 5 as const;\r\n\r\n/**\r\n * * Agility\r\n */\r\nexport const REGULAR_PARAM_AGI = 6 as const;\r\n/**\r\n * * Luck\r\n */\r\nexport const REGULAR_PARAM_LUK = 7 as const;\r\n","/**\r\n * * Target Rate\r\n */\r\nexport const SPECIAL_PARAM_TGR = 0 as const;\r\n\r\n/**\r\n * * Guard Effect Rate\r\n */\r\nexport const SPECIAL_PARAM_GRD = 1 as const;\r\n\r\n/**\r\n * * Recovery Effect Rate\r\n */\r\nexport const SPECIAL_PARAM_REC = 2 as const;\r\n\r\n/**\r\n * * Pharmacology\r\n */\r\nexport const SPECIAL_PARAM_PHA = 3 as const;\r\n\r\n/**\r\n * * MP Cost Rate\r\n */\r\nexport const SPECIAL_PARAM_MCR = 4 as const;\r\n\r\n/**\r\n * * TP Cost Rate\r\n */\r\nexport const SPECIAL_PARAM_TCR = 5 as const;\r\n\r\n/**\r\n * * Physical Damage Rate\r\n */\r\nexport const SPECIAL_PARAM_PDR = 6 as const;\r\n\r\n/**\r\n * * Magic Damage Rate\r\n */\r\nexport const SPECIAL_PARAM_MDR = 7 as const;\r\n\r\n/**\r\n * * Floor Damage Rate\r\n */\r\nexport const SPECIAL_PARAM_FDR = 8 as const;\r\n\r\n/**\r\n * * Experience Rate\r\n */\r\nexport const SPECIAL_PARAM_EXR = 9 as const;\r\n","import type {\r\n  RegularParamLabels,\r\n  ExtraParamLabels,\r\n  SpecialParamLabels,\r\n} from \"./types\";\r\nimport {\r\n  REGULAR_PARAM_AGI,\r\n  REGULAR_PARAM_ATK,\r\n  REGULAR_PARAM_DEF,\r\n  REGULAR_PARAM_LUK,\r\n  REGULAR_PARAM_MATK,\r\n  REGULAR_PARAM_MAX_HP,\r\n  REGULAR_PARAM_MAX_MP,\r\n  REGULAR_PARAM_MDEF,\r\n  EXTRA_PARAM_CEV,\r\n  EXTRA_PARAM_EVA,\r\n  EXTRA_PARAM_CNT,\r\n  EXTRA_PARAM_CRI,\r\n  EXTRA_PARAM_HIT,\r\n  EXTRA_PARAM_HRG,\r\n  EXTRA_PARAM_MEV,\r\n  EXTRA_PARAM_MRF,\r\n  EXTRA_PARAM_MRG,\r\n  EXTRA_PARAM_TRG,\r\n  SPECIAL_PARAM_EXR,\r\n  SPECIAL_PARAM_TGR,\r\n  SPECIAL_PARAM_FDR,\r\n  SPECIAL_PARAM_GRD,\r\n  SPECIAL_PARAM_MCR,\r\n  SPECIAL_PARAM_TCR,\r\n  SPECIAL_PARAM_PDR,\r\n  SPECIAL_PARAM_MDR,\r\n  SPECIAL_PARAM_PHA,\r\n  SPECIAL_PARAM_REC,\r\n} from \"./types\";\r\n\r\nexport const regularParamName = (\r\n  paramIndex: number,\r\n  labels: RegularParamLabels\r\n): string => {\r\n  switch (paramIndex) {\r\n    case REGULAR_PARAM_MAX_HP:\r\n      return labels.maxHp;\r\n    case REGULAR_PARAM_MAX_MP:\r\n      return labels.maxMp;\r\n    case REGULAR_PARAM_ATK:\r\n      return labels.atk;\r\n    case REGULAR_PARAM_DEF:\r\n      return labels.def;\r\n    case REGULAR_PARAM_MATK:\r\n      return labels.matk;\r\n    case REGULAR_PARAM_MDEF:\r\n      return labels.mdef;\r\n    case REGULAR_PARAM_AGI:\r\n      return labels.agi;\r\n    case REGULAR_PARAM_LUK:\r\n      return labels.luk;\r\n    default:\r\n      return `?rparams[${paramIndex}]`;\r\n  }\r\n};\r\n\r\nexport const extraParamName = (\r\n  paramIndex: number,\r\n  labels: ExtraParamLabels\r\n): string => {\r\n  switch (paramIndex) {\r\n    case EXTRA_PARAM_CEV:\r\n      return labels.criticalEvasionRate;\r\n    case EXTRA_PARAM_EVA:\r\n      return labels.evasionRate;\r\n    case EXTRA_PARAM_CNT:\r\n      return labels.counterAttackRate;\r\n    case EXTRA_PARAM_CRI:\r\n      return labels.criticalRate;\r\n    case EXTRA_PARAM_HIT:\r\n      return labels.hitRate;\r\n    case EXTRA_PARAM_HRG:\r\n      return labels.hpRegenerationRate;\r\n    case EXTRA_PARAM_MEV:\r\n      return labels.magicEvasionRate;\r\n    case EXTRA_PARAM_MRF:\r\n      return labels.magicReflectionRate;\r\n    case EXTRA_PARAM_MRG:\r\n      return labels.mpRegenerationRate;\r\n    case EXTRA_PARAM_TRG:\r\n      return labels.tpRegenerationRate;\r\n  }\r\n  return `?xparams[${paramIndex}]`;\r\n};\r\n\r\nexport const specialParamName = (\r\n  paramIndex: number,\r\n  labels: SpecialParamLabels\r\n): string => {\r\n  switch (paramIndex) {\r\n    case SPECIAL_PARAM_EXR:\r\n      return labels.experienceRate;\r\n    case SPECIAL_PARAM_TGR:\r\n      return labels.targetRate;\r\n    case SPECIAL_PARAM_FDR:\r\n      return labels.floorDamageRate;\r\n    case SPECIAL_PARAM_GRD:\r\n      return labels.guradEffectRate;\r\n    case SPECIAL_PARAM_MCR:\r\n      return labels.mpCostRate;\r\n    case SPECIAL_PARAM_TCR:\r\n      return labels.tpChargeRate;\r\n    case SPECIAL_PARAM_PDR:\r\n      return labels.physicalDamageRate;\r\n    case SPECIAL_PARAM_MDR:\r\n      return labels.magicDamageRate;\r\n    case SPECIAL_PARAM_PHA:\r\n      return labels.pharmacology;\r\n    case SPECIAL_PARAM_REC:\r\n      return labels.recoveryEffectRate;\r\n  }\r\n  return `?sparams[${paramIndex}]`;\r\n};\r\n","import type { Data_NamedItem, GlobalLabel } from \"@RpgTypes/schema/\";\r\nimport {\r\n  FLAG_ID_GUARD,\r\n  FLAG_ID_AUTO_BATTLE,\r\n  FLAG_ID_PRESERVE_TP,\r\n  FLAG_ID_SUBSTITUTE,\r\n} from \"./types/specialFlags\";\r\nimport type {\r\n  CollapsOptionLabels,\r\n  ExtraParamLabels,\r\n  PartyAbilityOptionLabels,\r\n  RegularParamLabels,\r\n  SpecialFlagOptions,\r\n  SpecialParamLabels,\r\n} from \"./types\";\r\nimport {\r\n  COLLAPS_NORMAL,\r\n  COLLAPS_BOSS,\r\n  COLLAPS_INSTANT,\r\n  COLLAPS_NONE,\r\n} from \"./types/collaps\";\r\n\r\nimport {\r\n  PARTY_ABILITY_CANCEL_SURPRISE,\r\n  PARTY_ABILITY_DROP_ITEM_DOUBLE,\r\n  PARTY_ABILITY_ENCOUNTER_HALF,\r\n  PARTY_ABILITY_ENCOUNTER_NONE,\r\n  PARTY_ABILITY_GOLD_DOUBLE,\r\n  PARTY_ABILITY_RAISE_PREEMPTIVE,\r\n} from \"./types/partyAbility\";\r\n\r\nimport {\r\n  EXTRA_PARAM_TRG,\r\n  EXTRA_PARAM_CEV,\r\n  EXTRA_PARAM_CNT,\r\n  EXTRA_PARAM_CRI,\r\n  EXTRA_PARAM_EVA,\r\n  EXTRA_PARAM_HIT,\r\n  EXTRA_PARAM_HRG,\r\n  EXTRA_PARAM_MEV,\r\n  EXTRA_PARAM_MRF,\r\n  EXTRA_PARAM_MRG,\r\n} from \"./types/paramExtra\";\r\nimport {\r\n  SPECIAL_PARAM_EXR,\r\n  SPECIAL_PARAM_FDR,\r\n  SPECIAL_PARAM_GRD,\r\n  SPECIAL_PARAM_MCR,\r\n  SPECIAL_PARAM_MDR,\r\n  SPECIAL_PARAM_PDR,\r\n  SPECIAL_PARAM_PHA,\r\n  SPECIAL_PARAM_REC,\r\n  SPECIAL_PARAM_TCR,\r\n  SPECIAL_PARAM_TGR,\r\n} from \"./types/paramSpecial\";\r\nimport {\r\n  REGULAR_PARAM_ATK,\r\n  REGULAR_PARAM_MAX_HP,\r\n  REGULAR_PARAM_MAX_MP,\r\n  REGULAR_PARAM_DEF,\r\n  REGULAR_PARAM_MATK,\r\n  REGULAR_PARAM_MDEF,\r\n  REGULAR_PARAM_AGI,\r\n  REGULAR_PARAM_LUK,\r\n} from \"./types/paramRegular\";\r\n\r\nexport const foldCollapsOptions = (\r\n  options: CollapsOptionLabels,\r\n  global: Pick<GlobalLabel, \"normal\">\r\n): Data_NamedItem[] => {\r\n  return [\r\n    {\r\n      id: COLLAPS_NORMAL,\r\n      name: global.normal,\r\n    },\r\n    {\r\n      id: COLLAPS_BOSS,\r\n      name: options.bossCollaps,\r\n    },\r\n    {\r\n      id: COLLAPS_INSTANT,\r\n      name: options.instantCollaps,\r\n    },\r\n    {\r\n      id: COLLAPS_NONE,\r\n      name: options.noneCollaps,\r\n    },\r\n  ];\r\n};\r\n\r\nexport const foldPartyAbilityOptions = (\r\n  options: PartyAbilityOptionLabels\r\n): Data_NamedItem[] => {\r\n  return [\r\n    {\r\n      id: PARTY_ABILITY_ENCOUNTER_HALF,\r\n      name: options.encounterHalf,\r\n    },\r\n    {\r\n      id: PARTY_ABILITY_ENCOUNTER_NONE,\r\n      name: options.encounterNone,\r\n    },\r\n    {\r\n      id: PARTY_ABILITY_CANCEL_SURPRISE,\r\n      name: options.cancelSurprise,\r\n    },\r\n    {\r\n      id: PARTY_ABILITY_RAISE_PREEMPTIVE,\r\n      name: options.raisePreemptive,\r\n    },\r\n    {\r\n      id: PARTY_ABILITY_GOLD_DOUBLE,\r\n      name: options.goldDouble,\r\n    },\r\n    {\r\n      id: PARTY_ABILITY_DROP_ITEM_DOUBLE,\r\n      name: options.dropItemDouble,\r\n    },\r\n  ];\r\n};\r\n\r\nexport const foldRegularParam = (\r\n  param: RegularParamLabels\r\n): Data_NamedItem[] => {\r\n  return [\r\n    { id: REGULAR_PARAM_MAX_HP, name: param.maxHp },\r\n    { id: REGULAR_PARAM_MAX_MP, name: param.maxMp },\r\n    { id: REGULAR_PARAM_ATK, name: param.atk },\r\n    { id: REGULAR_PARAM_DEF, name: param.def },\r\n    { id: REGULAR_PARAM_MATK, name: param.matk },\r\n    { id: REGULAR_PARAM_MDEF, name: param.mdef },\r\n    { id: REGULAR_PARAM_AGI, name: param.agi },\r\n    { id: REGULAR_PARAM_LUK, name: param.luk },\r\n  ];\r\n};\r\n\r\nexport const foldExtraParam = (xparam: ExtraParamLabels): Data_NamedItem[] => {\r\n  return [\r\n    {\r\n      id: EXTRA_PARAM_HIT,\r\n      name: xparam.hitRate,\r\n    },\r\n    {\r\n      id: EXTRA_PARAM_EVA,\r\n      name: xparam.evasionRate,\r\n    },\r\n    {\r\n      id: EXTRA_PARAM_CRI,\r\n      name: xparam.criticalRate,\r\n    },\r\n    {\r\n      id: EXTRA_PARAM_CEV,\r\n      name: xparam.criticalEvasionRate,\r\n    },\r\n    {\r\n      id: EXTRA_PARAM_MEV,\r\n      name: xparam.magicEvasionRate,\r\n    },\r\n    {\r\n      id: EXTRA_PARAM_MRF,\r\n      name: xparam.magicReflectionRate,\r\n    },\r\n    {\r\n      id: EXTRA_PARAM_CNT,\r\n      name: xparam.counterAttackRate,\r\n    },\r\n    {\r\n      id: EXTRA_PARAM_HRG,\r\n      name: xparam.hpRegenerationRate,\r\n    },\r\n    {\r\n      id: EXTRA_PARAM_MRG,\r\n      name: xparam.mpRegenerationRate,\r\n    },\r\n    {\r\n      id: EXTRA_PARAM_TRG,\r\n      name: xparam.tpRegenerationRate,\r\n    },\r\n  ];\r\n};\r\n\r\nexport const foldSpecialParams = (\r\n  specialParams: SpecialParamLabels\r\n): Data_NamedItem[] => {\r\n  return [\r\n    {\r\n      id: SPECIAL_PARAM_TGR,\r\n      name: specialParams.targetRate,\r\n    },\r\n    {\r\n      id: SPECIAL_PARAM_GRD,\r\n      name: specialParams.guradEffectRate,\r\n    },\r\n    {\r\n      id: SPECIAL_PARAM_REC,\r\n      name: specialParams.recoveryEffectRate,\r\n    },\r\n    {\r\n      id: SPECIAL_PARAM_PHA,\r\n      name: specialParams.pharmacology,\r\n    },\r\n    {\r\n      id: SPECIAL_PARAM_MCR,\r\n      name: specialParams.mpCostRate,\r\n    },\r\n    {\r\n      id: SPECIAL_PARAM_TCR,\r\n      name: specialParams.tpChargeRate,\r\n    },\r\n    {\r\n      id: SPECIAL_PARAM_PDR,\r\n      name: specialParams.physicalDamageRate,\r\n    },\r\n    {\r\n      id: SPECIAL_PARAM_MDR,\r\n      name: specialParams.magicDamageRate,\r\n    },\r\n    {\r\n      id: SPECIAL_PARAM_FDR,\r\n      name: specialParams.floorDamageRate,\r\n    },\r\n    {\r\n      id: SPECIAL_PARAM_EXR,\r\n      name: specialParams.experienceRate,\r\n    },\r\n  ];\r\n};\r\n\r\nexport const foldSpecialFlag = (\r\n  label: SpecialFlagOptions\r\n): Data_NamedItem[] => {\r\n  return [\r\n    {\r\n      id: FLAG_ID_AUTO_BATTLE,\r\n      name: label.autoBattle,\r\n    },\r\n    {\r\n      id: FLAG_ID_GUARD,\r\n      name: label.guard,\r\n    },\r\n    {\r\n      id: FLAG_ID_SUBSTITUTE,\r\n      name: label.substitute,\r\n    },\r\n    {\r\n      id: FLAG_ID_PRESERVE_TP,\r\n      name: label.preventEscape,\r\n    },\r\n  ];\r\n};\r\n","import type { GlobalLabel, NamedItemSource } from \"@RpgTypes/schema\";\r\nimport type {\r\n  CollapsOptionLabels,\r\n  ExtraParamLabels,\r\n  PartyAbilityOptionLabels,\r\n  RegularParamLabels,\r\n  SpecialFlagOptions,\r\n  SpecialParamLabels,\r\n} from \"./types\";\r\nimport {\r\n  SRC_TRAIT_COLLAPS,\r\n  SRC_PARAMS_EXTRA,\r\n  SRC_PARAMS_REGULAR,\r\n  SRC_PARAMS_SPECIAL,\r\n  SRC_TRAIT_PARTY_ABILITY,\r\n  SRC_TRAIT_SPECIAL_FLAG,\r\n} from \"@RpgTypes/schema\";\r\n\r\nimport {\r\n  foldCollapsOptions,\r\n  foldExtraParam,\r\n  foldPartyAbilityOptions,\r\n  foldRegularParam,\r\n  foldSpecialFlag,\r\n  foldSpecialParams,\r\n} from \"./makeOptions\";\r\nimport type { DomainLabel } from \"@RpgTypes/templates\";\r\nimport { AUTHOR_RMMZ, MODULE_TRAIT } from \"@RpgTypes/namedItemSource\";\r\n\r\nexport const traitDomain = <T>(\r\n  sourceKey: string,\r\n  labels: DomainLabel<T>,\r\n  fn: (options: T) => { name: string; id: number }[]\r\n): NamedItemSource => {\r\n  return {\r\n    items: fn(labels.options),\r\n    label: labels.domainName,\r\n    source: {\r\n      author: AUTHOR_RMMZ,\r\n      module: MODULE_TRAIT,\r\n      kind: sourceKey,\r\n    },\r\n  };\r\n};\r\n\r\nexport const buildCollapsSource = (\r\n  labels: DomainLabel<CollapsOptionLabels>,\r\n  global: Pick<GlobalLabel, \"normal\">\r\n): NamedItemSource => {\r\n  return traitDomain(SRC_TRAIT_COLLAPS, labels, (col) =>\r\n    foldCollapsOptions(col, global)\r\n  );\r\n};\r\n\r\nexport const buildPartyAbilitySource = (\r\n  labels: DomainLabel<PartyAbilityOptionLabels>\r\n): NamedItemSource => {\r\n  return traitDomain(SRC_TRAIT_PARTY_ABILITY, labels, foldPartyAbilityOptions);\r\n};\r\n\r\nexport const buildRegularParamSource = (\r\n  label: DomainLabel<RegularParamLabels>\r\n): NamedItemSource => {\r\n  return traitDomain(SRC_PARAMS_REGULAR, label, foldRegularParam);\r\n};\r\n\r\nexport const buildExtraParamSource = (\r\n  label: DomainLabel<ExtraParamLabels>\r\n): NamedItemSource => {\r\n  return traitDomain(SRC_PARAMS_EXTRA, label, foldExtraParam);\r\n};\r\n\r\nexport const buildSpecialParamSource = (\r\n  label: DomainLabel<SpecialParamLabels>\r\n): NamedItemSource => {\r\n  return traitDomain(SRC_PARAMS_SPECIAL, label, foldSpecialParams);\r\n};\r\n\r\nexport const buildSpecialFlagSource = (\r\n  label: DomainLabel<SpecialFlagOptions>\r\n): NamedItemSource => {\r\n  return traitDomain(SRC_TRAIT_SPECIAL_FLAG, label, foldSpecialFlag);\r\n};\r\n","import type { DomainLabel } from \"@RpgTypes/templates\";\r\nimport type { TraitLabelSet } from \"./labelSet\";\r\nimport type {\r\n  CollapsOptionLabels,\r\n  ExtraParamLabels,\r\n  PartyAbilityOptionLabels,\r\n  RegularParamLabels,\r\n  SpecialFlagOptions,\r\n  SpecialParamLabels,\r\n  RawTraitLabel,\r\n  TraitLabelWithOption,\r\n} from \"./types/\";\r\n\r\nconst FORMAT_NAME = \"{name}\" as const;\r\nconst FORMAT_PARAM_RATE_MUL = \"{name} * {value}%\" as const;\r\nconst FORMAT_PARAM_RATE_PLUS = \"{name} + {value}%\" as const;\r\nconst FORMAT_PARAM_VALUE = \"{value}\" as const;\r\n\r\nexport const LABEL_SET_TRAIT = {\r\n  domainName: \"特徴\",\r\n  options: {\r\n    regularParam: {\r\n      domainName: \"基本能力値\",\r\n      format: FORMAT_PARAM_RATE_MUL,\r\n      options: {\r\n        maxHp: \"最大HP\",\r\n        maxMp: \"最大MP\",\r\n        atk: \"攻撃力\",\r\n        def: \"防御力\",\r\n        matk: \"魔法攻撃力\",\r\n        mdef: \"魔法防御力\",\r\n        agi: \"敏捷性\",\r\n        luk: \"運\",\r\n      },\r\n    } as const satisfies TraitLabelWithOption<RegularParamLabels>,\r\n    extraParam: {\r\n      domainName: \"追加能力値\",\r\n      format: FORMAT_PARAM_RATE_PLUS,\r\n      options: {\r\n        hitRate: \"命中率\",\r\n        evasionRate: \"回避率\",\r\n        criticalRate: \"クリティカル率\",\r\n        criticalEvasionRate: \"クリティカル回避率\",\r\n        magicEvasionRate: \"魔法回避率\",\r\n        magicReflectionRate: \"魔法反射率\",\r\n        counterAttackRate: \"反撃率\",\r\n        hpRegenerationRate: \"HP再生率\",\r\n        mpRegenerationRate: \"MP再生率\",\r\n        tpRegenerationRate: \"TP再生率\",\r\n      },\r\n    } as const satisfies TraitLabelWithOption<ExtraParamLabels>,\r\n    specialParam: {\r\n      domainName: \"特殊能力値\",\r\n      format: FORMAT_PARAM_RATE_MUL,\r\n      options: {\r\n        targetRate: \"狙われ率\",\r\n        guradEffectRate: \"防御効果率\",\r\n        recoveryEffectRate: \"回復効果率\",\r\n        pharmacology: \"薬の知識\",\r\n        mpCostRate: \"MP消費率\",\r\n        tpChargeRate: \"TPチャージ率\",\r\n        physicalDamageRate: \"物理ダメージ率\",\r\n        magicDamageRate: \"魔法ダメージ率\",\r\n        floorDamageRate: \"床ダメージ率\",\r\n        experienceRate: \"経験値率\",\r\n      },\r\n    } as const satisfies TraitLabelWithOption<SpecialParamLabels>,\r\n    specialFlag: {\r\n      domainName: \"特殊フラグ\",\r\n      format: FORMAT_NAME,\r\n      options: {\r\n        autoBattle: \"自動戦闘\",\r\n        guard: \"防御\",\r\n        substitute: \"身代わり\",\r\n        preventEscape: \"逃走防止\",\r\n      },\r\n    } as const satisfies TraitLabelWithOption<SpecialFlagOptions>,\r\n    collaps: {\r\n      domainName: \"消滅エフェクト\",\r\n      format: FORMAT_NAME,\r\n      options: {\r\n        bossCollaps: \"ボス崩壊\",\r\n        instantCollaps: \"即時崩壊\",\r\n        noneCollaps: \"崩壊なし\",\r\n      },\r\n    } as const satisfies TraitLabelWithOption<CollapsOptionLabels>,\r\n    partyAbility: {\r\n      domainName: \"パーティ能力\",\r\n      format: FORMAT_NAME,\r\n      options: {\r\n        cancelSurprise: \"不意打ち無効\",\r\n        dropItemDouble: \"アイテムドロップ2倍\",\r\n        encounterHalf: \"エンカウント半減\",\r\n        encounterNone: \"エンカウントなし\",\r\n        goldDouble: \"ゴールド2倍\",\r\n        raisePreemptive: \"先制攻撃率アップ\",\r\n      },\r\n    } as const satisfies TraitLabelWithOption<PartyAbilityOptionLabels>,\r\n    elementRate: {\r\n      domainName: \"属性有効度\",\r\n      format: FORMAT_PARAM_RATE_MUL,\r\n    } as const satisfies RawTraitLabel,\r\n    debuffRate: {\r\n      domainName: \"弱体有効度\",\r\n      format: FORMAT_PARAM_RATE_MUL,\r\n    } as const satisfies RawTraitLabel,\r\n    stateRate: {\r\n      domainName: \"ステート有効度\",\r\n      format: FORMAT_PARAM_RATE_MUL,\r\n    } as const satisfies RawTraitLabel,\r\n    stateResist: {\r\n      domainName: \"ステート無効\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies RawTraitLabel,\r\n    attackElement: {\r\n      domainName: \"攻撃属性\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies RawTraitLabel,\r\n    attackState: {\r\n      domainName: \"攻撃ステート\",\r\n      format: FORMAT_PARAM_RATE_PLUS,\r\n    } as const satisfies RawTraitLabel,\r\n    attackSpeed: {\r\n      domainName: \"攻撃速度補正\",\r\n      format: FORMAT_PARAM_VALUE,\r\n    } as const satisfies RawTraitLabel,\r\n    attackTimes: {\r\n      domainName: \"攻撃追加回数\",\r\n      format: FORMAT_PARAM_VALUE,\r\n    } as const satisfies RawTraitLabel,\r\n    actionPlus: {\r\n      domainName: \"行動追加\",\r\n      format: FORMAT_PARAM_RATE_MUL,\r\n    } as const satisfies RawTraitLabel,\r\n    attackSkill: {\r\n      domainName: \"攻撃スキル\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies RawTraitLabel,\r\n    equipWeaponType: {\r\n      domainName: \"装備武器タイプ\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies RawTraitLabel,\r\n    equipArmorType: {\r\n      domainName: \"装備防具タイプ\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies RawTraitLabel,\r\n    equipLock: {\r\n      domainName: \"装備固定\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies RawTraitLabel,\r\n    equipSeal: {\r\n      domainName: \"装備封印\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies RawTraitLabel,\r\n    slotType: {\r\n      domainName: \"スロットタイプ\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies RawTraitLabel,\r\n    skillAdd: {\r\n      domainName: \"スキル追加\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies RawTraitLabel,\r\n    skillSeal: {\r\n      domainName: \"スキルタイプ封印\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies RawTraitLabel,\r\n    skillTypeAdd: {\r\n      domainName: \"スキルタイプ追加\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies RawTraitLabel,\r\n    skillTypeSeal: {\r\n      domainName: \"スキルタイプ封印\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies RawTraitLabel,\r\n  },\r\n} as const satisfies DomainLabel<TraitLabelSet>;\r\n","import type { SourceIdentifier } from \"@RpgTypes/schema\";\r\nimport type { TraitLabelResolved } from \"./options\";\r\nimport type { Trait } from \"./types\";\r\n\r\nconst PLACEHOLDER_VALUE = \"{value}\" as const;\r\nconst PLACEHOLDER_NAME = \"{name}\" as const;\r\n\r\nexport class TraitDescriptor implements TraitLabelResolved {\r\n  constructor(\r\n    public readonly code: number,\r\n    public readonly label: string,\r\n    public readonly format: string,\r\n    public readonly dataSource?: Readonly<SourceIdentifier>\r\n  ) {}\r\n  match(trait: Trait): boolean {\r\n    return this.code === trait.code;\r\n  }\r\n  testTraitCode(trait: Trait) {\r\n    if (this.match(trait)) {\r\n      return;\r\n    }\r\n    // throw new Error(\r\n    //   `${this.label} Trait code mismatch.  this.code:${this.code} trait.code:${trait.code}`\r\n    // );\r\n  }\r\n  formatText(\r\n    trait: Trait,\r\n    resolveName: (\r\n      dataSource: Readonly<SourceIdentifier>,\r\n      dataId: number\r\n    ) => string\r\n  ): string {\r\n    this.testTraitCode(trait);\r\n    const text = this.format.replaceAll(\r\n      PLACEHOLDER_VALUE,\r\n      trait.value.toString()\r\n    );\r\n    if (!this.dataSource) {\r\n      return text;\r\n    }\r\n    return text.replaceAll(\r\n      PLACEHOLDER_NAME,\r\n      resolveName(this.dataSource, trait.dataId)\r\n    );\r\n  }\r\n  requiresValue(): boolean {\r\n    return this.format.includes(PLACEHOLDER_VALUE);\r\n  }\r\n  requiresName(): boolean {\r\n    return this.format.includes(PLACEHOLDER_NAME);\r\n  }\r\n\r\n  invalidPlaceHolder(): string[] {\r\n    const allowed = [\"value\", \"name\"];\r\n    const matches: RegExpExecArray[] = [\r\n      ...this.format.matchAll(/\\{([^}]+)\\}/g),\r\n    ];\r\n    return matches.map((m) => m[1]).filter((key) => !allowed.includes(key));\r\n  }\r\n  isFormatValidForDataSource(): boolean {\r\n    if (this.dataSource && !this.requiresName()) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  diagnose(): TraitLabelDiagnostic {\r\n    const soruceError = !this.isFormatValidForDataSource();\r\n    const nameError = this.requiresName() && !this.dataSource;\r\n    const invalidPlaceHolder = this.invalidPlaceHolder();\r\n\r\n    return {\r\n      code: this.code,\r\n      label: this.label,\r\n      format: this.format,\r\n      hasError: soruceError || nameError || invalidPlaceHolder.length > 0,\r\n      missingDataSourceError: soruceError,\r\n      sourceMismatchError: nameError,\r\n      invalidPlaceHolders: invalidPlaceHolder,\r\n    };\r\n  }\r\n}\r\n\r\nexport interface TraitLabelDiagnostic {\r\n  format: string;\r\n  code: number;\r\n  label: string;\r\n  hasError: boolean;\r\n  missingDataSourceError: boolean;\r\n  sourceMismatchError: boolean;\r\n  invalidPlaceHolders: string[];\r\n}\r\n","import type { SourceIdentifier } from \"src/libs\";\r\nimport {\r\n  SRC_ARMOR_TYPES,\r\n  SRC_DATA_SKILL,\r\n  SRC_DATA_STATE,\r\n  SRC_ELEMENTS,\r\n  SRC_PARAMS_EXTRA,\r\n  SRC_PARAMS_REGULAR,\r\n  SRC_PARAMS_SPECIAL,\r\n  SRC_TRAIT_COLLAPS,\r\n  SRC_TRAIT_PARTY_ABILITY,\r\n  SRC_TRAIT_SPECIAL_FLAG,\r\n  SRC_WEAPON_TYPES,\r\n} from \"src/libs\";\r\nimport type { RawTraitLabel, TraitLabelSet } from \"./options\";\r\nimport { LABEL_SET_TRAIT } from \"./options\";\r\nimport {\r\n  TRAIT_ELEMENT_RATE,\r\n  TRAIT_DEBUFF_RATE,\r\n  TRAIT_STATE_RATE,\r\n  TRAIT_STATE_RESIST,\r\n  TRAIT_PARAM,\r\n  TRAIT_XPARAM,\r\n  TRAIT_SPARAM,\r\n  TRAIT_ATTACK_ELEMENT,\r\n  TRAIT_ATTACK_STATE,\r\n  TRAIT_ATTACK_SPEED,\r\n  TRAIT_ATTACK_TIMES,\r\n  TRAIT_ATTACK_SKILL,\r\n  TRAIT_ACTION_PLUS,\r\n  TRAIT_SPECIAL_FLAG,\r\n  TRAIT_COLLAPSE_TYPE,\r\n  TRAIT_PARTY_ABILITY,\r\n  TRAIT_EQUIP_ARMOR_TYPE,\r\n  TRAIT_EQUIP_LOCK,\r\n  TRAIT_EQUIP_SEAL,\r\n  TRAIT_EQUIP_WEAPON_TYPE,\r\n  TRAIT_SKILL_ADD,\r\n  TRAIT_SKILL_SEAL,\r\n  TRAIT_SLOT_TYPE,\r\n  TRAIT_SKILL_TYPE_ADD,\r\n  TRAIT_SKILL_TYPE_SEAL,\r\n} from \"./constants\";\r\nimport {\r\n  AUTHOR_RMMZ,\r\n  MODULE_DATA,\r\n  MODULE_SYSTEM,\r\n  MODULE_TRAIT,\r\n} from \"@RpgTypes/namedItemSource\";\r\nimport { TraitDescriptor } from \"./traitLabelDescriptor\";\r\n\r\nexport const resolveTraitLabels = (\r\n  labels: TraitLabelSet\r\n): TraitDescriptor[] => {\r\n  return [\r\n    defineTraitElementRate(labels.elementRate),\r\n    defineTraitDebuffRate(labels.debuffRate),\r\n    defineTraitStateRate(labels.stateRate),\r\n    defineTraitStateResist(labels.stateResist),\r\n    defineTraitRegularParam(labels.regularParam),\r\n    defineTraitExtraParam(labels.extraParam),\r\n    defineTraitSpecialParam(labels.specialParam),\r\n    defineTraitAttackElement(labels.attackElement),\r\n    defineTraitAttackState(labels.attackState),\r\n    defineTraitAttackSpeed(labels.attackSpeed),\r\n    defineTraitAttackTimes(labels.attackTimes),\r\n    defineTraitAttackSkill(labels.attackSkill),\r\n    defineTraitSkillTypeAdd(labels.skillTypeAdd),\r\n    defineTraitSkillTypeSeal(labels.skillTypeSeal),\r\n    defineTraitSkillAdd(labels.skillAdd),\r\n    defineTraitSkillSeal(labels.skillSeal),\r\n    defineTraitEquipWeaponType(labels.equipWeaponType),\r\n    defineTraitEquipArmorType(labels.equipArmorType),\r\n    defineTraitEquipLock(labels.equipLock),\r\n    defineTraitEquipSeal(labels.equipSeal),\r\n    defineTraitSlotType(labels.slotType),\r\n    defineTraitActionPlus(labels.actionPlus),\r\n    defineTraitSpecialFlag(labels.specialFlag),\r\n    defineTraitCollapseType(labels.collaps),\r\n    defineTraitPartyAbility(labels.partyAbility),\r\n  ];\r\n};\r\n\r\nconst validate = (base: string, override: string | undefined) =>\r\n  typeof override === \"string\" ? override : base;\r\n\r\nconst defineTrait = (\r\n  code: number,\r\n  base: RawTraitLabel,\r\n  override: Partial<RawTraitLabel>,\r\n  dataSource?: SourceIdentifier\r\n): TraitDescriptor => {\r\n  const label = validate(base.domainName, override.domainName);\r\n  const format = validate(base.format, override.format);\r\n  return new TraitDescriptor(code, label, format, dataSource);\r\n};\r\n\r\nconst srcElement = (): SourceIdentifier => {\r\n  return {\r\n    module: MODULE_SYSTEM,\r\n    author: AUTHOR_RMMZ,\r\n    kind: SRC_ELEMENTS,\r\n  };\r\n};\r\n\r\nconst srcData = (key: string): SourceIdentifier => {\r\n  return {\r\n    module: MODULE_DATA,\r\n    author: AUTHOR_RMMZ,\r\n    kind: key,\r\n  };\r\n};\r\n\r\nconst srcTrait = (src: string): SourceIdentifier => ({\r\n  author: AUTHOR_RMMZ,\r\n  module: MODULE_TRAIT,\r\n  kind: src,\r\n});\r\n\r\nconst srcSystem = (src: string): SourceIdentifier => ({\r\n  author: AUTHOR_RMMZ,\r\n  module: MODULE_SYSTEM,\r\n  kind: src,\r\n});\r\n\r\nexport const defineTraitElementRate = (label: Partial<RawTraitLabel>) =>\r\n  defineTrait(\r\n    TRAIT_ELEMENT_RATE,\r\n    LABEL_SET_TRAIT.options.elementRate,\r\n    label,\r\n    srcElement()\r\n  );\r\n\r\nexport const defineTraitDebuffRate = (label: Partial<RawTraitLabel>) =>\r\n  defineTrait(\r\n    TRAIT_DEBUFF_RATE,\r\n    LABEL_SET_TRAIT.options.debuffRate,\r\n    label,\r\n    srcTrait(SRC_PARAMS_REGULAR)\r\n  );\r\n\r\nexport const defineTraitStateRate = (label: Partial<RawTraitLabel>) =>\r\n  defineTrait(\r\n    TRAIT_STATE_RATE,\r\n    LABEL_SET_TRAIT.options.stateRate,\r\n    label,\r\n    srcTrait(SRC_PARAMS_REGULAR)\r\n  );\r\n\r\nexport const defineTraitStateResist = (label: Partial<RawTraitLabel>) =>\r\n  defineTrait(\r\n    TRAIT_STATE_RESIST,\r\n    LABEL_SET_TRAIT.options.stateResist,\r\n    label,\r\n    srcData(SRC_DATA_STATE)\r\n  );\r\n\r\nexport const defineTraitRegularParam = (label: Partial<RawTraitLabel>) =>\r\n  defineTrait(\r\n    TRAIT_PARAM,\r\n    LABEL_SET_TRAIT.options.regularParam,\r\n    label,\r\n    srcTrait(SRC_PARAMS_REGULAR)\r\n  );\r\n\r\nexport const defineTraitExtraParam = (label: Partial<RawTraitLabel>) =>\r\n  defineTrait(\r\n    TRAIT_XPARAM,\r\n    LABEL_SET_TRAIT.options.extraParam,\r\n    label,\r\n    srcTrait(SRC_PARAMS_EXTRA)\r\n  );\r\n\r\nexport const defineTraitSpecialParam = (label: Partial<RawTraitLabel>) =>\r\n  defineTrait(\r\n    TRAIT_SPARAM,\r\n    LABEL_SET_TRAIT.options.specialParam,\r\n    label,\r\n    srcTrait(SRC_PARAMS_SPECIAL)\r\n  );\r\n\r\nexport const defineTraitAttackElement = (label: Partial<RawTraitLabel>) =>\r\n  defineTrait(\r\n    TRAIT_ATTACK_ELEMENT,\r\n    LABEL_SET_TRAIT.options.attackElement,\r\n    label,\r\n    srcElement()\r\n  );\r\n\r\nexport const defineTraitAttackState = (label: Partial<RawTraitLabel>) =>\r\n  defineTrait(\r\n    TRAIT_ATTACK_STATE,\r\n    LABEL_SET_TRAIT.options.attackState,\r\n    label,\r\n    srcTrait(SRC_DATA_STATE)\r\n  );\r\n\r\nexport const defineTraitAttackSpeed = (label: Partial<RawTraitLabel>) =>\r\n  defineTrait(TRAIT_ATTACK_SPEED, LABEL_SET_TRAIT.options.attackSpeed, label);\r\n\r\nexport const defineTraitAttackTimes = (label: Partial<RawTraitLabel>) =>\r\n  defineTrait(TRAIT_ATTACK_TIMES, LABEL_SET_TRAIT.options.attackTimes, label);\r\n\r\nexport const defineTraitAttackSkill = (label: Partial<RawTraitLabel>) =>\r\n  defineTrait(\r\n    TRAIT_ATTACK_SKILL,\r\n    LABEL_SET_TRAIT.options.attackSkill,\r\n    label,\r\n    srcData(SRC_DATA_SKILL)\r\n  );\r\n\r\nexport const defineTraitActionPlus = (label: Partial<RawTraitLabel>) =>\r\n  defineTrait(TRAIT_ACTION_PLUS, LABEL_SET_TRAIT.options.actionPlus, label);\r\n\r\nexport const defineTraitSpecialFlag = (label: Partial<RawTraitLabel>) =>\r\n  defineTrait(\r\n    TRAIT_SPECIAL_FLAG,\r\n    LABEL_SET_TRAIT.options.specialFlag,\r\n    label,\r\n    srcTrait(SRC_TRAIT_SPECIAL_FLAG)\r\n  );\r\n\r\nexport const defineTraitCollapseType = (label: Partial<RawTraitLabel>) =>\r\n  defineTrait(\r\n    TRAIT_COLLAPSE_TYPE,\r\n    LABEL_SET_TRAIT.options.collaps,\r\n    label,\r\n    srcTrait(SRC_TRAIT_COLLAPS)\r\n  );\r\n\r\nexport const defineTraitPartyAbility = (label: Partial<RawTraitLabel>) =>\r\n  defineTrait(\r\n    TRAIT_PARTY_ABILITY,\r\n    LABEL_SET_TRAIT.options.partyAbility,\r\n    label,\r\n    srcTrait(SRC_TRAIT_PARTY_ABILITY)\r\n  );\r\n\r\nexport const defineTraitEquipWeaponType = (label: Partial<RawTraitLabel>) =>\r\n  defineTrait(\r\n    TRAIT_EQUIP_WEAPON_TYPE,\r\n    LABEL_SET_TRAIT.options.equipWeaponType,\r\n    label,\r\n    srcSystem(SRC_WEAPON_TYPES)\r\n  );\r\n\r\nexport const defineTraitEquipArmorType = (label: Partial<RawTraitLabel>) =>\r\n  defineTrait(\r\n    TRAIT_EQUIP_ARMOR_TYPE,\r\n    LABEL_SET_TRAIT.options.equipArmorType,\r\n    label,\r\n    srcSystem(SRC_ARMOR_TYPES)\r\n  );\r\n\r\nexport const defineTraitEquipLock = (label: Partial<RawTraitLabel>) =>\r\n  defineTrait(TRAIT_EQUIP_LOCK, LABEL_SET_TRAIT.options.equipLock, label);\r\n\r\nexport const defineTraitEquipSeal = (label: Partial<RawTraitLabel>) =>\r\n  defineTrait(TRAIT_EQUIP_SEAL, LABEL_SET_TRAIT.options.equipSeal, label);\r\n\r\nexport const defineTraitSkillAdd = (label: Partial<RawTraitLabel>) =>\r\n  defineTrait(TRAIT_SKILL_ADD, LABEL_SET_TRAIT.options.skillAdd, label);\r\n\r\nexport const defineTraitSkillSeal = (label: Partial<RawTraitLabel>) =>\r\n  defineTrait(TRAIT_SKILL_SEAL, LABEL_SET_TRAIT.options.skillSeal, label);\r\n\r\nexport const defineTraitSlotType = (label: Partial<RawTraitLabel>) =>\r\n  defineTrait(TRAIT_SLOT_TYPE, LABEL_SET_TRAIT.options.slotType, label);\r\n\r\nexport const defineTraitSkillTypeAdd = (label: Partial<RawTraitLabel>) =>\r\n  defineTrait(\r\n    TRAIT_SKILL_TYPE_ADD,\r\n    LABEL_SET_TRAIT.options.skillTypeAdd,\r\n    label\r\n  );\r\n\r\nexport const defineTraitSkillTypeSeal = (label: Partial<RawTraitLabel>) =>\r\n  defineTrait(\r\n    TRAIT_SKILL_TYPE_SEAL,\r\n    LABEL_SET_TRAIT.options.skillTypeSeal,\r\n    label\r\n  );\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { Trait } from \"./trait\";\r\n\r\nexport const TYPENAME_TRAIT = \"Trait\" as const;\r\n\r\nexport const SCHEMA_TRAIT = {\r\n  type: \"object\",\r\n  required: [\"code\", \"dataId\", \"value\"],\r\n  properties: {\r\n    code: { type: \"integer\" },\r\n    dataId: { type: \"integer\" },\r\n    value: { type: \"integer\" },\r\n  },\r\n} as const satisfies JSONSchemaType<Trait>;\r\n","import type { Data_Actor } from \"./actor\";\r\n\r\nexport const makeActor = (actor: Partial<Data_Actor> = {}): Data_Actor => ({\r\n  name: actor.name ?? \"\",\r\n  id: actor.id ?? 0,\r\n  battlerName: actor.battlerName ?? \"\",\r\n  characterName: actor.characterName ?? \"\",\r\n  characterIndex: actor.characterIndex ?? 0,\r\n  faceName: actor.faceName ?? \"\",\r\n  faceIndex: actor.faceIndex ?? 0,\r\n  traits: [],\r\n  note: actor.note ?? \"\",\r\n  classId: actor.classId ?? 0,\r\n  nickname: actor.nickname ?? \"\",\r\n  profile: actor.profile ?? \"\",\r\n  equips: [],\r\n  initialLevel: actor.initialLevel ?? 0,\r\n  maxLevel: actor.maxLevel ?? 0,\r\n});\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { Data_Actor } from \"./actor\";\r\nimport Ajv from \"ajv\";\r\n\r\nexport const SCHEMA_DATA_ACTOR = {\r\n  type: \"object\",\r\n  required: [\r\n    \"name\",\r\n    \"id\",\r\n    \"nickname\",\r\n    \"battlerName\",\r\n    \"characterName\",\r\n    \"characterIndex\",\r\n    \"faceName\",\r\n    \"faceIndex\",\r\n    \"classId\",\r\n    \"initialLevel\",\r\n    \"maxLevel\",\r\n  ],\r\n  properties: {\r\n    name: { type: \"string\" },\r\n    battlerName: { type: \"string\" },\r\n    characterName: { type: \"string\" },\r\n    characterIndex: { type: \"integer\" },\r\n    faceName: { type: \"string\" },\r\n    faceIndex: { type: \"integer\", minimum: 0, maximum: 7 },\r\n    id: { type: \"integer\", minimum: 0 },\r\n    nickname: { type: \"string\" },\r\n\r\n    profile: { type: \"string\" },\r\n    initialLevel: { type: \"integer\", minimum: 0 },\r\n    maxLevel: { type: \"integer\" },\r\n    classId: { type: \"integer\", minimum: 0 },\r\n    equips: { type: \"array\", items: { type: \"integer\" } },\r\n    note: { type: \"string\" },\r\n    traits: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        properties: {\r\n          code: { type: \"integer\" },\r\n          dataId: { type: \"integer\" },\r\n          value: { type: \"integer\" },\r\n        },\r\n        required: [\"code\", \"dataId\", \"value\"],\r\n      },\r\n    },\r\n  },\r\n} as const satisfies JSONSchemaType<Data_Actor>;\r\n\r\nexport const normalizeDataActor = (data: Partial<Data_Actor>): Data_Actor => {\r\n  return {\r\n    name: data.name ?? \"\",\r\n    id: data.id ?? 0,\r\n    battlerName: data.battlerName ?? \"\",\r\n    characterName: data.characterName ?? \"\",\r\n    characterIndex: data.characterIndex ?? 0,\r\n    faceName: data.faceName ?? \"\",\r\n    faceIndex: data.faceIndex ?? 0,\r\n    traits: [],\r\n    note: data.note ?? \"\",\r\n    classId: data.classId ?? 0,\r\n    nickname: data.nickname ?? \"\",\r\n    profile: data.profile ?? \"\",\r\n    equips: [],\r\n    initialLevel: data.initialLevel ?? 0,\r\n    maxLevel: data.maxLevel ?? 0,\r\n  };\r\n};\r\n","import type { Data_Armor } from \"./armor\";\r\nexport const makeArmor = (armor: Partial<Data_Armor> = {}): Data_Armor => ({\r\n  id: armor.id ?? 0,\r\n  name: armor.name ?? \"\",\r\n  iconIndex: armor.iconIndex ?? 0,\r\n  description: armor.description ?? \"\",\r\n  traits: armor.traits ?? [],\r\n  note: armor.note ?? \"\",\r\n  params: armor.params ?? [\r\n    0, // maxhp\r\n    0, // maxmp\r\n    0, // atk\r\n    0, // def\r\n    0, // mat\r\n    0, // mdf\r\n    0, // agi\r\n    0, // luk\r\n  ],\r\n  etypeId: armor.etypeId ?? 0,\r\n  price: armor.price ?? 0,\r\n});\r\n","import type { ParamArray } from \"../members\";\r\nimport type { Trait } from \"../trait\";\r\nimport type { Data_Armor } from \"./armor\";\r\nimport type { JSONSchemaType } from \"ajv\";\r\n\r\nexport const SCHEMA_DATA_ARMMOR = {\r\n  type: \"object\",\r\n  required: [\r\n    \"name\",\r\n    \"id\",\r\n    \"description\",\r\n    \"iconIndex\",\r\n    \"price\",\r\n    \"params\",\r\n    \"traits\",\r\n    \"note\",\r\n    \"etypeId\",\r\n  ],\r\n\r\n  properties: {\r\n    name: { type: \"string\" },\r\n    id: { type: \"integer\", minimum: 0 },\r\n    description: { type: \"string\" },\r\n    iconIndex: { type: \"integer\", minimum: 0 },\r\n    price: { type: \"integer\", minimum: 0 },\r\n    note: { type: \"string\" },\r\n    etypeId: { type: \"integer\", minimum: 0 },\r\n\r\n    params: {\r\n      type: \"array\",\r\n      items: [\r\n        { type: \"integer\" }, // mhp\r\n        { type: \"integer\" }, // mmp\r\n        { type: \"integer\" }, // atk\r\n        { type: \"integer\" }, // def\r\n        { type: \"integer\" }, // mat\r\n        { type: \"integer\" }, // mdf\r\n        { type: \"integer\" }, // agi\r\n        { type: \"integer\" }, // luk\r\n      ],\r\n      minItems: 8,\r\n      maxItems: 8,\r\n    } satisfies JSONSchemaType<ParamArray>,\r\n\r\n    traits: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        properties: {\r\n          code: { type: \"integer\" },\r\n          dataId: { type: \"integer\" },\r\n          value: { type: \"integer\" },\r\n        },\r\n        required: [\"code\", \"dataId\", \"value\"],\r\n      },\r\n    } satisfies JSONSchemaType<Trait[]>,\r\n  },\r\n} as const satisfies JSONSchemaType<Data_Armor>;\r\n","import type { Data_Class } from \"./types\";\r\nexport const makeClass = (data: Partial<Data_Class> = {}): Data_Class => ({\r\n  name: data.name ?? \"\",\r\n  id: data.id ?? 0,\r\n  traits: [],\r\n  note: data.note ?? \"\",\r\n  params: [\r\n    0, // maxhp\r\n    0, // maxmp\r\n    0, // atk\r\n    0, // def\r\n    0, // mat\r\n    0, // mdf\r\n    0, // agi\r\n    0, // luk\r\n  ],\r\n  learnings: data.learnings ?? [],\r\n  expParams: data.expParams ?? [],\r\n});\r\n","import type { Data_Class } from \"./types\";\r\nimport type { JSONSchemaType } from \"ajv\";\r\n\r\nexport const SCHEMA_DATA_CLASS = {\r\n  type: \"object\",\r\n  required: [\r\n    \"name\",\r\n    \"id\",\r\n    \"note\",\r\n    \"expParams\",\r\n    \"params\",\r\n    \"learnings\",\r\n    \"traits\",\r\n  ],\r\n\r\n  properties: {\r\n    name: { type: \"string\" },\r\n    id: { type: \"integer\", minimum: 0 },\r\n    note: { type: \"string\" },\r\n\r\n    expParams: {\r\n      type: \"array\",\r\n      items: { type: \"integer\" },\r\n    },\r\n    params: {\r\n      type: \"array\",\r\n      items: [\r\n        { type: \"integer\" }, // mhp\r\n        { type: \"integer\" }, // mmp\r\n        { type: \"integer\" }, // atk\r\n        { type: \"integer\" }, // def\r\n        { type: \"integer\" }, // mat\r\n        { type: \"integer\" }, // mdf\r\n        { type: \"integer\" }, // agi\r\n        { type: \"integer\" }, // luk\r\n      ],\r\n      minItems: 8,\r\n      maxItems: 8,\r\n    } satisfies JSONSchemaType<Data_Class[\"params\"]>,\r\n    learnings: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        properties: {\r\n          level: { type: \"integer\" },\r\n          skillId: { type: \"integer\" },\r\n          note: { type: \"string\" },\r\n        },\r\n        required: [\"level\", \"skillId\"],\r\n        additionalProperties: false,\r\n      },\r\n    } satisfies JSONSchemaType<Data_Class[\"learnings\"]>,\r\n    traits: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        properties: {\r\n          code: { type: \"integer\" },\r\n          dataId: { type: \"integer\" },\r\n          value: { type: \"integer\" },\r\n        },\r\n        required: [\"code\", \"dataId\", \"value\"],\r\n        additionalProperties: false,\r\n      },\r\n    } satisfies JSONSchemaType<Data_Class[\"traits\"]>,\r\n  },\r\n\r\n  additionalProperties: false,\r\n} satisfies JSONSchemaType<Data_Class>;\r\n","import type { Data_State } from \"./state\";\r\nexport const makeState = (data: Partial<Data_State> = {}): Data_State => ({\r\n  name: data.name ?? \"\",\r\n  id: data.id ?? 0,\r\n  iconIndex: data.iconIndex ?? 0,\r\n  message1: data.message1 ?? \"\",\r\n  message2: data.message2 ?? \"\",\r\n  message3: data.message3 ?? \"\",\r\n  message4: data.message4 ?? \"\",\r\n  traits: [],\r\n  note: data.note ?? \"\",\r\n\r\n  restriction: data.restriction ?? 0,\r\n  priority: data.priority ?? 0,\r\n  motion: data.motion ?? 0,\r\n  overlay: data.overlay ?? 0,\r\n  removeAtBattleEnd: data.removeAtBattleEnd ?? false,\r\n  removeByRestriction: data.removeByRestriction ?? false,\r\n  autoRemovalTiming: data.autoRemovalTiming ?? 0,\r\n  minTurns: data.minTurns ?? 0,\r\n  maxTurns: data.maxTurns ?? 0,\r\n  removeByDamage: data.removeByDamage ?? false,\r\n  chanceByDamage: data.chanceByDamage ?? 0,\r\n  removeByWalking: data.removeByWalking ?? false,\r\n  stepsToRemove: data.stepsToRemove ?? 0,\r\n});\r\n","import type { Data_State } from \"./state\";\r\nimport type { JSONSchemaType } from \"ajv\";\r\n\r\nexport const SCHEMA_DATA_STATE = {\r\n  type: \"object\",\r\n  required: [\r\n    \"name\",\r\n    \"id\",\r\n    \"iconIndex\",\r\n    \"message1\",\r\n    \"message2\",\r\n    \"message3\",\r\n    \"message4\",\r\n    \"restriction\",\r\n    \"priority\",\r\n    \"motion\",\r\n    \"overlay\",\r\n    \"removeAtBattleEnd\",\r\n    \"removeByDamage\",\r\n    \"removeByWalking\",\r\n    \"removeByRestriction\",\r\n    \"autoRemovalTiming\",\r\n    \"minTurns\",\r\n    \"maxTurns\",\r\n    \"chanceByDamage\",\r\n    \"stepsToRemove\",\r\n    \"note\",\r\n  ],\r\n\r\n  properties: {\r\n    name: { type: \"string\" },\r\n    id: { type: \"integer\", minimum: 0 },\r\n    iconIndex: { type: \"integer\", minimum: 0 },\r\n\r\n    message1: { type: \"string\" },\r\n    message2: { type: \"string\" },\r\n    message3: { type: \"string\" },\r\n    message4: { type: \"string\" },\r\n\r\n    restriction: { type: \"integer\" },\r\n    priority: { type: \"integer\" },\r\n    motion: { type: \"integer\" },\r\n    overlay: { type: \"integer\" },\r\n\r\n    removeAtBattleEnd: { type: \"boolean\" },\r\n    removeByDamage: { type: \"boolean\" },\r\n\r\n    removeByWalking: { type: \"boolean\" },\r\n    removeByRestriction: { type: \"boolean\" },\r\n    autoRemovalTiming: { type: \"integer\" },\r\n\r\n    minTurns: { type: \"integer\" },\r\n    maxTurns: { type: \"integer\" },\r\n\r\n    chanceByDamage: { type: \"integer\" },\r\n    stepsToRemove: { type: \"integer\" },\r\n    note: { type: \"string\" },\r\n\r\n    traits: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        properties: {\r\n          code: { type: \"integer\" },\r\n          dataId: { type: \"integer\" },\r\n          value: { type: \"integer\" },\r\n        },\r\n        required: [\"code\", \"dataId\", \"value\"],\r\n      },\r\n    } satisfies JSONSchemaType<Data_State[\"traits\"]>,\r\n  },\r\n} as const satisfies JSONSchemaType<Data_State>;\r\n","import type { DomainLabel } from \"@RpgTypes/templates\";\r\nimport type { WeaponLabels } from \"./weaponLabels\";\r\n\r\nexport const LABELS_DATA_WEAPON = {\r\n  domainName: \"武器\",\r\n  options: {\r\n    weaponTypeId: \"武器タイプID\",\r\n  },\r\n} as const satisfies DomainLabel<WeaponLabels>;\r\n","import { makeDamage } from \"@RpgTypes/schema\";\r\nimport type { Data_Weapon } from \"./weapon\";\r\n\r\nexport const makeWeapon = (weapon: Partial<Data_Weapon> = {}): Data_Weapon => ({\r\n  id: weapon.id ?? 0,\r\n  name: weapon.name ?? \"\",\r\n  iconIndex: weapon.iconIndex ?? 0,\r\n  description: weapon.description ?? \"\",\r\n  traits: weapon.traits ?? [],\r\n  note: weapon.note ?? \"\",\r\n  params: weapon.params ?? [\r\n    0, // maxhp\r\n    0, // maxmp\r\n    0, // atk\r\n    0, // def\r\n    0, // mat\r\n    0, // mdf\r\n    0, // agi\r\n    0, // luk\r\n  ],\r\n  etypeId: weapon.etypeId ?? 0,\r\n  price: weapon.price ?? 0,\r\n  damage: makeDamage(weapon.damage ?? {}),\r\n  wtypeId: weapon.wtypeId ?? 0,\r\n});\r\n","import type { Damage, ParamArray, Trait } from \"src/libs\";\r\nimport type { Data_Weapon } from \"./weapon\";\r\nimport type { JSONSchemaType } from \"ajv\";\r\n\r\nexport const SCHEMA_DATA_WEAPON = {\r\n  type: \"object\",\r\n  required: [\r\n    \"name\",\r\n    \"id\",\r\n    \"description\",\r\n    \"iconIndex\",\r\n    \"price\",\r\n    \"params\",\r\n    \"traits\",\r\n    \"note\",\r\n    \"etypeId\",\r\n  ],\r\n\r\n  properties: {\r\n    name: { type: \"string\" },\r\n    id: { type: \"integer\", minimum: 0 },\r\n    description: { type: \"string\" },\r\n    iconIndex: { type: \"integer\", minimum: 0 },\r\n    price: { type: \"integer\", minimum: 0 },\r\n    note: { type: \"string\" },\r\n    etypeId: { type: \"integer\", minimum: 0 },\r\n    wtypeId: { type: \"integer\", minimum: 0 },\r\n    params: {\r\n      type: \"array\",\r\n      items: [\r\n        { type: \"integer\" }, // mhp\r\n        { type: \"integer\" }, // mmp\r\n        { type: \"integer\" }, // atk\r\n        { type: \"integer\" }, // def\r\n        { type: \"integer\" }, // mat\r\n        { type: \"integer\" }, // mdf\r\n        { type: \"integer\" }, // agi\r\n        { type: \"integer\" }, // luk\r\n      ],\r\n      minItems: 8,\r\n      maxItems: 8,\r\n    } satisfies JSONSchemaType<ParamArray>,\r\n    damage: {\r\n      type: \"object\",\r\n      properties: {\r\n        type: { type: \"integer\", minimum: 0 },\r\n        elementId: { type: \"integer\", minimum: 0 },\r\n        formula: { type: \"string\" },\r\n        variance: { type: \"integer\", minimum: 0, maximum: 100 },\r\n        critical: { type: \"boolean\" },\r\n      },\r\n      required: [\"type\", \"elementId\", \"formula\", \"variance\", \"critical\"],\r\n    } satisfies JSONSchemaType<Damage>,\r\n    traits: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        properties: {\r\n          code: { type: \"integer\" },\r\n          dataId: { type: \"integer\" },\r\n          value: { type: \"integer\" },\r\n        },\r\n        required: [\"code\", \"dataId\", \"value\"],\r\n      },\r\n    } satisfies JSONSchemaType<Trait[]>,\r\n  },\r\n} as const satisfies JSONSchemaType<Data_Weapon>;\r\n","import type { Data_Enemy } from \"./enemy\";\r\nimport type { DropItem, Enemy_Action } from \"./enemyMembers\";\r\n\r\nexport const makeDropItem = (dropItem: Partial<DropItem> = {}): DropItem => ({\r\n  dataId: dropItem.dataId ?? 0,\r\n  denominator: dropItem.denominator ?? 0,\r\n  kind: dropItem.kind ?? 0,\r\n});\r\n\r\nexport const makeEnemyAction = (\r\n  action: Partial<Enemy_Action> = {}\r\n): Enemy_Action => ({\r\n  conditionParam1: action.conditionParam1 ?? 0,\r\n  conditionParam2: action.conditionParam2 ?? 0,\r\n  conditionType: action.conditionType ?? 0,\r\n  rating: action.rating ?? 0,\r\n\r\n  skillId: action.skillId ?? 0,\r\n});\r\n\r\nexport const makeEnemy = (data: Partial<Data_Enemy> = {}): Data_Enemy => ({\r\n  name: data.name ?? \"\",\r\n  id: data.id ?? 0,\r\n  battlerName: data.battlerName ?? \"\",\r\n  battlerHue: data.battlerHue ?? 0,\r\n  dropItems: data.dropItems?.map(() => makeDropItem()) ?? [],\r\n  exp: data.exp ?? 0,\r\n  gold: data.gold ?? 0,\r\n  traits: [],\r\n  note: data.note ?? \"\",\r\n  params: [\r\n    0, // maxhp\r\n    0, // maxmp\r\n    0, // atk\r\n    0, // def\r\n    0, // mat\r\n    0, // mdf\r\n    0, // agi\r\n    0, // luk\r\n  ],\r\n  actions: [],\r\n});\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { Data_Enemy } from \"./enemy\";\r\nimport type { DropItem, Enemy_Action } from \"./enemyMembers\";\r\nimport type { ParamArray, Trait } from \"src/libs\";\r\n\r\nexport const SCHEMA_DATA_ENEMY = {\r\n  type: \"object\",\r\n  required: [\r\n    \"name\",\r\n    \"id\",\r\n    \"battlerName\",\r\n    \"battlerHue\",\r\n    \"exp\",\r\n    \"gold\",\r\n    \"note\",\r\n    \"params\",\r\n    \"dropItems\",\r\n    \"traits\",\r\n    \"actions\",\r\n  ],\r\n\r\n  properties: {\r\n    name: { type: \"string\" },\r\n    id: { type: \"integer\", minimum: 0 },\r\n    battlerHue: { type: \"integer\", minimum: 0 },\r\n    battlerName: { type: \"string\" },\r\n    exp: { type: \"integer\", minimum: 0 },\r\n    gold: { type: \"integer\", minimum: 0 },\r\n    note: { type: \"string\" },\r\n\r\n    params: {\r\n      type: \"array\",\r\n      items: [\r\n        { type: \"integer\" }, // mhp\r\n        { type: \"integer\" }, // mmp\r\n        { type: \"integer\" }, // atk\r\n        { type: \"integer\" }, // def\r\n        { type: \"integer\" }, // mat\r\n        { type: \"integer\" }, // mdf\r\n        { type: \"integer\" }, // agi\r\n        { type: \"integer\" }, // luk\r\n      ],\r\n      minItems: 8,\r\n      maxItems: 8,\r\n    } as const satisfies JSONSchemaType<ParamArray>,\r\n    actions: {\r\n      type: \"array\",\r\n\r\n      items: {\r\n        type: \"object\",\r\n        required: [\r\n          \"conditionParam1\",\r\n          \"conditionParam2\",\r\n          \"conditionType\",\r\n          \"skillId\",\r\n          \"rating\",\r\n        ],\r\n        properties: {\r\n          conditionParam1: { type: \"integer\" },\r\n          conditionParam2: { type: \"integer\" },\r\n          conditionType: { type: \"integer\" },\r\n          skillId: { type: \"integer\" },\r\n          rating: { type: \"integer\" },\r\n        },\r\n      },\r\n    } satisfies JSONSchemaType<Enemy_Action[]>,\r\n\r\n    traits: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        properties: {\r\n          code: { type: \"integer\" },\r\n          dataId: { type: \"integer\" },\r\n          value: { type: \"integer\" },\r\n        },\r\n        required: [\"code\", \"dataId\", \"value\"],\r\n      },\r\n    } satisfies JSONSchemaType<Trait[]>,\r\n\r\n    dropItems: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        properties: {\r\n          kind: { type: \"integer\" },\r\n          dataId: { type: \"integer\" },\r\n          denominator: { type: \"integer\", minimum: 0 },\r\n          rate: { type: \"number\" },\r\n        },\r\n        required: [\"kind\", \"dataId\", \"denominator\"],\r\n      },\r\n    } satisfies JSONSchemaType<DropItem[]>,\r\n  },\r\n} as const satisfies JSONSchemaType<Data_Enemy>;\r\n","import type { Data_Item, Data_Skill } from \"@RpgTypes/schema\";\r\nimport { makeDamage } from \"@RpgTypes/schema\";\r\n\r\nexport const makeItem = (item: Partial<Data_Item> = {}): Data_Item => ({\r\n  animationId: item.animationId ?? 0,\r\n  id: item.id ?? 0,\r\n  name: item.name ?? \"\",\r\n  iconIndex: item.iconIndex ?? 0,\r\n  description: item.description ?? \"\",\r\n\r\n  note: item.note ?? \"\",\r\n  consumable: item.consumable ?? false,\r\n  scope: item.scope ?? 0,\r\n  occasion: item.occasion ?? 0,\r\n  speed: item.speed ?? 0,\r\n  successRate: item.successRate ?? 0,\r\n  repeats: item.repeats ?? 0,\r\n  tpGain: item.tpGain ?? 0,\r\n  hitType: item.hitType ?? 0,\r\n  damage: makeDamage(item.damage ?? {}),\r\n  effects: [],\r\n  price: 0,\r\n});\r\n\r\nexport const makeSkill = (skill: Partial<Data_Skill> = {}): Data_Skill => ({\r\n  stypeId: skill.stypeId ?? 0,\r\n  requiredWtypeId1: skill.requiredWtypeId1 ?? 0,\r\n  requiredWtypeId2: skill.requiredWtypeId2 ?? 0,\r\n  animationId: skill.animationId ?? 0,\r\n  damage: makeDamage(skill.damage ?? {}),\r\n  description: skill.description ?? \"\",\r\n  effects: [],\r\n  hitType: skill.hitType ?? 0,\r\n  iconIndex: skill.iconIndex ?? 0,\r\n  id: skill.id ?? 0,\r\n  message1: skill.message1 ?? \"\",\r\n  message2: skill.message2 ?? \"\",\r\n  messageType: skill.messageType ?? 0,\r\n  name: skill.name ?? \"\",\r\n  note: skill.note ?? \"\",\r\n  mpCost: skill.mpCost ?? 0,\r\n  occasion: skill.occasion ?? 0,\r\n  repeats: skill.repeats ?? 0,\r\n  scope: skill.scope ?? 0,\r\n  speed: skill.speed ?? 0,\r\n  successRate: skill.successRate ?? 0,\r\n  tpCost: skill.tpCost ?? 0,\r\n  tpGain: skill.tpGain ?? 0,\r\n});\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { Data_Item, Data_Skill } from \"./types\";\r\n\r\nexport const SCHEMA_DATA_SKILL = {\r\n  type: \"object\",\r\n  required: [\r\n    \"name\",\r\n    \"id\",\r\n    \"description\",\r\n    \"iconIndex\",\r\n    \"message1\",\r\n    \"message2\",\r\n    \"messageType\",\r\n    \"mpCost\",\r\n    \"requiredWtypeId1\",\r\n    \"requiredWtypeId2\",\r\n    \"stypeId\",\r\n    \"tpCost\",\r\n    \"animationId\",\r\n    \"hitType\",\r\n    \"occasion\",\r\n    \"repeats\",\r\n    \"scope\",\r\n    \"speed\",\r\n    \"successRate\",\r\n    \"tpGain\",\r\n    \"note\",\r\n    \"effects\",\r\n  ],\r\n\r\n  properties: {\r\n    name: { type: \"string\" },\r\n    id: { type: \"integer\", minimum: 0 },\r\n    description: { type: \"string\" },\r\n    iconIndex: { type: \"integer\", minimum: 0 },\r\n    message1: { type: \"string\" },\r\n    message2: { type: \"string\" },\r\n\r\n    messageType: { type: \"integer\" },\r\n    mpCost: { type: \"integer\" },\r\n    requiredWtypeId1: { type: \"integer\" },\r\n    requiredWtypeId2: { type: \"integer\" },\r\n    stypeId: { type: \"integer\" },\r\n    tpCost: { type: \"integer\" },\r\n\r\n    animationId: { type: \"integer\", minimum: 0 },\r\n    hitType: { type: \"integer\" },\r\n    occasion: { type: \"integer\" },\r\n    repeats: { type: \"integer\" },\r\n    scope: { type: \"integer\" },\r\n    speed: { type: \"integer\" },\r\n    successRate: { type: \"integer\" },\r\n    tpGain: { type: \"integer\" },\r\n\r\n    note: { type: \"string\" },\r\n\r\n    effects: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        properties: {\r\n          code: { type: \"integer\" },\r\n          dataId: { type: \"integer\" },\r\n          value1: { type: \"integer\" },\r\n          value2: { type: \"integer\" },\r\n        },\r\n        required: [\"code\", \"dataId\", \"value1\", \"value2\"],\r\n        additionalProperties: false,\r\n      },\r\n    } satisfies JSONSchemaType<Data_Item[\"effects\"]>,\r\n    damage: {\r\n      type: \"object\",\r\n      properties: {\r\n        type: { type: \"integer\" },\r\n        elementId: { type: \"integer\" },\r\n        formula: { type: \"string\" },\r\n        variance: { type: \"integer\" },\r\n        critical: { type: \"boolean\" },\r\n      },\r\n      required: [\"type\", \"elementId\", \"formula\", \"variance\", \"critical\"],\r\n      additionalProperties: false,\r\n    } satisfies JSONSchemaType<Data_Skill[\"damage\"]>,\r\n  },\r\n\r\n  additionalProperties: false,\r\n} as const satisfies JSONSchemaType<Data_Skill>;\r\n\r\nexport const SCHEMA_DATA_ITEM = {\r\n  type: \"object\",\r\n  required: [\r\n    \"name\",\r\n    \"id\",\r\n    \"description\",\r\n    \"iconIndex\",\r\n    \"note\",\r\n    \"animationId\",\r\n    \"hitType\",\r\n    \"occasion\",\r\n    \"repeats\",\r\n    \"scope\",\r\n    \"speed\",\r\n    \"successRate\",\r\n    \"tpGain\",\r\n    \"consumable\",\r\n    \"price\",\r\n    \"effects\",\r\n  ],\r\n\r\n  properties: {\r\n    name: { type: \"string\" },\r\n    id: { type: \"integer\", minimum: 0 },\r\n    description: { type: \"string\" },\r\n    iconIndex: { type: \"integer\", minimum: 0 },\r\n\r\n    note: { type: \"string\" },\r\n    animationId: { type: \"integer\", minimum: 0 },\r\n    hitType: { type: \"integer\" },\r\n    occasion: { type: \"integer\" },\r\n    repeats: { type: \"integer\" },\r\n    scope: { type: \"integer\" },\r\n    speed: { type: \"integer\" },\r\n    successRate: { type: \"integer\" },\r\n    tpGain: { type: \"integer\" },\r\n    consumable: { type: \"boolean\" },\r\n    price: { type: \"integer\", minimum: 0 },\r\n\r\n    effects: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        properties: {\r\n          code: { type: \"integer\" },\r\n          dataId: { type: \"integer\" },\r\n          value1: { type: \"integer\" },\r\n          value2: { type: \"integer\" },\r\n        },\r\n        required: [\"code\", \"dataId\", \"value1\", \"value2\"],\r\n        additionalProperties: false,\r\n      },\r\n    } satisfies JSONSchemaType<Data_Item[\"effects\"]>,\r\n    damage: {\r\n      type: \"object\",\r\n      properties: {\r\n        type: { type: \"integer\" },\r\n        elementId: { type: \"integer\" },\r\n        formula: { type: \"string\" },\r\n        variance: { type: \"integer\" },\r\n        critical: { type: \"boolean\" },\r\n      },\r\n      required: [\"type\", \"elementId\", \"formula\", \"variance\", \"critical\"],\r\n      additionalProperties: false,\r\n    } satisfies JSONSchemaType<Data_Skill[\"damage\"]>,\r\n  },\r\n} as const satisfies JSONSchemaType<Data_Item>;\r\n","export const HITTYPE_CERTAIN = 0 as const;\r\nexport const HITTYPE_PHYSICAL = 1 as const;\r\nexport const HITTYPE_MAGICAL = 2 as const;\r\n","import type { DomainLabel } from \"@RpgTypes/templates\";\r\nimport type { EffectLabelDefinition, ItemEffectLabelSet } from \"./types\";\r\n\r\nconst FORMAT_GROW = \"{name} + {value1}\" as const;\r\nconst FORMAT_STATE = \"{name} {value1}%\" as const;\r\nconst FORMAT_RECOVER = \"{value1}% + {value2}\" as const;\r\nconst FORMAT_ADD_BUFF = \"{name} {value1}ターン\" as const;\r\nconst FORMAT_NAME = \"{name}\" as const;\r\n\r\nexport const LABEL_SET_ITEM_EFFECT = {\r\n  domainName: \"使用効果\",\r\n  options: {\r\n    addBuff: {\r\n      desc: \"バフを付与する\",\r\n      domainName: \"バフ付与\",\r\n      format: FORMAT_ADD_BUFF,\r\n    } as const satisfies EffectLabelDefinition,\r\n    addDebuff: {\r\n      desc: \"デバフを付与する\",\r\n      domainName: \"デバフ付与\",\r\n      format: FORMAT_ADD_BUFF,\r\n    } as const satisfies EffectLabelDefinition,\r\n    gainTp: {\r\n      desc: \"TPを指定した量だけ増加させます。\",\r\n      domainName: \"TP増加\",\r\n      format: FORMAT_RECOVER,\r\n    } as const satisfies EffectLabelDefinition,\r\n    grow: {\r\n      desc: \"成長効果\",\r\n      domainName: \"成長効果\",\r\n      format: FORMAT_GROW,\r\n    } as const satisfies EffectLabelDefinition,\r\n    learnSkill: {\r\n      desc: \"スキルを習得する\",\r\n      domainName: \"スキル習得\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies EffectLabelDefinition,\r\n    recoverHp: {\r\n      desc: \"HPを回復します。最大HPに対する割合と一定値のいずれか一方または両方を指定します。アイテムの場合は、特殊能力値[薬の知識]の倍率が適用されます。\",\r\n      domainName: \"HP回復\",\r\n      format: FORMAT_RECOVER,\r\n    } as const satisfies EffectLabelDefinition,\r\n    recoverMp: {\r\n      desc: \"MPを回復します。最大MPに対する割合と一定値のいずれか一方または両方を指定します。アイテムの場合は、特殊能力値[薬の知識]の倍率が適用されます。\",\r\n      domainName: \"MP回復\",\r\n      format: FORMAT_RECOVER,\r\n    } as const satisfies EffectLabelDefinition,\r\n    removeBuff: {\r\n      desc: \"バフを解除する\",\r\n      domainName: \"バフ解除\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies EffectLabelDefinition,\r\n    removeDebuff: {\r\n      desc: \"デバフを解除する\",\r\n      domainName: \"デバフ解除\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies EffectLabelDefinition,\r\n    removeState: {\r\n      desc: \"指定したステートを付加します。\",\r\n      domainName: \"ステート付加\",\r\n      format: FORMAT_STATE,\r\n    } as const satisfies EffectLabelDefinition,\r\n    special: {\r\n      desc: \"特殊効果\",\r\n      domainName: \"特殊効果\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies EffectLabelDefinition,\r\n    addState: {\r\n      desc: \"状態異常を解除する\",\r\n      domainName: \"ステート解除\",\r\n      format: FORMAT_STATE,\r\n    } as const satisfies EffectLabelDefinition,\r\n    commonEvent: {\r\n      desc: \"コモンイベントを実行する\",\r\n      domainName: \"コモンイベント\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies EffectLabelDefinition,\r\n  },\r\n} as const satisfies DomainLabel<ItemEffectLabelSet>;\r\n","export const EFFECT_RECOVER_HP = 11 as const;\r\nexport const EFFECT_RECOVER_MP = 12 as const;\r\nexport const EFFECT_GAIN_TP = 13 as const;\r\nexport const EFFECT_ADD_STATE = 21 as const;\r\nexport const EFFECT_REMOVE_STATE = 22 as const;\r\nexport const EFFECT_ADD_BUFF = 31 as const;\r\nexport const EFFECT_ADD_DEBUFF = 32 as const;\r\nexport const EFFECT_REMOVE_BUFF = 33 as const;\r\nexport const EFFECT_REMOVE_DEBUFF = 34 as const;\r\nexport const EFFECT_SPECIAL = 41 as const;\r\nexport const EFFECT_GROW = 42 as const;\r\nexport const EFFECT_LEARN_SKILL = 43 as const;\r\nexport const EFFECT_COMMON_EVENT = 44 as const;\r\n","export const SPECIAL_EFFECT_ESCAPE = 0 as const;\r\n","import type { SourceIdentifier } from \"./types\";\r\n\r\nconst validAsciiKey = /^[a-zA-Z0-9]+$/;\r\n\r\nexport const sanitizeKey = (value: string): string | undefined => {\r\n  return validAsciiKey.test(value) ? value : undefined;\r\n};\r\n\r\nexport const testUnknonwKey = (value: unknown): value is string => {\r\n  return typeof value === \"string\" ? validAsciiKey.test(value) : false;\r\n};\r\n\r\nexport const joinSourceKey = (key: SourceIdentifier): string => {\r\n  return [key.author, key.module, key.kind].join(\".\");\r\n};\r\n\r\nexport const isValid = (\r\n  source: Partial<SourceIdentifier>\r\n): source is SourceIdentifier => {\r\n  return (\r\n    testUnknonwKey(source.author) &&\r\n    testUnknonwKey(source.module) &&\r\n    testUnknonwKey(source.kind)\r\n  );\r\n};\r\n// TODO:ソース選択画面のデザイン\r\n","export const SRC_PARAMS_REGULAR = \"params\" as const;\r\nexport const SRC_PARAMS_EXTRA = \"xparams\" as const;\r\nexport const SRC_PARAMS_SPECIAL = \"sparams\" as const;\r\nexport const SRC_TRAIT_COLLAPS = \"collaps\" as const;\r\nexport const SRC_TRAIT_PARTY_ABILITY = \"partyAbiility\" as const;\r\nexport const SRC_TRAIT_SPECIAL_FLAG = \"sflag\";\r\n\r\nexport const SRC_DATA_ACTOR = \"actors\" as const;\r\nexport const SRC_DATA_VARIABLE = \"variables\" as const;\r\nexport const SRC_DATA_MAP = \"map\" as const;\r\nexport const SRC_DATA_ENEMY = \"enemy\" as const;\r\nexport const SRC_DATA_STATE = \"state\" as const;\r\nexport const SRC_DATA_SKILL = \"skill\" as const;\r\nexport const SRC_DATA_ITEMS = \"items\" as const;\r\nexport const SRC_DATA_WEAPON = \"weapon\" as const;\r\nexport const SRC_DATA_ARMOR = \"armor\" as const;\r\nexport const SRC_DATA_CLASS = \"class\" as const;\r\nexport const SRC_COMMON_EVNET = \"common_event\" as const;\r\nexport const SRC_TROOP = \"troop\" as const;\r\nexport const SRC_COLOR = \"colors\" as const;\r\n\r\nexport const SRC_WEAPON_TYPES = \"weaponTypes\" as const;\r\nexport const SRC_ARMOR_TYPES = \"armorTypes\" as const;\r\nexport const SRC_EQUIP_TYPES = \"equipTypes\" as const;\r\nexport const SRC_SWITCHES = \"switches\" as const;\r\nexport const SRC_SKILL_TYPES = \"skillTypes\" as const;\r\nexport const SRC_ELEMENTS = \"elements\" as const;\r\n","import type { SourceIdentifier } from \"@RpgTypes/schema/namedItemSource\";\r\nimport type { EffectDefinitionResolved } from \"./labels\";\r\nimport type { ItemEffect } from \"./itemEffect\";\r\n\r\nconst PLACEHOLDER_VALUE1 = \"{value1}\";\r\nconst PLACEHOLDER_VALUE2 = \"{value2}\";\r\nconst PLACEHOLDER_NAME = \"{name}\";\r\n\r\nexport class ItemEffectDescriptor implements EffectDefinitionResolved {\r\n  constructor(\r\n    public readonly codeId: number,\r\n    public readonly label: string,\r\n    public readonly format: string,\r\n    public readonly description: string,\r\n    public readonly dataSource?: SourceIdentifier\r\n  ) {}\r\n  formatText(\r\n    effect: ItemEffect,\r\n    resolveName: (\r\n      dataSource: Readonly<SourceIdentifier>,\r\n      dataId: number\r\n    ) => string\r\n  ) {\r\n    const text = this.format\r\n      .replaceAll(PLACEHOLDER_VALUE1, effect.value1.toString())\r\n      .replaceAll(PLACEHOLDER_VALUE2, effect.value2.toString());\r\n    if (!this.dataSource) {\r\n      return text;\r\n    }\r\n    return text.replaceAll(\r\n      PLACEHOLDER_NAME,\r\n      resolveName(this.dataSource, effect.dataId)\r\n    );\r\n  }\r\n  requiresValue1(): boolean {\r\n    return this.format.includes(PLACEHOLDER_VALUE1);\r\n  }\r\n  requiresValue2(): boolean {\r\n    return this.format.includes(PLACEHOLDER_VALUE2);\r\n  }\r\n  requiresName(): boolean {\r\n    return this.format.includes(PLACEHOLDER_NAME);\r\n  }\r\n  invalidPlaceHolder(): string[] {\r\n    const allowed = [\"value1\", \"value2\", \"name\"];\r\n    const matches: RegExpExecArray[] = [\r\n      ...this.format.matchAll(/\\{([^}]+)\\}/g),\r\n    ];\r\n    return matches.map((m) => m[1]).filter((key) => !allowed.includes(key));\r\n  }\r\n  isFormatValidForDataSource(): boolean {\r\n    if (this.dataSource && !this.requiresName()) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n}\r\n","import type { SourceIdentifier } from \"@RpgTypes/schema/\";\r\nimport {\r\n  SRC_COMMON_EVNET,\r\n  SRC_DATA_SKILL,\r\n  SRC_DATA_STATE,\r\n  SRC_PARAMS_REGULAR,\r\n} from \"@RpgTypes/schema/namedItemSource\";\r\nimport {\r\n  EFFECT_ADD_STATE,\r\n  EFFECT_GROW,\r\n  EFFECT_RECOVER_HP,\r\n  EFFECT_ADD_BUFF,\r\n  EFFECT_ADD_DEBUFF,\r\n  EFFECT_REMOVE_BUFF,\r\n  EFFECT_COMMON_EVENT,\r\n  EFFECT_GAIN_TP,\r\n  EFFECT_LEARN_SKILL,\r\n  EFFECT_RECOVER_MP,\r\n  EFFECT_REMOVE_DEBUFF,\r\n  EFFECT_REMOVE_STATE,\r\n} from \"./constants/\";\r\nimport type { ItemEffect } from \"./itemEffect\";\r\nimport type {\r\n  EffectDefinitionResolved,\r\n  EffectLabelDefinition,\r\n  ItemEffectLabelSet,\r\n} from \"./labels\";\r\nimport { LABEL_SET_ITEM_EFFECT } from \"./labels\";\r\nimport {\r\n  AUTHOR_RMMZ,\r\n  MODULE_DATA,\r\n  MODULE_TRAIT,\r\n} from \"@RpgTypes/namedItemSource/\";\r\nimport { ItemEffectDescriptor } from \"./itemEffectDescriptor\";\r\nimport type { DomainLabel } from \"@RpgTypes/templates\";\r\n/**\r\n * @deprecated\r\n */\r\nexport const formatItemEffectText = (\r\n  effectDefine: EffectDefinitionResolved,\r\n  effect: ItemEffect,\r\n  name: string\r\n) => {\r\n  return effectDefine.format\r\n    .replaceAll(`{value1}`, effect.value1.toString())\r\n    .replaceAll(`{value2}`, effect.value2.toString())\r\n    .replaceAll(\"{name}\", name);\r\n};\r\n\r\nexport const resolveItemEffectLabels = (\r\n  label: DomainLabel<ItemEffectLabelSet>\r\n): ItemEffectDescriptor[] => {\r\n  return [\r\n    defineEffectRecoverHp(label.options.recoverHp),\r\n    defineEffectRecoverMp(label.options.recoverMp),\r\n    defineEffectGainTp(label.options.gainTp),\r\n    defineEffectAddState(label.options.addState),\r\n    defineEffectRemoveState(label.options.removeState),\r\n    defineEffectAddBuff(label.options.addBuff),\r\n    defineEffectAddDebuff(label.options.addDebuff),\r\n    defineEffectRemoveBuff(label.options.removeBuff),\r\n    defineEffectRemoveDebuff(label.options.removeDebuff),\r\n    defineEffectLearnSkill(label.options.learnSkill),\r\n    defineEffectCommonEvent(label.options.commonEvent),\r\n  ];\r\n};\r\n\r\nconst regularParam = (): SourceIdentifier => ({\r\n  author: AUTHOR_RMMZ,\r\n  module: MODULE_TRAIT,\r\n  kind: SRC_PARAMS_REGULAR,\r\n});\r\n\r\nconst srcData = (sourceKey: string): SourceIdentifier => ({\r\n  author: AUTHOR_RMMZ,\r\n  module: MODULE_DATA,\r\n  kind: sourceKey,\r\n});\r\n\r\nconst defineEffect = (\r\n  code: number,\r\n  baseLabel: EffectLabelDefinition,\r\n  override: Partial<EffectLabelDefinition>,\r\n  dataSource?: SourceIdentifier\r\n): ItemEffectDescriptor => {\r\n  const label = override.domainName ?? baseLabel.domainName;\r\n  const format = override.format ?? baseLabel.format;\r\n  const description = override.desc ?? baseLabel.desc;\r\n  return new ItemEffectDescriptor(code, label, format, description, dataSource);\r\n};\r\n\r\nexport const defineEffectRecoverHp = (\r\n  labels: Partial<EffectLabelDefinition>\r\n): ItemEffectDescriptor =>\r\n  defineEffect(\r\n    EFFECT_RECOVER_HP,\r\n    LABEL_SET_ITEM_EFFECT.options.recoverHp,\r\n    labels\r\n  );\r\n\r\nexport const defineEffectRecoverMp = (\r\n  labels: Partial<EffectLabelDefinition>\r\n): ItemEffectDescriptor =>\r\n  defineEffect(\r\n    EFFECT_RECOVER_MP,\r\n    LABEL_SET_ITEM_EFFECT.options.recoverMp,\r\n    labels\r\n  );\r\n\r\nexport const defineEffectGainTp = (\r\n  labels: Partial<EffectLabelDefinition>\r\n): ItemEffectDescriptor =>\r\n  defineEffect(EFFECT_GAIN_TP, LABEL_SET_ITEM_EFFECT.options.gainTp, labels);\r\n\r\nexport const defineEffectGrow = (\r\n  labels: Partial<EffectLabelDefinition>\r\n): ItemEffectDescriptor =>\r\n  defineEffect(EFFECT_GROW, LABEL_SET_ITEM_EFFECT.options.grow, labels);\r\n\r\nexport const defineEffectAddState = (\r\n  labels: Partial<EffectLabelDefinition>\r\n): ItemEffectDescriptor =>\r\n  defineEffect(\r\n    EFFECT_ADD_STATE,\r\n    LABEL_SET_ITEM_EFFECT.options.addState,\r\n    labels,\r\n    srcData(SRC_DATA_STATE)\r\n  );\r\n\r\nexport const defineEffectRemoveState = (\r\n  labels: Partial<EffectLabelDefinition>\r\n): ItemEffectDescriptor =>\r\n  defineEffect(\r\n    EFFECT_REMOVE_STATE,\r\n    LABEL_SET_ITEM_EFFECT.options.removeState,\r\n    labels,\r\n    srcData(SRC_DATA_STATE)\r\n  );\r\n\r\nexport const defineEffectAddBuff = (\r\n  labels: Partial<EffectLabelDefinition>\r\n): ItemEffectDescriptor =>\r\n  defineEffect(\r\n    EFFECT_ADD_BUFF,\r\n    LABEL_SET_ITEM_EFFECT.options.addBuff,\r\n    labels,\r\n    regularParam()\r\n  );\r\n\r\nexport const defineEffectRemoveBuff = (\r\n  labels: Partial<EffectLabelDefinition>\r\n): ItemEffectDescriptor =>\r\n  defineEffect(\r\n    EFFECT_REMOVE_BUFF,\r\n    LABEL_SET_ITEM_EFFECT.options.removeBuff,\r\n    labels,\r\n    regularParam()\r\n  );\r\n\r\nexport const defineEffectLearnSkill = (\r\n  labels: Partial<EffectLabelDefinition>\r\n): ItemEffectDescriptor =>\r\n  defineEffect(\r\n    EFFECT_LEARN_SKILL,\r\n    LABEL_SET_ITEM_EFFECT.options.learnSkill,\r\n    labels,\r\n    srcData(SRC_DATA_SKILL)\r\n  );\r\n\r\nexport const defineEffectAddDebuff = (\r\n  labels: Partial<EffectLabelDefinition>\r\n): ItemEffectDescriptor =>\r\n  defineEffect(\r\n    EFFECT_ADD_DEBUFF,\r\n    LABEL_SET_ITEM_EFFECT.options.addBuff,\r\n    labels,\r\n    regularParam()\r\n  );\r\n\r\nexport const defineEffectRemoveDebuff = (\r\n  labels: Partial<EffectLabelDefinition>\r\n): ItemEffectDescriptor =>\r\n  defineEffect(\r\n    EFFECT_REMOVE_DEBUFF,\r\n    LABEL_SET_ITEM_EFFECT.options.removeDebuff,\r\n    labels,\r\n    regularParam()\r\n  );\r\n\r\nexport const defineEffectCommonEvent = (\r\n  labels: Partial<EffectLabelDefinition>\r\n): ItemEffectDescriptor =>\r\n  defineEffect(\r\n    EFFECT_COMMON_EVENT,\r\n    LABEL_SET_ITEM_EFFECT.options.commonEvent,\r\n    labels,\r\n    srcData(SRC_COMMON_EVNET)\r\n  );\r\n","import type { DomainLabel } from \"@RpgTypes/templates\";\r\nimport type { ItemLabels } from \"./itemLabels\";\r\n\r\nexport const DEFAULT_ITEM_LABELS = {\r\n  domainName: \"アイテム\",\r\n  options: {\r\n    consumable: \"消耗品\",\r\n  },\r\n} as const satisfies DomainLabel<ItemLabels>;\r\n","import type { DomainLabel } from \"@RpgTypes/templates\";\r\nimport type { SkillLabels } from \"./skillLabels\";\r\n\r\nexport const DEFAULT_SKILL_LABELS = {\r\n  domainName: \"スキル\",\r\n  options: {\r\n    requiredWeaponTypeId1: \"必要武器タイプ1\",\r\n    requiredWeaponTypeId2: \"必要武器タイプ2\",\r\n    mpCost: \"MP消費\",\r\n    tpCost: \"TP消費\",\r\n  },\r\n} as const satisfies DomainLabel<SkillLabels>;\r\n","import type { DomainLabel } from \"@RpgTypes/templates\";\r\nimport type { UsableItemLabels } from \"./usableItemLabels\";\r\n\r\nexport const DEFAULT_USABLE_ITEM_LABELS = {\r\n  domainName: \"\",\r\n  options: {\r\n    scope: \"範囲\",\r\n    speed: \"速度補正\",\r\n    successRate: \"成功率\",\r\n  },\r\n} as const satisfies DomainLabel<UsableItemLabels>;\r\n","import type { DomainLabel } from \"@RpgTypes/templates\";\r\nimport type { DataLabels } from \"./dataLabels\";\r\nimport type {\r\n  ActorLabels,\r\n  ArmorLabels,\r\n  ClassLabels,\r\n  EnemyLabels,\r\n  StateLabels,\r\n  WeaponLabels,\r\n} from \"./traitContainers\";\r\nimport type { ItemLabels, SkillLabels, UsableItemLabels } from \"./usableItems\";\r\n\r\nexport const LABEL_SET_DATA = {\r\n  actor: {\r\n    domainName: \"アクター\",\r\n    options: {\r\n      initialEquipments: \"初期装備\",\r\n      faceImage: \"顔画像\",\r\n      characterImage: \"キャラクター画像\",\r\n      svBattlerImage: \"SVバトラー画像\",\r\n      nickname: \"ニックネーム\",\r\n      profile: \"プロフィール\",\r\n      classId: \"職業ID\",\r\n      initialLevel: \"初期レベル\",\r\n      maxLevel: \"最大レベル\",\r\n    },\r\n  } as const satisfies DomainLabel<ActorLabels>,\r\n  class: {\r\n    domainName: \"職業\",\r\n    options: {\r\n      params: \"パラメータ\",\r\n      learnings: \"習得スキル\",\r\n      expParams: \"経験値パラメータ\",\r\n    },\r\n  } as const satisfies DomainLabel<ClassLabels>,\r\n  armor: {\r\n    domainName: \"防具\",\r\n    options: {\r\n      armorTypeId: \"防具タイプID\",\r\n      slotTypeId: \"スロットタイプID\",\r\n    },\r\n  } as const satisfies DomainLabel<ArmorLabels>,\r\n  enemy: {\r\n    domainName: \"敵キャラ\",\r\n    options: {\r\n      dropItems: \"ドロップアイテム\",\r\n      battlerHue: \"バトラーヒュー\",\r\n      battlerName: \"バトラー名\",\r\n      gold: \"ゴールド\",\r\n    },\r\n  } as const satisfies DomainLabel<EnemyLabels>,\r\n  item: {\r\n    domainName: \"アイテム\",\r\n    options: {\r\n      consumable: \"消耗品\",\r\n    },\r\n  } as const satisfies DomainLabel<ItemLabels>,\r\n  skill: {\r\n    domainName: \"スキル\",\r\n    options: {\r\n      requiredWeaponTypeId1: \"必要武器タイプ1\",\r\n      requiredWeaponTypeId2: \"必要武器タイプ2\",\r\n      mpCost: \"MP消費\",\r\n      tpCost: \"TP消費\",\r\n    },\r\n  } as const satisfies DomainLabel<SkillLabels>,\r\n  state: {\r\n    domainName: \"ステート\",\r\n    options: {\r\n      restriction: \"制約\",\r\n      priority: \"優先度\",\r\n      motion: \"モーション\",\r\n      overlay: \"オーバーレイ\",\r\n      removeAtBattleEnd: \"戦闘終了時解除\",\r\n      removeByRestriction: \"制約による解除\",\r\n      autoRemovalTiming: \"自動解除タイミング\",\r\n      minTurns: \"最小ターン数\",\r\n      maxTurns: \"最大ターン数\",\r\n      removeByDamage: \"ダメージによる解除\",\r\n      chanceByDamage: \"ダメージによる解除確率\",\r\n      removeByWalking: \"歩行による解除\",\r\n      stepsToRemove: \"解除までの歩数\",\r\n    },\r\n  } as const satisfies DomainLabel<StateLabels>,\r\n  weapon: {\r\n    domainName: \"武器\",\r\n    options: {\r\n      weaponTypeId: \"武器タイプID\",\r\n    },\r\n  } as const satisfies DomainLabel<WeaponLabels>,\r\n  usableItem: {\r\n    domainName: \"\",\r\n    options: {\r\n      scope: \"範囲\",\r\n      speed: \"速度補正\",\r\n      successRate: \"成功率\",\r\n    },\r\n  } as const satisfies DomainLabel<UsableItemLabels>,\r\n} as const satisfies DataLabels;\r\n","import type { DomainLabel } from \"@RpgTypes/templates\";\r\nimport type { DamageLabels } from \"./damageLabels\";\r\n\r\nexport const DEFAULT_DAMAGE_LABELS = {\r\n  domainName: \"ダメージ\",\r\n  options: {},\r\n} as const satisfies DomainLabel<DamageLabels>;\r\n","import type { Damage } from \"./damage\";\r\n\r\nexport const makeDamage = (damage: Partial<Damage> = {}): Damage => ({\r\n  type: damage.type ?? 0,\r\n  elementId: damage.elementId ?? 0,\r\n  formula: damage.formula ?? \"\",\r\n  variance: damage.variance ?? 0,\r\n  critical: damage.critical ?? false,\r\n});\r\n","import type { Damage } from \"./damage\";\r\nimport type { JSONSchemaType } from \"ajv\";\r\nexport const SCHEMA_DAMAGE = {\r\n  type: \"object\",\r\n  required: [\"type\", \"elementId\", \"formula\", \"variance\", \"critical\"],\r\n  properties: {\r\n    type: { type: \"integer\", minimum: 0 },\r\n    elementId: { type: \"integer\", minimum: 0 },\r\n    formula: { type: \"string\" },\r\n    variance: { type: \"integer\" },\r\n    critical: { type: \"boolean\" },\r\n  },\r\n} as const satisfies JSONSchemaType<Damage>;\r\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.regexpCode = exports.getEsmExportName = exports.getProperty = exports.safeStringify = exports.stringify = exports.strConcat = exports.addCodeArg = exports.str = exports._ = exports.nil = exports._Code = exports.Name = exports.IDENTIFIER = exports._CodeOrName = void 0;\n// eslint-disable-next-line @typescript-eslint/no-extraneous-class\nclass _CodeOrName {\n}\nexports._CodeOrName = _CodeOrName;\nexports.IDENTIFIER = /^[a-z$_][a-z$_0-9]*$/i;\nclass Name extends _CodeOrName {\n    constructor(s) {\n        super();\n        if (!exports.IDENTIFIER.test(s))\n            throw new Error(\"CodeGen: name must be a valid identifier\");\n        this.str = s;\n    }\n    toString() {\n        return this.str;\n    }\n    emptyStr() {\n        return false;\n    }\n    get names() {\n        return { [this.str]: 1 };\n    }\n}\nexports.Name = Name;\nclass _Code extends _CodeOrName {\n    constructor(code) {\n        super();\n        this._items = typeof code === \"string\" ? [code] : code;\n    }\n    toString() {\n        return this.str;\n    }\n    emptyStr() {\n        if (this._items.length > 1)\n            return false;\n        const item = this._items[0];\n        return item === \"\" || item === '\"\"';\n    }\n    get str() {\n        var _a;\n        return ((_a = this._str) !== null && _a !== void 0 ? _a : (this._str = this._items.reduce((s, c) => `${s}${c}`, \"\")));\n    }\n    get names() {\n        var _a;\n        return ((_a = this._names) !== null && _a !== void 0 ? _a : (this._names = this._items.reduce((names, c) => {\n            if (c instanceof Name)\n                names[c.str] = (names[c.str] || 0) + 1;\n            return names;\n        }, {})));\n    }\n}\nexports._Code = _Code;\nexports.nil = new _Code(\"\");\nfunction _(strs, ...args) {\n    const code = [strs[0]];\n    let i = 0;\n    while (i < args.length) {\n        addCodeArg(code, args[i]);\n        code.push(strs[++i]);\n    }\n    return new _Code(code);\n}\nexports._ = _;\nconst plus = new _Code(\"+\");\nfunction str(strs, ...args) {\n    const expr = [safeStringify(strs[0])];\n    let i = 0;\n    while (i < args.length) {\n        expr.push(plus);\n        addCodeArg(expr, args[i]);\n        expr.push(plus, safeStringify(strs[++i]));\n    }\n    optimize(expr);\n    return new _Code(expr);\n}\nexports.str = str;\nfunction addCodeArg(code, arg) {\n    if (arg instanceof _Code)\n        code.push(...arg._items);\n    else if (arg instanceof Name)\n        code.push(arg);\n    else\n        code.push(interpolate(arg));\n}\nexports.addCodeArg = addCodeArg;\nfunction optimize(expr) {\n    let i = 1;\n    while (i < expr.length - 1) {\n        if (expr[i] === plus) {\n            const res = mergeExprItems(expr[i - 1], expr[i + 1]);\n            if (res !== undefined) {\n                expr.splice(i - 1, 3, res);\n                continue;\n            }\n            expr[i++] = \"+\";\n        }\n        i++;\n    }\n}\nfunction mergeExprItems(a, b) {\n    if (b === '\"\"')\n        return a;\n    if (a === '\"\"')\n        return b;\n    if (typeof a == \"string\") {\n        if (b instanceof Name || a[a.length - 1] !== '\"')\n            return;\n        if (typeof b != \"string\")\n            return `${a.slice(0, -1)}${b}\"`;\n        if (b[0] === '\"')\n            return a.slice(0, -1) + b.slice(1);\n        return;\n    }\n    if (typeof b == \"string\" && b[0] === '\"' && !(a instanceof Name))\n        return `\"${a}${b.slice(1)}`;\n    return;\n}\nfunction strConcat(c1, c2) {\n    return c2.emptyStr() ? c1 : c1.emptyStr() ? c2 : str `${c1}${c2}`;\n}\nexports.strConcat = strConcat;\n// TODO do not allow arrays here\nfunction interpolate(x) {\n    return typeof x == \"number\" || typeof x == \"boolean\" || x === null\n        ? x\n        : safeStringify(Array.isArray(x) ? x.join(\",\") : x);\n}\nfunction stringify(x) {\n    return new _Code(safeStringify(x));\n}\nexports.stringify = stringify;\nfunction safeStringify(x) {\n    return JSON.stringify(x)\n        .replace(/\\u2028/g, \"\\\\u2028\")\n        .replace(/\\u2029/g, \"\\\\u2029\");\n}\nexports.safeStringify = safeStringify;\nfunction getProperty(key) {\n    return typeof key == \"string\" && exports.IDENTIFIER.test(key) ? new _Code(`.${key}`) : _ `[${key}]`;\n}\nexports.getProperty = getProperty;\n//Does best effort to format the name properly\nfunction getEsmExportName(key) {\n    if (typeof key == \"string\" && exports.IDENTIFIER.test(key)) {\n        return new _Code(`${key}`);\n    }\n    throw new Error(`CodeGen: invalid export name: ${key}, use explicit $id name mapping`);\n}\nexports.getEsmExportName = getEsmExportName;\nfunction regexpCode(rx) {\n    return new _Code(rx.toString());\n}\nexports.regexpCode = regexpCode;\n//# sourceMappingURL=code.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ValueScope = exports.ValueScopeName = exports.Scope = exports.varKinds = exports.UsedValueState = void 0;\nconst code_1 = require(\"./code\");\nclass ValueError extends Error {\n    constructor(name) {\n        super(`CodeGen: \"code\" for ${name} not defined`);\n        this.value = name.value;\n    }\n}\nvar UsedValueState;\n(function (UsedValueState) {\n    UsedValueState[UsedValueState[\"Started\"] = 0] = \"Started\";\n    UsedValueState[UsedValueState[\"Completed\"] = 1] = \"Completed\";\n})(UsedValueState || (exports.UsedValueState = UsedValueState = {}));\nexports.varKinds = {\n    const: new code_1.Name(\"const\"),\n    let: new code_1.Name(\"let\"),\n    var: new code_1.Name(\"var\"),\n};\nclass Scope {\n    constructor({ prefixes, parent } = {}) {\n        this._names = {};\n        this._prefixes = prefixes;\n        this._parent = parent;\n    }\n    toName(nameOrPrefix) {\n        return nameOrPrefix instanceof code_1.Name ? nameOrPrefix : this.name(nameOrPrefix);\n    }\n    name(prefix) {\n        return new code_1.Name(this._newName(prefix));\n    }\n    _newName(prefix) {\n        const ng = this._names[prefix] || this._nameGroup(prefix);\n        return `${prefix}${ng.index++}`;\n    }\n    _nameGroup(prefix) {\n        var _a, _b;\n        if (((_b = (_a = this._parent) === null || _a === void 0 ? void 0 : _a._prefixes) === null || _b === void 0 ? void 0 : _b.has(prefix)) || (this._prefixes && !this._prefixes.has(prefix))) {\n            throw new Error(`CodeGen: prefix \"${prefix}\" is not allowed in this scope`);\n        }\n        return (this._names[prefix] = { prefix, index: 0 });\n    }\n}\nexports.Scope = Scope;\nclass ValueScopeName extends code_1.Name {\n    constructor(prefix, nameStr) {\n        super(nameStr);\n        this.prefix = prefix;\n    }\n    setValue(value, { property, itemIndex }) {\n        this.value = value;\n        this.scopePath = (0, code_1._) `.${new code_1.Name(property)}[${itemIndex}]`;\n    }\n}\nexports.ValueScopeName = ValueScopeName;\nconst line = (0, code_1._) `\\n`;\nclass ValueScope extends Scope {\n    constructor(opts) {\n        super(opts);\n        this._values = {};\n        this._scope = opts.scope;\n        this.opts = { ...opts, _n: opts.lines ? line : code_1.nil };\n    }\n    get() {\n        return this._scope;\n    }\n    name(prefix) {\n        return new ValueScopeName(prefix, this._newName(prefix));\n    }\n    value(nameOrPrefix, value) {\n        var _a;\n        if (value.ref === undefined)\n            throw new Error(\"CodeGen: ref must be passed in value\");\n        const name = this.toName(nameOrPrefix);\n        const { prefix } = name;\n        const valueKey = (_a = value.key) !== null && _a !== void 0 ? _a : value.ref;\n        let vs = this._values[prefix];\n        if (vs) {\n            const _name = vs.get(valueKey);\n            if (_name)\n                return _name;\n        }\n        else {\n            vs = this._values[prefix] = new Map();\n        }\n        vs.set(valueKey, name);\n        const s = this._scope[prefix] || (this._scope[prefix] = []);\n        const itemIndex = s.length;\n        s[itemIndex] = value.ref;\n        name.setValue(value, { property: prefix, itemIndex });\n        return name;\n    }\n    getValue(prefix, keyOrRef) {\n        const vs = this._values[prefix];\n        if (!vs)\n            return;\n        return vs.get(keyOrRef);\n    }\n    scopeRefs(scopeName, values = this._values) {\n        return this._reduceValues(values, (name) => {\n            if (name.scopePath === undefined)\n                throw new Error(`CodeGen: name \"${name}\" has no value`);\n            return (0, code_1._) `${scopeName}${name.scopePath}`;\n        });\n    }\n    scopeCode(values = this._values, usedValues, getCode) {\n        return this._reduceValues(values, (name) => {\n            if (name.value === undefined)\n                throw new Error(`CodeGen: name \"${name}\" has no value`);\n            return name.value.code;\n        }, usedValues, getCode);\n    }\n    _reduceValues(values, valueCode, usedValues = {}, getCode) {\n        let code = code_1.nil;\n        for (const prefix in values) {\n            const vs = values[prefix];\n            if (!vs)\n                continue;\n            const nameSet = (usedValues[prefix] = usedValues[prefix] || new Map());\n            vs.forEach((name) => {\n                if (nameSet.has(name))\n                    return;\n                nameSet.set(name, UsedValueState.Started);\n                let c = valueCode(name);\n                if (c) {\n                    const def = this.opts.es5 ? exports.varKinds.var : exports.varKinds.const;\n                    code = (0, code_1._) `${code}${def} ${name} = ${c};${this.opts._n}`;\n                }\n                else if ((c = getCode === null || getCode === void 0 ? void 0 : getCode(name))) {\n                    code = (0, code_1._) `${code}${c}${this.opts._n}`;\n                }\n                else {\n                    throw new ValueError(name);\n                }\n                nameSet.set(name, UsedValueState.Completed);\n            });\n        }\n        return code;\n    }\n}\nexports.ValueScope = ValueScope;\n//# sourceMappingURL=scope.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.or = exports.and = exports.not = exports.CodeGen = exports.operators = exports.varKinds = exports.ValueScopeName = exports.ValueScope = exports.Scope = exports.Name = exports.regexpCode = exports.stringify = exports.getProperty = exports.nil = exports.strConcat = exports.str = exports._ = void 0;\nconst code_1 = require(\"./code\");\nconst scope_1 = require(\"./scope\");\nvar code_2 = require(\"./code\");\nObject.defineProperty(exports, \"_\", { enumerable: true, get: function () { return code_2._; } });\nObject.defineProperty(exports, \"str\", { enumerable: true, get: function () { return code_2.str; } });\nObject.defineProperty(exports, \"strConcat\", { enumerable: true, get: function () { return code_2.strConcat; } });\nObject.defineProperty(exports, \"nil\", { enumerable: true, get: function () { return code_2.nil; } });\nObject.defineProperty(exports, \"getProperty\", { enumerable: true, get: function () { return code_2.getProperty; } });\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return code_2.stringify; } });\nObject.defineProperty(exports, \"regexpCode\", { enumerable: true, get: function () { return code_2.regexpCode; } });\nObject.defineProperty(exports, \"Name\", { enumerable: true, get: function () { return code_2.Name; } });\nvar scope_2 = require(\"./scope\");\nObject.defineProperty(exports, \"Scope\", { enumerable: true, get: function () { return scope_2.Scope; } });\nObject.defineProperty(exports, \"ValueScope\", { enumerable: true, get: function () { return scope_2.ValueScope; } });\nObject.defineProperty(exports, \"ValueScopeName\", { enumerable: true, get: function () { return scope_2.ValueScopeName; } });\nObject.defineProperty(exports, \"varKinds\", { enumerable: true, get: function () { return scope_2.varKinds; } });\nexports.operators = {\n    GT: new code_1._Code(\">\"),\n    GTE: new code_1._Code(\">=\"),\n    LT: new code_1._Code(\"<\"),\n    LTE: new code_1._Code(\"<=\"),\n    EQ: new code_1._Code(\"===\"),\n    NEQ: new code_1._Code(\"!==\"),\n    NOT: new code_1._Code(\"!\"),\n    OR: new code_1._Code(\"||\"),\n    AND: new code_1._Code(\"&&\"),\n    ADD: new code_1._Code(\"+\"),\n};\nclass Node {\n    optimizeNodes() {\n        return this;\n    }\n    optimizeNames(_names, _constants) {\n        return this;\n    }\n}\nclass Def extends Node {\n    constructor(varKind, name, rhs) {\n        super();\n        this.varKind = varKind;\n        this.name = name;\n        this.rhs = rhs;\n    }\n    render({ es5, _n }) {\n        const varKind = es5 ? scope_1.varKinds.var : this.varKind;\n        const rhs = this.rhs === undefined ? \"\" : ` = ${this.rhs}`;\n        return `${varKind} ${this.name}${rhs};` + _n;\n    }\n    optimizeNames(names, constants) {\n        if (!names[this.name.str])\n            return;\n        if (this.rhs)\n            this.rhs = optimizeExpr(this.rhs, names, constants);\n        return this;\n    }\n    get names() {\n        return this.rhs instanceof code_1._CodeOrName ? this.rhs.names : {};\n    }\n}\nclass Assign extends Node {\n    constructor(lhs, rhs, sideEffects) {\n        super();\n        this.lhs = lhs;\n        this.rhs = rhs;\n        this.sideEffects = sideEffects;\n    }\n    render({ _n }) {\n        return `${this.lhs} = ${this.rhs};` + _n;\n    }\n    optimizeNames(names, constants) {\n        if (this.lhs instanceof code_1.Name && !names[this.lhs.str] && !this.sideEffects)\n            return;\n        this.rhs = optimizeExpr(this.rhs, names, constants);\n        return this;\n    }\n    get names() {\n        const names = this.lhs instanceof code_1.Name ? {} : { ...this.lhs.names };\n        return addExprNames(names, this.rhs);\n    }\n}\nclass AssignOp extends Assign {\n    constructor(lhs, op, rhs, sideEffects) {\n        super(lhs, rhs, sideEffects);\n        this.op = op;\n    }\n    render({ _n }) {\n        return `${this.lhs} ${this.op}= ${this.rhs};` + _n;\n    }\n}\nclass Label extends Node {\n    constructor(label) {\n        super();\n        this.label = label;\n        this.names = {};\n    }\n    render({ _n }) {\n        return `${this.label}:` + _n;\n    }\n}\nclass Break extends Node {\n    constructor(label) {\n        super();\n        this.label = label;\n        this.names = {};\n    }\n    render({ _n }) {\n        const label = this.label ? ` ${this.label}` : \"\";\n        return `break${label};` + _n;\n    }\n}\nclass Throw extends Node {\n    constructor(error) {\n        super();\n        this.error = error;\n    }\n    render({ _n }) {\n        return `throw ${this.error};` + _n;\n    }\n    get names() {\n        return this.error.names;\n    }\n}\nclass AnyCode extends Node {\n    constructor(code) {\n        super();\n        this.code = code;\n    }\n    render({ _n }) {\n        return `${this.code};` + _n;\n    }\n    optimizeNodes() {\n        return `${this.code}` ? this : undefined;\n    }\n    optimizeNames(names, constants) {\n        this.code = optimizeExpr(this.code, names, constants);\n        return this;\n    }\n    get names() {\n        return this.code instanceof code_1._CodeOrName ? this.code.names : {};\n    }\n}\nclass ParentNode extends Node {\n    constructor(nodes = []) {\n        super();\n        this.nodes = nodes;\n    }\n    render(opts) {\n        return this.nodes.reduce((code, n) => code + n.render(opts), \"\");\n    }\n    optimizeNodes() {\n        const { nodes } = this;\n        let i = nodes.length;\n        while (i--) {\n            const n = nodes[i].optimizeNodes();\n            if (Array.isArray(n))\n                nodes.splice(i, 1, ...n);\n            else if (n)\n                nodes[i] = n;\n            else\n                nodes.splice(i, 1);\n        }\n        return nodes.length > 0 ? this : undefined;\n    }\n    optimizeNames(names, constants) {\n        const { nodes } = this;\n        let i = nodes.length;\n        while (i--) {\n            // iterating backwards improves 1-pass optimization\n            const n = nodes[i];\n            if (n.optimizeNames(names, constants))\n                continue;\n            subtractNames(names, n.names);\n            nodes.splice(i, 1);\n        }\n        return nodes.length > 0 ? this : undefined;\n    }\n    get names() {\n        return this.nodes.reduce((names, n) => addNames(names, n.names), {});\n    }\n}\nclass BlockNode extends ParentNode {\n    render(opts) {\n        return \"{\" + opts._n + super.render(opts) + \"}\" + opts._n;\n    }\n}\nclass Root extends ParentNode {\n}\nclass Else extends BlockNode {\n}\nElse.kind = \"else\";\nclass If extends BlockNode {\n    constructor(condition, nodes) {\n        super(nodes);\n        this.condition = condition;\n    }\n    render(opts) {\n        let code = `if(${this.condition})` + super.render(opts);\n        if (this.else)\n            code += \"else \" + this.else.render(opts);\n        return code;\n    }\n    optimizeNodes() {\n        super.optimizeNodes();\n        const cond = this.condition;\n        if (cond === true)\n            return this.nodes; // else is ignored here\n        let e = this.else;\n        if (e) {\n            const ns = e.optimizeNodes();\n            e = this.else = Array.isArray(ns) ? new Else(ns) : ns;\n        }\n        if (e) {\n            if (cond === false)\n                return e instanceof If ? e : e.nodes;\n            if (this.nodes.length)\n                return this;\n            return new If(not(cond), e instanceof If ? [e] : e.nodes);\n        }\n        if (cond === false || !this.nodes.length)\n            return undefined;\n        return this;\n    }\n    optimizeNames(names, constants) {\n        var _a;\n        this.else = (_a = this.else) === null || _a === void 0 ? void 0 : _a.optimizeNames(names, constants);\n        if (!(super.optimizeNames(names, constants) || this.else))\n            return;\n        this.condition = optimizeExpr(this.condition, names, constants);\n        return this;\n    }\n    get names() {\n        const names = super.names;\n        addExprNames(names, this.condition);\n        if (this.else)\n            addNames(names, this.else.names);\n        return names;\n    }\n}\nIf.kind = \"if\";\nclass For extends BlockNode {\n}\nFor.kind = \"for\";\nclass ForLoop extends For {\n    constructor(iteration) {\n        super();\n        this.iteration = iteration;\n    }\n    render(opts) {\n        return `for(${this.iteration})` + super.render(opts);\n    }\n    optimizeNames(names, constants) {\n        if (!super.optimizeNames(names, constants))\n            return;\n        this.iteration = optimizeExpr(this.iteration, names, constants);\n        return this;\n    }\n    get names() {\n        return addNames(super.names, this.iteration.names);\n    }\n}\nclass ForRange extends For {\n    constructor(varKind, name, from, to) {\n        super();\n        this.varKind = varKind;\n        this.name = name;\n        this.from = from;\n        this.to = to;\n    }\n    render(opts) {\n        const varKind = opts.es5 ? scope_1.varKinds.var : this.varKind;\n        const { name, from, to } = this;\n        return `for(${varKind} ${name}=${from}; ${name}<${to}; ${name}++)` + super.render(opts);\n    }\n    get names() {\n        const names = addExprNames(super.names, this.from);\n        return addExprNames(names, this.to);\n    }\n}\nclass ForIter extends For {\n    constructor(loop, varKind, name, iterable) {\n        super();\n        this.loop = loop;\n        this.varKind = varKind;\n        this.name = name;\n        this.iterable = iterable;\n    }\n    render(opts) {\n        return `for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})` + super.render(opts);\n    }\n    optimizeNames(names, constants) {\n        if (!super.optimizeNames(names, constants))\n            return;\n        this.iterable = optimizeExpr(this.iterable, names, constants);\n        return this;\n    }\n    get names() {\n        return addNames(super.names, this.iterable.names);\n    }\n}\nclass Func extends BlockNode {\n    constructor(name, args, async) {\n        super();\n        this.name = name;\n        this.args = args;\n        this.async = async;\n    }\n    render(opts) {\n        const _async = this.async ? \"async \" : \"\";\n        return `${_async}function ${this.name}(${this.args})` + super.render(opts);\n    }\n}\nFunc.kind = \"func\";\nclass Return extends ParentNode {\n    render(opts) {\n        return \"return \" + super.render(opts);\n    }\n}\nReturn.kind = \"return\";\nclass Try extends BlockNode {\n    render(opts) {\n        let code = \"try\" + super.render(opts);\n        if (this.catch)\n            code += this.catch.render(opts);\n        if (this.finally)\n            code += this.finally.render(opts);\n        return code;\n    }\n    optimizeNodes() {\n        var _a, _b;\n        super.optimizeNodes();\n        (_a = this.catch) === null || _a === void 0 ? void 0 : _a.optimizeNodes();\n        (_b = this.finally) === null || _b === void 0 ? void 0 : _b.optimizeNodes();\n        return this;\n    }\n    optimizeNames(names, constants) {\n        var _a, _b;\n        super.optimizeNames(names, constants);\n        (_a = this.catch) === null || _a === void 0 ? void 0 : _a.optimizeNames(names, constants);\n        (_b = this.finally) === null || _b === void 0 ? void 0 : _b.optimizeNames(names, constants);\n        return this;\n    }\n    get names() {\n        const names = super.names;\n        if (this.catch)\n            addNames(names, this.catch.names);\n        if (this.finally)\n            addNames(names, this.finally.names);\n        return names;\n    }\n}\nclass Catch extends BlockNode {\n    constructor(error) {\n        super();\n        this.error = error;\n    }\n    render(opts) {\n        return `catch(${this.error})` + super.render(opts);\n    }\n}\nCatch.kind = \"catch\";\nclass Finally extends BlockNode {\n    render(opts) {\n        return \"finally\" + super.render(opts);\n    }\n}\nFinally.kind = \"finally\";\nclass CodeGen {\n    constructor(extScope, opts = {}) {\n        this._values = {};\n        this._blockStarts = [];\n        this._constants = {};\n        this.opts = { ...opts, _n: opts.lines ? \"\\n\" : \"\" };\n        this._extScope = extScope;\n        this._scope = new scope_1.Scope({ parent: extScope });\n        this._nodes = [new Root()];\n    }\n    toString() {\n        return this._root.render(this.opts);\n    }\n    // returns unique name in the internal scope\n    name(prefix) {\n        return this._scope.name(prefix);\n    }\n    // reserves unique name in the external scope\n    scopeName(prefix) {\n        return this._extScope.name(prefix);\n    }\n    // reserves unique name in the external scope and assigns value to it\n    scopeValue(prefixOrName, value) {\n        const name = this._extScope.value(prefixOrName, value);\n        const vs = this._values[name.prefix] || (this._values[name.prefix] = new Set());\n        vs.add(name);\n        return name;\n    }\n    getScopeValue(prefix, keyOrRef) {\n        return this._extScope.getValue(prefix, keyOrRef);\n    }\n    // return code that assigns values in the external scope to the names that are used internally\n    // (same names that were returned by gen.scopeName or gen.scopeValue)\n    scopeRefs(scopeName) {\n        return this._extScope.scopeRefs(scopeName, this._values);\n    }\n    scopeCode() {\n        return this._extScope.scopeCode(this._values);\n    }\n    _def(varKind, nameOrPrefix, rhs, constant) {\n        const name = this._scope.toName(nameOrPrefix);\n        if (rhs !== undefined && constant)\n            this._constants[name.str] = rhs;\n        this._leafNode(new Def(varKind, name, rhs));\n        return name;\n    }\n    // `const` declaration (`var` in es5 mode)\n    const(nameOrPrefix, rhs, _constant) {\n        return this._def(scope_1.varKinds.const, nameOrPrefix, rhs, _constant);\n    }\n    // `let` declaration with optional assignment (`var` in es5 mode)\n    let(nameOrPrefix, rhs, _constant) {\n        return this._def(scope_1.varKinds.let, nameOrPrefix, rhs, _constant);\n    }\n    // `var` declaration with optional assignment\n    var(nameOrPrefix, rhs, _constant) {\n        return this._def(scope_1.varKinds.var, nameOrPrefix, rhs, _constant);\n    }\n    // assignment code\n    assign(lhs, rhs, sideEffects) {\n        return this._leafNode(new Assign(lhs, rhs, sideEffects));\n    }\n    // `+=` code\n    add(lhs, rhs) {\n        return this._leafNode(new AssignOp(lhs, exports.operators.ADD, rhs));\n    }\n    // appends passed SafeExpr to code or executes Block\n    code(c) {\n        if (typeof c == \"function\")\n            c();\n        else if (c !== code_1.nil)\n            this._leafNode(new AnyCode(c));\n        return this;\n    }\n    // returns code for object literal for the passed argument list of key-value pairs\n    object(...keyValues) {\n        const code = [\"{\"];\n        for (const [key, value] of keyValues) {\n            if (code.length > 1)\n                code.push(\",\");\n            code.push(key);\n            if (key !== value || this.opts.es5) {\n                code.push(\":\");\n                (0, code_1.addCodeArg)(code, value);\n            }\n        }\n        code.push(\"}\");\n        return new code_1._Code(code);\n    }\n    // `if` clause (or statement if `thenBody` and, optionally, `elseBody` are passed)\n    if(condition, thenBody, elseBody) {\n        this._blockNode(new If(condition));\n        if (thenBody && elseBody) {\n            this.code(thenBody).else().code(elseBody).endIf();\n        }\n        else if (thenBody) {\n            this.code(thenBody).endIf();\n        }\n        else if (elseBody) {\n            throw new Error('CodeGen: \"else\" body without \"then\" body');\n        }\n        return this;\n    }\n    // `else if` clause - invalid without `if` or after `else` clauses\n    elseIf(condition) {\n        return this._elseNode(new If(condition));\n    }\n    // `else` clause - only valid after `if` or `else if` clauses\n    else() {\n        return this._elseNode(new Else());\n    }\n    // end `if` statement (needed if gen.if was used only with condition)\n    endIf() {\n        return this._endBlockNode(If, Else);\n    }\n    _for(node, forBody) {\n        this._blockNode(node);\n        if (forBody)\n            this.code(forBody).endFor();\n        return this;\n    }\n    // a generic `for` clause (or statement if `forBody` is passed)\n    for(iteration, forBody) {\n        return this._for(new ForLoop(iteration), forBody);\n    }\n    // `for` statement for a range of values\n    forRange(nameOrPrefix, from, to, forBody, varKind = this.opts.es5 ? scope_1.varKinds.var : scope_1.varKinds.let) {\n        const name = this._scope.toName(nameOrPrefix);\n        return this._for(new ForRange(varKind, name, from, to), () => forBody(name));\n    }\n    // `for-of` statement (in es5 mode replace with a normal for loop)\n    forOf(nameOrPrefix, iterable, forBody, varKind = scope_1.varKinds.const) {\n        const name = this._scope.toName(nameOrPrefix);\n        if (this.opts.es5) {\n            const arr = iterable instanceof code_1.Name ? iterable : this.var(\"_arr\", iterable);\n            return this.forRange(\"_i\", 0, (0, code_1._) `${arr}.length`, (i) => {\n                this.var(name, (0, code_1._) `${arr}[${i}]`);\n                forBody(name);\n            });\n        }\n        return this._for(new ForIter(\"of\", varKind, name, iterable), () => forBody(name));\n    }\n    // `for-in` statement.\n    // With option `ownProperties` replaced with a `for-of` loop for object keys\n    forIn(nameOrPrefix, obj, forBody, varKind = this.opts.es5 ? scope_1.varKinds.var : scope_1.varKinds.const) {\n        if (this.opts.ownProperties) {\n            return this.forOf(nameOrPrefix, (0, code_1._) `Object.keys(${obj})`, forBody);\n        }\n        const name = this._scope.toName(nameOrPrefix);\n        return this._for(new ForIter(\"in\", varKind, name, obj), () => forBody(name));\n    }\n    // end `for` loop\n    endFor() {\n        return this._endBlockNode(For);\n    }\n    // `label` statement\n    label(label) {\n        return this._leafNode(new Label(label));\n    }\n    // `break` statement\n    break(label) {\n        return this._leafNode(new Break(label));\n    }\n    // `return` statement\n    return(value) {\n        const node = new Return();\n        this._blockNode(node);\n        this.code(value);\n        if (node.nodes.length !== 1)\n            throw new Error('CodeGen: \"return\" should have one node');\n        return this._endBlockNode(Return);\n    }\n    // `try` statement\n    try(tryBody, catchCode, finallyCode) {\n        if (!catchCode && !finallyCode)\n            throw new Error('CodeGen: \"try\" without \"catch\" and \"finally\"');\n        const node = new Try();\n        this._blockNode(node);\n        this.code(tryBody);\n        if (catchCode) {\n            const error = this.name(\"e\");\n            this._currNode = node.catch = new Catch(error);\n            catchCode(error);\n        }\n        if (finallyCode) {\n            this._currNode = node.finally = new Finally();\n            this.code(finallyCode);\n        }\n        return this._endBlockNode(Catch, Finally);\n    }\n    // `throw` statement\n    throw(error) {\n        return this._leafNode(new Throw(error));\n    }\n    // start self-balancing block\n    block(body, nodeCount) {\n        this._blockStarts.push(this._nodes.length);\n        if (body)\n            this.code(body).endBlock(nodeCount);\n        return this;\n    }\n    // end the current self-balancing block\n    endBlock(nodeCount) {\n        const len = this._blockStarts.pop();\n        if (len === undefined)\n            throw new Error(\"CodeGen: not in self-balancing block\");\n        const toClose = this._nodes.length - len;\n        if (toClose < 0 || (nodeCount !== undefined && toClose !== nodeCount)) {\n            throw new Error(`CodeGen: wrong number of nodes: ${toClose} vs ${nodeCount} expected`);\n        }\n        this._nodes.length = len;\n        return this;\n    }\n    // `function` heading (or definition if funcBody is passed)\n    func(name, args = code_1.nil, async, funcBody) {\n        this._blockNode(new Func(name, args, async));\n        if (funcBody)\n            this.code(funcBody).endFunc();\n        return this;\n    }\n    // end function definition\n    endFunc() {\n        return this._endBlockNode(Func);\n    }\n    optimize(n = 1) {\n        while (n-- > 0) {\n            this._root.optimizeNodes();\n            this._root.optimizeNames(this._root.names, this._constants);\n        }\n    }\n    _leafNode(node) {\n        this._currNode.nodes.push(node);\n        return this;\n    }\n    _blockNode(node) {\n        this._currNode.nodes.push(node);\n        this._nodes.push(node);\n    }\n    _endBlockNode(N1, N2) {\n        const n = this._currNode;\n        if (n instanceof N1 || (N2 && n instanceof N2)) {\n            this._nodes.pop();\n            return this;\n        }\n        throw new Error(`CodeGen: not in block \"${N2 ? `${N1.kind}/${N2.kind}` : N1.kind}\"`);\n    }\n    _elseNode(node) {\n        const n = this._currNode;\n        if (!(n instanceof If)) {\n            throw new Error('CodeGen: \"else\" without \"if\"');\n        }\n        this._currNode = n.else = node;\n        return this;\n    }\n    get _root() {\n        return this._nodes[0];\n    }\n    get _currNode() {\n        const ns = this._nodes;\n        return ns[ns.length - 1];\n    }\n    set _currNode(node) {\n        const ns = this._nodes;\n        ns[ns.length - 1] = node;\n    }\n}\nexports.CodeGen = CodeGen;\nfunction addNames(names, from) {\n    for (const n in from)\n        names[n] = (names[n] || 0) + (from[n] || 0);\n    return names;\n}\nfunction addExprNames(names, from) {\n    return from instanceof code_1._CodeOrName ? addNames(names, from.names) : names;\n}\nfunction optimizeExpr(expr, names, constants) {\n    if (expr instanceof code_1.Name)\n        return replaceName(expr);\n    if (!canOptimize(expr))\n        return expr;\n    return new code_1._Code(expr._items.reduce((items, c) => {\n        if (c instanceof code_1.Name)\n            c = replaceName(c);\n        if (c instanceof code_1._Code)\n            items.push(...c._items);\n        else\n            items.push(c);\n        return items;\n    }, []));\n    function replaceName(n) {\n        const c = constants[n.str];\n        if (c === undefined || names[n.str] !== 1)\n            return n;\n        delete names[n.str];\n        return c;\n    }\n    function canOptimize(e) {\n        return (e instanceof code_1._Code &&\n            e._items.some((c) => c instanceof code_1.Name && names[c.str] === 1 && constants[c.str] !== undefined));\n    }\n}\nfunction subtractNames(names, from) {\n    for (const n in from)\n        names[n] = (names[n] || 0) - (from[n] || 0);\n}\nfunction not(x) {\n    return typeof x == \"boolean\" || typeof x == \"number\" || x === null ? !x : (0, code_1._) `!${par(x)}`;\n}\nexports.not = not;\nconst andCode = mappend(exports.operators.AND);\n// boolean AND (&&) expression with the passed arguments\nfunction and(...args) {\n    return args.reduce(andCode);\n}\nexports.and = and;\nconst orCode = mappend(exports.operators.OR);\n// boolean OR (||) expression with the passed arguments\nfunction or(...args) {\n    return args.reduce(orCode);\n}\nexports.or = or;\nfunction mappend(op) {\n    return (x, y) => (x === code_1.nil ? y : y === code_1.nil ? x : (0, code_1._) `${par(x)} ${op} ${par(y)}`);\n}\nfunction par(x) {\n    return x instanceof code_1.Name ? x : (0, code_1._) `(${x})`;\n}\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.checkStrictMode = exports.getErrorPath = exports.Type = exports.useFunc = exports.setEvaluated = exports.evaluatedPropsToName = exports.mergeEvaluated = exports.eachItem = exports.unescapeJsonPointer = exports.escapeJsonPointer = exports.escapeFragment = exports.unescapeFragment = exports.schemaRefOrVal = exports.schemaHasRulesButRef = exports.schemaHasRules = exports.checkUnknownRules = exports.alwaysValidSchema = exports.toHash = void 0;\nconst codegen_1 = require(\"./codegen\");\nconst code_1 = require(\"./codegen/code\");\n// TODO refactor to use Set\nfunction toHash(arr) {\n    const hash = {};\n    for (const item of arr)\n        hash[item] = true;\n    return hash;\n}\nexports.toHash = toHash;\nfunction alwaysValidSchema(it, schema) {\n    if (typeof schema == \"boolean\")\n        return schema;\n    if (Object.keys(schema).length === 0)\n        return true;\n    checkUnknownRules(it, schema);\n    return !schemaHasRules(schema, it.self.RULES.all);\n}\nexports.alwaysValidSchema = alwaysValidSchema;\nfunction checkUnknownRules(it, schema = it.schema) {\n    const { opts, self } = it;\n    if (!opts.strictSchema)\n        return;\n    if (typeof schema === \"boolean\")\n        return;\n    const rules = self.RULES.keywords;\n    for (const key in schema) {\n        if (!rules[key])\n            checkStrictMode(it, `unknown keyword: \"${key}\"`);\n    }\n}\nexports.checkUnknownRules = checkUnknownRules;\nfunction schemaHasRules(schema, rules) {\n    if (typeof schema == \"boolean\")\n        return !schema;\n    for (const key in schema)\n        if (rules[key])\n            return true;\n    return false;\n}\nexports.schemaHasRules = schemaHasRules;\nfunction schemaHasRulesButRef(schema, RULES) {\n    if (typeof schema == \"boolean\")\n        return !schema;\n    for (const key in schema)\n        if (key !== \"$ref\" && RULES.all[key])\n            return true;\n    return false;\n}\nexports.schemaHasRulesButRef = schemaHasRulesButRef;\nfunction schemaRefOrVal({ topSchemaRef, schemaPath }, schema, keyword, $data) {\n    if (!$data) {\n        if (typeof schema == \"number\" || typeof schema == \"boolean\")\n            return schema;\n        if (typeof schema == \"string\")\n            return (0, codegen_1._) `${schema}`;\n    }\n    return (0, codegen_1._) `${topSchemaRef}${schemaPath}${(0, codegen_1.getProperty)(keyword)}`;\n}\nexports.schemaRefOrVal = schemaRefOrVal;\nfunction unescapeFragment(str) {\n    return unescapeJsonPointer(decodeURIComponent(str));\n}\nexports.unescapeFragment = unescapeFragment;\nfunction escapeFragment(str) {\n    return encodeURIComponent(escapeJsonPointer(str));\n}\nexports.escapeFragment = escapeFragment;\nfunction escapeJsonPointer(str) {\n    if (typeof str == \"number\")\n        return `${str}`;\n    return str.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n}\nexports.escapeJsonPointer = escapeJsonPointer;\nfunction unescapeJsonPointer(str) {\n    return str.replace(/~1/g, \"/\").replace(/~0/g, \"~\");\n}\nexports.unescapeJsonPointer = unescapeJsonPointer;\nfunction eachItem(xs, f) {\n    if (Array.isArray(xs)) {\n        for (const x of xs)\n            f(x);\n    }\n    else {\n        f(xs);\n    }\n}\nexports.eachItem = eachItem;\nfunction makeMergeEvaluated({ mergeNames, mergeToName, mergeValues, resultToName, }) {\n    return (gen, from, to, toName) => {\n        const res = to === undefined\n            ? from\n            : to instanceof codegen_1.Name\n                ? (from instanceof codegen_1.Name ? mergeNames(gen, from, to) : mergeToName(gen, from, to), to)\n                : from instanceof codegen_1.Name\n                    ? (mergeToName(gen, to, from), from)\n                    : mergeValues(from, to);\n        return toName === codegen_1.Name && !(res instanceof codegen_1.Name) ? resultToName(gen, res) : res;\n    };\n}\nexports.mergeEvaluated = {\n    props: makeMergeEvaluated({\n        mergeNames: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true && ${from} !== undefined`, () => {\n            gen.if((0, codegen_1._) `${from} === true`, () => gen.assign(to, true), () => gen.assign(to, (0, codegen_1._) `${to} || {}`).code((0, codegen_1._) `Object.assign(${to}, ${from})`));\n        }),\n        mergeToName: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true`, () => {\n            if (from === true) {\n                gen.assign(to, true);\n            }\n            else {\n                gen.assign(to, (0, codegen_1._) `${to} || {}`);\n                setEvaluated(gen, to, from);\n            }\n        }),\n        mergeValues: (from, to) => (from === true ? true : { ...from, ...to }),\n        resultToName: evaluatedPropsToName,\n    }),\n    items: makeMergeEvaluated({\n        mergeNames: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true && ${from} !== undefined`, () => gen.assign(to, (0, codegen_1._) `${from} === true ? true : ${to} > ${from} ? ${to} : ${from}`)),\n        mergeToName: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true`, () => gen.assign(to, from === true ? true : (0, codegen_1._) `${to} > ${from} ? ${to} : ${from}`)),\n        mergeValues: (from, to) => (from === true ? true : Math.max(from, to)),\n        resultToName: (gen, items) => gen.var(\"items\", items),\n    }),\n};\nfunction evaluatedPropsToName(gen, ps) {\n    if (ps === true)\n        return gen.var(\"props\", true);\n    const props = gen.var(\"props\", (0, codegen_1._) `{}`);\n    if (ps !== undefined)\n        setEvaluated(gen, props, ps);\n    return props;\n}\nexports.evaluatedPropsToName = evaluatedPropsToName;\nfunction setEvaluated(gen, props, ps) {\n    Object.keys(ps).forEach((p) => gen.assign((0, codegen_1._) `${props}${(0, codegen_1.getProperty)(p)}`, true));\n}\nexports.setEvaluated = setEvaluated;\nconst snippets = {};\nfunction useFunc(gen, f) {\n    return gen.scopeValue(\"func\", {\n        ref: f,\n        code: snippets[f.code] || (snippets[f.code] = new code_1._Code(f.code)),\n    });\n}\nexports.useFunc = useFunc;\nvar Type;\n(function (Type) {\n    Type[Type[\"Num\"] = 0] = \"Num\";\n    Type[Type[\"Str\"] = 1] = \"Str\";\n})(Type || (exports.Type = Type = {}));\nfunction getErrorPath(dataProp, dataPropType, jsPropertySyntax) {\n    // let path\n    if (dataProp instanceof codegen_1.Name) {\n        const isNumber = dataPropType === Type.Num;\n        return jsPropertySyntax\n            ? isNumber\n                ? (0, codegen_1._) `\"[\" + ${dataProp} + \"]\"`\n                : (0, codegen_1._) `\"['\" + ${dataProp} + \"']\"`\n            : isNumber\n                ? (0, codegen_1._) `\"/\" + ${dataProp}`\n                : (0, codegen_1._) `\"/\" + ${dataProp}.replace(/~/g, \"~0\").replace(/\\\\//g, \"~1\")`; // TODO maybe use global escapePointer\n    }\n    return jsPropertySyntax ? (0, codegen_1.getProperty)(dataProp).toString() : \"/\" + escapeJsonPointer(dataProp);\n}\nexports.getErrorPath = getErrorPath;\nfunction checkStrictMode(it, msg, mode = it.opts.strictSchema) {\n    if (!mode)\n        return;\n    msg = `strict mode: ${msg}`;\n    if (mode === true)\n        throw new Error(msg);\n    it.self.logger.warn(msg);\n}\nexports.checkStrictMode = checkStrictMode;\n//# sourceMappingURL=util.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"./codegen\");\nconst names = {\n    // validation function arguments\n    data: new codegen_1.Name(\"data\"), // data passed to validation function\n    // args passed from referencing schema\n    valCxt: new codegen_1.Name(\"valCxt\"), // validation/data context - should not be used directly, it is destructured to the names below\n    instancePath: new codegen_1.Name(\"instancePath\"),\n    parentData: new codegen_1.Name(\"parentData\"),\n    parentDataProperty: new codegen_1.Name(\"parentDataProperty\"),\n    rootData: new codegen_1.Name(\"rootData\"), // root data - same as the data passed to the first/top validation function\n    dynamicAnchors: new codegen_1.Name(\"dynamicAnchors\"), // used to support recursiveRef and dynamicRef\n    // function scoped variables\n    vErrors: new codegen_1.Name(\"vErrors\"), // null or array of validation errors\n    errors: new codegen_1.Name(\"errors\"), // counter of validation errors\n    this: new codegen_1.Name(\"this\"),\n    // \"globals\"\n    self: new codegen_1.Name(\"self\"),\n    scope: new codegen_1.Name(\"scope\"),\n    // JTD serialize/parse name for JSON string and position\n    json: new codegen_1.Name(\"json\"),\n    jsonPos: new codegen_1.Name(\"jsonPos\"),\n    jsonLen: new codegen_1.Name(\"jsonLen\"),\n    jsonPart: new codegen_1.Name(\"jsonPart\"),\n};\nexports.default = names;\n//# sourceMappingURL=names.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.extendErrors = exports.resetErrorsCount = exports.reportExtraError = exports.reportError = exports.keyword$DataError = exports.keywordError = void 0;\nconst codegen_1 = require(\"./codegen\");\nconst util_1 = require(\"./util\");\nconst names_1 = require(\"./names\");\nexports.keywordError = {\n    message: ({ keyword }) => (0, codegen_1.str) `must pass \"${keyword}\" keyword validation`,\n};\nexports.keyword$DataError = {\n    message: ({ keyword, schemaType }) => schemaType\n        ? (0, codegen_1.str) `\"${keyword}\" keyword must be ${schemaType} ($data)`\n        : (0, codegen_1.str) `\"${keyword}\" keyword is invalid ($data)`,\n};\nfunction reportError(cxt, error = exports.keywordError, errorPaths, overrideAllErrors) {\n    const { it } = cxt;\n    const { gen, compositeRule, allErrors } = it;\n    const errObj = errorObjectCode(cxt, error, errorPaths);\n    if (overrideAllErrors !== null && overrideAllErrors !== void 0 ? overrideAllErrors : (compositeRule || allErrors)) {\n        addError(gen, errObj);\n    }\n    else {\n        returnErrors(it, (0, codegen_1._) `[${errObj}]`);\n    }\n}\nexports.reportError = reportError;\nfunction reportExtraError(cxt, error = exports.keywordError, errorPaths) {\n    const { it } = cxt;\n    const { gen, compositeRule, allErrors } = it;\n    const errObj = errorObjectCode(cxt, error, errorPaths);\n    addError(gen, errObj);\n    if (!(compositeRule || allErrors)) {\n        returnErrors(it, names_1.default.vErrors);\n    }\n}\nexports.reportExtraError = reportExtraError;\nfunction resetErrorsCount(gen, errsCount) {\n    gen.assign(names_1.default.errors, errsCount);\n    gen.if((0, codegen_1._) `${names_1.default.vErrors} !== null`, () => gen.if(errsCount, () => gen.assign((0, codegen_1._) `${names_1.default.vErrors}.length`, errsCount), () => gen.assign(names_1.default.vErrors, null)));\n}\nexports.resetErrorsCount = resetErrorsCount;\nfunction extendErrors({ gen, keyword, schemaValue, data, errsCount, it, }) {\n    /* istanbul ignore if */\n    if (errsCount === undefined)\n        throw new Error(\"ajv implementation error\");\n    const err = gen.name(\"err\");\n    gen.forRange(\"i\", errsCount, names_1.default.errors, (i) => {\n        gen.const(err, (0, codegen_1._) `${names_1.default.vErrors}[${i}]`);\n        gen.if((0, codegen_1._) `${err}.instancePath === undefined`, () => gen.assign((0, codegen_1._) `${err}.instancePath`, (0, codegen_1.strConcat)(names_1.default.instancePath, it.errorPath)));\n        gen.assign((0, codegen_1._) `${err}.schemaPath`, (0, codegen_1.str) `${it.errSchemaPath}/${keyword}`);\n        if (it.opts.verbose) {\n            gen.assign((0, codegen_1._) `${err}.schema`, schemaValue);\n            gen.assign((0, codegen_1._) `${err}.data`, data);\n        }\n    });\n}\nexports.extendErrors = extendErrors;\nfunction addError(gen, errObj) {\n    const err = gen.const(\"err\", errObj);\n    gen.if((0, codegen_1._) `${names_1.default.vErrors} === null`, () => gen.assign(names_1.default.vErrors, (0, codegen_1._) `[${err}]`), (0, codegen_1._) `${names_1.default.vErrors}.push(${err})`);\n    gen.code((0, codegen_1._) `${names_1.default.errors}++`);\n}\nfunction returnErrors(it, errs) {\n    const { gen, validateName, schemaEnv } = it;\n    if (schemaEnv.$async) {\n        gen.throw((0, codegen_1._) `new ${it.ValidationError}(${errs})`);\n    }\n    else {\n        gen.assign((0, codegen_1._) `${validateName}.errors`, errs);\n        gen.return(false);\n    }\n}\nconst E = {\n    keyword: new codegen_1.Name(\"keyword\"),\n    schemaPath: new codegen_1.Name(\"schemaPath\"), // also used in JTD errors\n    params: new codegen_1.Name(\"params\"),\n    propertyName: new codegen_1.Name(\"propertyName\"),\n    message: new codegen_1.Name(\"message\"),\n    schema: new codegen_1.Name(\"schema\"),\n    parentSchema: new codegen_1.Name(\"parentSchema\"),\n};\nfunction errorObjectCode(cxt, error, errorPaths) {\n    const { createErrors } = cxt.it;\n    if (createErrors === false)\n        return (0, codegen_1._) `{}`;\n    return errorObject(cxt, error, errorPaths);\n}\nfunction errorObject(cxt, error, errorPaths = {}) {\n    const { gen, it } = cxt;\n    const keyValues = [\n        errorInstancePath(it, errorPaths),\n        errorSchemaPath(cxt, errorPaths),\n    ];\n    extraErrorProps(cxt, error, keyValues);\n    return gen.object(...keyValues);\n}\nfunction errorInstancePath({ errorPath }, { instancePath }) {\n    const instPath = instancePath\n        ? (0, codegen_1.str) `${errorPath}${(0, util_1.getErrorPath)(instancePath, util_1.Type.Str)}`\n        : errorPath;\n    return [names_1.default.instancePath, (0, codegen_1.strConcat)(names_1.default.instancePath, instPath)];\n}\nfunction errorSchemaPath({ keyword, it: { errSchemaPath } }, { schemaPath, parentSchema }) {\n    let schPath = parentSchema ? errSchemaPath : (0, codegen_1.str) `${errSchemaPath}/${keyword}`;\n    if (schemaPath) {\n        schPath = (0, codegen_1.str) `${schPath}${(0, util_1.getErrorPath)(schemaPath, util_1.Type.Str)}`;\n    }\n    return [E.schemaPath, schPath];\n}\nfunction extraErrorProps(cxt, { params, message }, keyValues) {\n    const { keyword, data, schemaValue, it } = cxt;\n    const { opts, propertyName, topSchemaRef, schemaPath } = it;\n    keyValues.push([E.keyword, keyword], [E.params, typeof params == \"function\" ? params(cxt) : params || (0, codegen_1._) `{}`]);\n    if (opts.messages) {\n        keyValues.push([E.message, typeof message == \"function\" ? message(cxt) : message]);\n    }\n    if (opts.verbose) {\n        keyValues.push([E.schema, schemaValue], [E.parentSchema, (0, codegen_1._) `${topSchemaRef}${schemaPath}`], [names_1.default.data, data]);\n    }\n    if (propertyName)\n        keyValues.push([E.propertyName, propertyName]);\n}\n//# sourceMappingURL=errors.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.boolOrEmptySchema = exports.topBoolOrEmptySchema = void 0;\nconst errors_1 = require(\"../errors\");\nconst codegen_1 = require(\"../codegen\");\nconst names_1 = require(\"../names\");\nconst boolError = {\n    message: \"boolean schema is false\",\n};\nfunction topBoolOrEmptySchema(it) {\n    const { gen, schema, validateName } = it;\n    if (schema === false) {\n        falseSchemaError(it, false);\n    }\n    else if (typeof schema == \"object\" && schema.$async === true) {\n        gen.return(names_1.default.data);\n    }\n    else {\n        gen.assign((0, codegen_1._) `${validateName}.errors`, null);\n        gen.return(true);\n    }\n}\nexports.topBoolOrEmptySchema = topBoolOrEmptySchema;\nfunction boolOrEmptySchema(it, valid) {\n    const { gen, schema } = it;\n    if (schema === false) {\n        gen.var(valid, false); // TODO var\n        falseSchemaError(it);\n    }\n    else {\n        gen.var(valid, true); // TODO var\n    }\n}\nexports.boolOrEmptySchema = boolOrEmptySchema;\nfunction falseSchemaError(it, overrideAllErrors) {\n    const { gen, data } = it;\n    // TODO maybe some other interface should be used for non-keyword validation errors...\n    const cxt = {\n        gen,\n        keyword: \"false schema\",\n        data,\n        schema: false,\n        schemaCode: false,\n        schemaValue: false,\n        params: {},\n        it,\n    };\n    (0, errors_1.reportError)(cxt, boolError, undefined, overrideAllErrors);\n}\n//# sourceMappingURL=boolSchema.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getRules = exports.isJSONType = void 0;\nconst _jsonTypes = [\"string\", \"number\", \"integer\", \"boolean\", \"null\", \"object\", \"array\"];\nconst jsonTypes = new Set(_jsonTypes);\nfunction isJSONType(x) {\n    return typeof x == \"string\" && jsonTypes.has(x);\n}\nexports.isJSONType = isJSONType;\nfunction getRules() {\n    const groups = {\n        number: { type: \"number\", rules: [] },\n        string: { type: \"string\", rules: [] },\n        array: { type: \"array\", rules: [] },\n        object: { type: \"object\", rules: [] },\n    };\n    return {\n        types: { ...groups, integer: true, boolean: true, null: true },\n        rules: [{ rules: [] }, groups.number, groups.string, groups.array, groups.object],\n        post: { rules: [] },\n        all: {},\n        keywords: {},\n    };\n}\nexports.getRules = getRules;\n//# sourceMappingURL=rules.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.shouldUseRule = exports.shouldUseGroup = exports.schemaHasRulesForType = void 0;\nfunction schemaHasRulesForType({ schema, self }, type) {\n    const group = self.RULES.types[type];\n    return group && group !== true && shouldUseGroup(schema, group);\n}\nexports.schemaHasRulesForType = schemaHasRulesForType;\nfunction shouldUseGroup(schema, group) {\n    return group.rules.some((rule) => shouldUseRule(schema, rule));\n}\nexports.shouldUseGroup = shouldUseGroup;\nfunction shouldUseRule(schema, rule) {\n    var _a;\n    return (schema[rule.keyword] !== undefined ||\n        ((_a = rule.definition.implements) === null || _a === void 0 ? void 0 : _a.some((kwd) => schema[kwd] !== undefined)));\n}\nexports.shouldUseRule = shouldUseRule;\n//# sourceMappingURL=applicability.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.reportTypeError = exports.checkDataTypes = exports.checkDataType = exports.coerceAndCheckDataType = exports.getJSONTypes = exports.getSchemaTypes = exports.DataType = void 0;\nconst rules_1 = require(\"../rules\");\nconst applicability_1 = require(\"./applicability\");\nconst errors_1 = require(\"../errors\");\nconst codegen_1 = require(\"../codegen\");\nconst util_1 = require(\"../util\");\nvar DataType;\n(function (DataType) {\n    DataType[DataType[\"Correct\"] = 0] = \"Correct\";\n    DataType[DataType[\"Wrong\"] = 1] = \"Wrong\";\n})(DataType || (exports.DataType = DataType = {}));\nfunction getSchemaTypes(schema) {\n    const types = getJSONTypes(schema.type);\n    const hasNull = types.includes(\"null\");\n    if (hasNull) {\n        if (schema.nullable === false)\n            throw new Error(\"type: null contradicts nullable: false\");\n    }\n    else {\n        if (!types.length && schema.nullable !== undefined) {\n            throw new Error('\"nullable\" cannot be used without \"type\"');\n        }\n        if (schema.nullable === true)\n            types.push(\"null\");\n    }\n    return types;\n}\nexports.getSchemaTypes = getSchemaTypes;\n// eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\nfunction getJSONTypes(ts) {\n    const types = Array.isArray(ts) ? ts : ts ? [ts] : [];\n    if (types.every(rules_1.isJSONType))\n        return types;\n    throw new Error(\"type must be JSONType or JSONType[]: \" + types.join(\",\"));\n}\nexports.getJSONTypes = getJSONTypes;\nfunction coerceAndCheckDataType(it, types) {\n    const { gen, data, opts } = it;\n    const coerceTo = coerceToTypes(types, opts.coerceTypes);\n    const checkTypes = types.length > 0 &&\n        !(coerceTo.length === 0 && types.length === 1 && (0, applicability_1.schemaHasRulesForType)(it, types[0]));\n    if (checkTypes) {\n        const wrongType = checkDataTypes(types, data, opts.strictNumbers, DataType.Wrong);\n        gen.if(wrongType, () => {\n            if (coerceTo.length)\n                coerceData(it, types, coerceTo);\n            else\n                reportTypeError(it);\n        });\n    }\n    return checkTypes;\n}\nexports.coerceAndCheckDataType = coerceAndCheckDataType;\nconst COERCIBLE = new Set([\"string\", \"number\", \"integer\", \"boolean\", \"null\"]);\nfunction coerceToTypes(types, coerceTypes) {\n    return coerceTypes\n        ? types.filter((t) => COERCIBLE.has(t) || (coerceTypes === \"array\" && t === \"array\"))\n        : [];\n}\nfunction coerceData(it, types, coerceTo) {\n    const { gen, data, opts } = it;\n    const dataType = gen.let(\"dataType\", (0, codegen_1._) `typeof ${data}`);\n    const coerced = gen.let(\"coerced\", (0, codegen_1._) `undefined`);\n    if (opts.coerceTypes === \"array\") {\n        gen.if((0, codegen_1._) `${dataType} == 'object' && Array.isArray(${data}) && ${data}.length == 1`, () => gen\n            .assign(data, (0, codegen_1._) `${data}[0]`)\n            .assign(dataType, (0, codegen_1._) `typeof ${data}`)\n            .if(checkDataTypes(types, data, opts.strictNumbers), () => gen.assign(coerced, data)));\n    }\n    gen.if((0, codegen_1._) `${coerced} !== undefined`);\n    for (const t of coerceTo) {\n        if (COERCIBLE.has(t) || (t === \"array\" && opts.coerceTypes === \"array\")) {\n            coerceSpecificType(t);\n        }\n    }\n    gen.else();\n    reportTypeError(it);\n    gen.endIf();\n    gen.if((0, codegen_1._) `${coerced} !== undefined`, () => {\n        gen.assign(data, coerced);\n        assignParentData(it, coerced);\n    });\n    function coerceSpecificType(t) {\n        switch (t) {\n            case \"string\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} == \"number\" || ${dataType} == \"boolean\"`)\n                    .assign(coerced, (0, codegen_1._) `\"\" + ${data}`)\n                    .elseIf((0, codegen_1._) `${data} === null`)\n                    .assign(coerced, (0, codegen_1._) `\"\"`);\n                return;\n            case \"number\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} == \"boolean\" || ${data} === null\n              || (${dataType} == \"string\" && ${data} && ${data} == +${data})`)\n                    .assign(coerced, (0, codegen_1._) `+${data}`);\n                return;\n            case \"integer\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} === \"boolean\" || ${data} === null\n              || (${dataType} === \"string\" && ${data} && ${data} == +${data} && !(${data} % 1))`)\n                    .assign(coerced, (0, codegen_1._) `+${data}`);\n                return;\n            case \"boolean\":\n                gen\n                    .elseIf((0, codegen_1._) `${data} === \"false\" || ${data} === 0 || ${data} === null`)\n                    .assign(coerced, false)\n                    .elseIf((0, codegen_1._) `${data} === \"true\" || ${data} === 1`)\n                    .assign(coerced, true);\n                return;\n            case \"null\":\n                gen.elseIf((0, codegen_1._) `${data} === \"\" || ${data} === 0 || ${data} === false`);\n                gen.assign(coerced, null);\n                return;\n            case \"array\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} === \"string\" || ${dataType} === \"number\"\n              || ${dataType} === \"boolean\" || ${data} === null`)\n                    .assign(coerced, (0, codegen_1._) `[${data}]`);\n        }\n    }\n}\nfunction assignParentData({ gen, parentData, parentDataProperty }, expr) {\n    // TODO use gen.property\n    gen.if((0, codegen_1._) `${parentData} !== undefined`, () => gen.assign((0, codegen_1._) `${parentData}[${parentDataProperty}]`, expr));\n}\nfunction checkDataType(dataType, data, strictNums, correct = DataType.Correct) {\n    const EQ = correct === DataType.Correct ? codegen_1.operators.EQ : codegen_1.operators.NEQ;\n    let cond;\n    switch (dataType) {\n        case \"null\":\n            return (0, codegen_1._) `${data} ${EQ} null`;\n        case \"array\":\n            cond = (0, codegen_1._) `Array.isArray(${data})`;\n            break;\n        case \"object\":\n            cond = (0, codegen_1._) `${data} && typeof ${data} == \"object\" && !Array.isArray(${data})`;\n            break;\n        case \"integer\":\n            cond = numCond((0, codegen_1._) `!(${data} % 1) && !isNaN(${data})`);\n            break;\n        case \"number\":\n            cond = numCond();\n            break;\n        default:\n            return (0, codegen_1._) `typeof ${data} ${EQ} ${dataType}`;\n    }\n    return correct === DataType.Correct ? cond : (0, codegen_1.not)(cond);\n    function numCond(_cond = codegen_1.nil) {\n        return (0, codegen_1.and)((0, codegen_1._) `typeof ${data} == \"number\"`, _cond, strictNums ? (0, codegen_1._) `isFinite(${data})` : codegen_1.nil);\n    }\n}\nexports.checkDataType = checkDataType;\nfunction checkDataTypes(dataTypes, data, strictNums, correct) {\n    if (dataTypes.length === 1) {\n        return checkDataType(dataTypes[0], data, strictNums, correct);\n    }\n    let cond;\n    const types = (0, util_1.toHash)(dataTypes);\n    if (types.array && types.object) {\n        const notObj = (0, codegen_1._) `typeof ${data} != \"object\"`;\n        cond = types.null ? notObj : (0, codegen_1._) `!${data} || ${notObj}`;\n        delete types.null;\n        delete types.array;\n        delete types.object;\n    }\n    else {\n        cond = codegen_1.nil;\n    }\n    if (types.number)\n        delete types.integer;\n    for (const t in types)\n        cond = (0, codegen_1.and)(cond, checkDataType(t, data, strictNums, correct));\n    return cond;\n}\nexports.checkDataTypes = checkDataTypes;\nconst typeError = {\n    message: ({ schema }) => `must be ${schema}`,\n    params: ({ schema, schemaValue }) => typeof schema == \"string\" ? (0, codegen_1._) `{type: ${schema}}` : (0, codegen_1._) `{type: ${schemaValue}}`,\n};\nfunction reportTypeError(it) {\n    const cxt = getTypeErrorContext(it);\n    (0, errors_1.reportError)(cxt, typeError);\n}\nexports.reportTypeError = reportTypeError;\nfunction getTypeErrorContext(it) {\n    const { gen, data, schema } = it;\n    const schemaCode = (0, util_1.schemaRefOrVal)(it, schema, \"type\");\n    return {\n        gen,\n        keyword: \"type\",\n        data,\n        schema: schema.type,\n        schemaCode,\n        schemaValue: schemaCode,\n        parentSchema: schema,\n        params: {},\n        it,\n    };\n}\n//# sourceMappingURL=dataType.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.assignDefaults = void 0;\nconst codegen_1 = require(\"../codegen\");\nconst util_1 = require(\"../util\");\nfunction assignDefaults(it, ty) {\n    const { properties, items } = it.schema;\n    if (ty === \"object\" && properties) {\n        for (const key in properties) {\n            assignDefault(it, key, properties[key].default);\n        }\n    }\n    else if (ty === \"array\" && Array.isArray(items)) {\n        items.forEach((sch, i) => assignDefault(it, i, sch.default));\n    }\n}\nexports.assignDefaults = assignDefaults;\nfunction assignDefault(it, prop, defaultValue) {\n    const { gen, compositeRule, data, opts } = it;\n    if (defaultValue === undefined)\n        return;\n    const childData = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(prop)}`;\n    if (compositeRule) {\n        (0, util_1.checkStrictMode)(it, `default is ignored for: ${childData}`);\n        return;\n    }\n    let condition = (0, codegen_1._) `${childData} === undefined`;\n    if (opts.useDefaults === \"empty\") {\n        condition = (0, codegen_1._) `${condition} || ${childData} === null || ${childData} === \"\"`;\n    }\n    // `${childData} === undefined` +\n    // (opts.useDefaults === \"empty\" ? ` || ${childData} === null || ${childData} === \"\"` : \"\")\n    gen.if(condition, (0, codegen_1._) `${childData} = ${(0, codegen_1.stringify)(defaultValue)}`);\n}\n//# sourceMappingURL=defaults.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateUnion = exports.validateArray = exports.usePattern = exports.callValidateCode = exports.schemaProperties = exports.allSchemaProperties = exports.noPropertyInData = exports.propertyInData = exports.isOwnProperty = exports.hasPropFunc = exports.reportMissingProp = exports.checkMissingProp = exports.checkReportMissingProp = void 0;\nconst codegen_1 = require(\"../compile/codegen\");\nconst util_1 = require(\"../compile/util\");\nconst names_1 = require(\"../compile/names\");\nconst util_2 = require(\"../compile/util\");\nfunction checkReportMissingProp(cxt, prop) {\n    const { gen, data, it } = cxt;\n    gen.if(noPropertyInData(gen, data, prop, it.opts.ownProperties), () => {\n        cxt.setParams({ missingProperty: (0, codegen_1._) `${prop}` }, true);\n        cxt.error();\n    });\n}\nexports.checkReportMissingProp = checkReportMissingProp;\nfunction checkMissingProp({ gen, data, it: { opts } }, properties, missing) {\n    return (0, codegen_1.or)(...properties.map((prop) => (0, codegen_1.and)(noPropertyInData(gen, data, prop, opts.ownProperties), (0, codegen_1._) `${missing} = ${prop}`)));\n}\nexports.checkMissingProp = checkMissingProp;\nfunction reportMissingProp(cxt, missing) {\n    cxt.setParams({ missingProperty: missing }, true);\n    cxt.error();\n}\nexports.reportMissingProp = reportMissingProp;\nfunction hasPropFunc(gen) {\n    return gen.scopeValue(\"func\", {\n        // eslint-disable-next-line @typescript-eslint/unbound-method\n        ref: Object.prototype.hasOwnProperty,\n        code: (0, codegen_1._) `Object.prototype.hasOwnProperty`,\n    });\n}\nexports.hasPropFunc = hasPropFunc;\nfunction isOwnProperty(gen, data, property) {\n    return (0, codegen_1._) `${hasPropFunc(gen)}.call(${data}, ${property})`;\n}\nexports.isOwnProperty = isOwnProperty;\nfunction propertyInData(gen, data, property, ownProperties) {\n    const cond = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(property)} !== undefined`;\n    return ownProperties ? (0, codegen_1._) `${cond} && ${isOwnProperty(gen, data, property)}` : cond;\n}\nexports.propertyInData = propertyInData;\nfunction noPropertyInData(gen, data, property, ownProperties) {\n    const cond = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(property)} === undefined`;\n    return ownProperties ? (0, codegen_1.or)(cond, (0, codegen_1.not)(isOwnProperty(gen, data, property))) : cond;\n}\nexports.noPropertyInData = noPropertyInData;\nfunction allSchemaProperties(schemaMap) {\n    return schemaMap ? Object.keys(schemaMap).filter((p) => p !== \"__proto__\") : [];\n}\nexports.allSchemaProperties = allSchemaProperties;\nfunction schemaProperties(it, schemaMap) {\n    return allSchemaProperties(schemaMap).filter((p) => !(0, util_1.alwaysValidSchema)(it, schemaMap[p]));\n}\nexports.schemaProperties = schemaProperties;\nfunction callValidateCode({ schemaCode, data, it: { gen, topSchemaRef, schemaPath, errorPath }, it }, func, context, passSchema) {\n    const dataAndSchema = passSchema ? (0, codegen_1._) `${schemaCode}, ${data}, ${topSchemaRef}${schemaPath}` : data;\n    const valCxt = [\n        [names_1.default.instancePath, (0, codegen_1.strConcat)(names_1.default.instancePath, errorPath)],\n        [names_1.default.parentData, it.parentData],\n        [names_1.default.parentDataProperty, it.parentDataProperty],\n        [names_1.default.rootData, names_1.default.rootData],\n    ];\n    if (it.opts.dynamicRef)\n        valCxt.push([names_1.default.dynamicAnchors, names_1.default.dynamicAnchors]);\n    const args = (0, codegen_1._) `${dataAndSchema}, ${gen.object(...valCxt)}`;\n    return context !== codegen_1.nil ? (0, codegen_1._) `${func}.call(${context}, ${args})` : (0, codegen_1._) `${func}(${args})`;\n}\nexports.callValidateCode = callValidateCode;\nconst newRegExp = (0, codegen_1._) `new RegExp`;\nfunction usePattern({ gen, it: { opts } }, pattern) {\n    const u = opts.unicodeRegExp ? \"u\" : \"\";\n    const { regExp } = opts.code;\n    const rx = regExp(pattern, u);\n    return gen.scopeValue(\"pattern\", {\n        key: rx.toString(),\n        ref: rx,\n        code: (0, codegen_1._) `${regExp.code === \"new RegExp\" ? newRegExp : (0, util_2.useFunc)(gen, regExp)}(${pattern}, ${u})`,\n    });\n}\nexports.usePattern = usePattern;\nfunction validateArray(cxt) {\n    const { gen, data, keyword, it } = cxt;\n    const valid = gen.name(\"valid\");\n    if (it.allErrors) {\n        const validArr = gen.let(\"valid\", true);\n        validateItems(() => gen.assign(validArr, false));\n        return validArr;\n    }\n    gen.var(valid, true);\n    validateItems(() => gen.break());\n    return valid;\n    function validateItems(notValid) {\n        const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n        gen.forRange(\"i\", 0, len, (i) => {\n            cxt.subschema({\n                keyword,\n                dataProp: i,\n                dataPropType: util_1.Type.Num,\n            }, valid);\n            gen.if((0, codegen_1.not)(valid), notValid);\n        });\n    }\n}\nexports.validateArray = validateArray;\nfunction validateUnion(cxt) {\n    const { gen, schema, keyword, it } = cxt;\n    /* istanbul ignore if */\n    if (!Array.isArray(schema))\n        throw new Error(\"ajv implementation error\");\n    const alwaysValid = schema.some((sch) => (0, util_1.alwaysValidSchema)(it, sch));\n    if (alwaysValid && !it.opts.unevaluated)\n        return;\n    const valid = gen.let(\"valid\", false);\n    const schValid = gen.name(\"_valid\");\n    gen.block(() => schema.forEach((_sch, i) => {\n        const schCxt = cxt.subschema({\n            keyword,\n            schemaProp: i,\n            compositeRule: true,\n        }, schValid);\n        gen.assign(valid, (0, codegen_1._) `${valid} || ${schValid}`);\n        const merged = cxt.mergeValidEvaluated(schCxt, schValid);\n        // can short-circuit if `unevaluatedProperties/Items` not supported (opts.unevaluated !== true)\n        // or if all properties and items were evaluated (it.props === true && it.items === true)\n        if (!merged)\n            gen.if((0, codegen_1.not)(valid));\n    }));\n    cxt.result(valid, () => cxt.reset(), () => cxt.error(true));\n}\nexports.validateUnion = validateUnion;\n//# sourceMappingURL=code.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateKeywordUsage = exports.validSchemaType = exports.funcKeywordCode = exports.macroKeywordCode = void 0;\nconst codegen_1 = require(\"../codegen\");\nconst names_1 = require(\"../names\");\nconst code_1 = require(\"../../vocabularies/code\");\nconst errors_1 = require(\"../errors\");\nfunction macroKeywordCode(cxt, def) {\n    const { gen, keyword, schema, parentSchema, it } = cxt;\n    const macroSchema = def.macro.call(it.self, schema, parentSchema, it);\n    const schemaRef = useKeyword(gen, keyword, macroSchema);\n    if (it.opts.validateSchema !== false)\n        it.self.validateSchema(macroSchema, true);\n    const valid = gen.name(\"valid\");\n    cxt.subschema({\n        schema: macroSchema,\n        schemaPath: codegen_1.nil,\n        errSchemaPath: `${it.errSchemaPath}/${keyword}`,\n        topSchemaRef: schemaRef,\n        compositeRule: true,\n    }, valid);\n    cxt.pass(valid, () => cxt.error(true));\n}\nexports.macroKeywordCode = macroKeywordCode;\nfunction funcKeywordCode(cxt, def) {\n    var _a;\n    const { gen, keyword, schema, parentSchema, $data, it } = cxt;\n    checkAsyncKeyword(it, def);\n    const validate = !$data && def.compile ? def.compile.call(it.self, schema, parentSchema, it) : def.validate;\n    const validateRef = useKeyword(gen, keyword, validate);\n    const valid = gen.let(\"valid\");\n    cxt.block$data(valid, validateKeyword);\n    cxt.ok((_a = def.valid) !== null && _a !== void 0 ? _a : valid);\n    function validateKeyword() {\n        if (def.errors === false) {\n            assignValid();\n            if (def.modifying)\n                modifyData(cxt);\n            reportErrs(() => cxt.error());\n        }\n        else {\n            const ruleErrs = def.async ? validateAsync() : validateSync();\n            if (def.modifying)\n                modifyData(cxt);\n            reportErrs(() => addErrs(cxt, ruleErrs));\n        }\n    }\n    function validateAsync() {\n        const ruleErrs = gen.let(\"ruleErrs\", null);\n        gen.try(() => assignValid((0, codegen_1._) `await `), (e) => gen.assign(valid, false).if((0, codegen_1._) `${e} instanceof ${it.ValidationError}`, () => gen.assign(ruleErrs, (0, codegen_1._) `${e}.errors`), () => gen.throw(e)));\n        return ruleErrs;\n    }\n    function validateSync() {\n        const validateErrs = (0, codegen_1._) `${validateRef}.errors`;\n        gen.assign(validateErrs, null);\n        assignValid(codegen_1.nil);\n        return validateErrs;\n    }\n    function assignValid(_await = def.async ? (0, codegen_1._) `await ` : codegen_1.nil) {\n        const passCxt = it.opts.passContext ? names_1.default.this : names_1.default.self;\n        const passSchema = !((\"compile\" in def && !$data) || def.schema === false);\n        gen.assign(valid, (0, codegen_1._) `${_await}${(0, code_1.callValidateCode)(cxt, validateRef, passCxt, passSchema)}`, def.modifying);\n    }\n    function reportErrs(errors) {\n        var _a;\n        gen.if((0, codegen_1.not)((_a = def.valid) !== null && _a !== void 0 ? _a : valid), errors);\n    }\n}\nexports.funcKeywordCode = funcKeywordCode;\nfunction modifyData(cxt) {\n    const { gen, data, it } = cxt;\n    gen.if(it.parentData, () => gen.assign(data, (0, codegen_1._) `${it.parentData}[${it.parentDataProperty}]`));\n}\nfunction addErrs(cxt, errs) {\n    const { gen } = cxt;\n    gen.if((0, codegen_1._) `Array.isArray(${errs})`, () => {\n        gen\n            .assign(names_1.default.vErrors, (0, codegen_1._) `${names_1.default.vErrors} === null ? ${errs} : ${names_1.default.vErrors}.concat(${errs})`)\n            .assign(names_1.default.errors, (0, codegen_1._) `${names_1.default.vErrors}.length`);\n        (0, errors_1.extendErrors)(cxt);\n    }, () => cxt.error());\n}\nfunction checkAsyncKeyword({ schemaEnv }, def) {\n    if (def.async && !schemaEnv.$async)\n        throw new Error(\"async keyword in sync schema\");\n}\nfunction useKeyword(gen, keyword, result) {\n    if (result === undefined)\n        throw new Error(`keyword \"${keyword}\" failed to compile`);\n    return gen.scopeValue(\"keyword\", typeof result == \"function\" ? { ref: result } : { ref: result, code: (0, codegen_1.stringify)(result) });\n}\nfunction validSchemaType(schema, schemaType, allowUndefined = false) {\n    // TODO add tests\n    return (!schemaType.length ||\n        schemaType.some((st) => st === \"array\"\n            ? Array.isArray(schema)\n            : st === \"object\"\n                ? schema && typeof schema == \"object\" && !Array.isArray(schema)\n                : typeof schema == st || (allowUndefined && typeof schema == \"undefined\")));\n}\nexports.validSchemaType = validSchemaType;\nfunction validateKeywordUsage({ schema, opts, self, errSchemaPath }, def, keyword) {\n    /* istanbul ignore if */\n    if (Array.isArray(def.keyword) ? !def.keyword.includes(keyword) : def.keyword !== keyword) {\n        throw new Error(\"ajv implementation error\");\n    }\n    const deps = def.dependencies;\n    if (deps === null || deps === void 0 ? void 0 : deps.some((kwd) => !Object.prototype.hasOwnProperty.call(schema, kwd))) {\n        throw new Error(`parent schema must have dependencies of ${keyword}: ${deps.join(\",\")}`);\n    }\n    if (def.validateSchema) {\n        const valid = def.validateSchema(schema[keyword]);\n        if (!valid) {\n            const msg = `keyword \"${keyword}\" value is invalid at path \"${errSchemaPath}\": ` +\n                self.errorsText(def.validateSchema.errors);\n            if (opts.validateSchema === \"log\")\n                self.logger.error(msg);\n            else\n                throw new Error(msg);\n        }\n    }\n}\nexports.validateKeywordUsage = validateKeywordUsage;\n//# sourceMappingURL=keyword.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.extendSubschemaMode = exports.extendSubschemaData = exports.getSubschema = void 0;\nconst codegen_1 = require(\"../codegen\");\nconst util_1 = require(\"../util\");\nfunction getSubschema(it, { keyword, schemaProp, schema, schemaPath, errSchemaPath, topSchemaRef }) {\n    if (keyword !== undefined && schema !== undefined) {\n        throw new Error('both \"keyword\" and \"schema\" passed, only one allowed');\n    }\n    if (keyword !== undefined) {\n        const sch = it.schema[keyword];\n        return schemaProp === undefined\n            ? {\n                schema: sch,\n                schemaPath: (0, codegen_1._) `${it.schemaPath}${(0, codegen_1.getProperty)(keyword)}`,\n                errSchemaPath: `${it.errSchemaPath}/${keyword}`,\n            }\n            : {\n                schema: sch[schemaProp],\n                schemaPath: (0, codegen_1._) `${it.schemaPath}${(0, codegen_1.getProperty)(keyword)}${(0, codegen_1.getProperty)(schemaProp)}`,\n                errSchemaPath: `${it.errSchemaPath}/${keyword}/${(0, util_1.escapeFragment)(schemaProp)}`,\n            };\n    }\n    if (schema !== undefined) {\n        if (schemaPath === undefined || errSchemaPath === undefined || topSchemaRef === undefined) {\n            throw new Error('\"schemaPath\", \"errSchemaPath\" and \"topSchemaRef\" are required with \"schema\"');\n        }\n        return {\n            schema,\n            schemaPath,\n            topSchemaRef,\n            errSchemaPath,\n        };\n    }\n    throw new Error('either \"keyword\" or \"schema\" must be passed');\n}\nexports.getSubschema = getSubschema;\nfunction extendSubschemaData(subschema, it, { dataProp, dataPropType: dpType, data, dataTypes, propertyName }) {\n    if (data !== undefined && dataProp !== undefined) {\n        throw new Error('both \"data\" and \"dataProp\" passed, only one allowed');\n    }\n    const { gen } = it;\n    if (dataProp !== undefined) {\n        const { errorPath, dataPathArr, opts } = it;\n        const nextData = gen.let(\"data\", (0, codegen_1._) `${it.data}${(0, codegen_1.getProperty)(dataProp)}`, true);\n        dataContextProps(nextData);\n        subschema.errorPath = (0, codegen_1.str) `${errorPath}${(0, util_1.getErrorPath)(dataProp, dpType, opts.jsPropertySyntax)}`;\n        subschema.parentDataProperty = (0, codegen_1._) `${dataProp}`;\n        subschema.dataPathArr = [...dataPathArr, subschema.parentDataProperty];\n    }\n    if (data !== undefined) {\n        const nextData = data instanceof codegen_1.Name ? data : gen.let(\"data\", data, true); // replaceable if used once?\n        dataContextProps(nextData);\n        if (propertyName !== undefined)\n            subschema.propertyName = propertyName;\n        // TODO something is possibly wrong here with not changing parentDataProperty and not appending dataPathArr\n    }\n    if (dataTypes)\n        subschema.dataTypes = dataTypes;\n    function dataContextProps(_nextData) {\n        subschema.data = _nextData;\n        subschema.dataLevel = it.dataLevel + 1;\n        subschema.dataTypes = [];\n        it.definedProperties = new Set();\n        subschema.parentData = it.data;\n        subschema.dataNames = [...it.dataNames, _nextData];\n    }\n}\nexports.extendSubschemaData = extendSubschemaData;\nfunction extendSubschemaMode(subschema, { jtdDiscriminator, jtdMetadata, compositeRule, createErrors, allErrors }) {\n    if (compositeRule !== undefined)\n        subschema.compositeRule = compositeRule;\n    if (createErrors !== undefined)\n        subschema.createErrors = createErrors;\n    if (allErrors !== undefined)\n        subschema.allErrors = allErrors;\n    subschema.jtdDiscriminator = jtdDiscriminator; // not inherited\n    subschema.jtdMetadata = jtdMetadata; // not inherited\n}\nexports.extendSubschemaMode = extendSubschemaMode;\n//# sourceMappingURL=subschema.js.map","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","'use strict';\n\nvar traverse = module.exports = function (schema, opts, cb) {\n  // Legacy support for v0.3.1 and earlier.\n  if (typeof opts == 'function') {\n    cb = opts;\n    opts = {};\n  }\n\n  cb = opts.cb || cb;\n  var pre = (typeof cb == 'function') ? cb : cb.pre || function() {};\n  var post = cb.post || function() {};\n\n  _traverse(opts, pre, post, schema, '', schema);\n};\n\n\ntraverse.keywords = {\n  additionalItems: true,\n  items: true,\n  contains: true,\n  additionalProperties: true,\n  propertyNames: true,\n  not: true,\n  if: true,\n  then: true,\n  else: true\n};\n\ntraverse.arrayKeywords = {\n  items: true,\n  allOf: true,\n  anyOf: true,\n  oneOf: true\n};\n\ntraverse.propsKeywords = {\n  $defs: true,\n  definitions: true,\n  properties: true,\n  patternProperties: true,\n  dependencies: true\n};\n\ntraverse.skipKeywords = {\n  default: true,\n  enum: true,\n  const: true,\n  required: true,\n  maximum: true,\n  minimum: true,\n  exclusiveMaximum: true,\n  exclusiveMinimum: true,\n  multipleOf: true,\n  maxLength: true,\n  minLength: true,\n  pattern: true,\n  format: true,\n  maxItems: true,\n  minItems: true,\n  uniqueItems: true,\n  maxProperties: true,\n  minProperties: true\n};\n\n\nfunction _traverse(opts, pre, post, schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\n  if (schema && typeof schema == 'object' && !Array.isArray(schema)) {\n    pre(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n    for (var key in schema) {\n      var sch = schema[key];\n      if (Array.isArray(sch)) {\n        if (key in traverse.arrayKeywords) {\n          for (var i=0; i<sch.length; i++)\n            _traverse(opts, pre, post, sch[i], jsonPtr + '/' + key + '/' + i, rootSchema, jsonPtr, key, schema, i);\n        }\n      } else if (key in traverse.propsKeywords) {\n        if (sch && typeof sch == 'object') {\n          for (var prop in sch)\n            _traverse(opts, pre, post, sch[prop], jsonPtr + '/' + key + '/' + escapeJsonPtr(prop), rootSchema, jsonPtr, key, schema, prop);\n        }\n      } else if (key in traverse.keywords || (opts.allKeys && !(key in traverse.skipKeywords))) {\n        _traverse(opts, pre, post, sch, jsonPtr + '/' + key, rootSchema, jsonPtr, key, schema);\n      }\n    }\n    post(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n  }\n}\n\n\nfunction escapeJsonPtr(str) {\n  return str.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getSchemaRefs = exports.resolveUrl = exports.normalizeId = exports._getFullPath = exports.getFullPath = exports.inlineRef = void 0;\nconst util_1 = require(\"./util\");\nconst equal = require(\"fast-deep-equal\");\nconst traverse = require(\"json-schema-traverse\");\n// TODO refactor to use keyword definitions\nconst SIMPLE_INLINED = new Set([\n    \"type\",\n    \"format\",\n    \"pattern\",\n    \"maxLength\",\n    \"minLength\",\n    \"maxProperties\",\n    \"minProperties\",\n    \"maxItems\",\n    \"minItems\",\n    \"maximum\",\n    \"minimum\",\n    \"uniqueItems\",\n    \"multipleOf\",\n    \"required\",\n    \"enum\",\n    \"const\",\n]);\nfunction inlineRef(schema, limit = true) {\n    if (typeof schema == \"boolean\")\n        return true;\n    if (limit === true)\n        return !hasRef(schema);\n    if (!limit)\n        return false;\n    return countKeys(schema) <= limit;\n}\nexports.inlineRef = inlineRef;\nconst REF_KEYWORDS = new Set([\n    \"$ref\",\n    \"$recursiveRef\",\n    \"$recursiveAnchor\",\n    \"$dynamicRef\",\n    \"$dynamicAnchor\",\n]);\nfunction hasRef(schema) {\n    for (const key in schema) {\n        if (REF_KEYWORDS.has(key))\n            return true;\n        const sch = schema[key];\n        if (Array.isArray(sch) && sch.some(hasRef))\n            return true;\n        if (typeof sch == \"object\" && hasRef(sch))\n            return true;\n    }\n    return false;\n}\nfunction countKeys(schema) {\n    let count = 0;\n    for (const key in schema) {\n        if (key === \"$ref\")\n            return Infinity;\n        count++;\n        if (SIMPLE_INLINED.has(key))\n            continue;\n        if (typeof schema[key] == \"object\") {\n            (0, util_1.eachItem)(schema[key], (sch) => (count += countKeys(sch)));\n        }\n        if (count === Infinity)\n            return Infinity;\n    }\n    return count;\n}\nfunction getFullPath(resolver, id = \"\", normalize) {\n    if (normalize !== false)\n        id = normalizeId(id);\n    const p = resolver.parse(id);\n    return _getFullPath(resolver, p);\n}\nexports.getFullPath = getFullPath;\nfunction _getFullPath(resolver, p) {\n    const serialized = resolver.serialize(p);\n    return serialized.split(\"#\")[0] + \"#\";\n}\nexports._getFullPath = _getFullPath;\nconst TRAILING_SLASH_HASH = /#\\/?$/;\nfunction normalizeId(id) {\n    return id ? id.replace(TRAILING_SLASH_HASH, \"\") : \"\";\n}\nexports.normalizeId = normalizeId;\nfunction resolveUrl(resolver, baseId, id) {\n    id = normalizeId(id);\n    return resolver.resolve(baseId, id);\n}\nexports.resolveUrl = resolveUrl;\nconst ANCHOR = /^[a-z_][-a-z0-9._]*$/i;\nfunction getSchemaRefs(schema, baseId) {\n    if (typeof schema == \"boolean\")\n        return {};\n    const { schemaId, uriResolver } = this.opts;\n    const schId = normalizeId(schema[schemaId] || baseId);\n    const baseIds = { \"\": schId };\n    const pathPrefix = getFullPath(uriResolver, schId, false);\n    const localRefs = {};\n    const schemaRefs = new Set();\n    traverse(schema, { allKeys: true }, (sch, jsonPtr, _, parentJsonPtr) => {\n        if (parentJsonPtr === undefined)\n            return;\n        const fullPath = pathPrefix + jsonPtr;\n        let innerBaseId = baseIds[parentJsonPtr];\n        if (typeof sch[schemaId] == \"string\")\n            innerBaseId = addRef.call(this, sch[schemaId]);\n        addAnchor.call(this, sch.$anchor);\n        addAnchor.call(this, sch.$dynamicAnchor);\n        baseIds[jsonPtr] = innerBaseId;\n        function addRef(ref) {\n            // eslint-disable-next-line @typescript-eslint/unbound-method\n            const _resolve = this.opts.uriResolver.resolve;\n            ref = normalizeId(innerBaseId ? _resolve(innerBaseId, ref) : ref);\n            if (schemaRefs.has(ref))\n                throw ambiguos(ref);\n            schemaRefs.add(ref);\n            let schOrRef = this.refs[ref];\n            if (typeof schOrRef == \"string\")\n                schOrRef = this.refs[schOrRef];\n            if (typeof schOrRef == \"object\") {\n                checkAmbiguosRef(sch, schOrRef.schema, ref);\n            }\n            else if (ref !== normalizeId(fullPath)) {\n                if (ref[0] === \"#\") {\n                    checkAmbiguosRef(sch, localRefs[ref], ref);\n                    localRefs[ref] = sch;\n                }\n                else {\n                    this.refs[ref] = fullPath;\n                }\n            }\n            return ref;\n        }\n        function addAnchor(anchor) {\n            if (typeof anchor == \"string\") {\n                if (!ANCHOR.test(anchor))\n                    throw new Error(`invalid anchor \"${anchor}\"`);\n                addRef.call(this, `#${anchor}`);\n            }\n        }\n    });\n    return localRefs;\n    function checkAmbiguosRef(sch1, sch2, ref) {\n        if (sch2 !== undefined && !equal(sch1, sch2))\n            throw ambiguos(ref);\n    }\n    function ambiguos(ref) {\n        return new Error(`reference \"${ref}\" resolves to more than one schema`);\n    }\n}\nexports.getSchemaRefs = getSchemaRefs;\n//# sourceMappingURL=resolve.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getData = exports.KeywordCxt = exports.validateFunctionCode = void 0;\nconst boolSchema_1 = require(\"./boolSchema\");\nconst dataType_1 = require(\"./dataType\");\nconst applicability_1 = require(\"./applicability\");\nconst dataType_2 = require(\"./dataType\");\nconst defaults_1 = require(\"./defaults\");\nconst keyword_1 = require(\"./keyword\");\nconst subschema_1 = require(\"./subschema\");\nconst codegen_1 = require(\"../codegen\");\nconst names_1 = require(\"../names\");\nconst resolve_1 = require(\"../resolve\");\nconst util_1 = require(\"../util\");\nconst errors_1 = require(\"../errors\");\n// schema compilation - generates validation function, subschemaCode (below) is used for subschemas\nfunction validateFunctionCode(it) {\n    if (isSchemaObj(it)) {\n        checkKeywords(it);\n        if (schemaCxtHasRules(it)) {\n            topSchemaObjCode(it);\n            return;\n        }\n    }\n    validateFunction(it, () => (0, boolSchema_1.topBoolOrEmptySchema)(it));\n}\nexports.validateFunctionCode = validateFunctionCode;\nfunction validateFunction({ gen, validateName, schema, schemaEnv, opts }, body) {\n    if (opts.code.es5) {\n        gen.func(validateName, (0, codegen_1._) `${names_1.default.data}, ${names_1.default.valCxt}`, schemaEnv.$async, () => {\n            gen.code((0, codegen_1._) `\"use strict\"; ${funcSourceUrl(schema, opts)}`);\n            destructureValCxtES5(gen, opts);\n            gen.code(body);\n        });\n    }\n    else {\n        gen.func(validateName, (0, codegen_1._) `${names_1.default.data}, ${destructureValCxt(opts)}`, schemaEnv.$async, () => gen.code(funcSourceUrl(schema, opts)).code(body));\n    }\n}\nfunction destructureValCxt(opts) {\n    return (0, codegen_1._) `{${names_1.default.instancePath}=\"\", ${names_1.default.parentData}, ${names_1.default.parentDataProperty}, ${names_1.default.rootData}=${names_1.default.data}${opts.dynamicRef ? (0, codegen_1._) `, ${names_1.default.dynamicAnchors}={}` : codegen_1.nil}}={}`;\n}\nfunction destructureValCxtES5(gen, opts) {\n    gen.if(names_1.default.valCxt, () => {\n        gen.var(names_1.default.instancePath, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.instancePath}`);\n        gen.var(names_1.default.parentData, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.parentData}`);\n        gen.var(names_1.default.parentDataProperty, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.parentDataProperty}`);\n        gen.var(names_1.default.rootData, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.rootData}`);\n        if (opts.dynamicRef)\n            gen.var(names_1.default.dynamicAnchors, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.dynamicAnchors}`);\n    }, () => {\n        gen.var(names_1.default.instancePath, (0, codegen_1._) `\"\"`);\n        gen.var(names_1.default.parentData, (0, codegen_1._) `undefined`);\n        gen.var(names_1.default.parentDataProperty, (0, codegen_1._) `undefined`);\n        gen.var(names_1.default.rootData, names_1.default.data);\n        if (opts.dynamicRef)\n            gen.var(names_1.default.dynamicAnchors, (0, codegen_1._) `{}`);\n    });\n}\nfunction topSchemaObjCode(it) {\n    const { schema, opts, gen } = it;\n    validateFunction(it, () => {\n        if (opts.$comment && schema.$comment)\n            commentKeyword(it);\n        checkNoDefault(it);\n        gen.let(names_1.default.vErrors, null);\n        gen.let(names_1.default.errors, 0);\n        if (opts.unevaluated)\n            resetEvaluated(it);\n        typeAndKeywords(it);\n        returnResults(it);\n    });\n    return;\n}\nfunction resetEvaluated(it) {\n    // TODO maybe some hook to execute it in the end to check whether props/items are Name, as in assignEvaluated\n    const { gen, validateName } = it;\n    it.evaluated = gen.const(\"evaluated\", (0, codegen_1._) `${validateName}.evaluated`);\n    gen.if((0, codegen_1._) `${it.evaluated}.dynamicProps`, () => gen.assign((0, codegen_1._) `${it.evaluated}.props`, (0, codegen_1._) `undefined`));\n    gen.if((0, codegen_1._) `${it.evaluated}.dynamicItems`, () => gen.assign((0, codegen_1._) `${it.evaluated}.items`, (0, codegen_1._) `undefined`));\n}\nfunction funcSourceUrl(schema, opts) {\n    const schId = typeof schema == \"object\" && schema[opts.schemaId];\n    return schId && (opts.code.source || opts.code.process) ? (0, codegen_1._) `/*# sourceURL=${schId} */` : codegen_1.nil;\n}\n// schema compilation - this function is used recursively to generate code for sub-schemas\nfunction subschemaCode(it, valid) {\n    if (isSchemaObj(it)) {\n        checkKeywords(it);\n        if (schemaCxtHasRules(it)) {\n            subSchemaObjCode(it, valid);\n            return;\n        }\n    }\n    (0, boolSchema_1.boolOrEmptySchema)(it, valid);\n}\nfunction schemaCxtHasRules({ schema, self }) {\n    if (typeof schema == \"boolean\")\n        return !schema;\n    for (const key in schema)\n        if (self.RULES.all[key])\n            return true;\n    return false;\n}\nfunction isSchemaObj(it) {\n    return typeof it.schema != \"boolean\";\n}\nfunction subSchemaObjCode(it, valid) {\n    const { schema, gen, opts } = it;\n    if (opts.$comment && schema.$comment)\n        commentKeyword(it);\n    updateContext(it);\n    checkAsyncSchema(it);\n    const errsCount = gen.const(\"_errs\", names_1.default.errors);\n    typeAndKeywords(it, errsCount);\n    // TODO var\n    gen.var(valid, (0, codegen_1._) `${errsCount} === ${names_1.default.errors}`);\n}\nfunction checkKeywords(it) {\n    (0, util_1.checkUnknownRules)(it);\n    checkRefsAndKeywords(it);\n}\nfunction typeAndKeywords(it, errsCount) {\n    if (it.opts.jtd)\n        return schemaKeywords(it, [], false, errsCount);\n    const types = (0, dataType_1.getSchemaTypes)(it.schema);\n    const checkedTypes = (0, dataType_1.coerceAndCheckDataType)(it, types);\n    schemaKeywords(it, types, !checkedTypes, errsCount);\n}\nfunction checkRefsAndKeywords(it) {\n    const { schema, errSchemaPath, opts, self } = it;\n    if (schema.$ref && opts.ignoreKeywordsWithRef && (0, util_1.schemaHasRulesButRef)(schema, self.RULES)) {\n        self.logger.warn(`$ref: keywords ignored in schema at path \"${errSchemaPath}\"`);\n    }\n}\nfunction checkNoDefault(it) {\n    const { schema, opts } = it;\n    if (schema.default !== undefined && opts.useDefaults && opts.strictSchema) {\n        (0, util_1.checkStrictMode)(it, \"default is ignored in the schema root\");\n    }\n}\nfunction updateContext(it) {\n    const schId = it.schema[it.opts.schemaId];\n    if (schId)\n        it.baseId = (0, resolve_1.resolveUrl)(it.opts.uriResolver, it.baseId, schId);\n}\nfunction checkAsyncSchema(it) {\n    if (it.schema.$async && !it.schemaEnv.$async)\n        throw new Error(\"async schema in sync schema\");\n}\nfunction commentKeyword({ gen, schemaEnv, schema, errSchemaPath, opts }) {\n    const msg = schema.$comment;\n    if (opts.$comment === true) {\n        gen.code((0, codegen_1._) `${names_1.default.self}.logger.log(${msg})`);\n    }\n    else if (typeof opts.$comment == \"function\") {\n        const schemaPath = (0, codegen_1.str) `${errSchemaPath}/$comment`;\n        const rootName = gen.scopeValue(\"root\", { ref: schemaEnv.root });\n        gen.code((0, codegen_1._) `${names_1.default.self}.opts.$comment(${msg}, ${schemaPath}, ${rootName}.schema)`);\n    }\n}\nfunction returnResults(it) {\n    const { gen, schemaEnv, validateName, ValidationError, opts } = it;\n    if (schemaEnv.$async) {\n        // TODO assign unevaluated\n        gen.if((0, codegen_1._) `${names_1.default.errors} === 0`, () => gen.return(names_1.default.data), () => gen.throw((0, codegen_1._) `new ${ValidationError}(${names_1.default.vErrors})`));\n    }\n    else {\n        gen.assign((0, codegen_1._) `${validateName}.errors`, names_1.default.vErrors);\n        if (opts.unevaluated)\n            assignEvaluated(it);\n        gen.return((0, codegen_1._) `${names_1.default.errors} === 0`);\n    }\n}\nfunction assignEvaluated({ gen, evaluated, props, items }) {\n    if (props instanceof codegen_1.Name)\n        gen.assign((0, codegen_1._) `${evaluated}.props`, props);\n    if (items instanceof codegen_1.Name)\n        gen.assign((0, codegen_1._) `${evaluated}.items`, items);\n}\nfunction schemaKeywords(it, types, typeErrors, errsCount) {\n    const { gen, schema, data, allErrors, opts, self } = it;\n    const { RULES } = self;\n    if (schema.$ref && (opts.ignoreKeywordsWithRef || !(0, util_1.schemaHasRulesButRef)(schema, RULES))) {\n        gen.block(() => keywordCode(it, \"$ref\", RULES.all.$ref.definition)); // TODO typecast\n        return;\n    }\n    if (!opts.jtd)\n        checkStrictTypes(it, types);\n    gen.block(() => {\n        for (const group of RULES.rules)\n            groupKeywords(group);\n        groupKeywords(RULES.post);\n    });\n    function groupKeywords(group) {\n        if (!(0, applicability_1.shouldUseGroup)(schema, group))\n            return;\n        if (group.type) {\n            gen.if((0, dataType_2.checkDataType)(group.type, data, opts.strictNumbers));\n            iterateKeywords(it, group);\n            if (types.length === 1 && types[0] === group.type && typeErrors) {\n                gen.else();\n                (0, dataType_2.reportTypeError)(it);\n            }\n            gen.endIf();\n        }\n        else {\n            iterateKeywords(it, group);\n        }\n        // TODO make it \"ok\" call?\n        if (!allErrors)\n            gen.if((0, codegen_1._) `${names_1.default.errors} === ${errsCount || 0}`);\n    }\n}\nfunction iterateKeywords(it, group) {\n    const { gen, schema, opts: { useDefaults }, } = it;\n    if (useDefaults)\n        (0, defaults_1.assignDefaults)(it, group.type);\n    gen.block(() => {\n        for (const rule of group.rules) {\n            if ((0, applicability_1.shouldUseRule)(schema, rule)) {\n                keywordCode(it, rule.keyword, rule.definition, group.type);\n            }\n        }\n    });\n}\nfunction checkStrictTypes(it, types) {\n    if (it.schemaEnv.meta || !it.opts.strictTypes)\n        return;\n    checkContextTypes(it, types);\n    if (!it.opts.allowUnionTypes)\n        checkMultipleTypes(it, types);\n    checkKeywordTypes(it, it.dataTypes);\n}\nfunction checkContextTypes(it, types) {\n    if (!types.length)\n        return;\n    if (!it.dataTypes.length) {\n        it.dataTypes = types;\n        return;\n    }\n    types.forEach((t) => {\n        if (!includesType(it.dataTypes, t)) {\n            strictTypesError(it, `type \"${t}\" not allowed by context \"${it.dataTypes.join(\",\")}\"`);\n        }\n    });\n    narrowSchemaTypes(it, types);\n}\nfunction checkMultipleTypes(it, ts) {\n    if (ts.length > 1 && !(ts.length === 2 && ts.includes(\"null\"))) {\n        strictTypesError(it, \"use allowUnionTypes to allow union type keyword\");\n    }\n}\nfunction checkKeywordTypes(it, ts) {\n    const rules = it.self.RULES.all;\n    for (const keyword in rules) {\n        const rule = rules[keyword];\n        if (typeof rule == \"object\" && (0, applicability_1.shouldUseRule)(it.schema, rule)) {\n            const { type } = rule.definition;\n            if (type.length && !type.some((t) => hasApplicableType(ts, t))) {\n                strictTypesError(it, `missing type \"${type.join(\",\")}\" for keyword \"${keyword}\"`);\n            }\n        }\n    }\n}\nfunction hasApplicableType(schTs, kwdT) {\n    return schTs.includes(kwdT) || (kwdT === \"number\" && schTs.includes(\"integer\"));\n}\nfunction includesType(ts, t) {\n    return ts.includes(t) || (t === \"integer\" && ts.includes(\"number\"));\n}\nfunction narrowSchemaTypes(it, withTypes) {\n    const ts = [];\n    for (const t of it.dataTypes) {\n        if (includesType(withTypes, t))\n            ts.push(t);\n        else if (withTypes.includes(\"integer\") && t === \"number\")\n            ts.push(\"integer\");\n    }\n    it.dataTypes = ts;\n}\nfunction strictTypesError(it, msg) {\n    const schemaPath = it.schemaEnv.baseId + it.errSchemaPath;\n    msg += ` at \"${schemaPath}\" (strictTypes)`;\n    (0, util_1.checkStrictMode)(it, msg, it.opts.strictTypes);\n}\nclass KeywordCxt {\n    constructor(it, def, keyword) {\n        (0, keyword_1.validateKeywordUsage)(it, def, keyword);\n        this.gen = it.gen;\n        this.allErrors = it.allErrors;\n        this.keyword = keyword;\n        this.data = it.data;\n        this.schema = it.schema[keyword];\n        this.$data = def.$data && it.opts.$data && this.schema && this.schema.$data;\n        this.schemaValue = (0, util_1.schemaRefOrVal)(it, this.schema, keyword, this.$data);\n        this.schemaType = def.schemaType;\n        this.parentSchema = it.schema;\n        this.params = {};\n        this.it = it;\n        this.def = def;\n        if (this.$data) {\n            this.schemaCode = it.gen.const(\"vSchema\", getData(this.$data, it));\n        }\n        else {\n            this.schemaCode = this.schemaValue;\n            if (!(0, keyword_1.validSchemaType)(this.schema, def.schemaType, def.allowUndefined)) {\n                throw new Error(`${keyword} value must be ${JSON.stringify(def.schemaType)}`);\n            }\n        }\n        if (\"code\" in def ? def.trackErrors : def.errors !== false) {\n            this.errsCount = it.gen.const(\"_errs\", names_1.default.errors);\n        }\n    }\n    result(condition, successAction, failAction) {\n        this.failResult((0, codegen_1.not)(condition), successAction, failAction);\n    }\n    failResult(condition, successAction, failAction) {\n        this.gen.if(condition);\n        if (failAction)\n            failAction();\n        else\n            this.error();\n        if (successAction) {\n            this.gen.else();\n            successAction();\n            if (this.allErrors)\n                this.gen.endIf();\n        }\n        else {\n            if (this.allErrors)\n                this.gen.endIf();\n            else\n                this.gen.else();\n        }\n    }\n    pass(condition, failAction) {\n        this.failResult((0, codegen_1.not)(condition), undefined, failAction);\n    }\n    fail(condition) {\n        if (condition === undefined) {\n            this.error();\n            if (!this.allErrors)\n                this.gen.if(false); // this branch will be removed by gen.optimize\n            return;\n        }\n        this.gen.if(condition);\n        this.error();\n        if (this.allErrors)\n            this.gen.endIf();\n        else\n            this.gen.else();\n    }\n    fail$data(condition) {\n        if (!this.$data)\n            return this.fail(condition);\n        const { schemaCode } = this;\n        this.fail((0, codegen_1._) `${schemaCode} !== undefined && (${(0, codegen_1.or)(this.invalid$data(), condition)})`);\n    }\n    error(append, errorParams, errorPaths) {\n        if (errorParams) {\n            this.setParams(errorParams);\n            this._error(append, errorPaths);\n            this.setParams({});\n            return;\n        }\n        this._error(append, errorPaths);\n    }\n    _error(append, errorPaths) {\n        ;\n        (append ? errors_1.reportExtraError : errors_1.reportError)(this, this.def.error, errorPaths);\n    }\n    $dataError() {\n        (0, errors_1.reportError)(this, this.def.$dataError || errors_1.keyword$DataError);\n    }\n    reset() {\n        if (this.errsCount === undefined)\n            throw new Error('add \"trackErrors\" to keyword definition');\n        (0, errors_1.resetErrorsCount)(this.gen, this.errsCount);\n    }\n    ok(cond) {\n        if (!this.allErrors)\n            this.gen.if(cond);\n    }\n    setParams(obj, assign) {\n        if (assign)\n            Object.assign(this.params, obj);\n        else\n            this.params = obj;\n    }\n    block$data(valid, codeBlock, $dataValid = codegen_1.nil) {\n        this.gen.block(() => {\n            this.check$data(valid, $dataValid);\n            codeBlock();\n        });\n    }\n    check$data(valid = codegen_1.nil, $dataValid = codegen_1.nil) {\n        if (!this.$data)\n            return;\n        const { gen, schemaCode, schemaType, def } = this;\n        gen.if((0, codegen_1.or)((0, codegen_1._) `${schemaCode} === undefined`, $dataValid));\n        if (valid !== codegen_1.nil)\n            gen.assign(valid, true);\n        if (schemaType.length || def.validateSchema) {\n            gen.elseIf(this.invalid$data());\n            this.$dataError();\n            if (valid !== codegen_1.nil)\n                gen.assign(valid, false);\n        }\n        gen.else();\n    }\n    invalid$data() {\n        const { gen, schemaCode, schemaType, def, it } = this;\n        return (0, codegen_1.or)(wrong$DataType(), invalid$DataSchema());\n        function wrong$DataType() {\n            if (schemaType.length) {\n                /* istanbul ignore if */\n                if (!(schemaCode instanceof codegen_1.Name))\n                    throw new Error(\"ajv implementation error\");\n                const st = Array.isArray(schemaType) ? schemaType : [schemaType];\n                return (0, codegen_1._) `${(0, dataType_2.checkDataTypes)(st, schemaCode, it.opts.strictNumbers, dataType_2.DataType.Wrong)}`;\n            }\n            return codegen_1.nil;\n        }\n        function invalid$DataSchema() {\n            if (def.validateSchema) {\n                const validateSchemaRef = gen.scopeValue(\"validate$data\", { ref: def.validateSchema }); // TODO value.code for standalone\n                return (0, codegen_1._) `!${validateSchemaRef}(${schemaCode})`;\n            }\n            return codegen_1.nil;\n        }\n    }\n    subschema(appl, valid) {\n        const subschema = (0, subschema_1.getSubschema)(this.it, appl);\n        (0, subschema_1.extendSubschemaData)(subschema, this.it, appl);\n        (0, subschema_1.extendSubschemaMode)(subschema, appl);\n        const nextContext = { ...this.it, ...subschema, items: undefined, props: undefined };\n        subschemaCode(nextContext, valid);\n        return nextContext;\n    }\n    mergeEvaluated(schemaCxt, toName) {\n        const { it, gen } = this;\n        if (!it.opts.unevaluated)\n            return;\n        if (it.props !== true && schemaCxt.props !== undefined) {\n            it.props = util_1.mergeEvaluated.props(gen, schemaCxt.props, it.props, toName);\n        }\n        if (it.items !== true && schemaCxt.items !== undefined) {\n            it.items = util_1.mergeEvaluated.items(gen, schemaCxt.items, it.items, toName);\n        }\n    }\n    mergeValidEvaluated(schemaCxt, valid) {\n        const { it, gen } = this;\n        if (it.opts.unevaluated && (it.props !== true || it.items !== true)) {\n            gen.if(valid, () => this.mergeEvaluated(schemaCxt, codegen_1.Name));\n            return true;\n        }\n    }\n}\nexports.KeywordCxt = KeywordCxt;\nfunction keywordCode(it, keyword, def, ruleType) {\n    const cxt = new KeywordCxt(it, def, keyword);\n    if (\"code\" in def) {\n        def.code(cxt, ruleType);\n    }\n    else if (cxt.$data && def.validate) {\n        (0, keyword_1.funcKeywordCode)(cxt, def);\n    }\n    else if (\"macro\" in def) {\n        (0, keyword_1.macroKeywordCode)(cxt, def);\n    }\n    else if (def.compile || def.validate) {\n        (0, keyword_1.funcKeywordCode)(cxt, def);\n    }\n}\nconst JSON_POINTER = /^\\/(?:[^~]|~0|~1)*$/;\nconst RELATIVE_JSON_POINTER = /^([0-9]+)(#|\\/(?:[^~]|~0|~1)*)?$/;\nfunction getData($data, { dataLevel, dataNames, dataPathArr }) {\n    let jsonPointer;\n    let data;\n    if ($data === \"\")\n        return names_1.default.rootData;\n    if ($data[0] === \"/\") {\n        if (!JSON_POINTER.test($data))\n            throw new Error(`Invalid JSON-pointer: ${$data}`);\n        jsonPointer = $data;\n        data = names_1.default.rootData;\n    }\n    else {\n        const matches = RELATIVE_JSON_POINTER.exec($data);\n        if (!matches)\n            throw new Error(`Invalid JSON-pointer: ${$data}`);\n        const up = +matches[1];\n        jsonPointer = matches[2];\n        if (jsonPointer === \"#\") {\n            if (up >= dataLevel)\n                throw new Error(errorMsg(\"property/index\", up));\n            return dataPathArr[dataLevel - up];\n        }\n        if (up > dataLevel)\n            throw new Error(errorMsg(\"data\", up));\n        data = dataNames[dataLevel - up];\n        if (!jsonPointer)\n            return data;\n    }\n    let expr = data;\n    const segments = jsonPointer.split(\"/\");\n    for (const segment of segments) {\n        if (segment) {\n            data = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)((0, util_1.unescapeJsonPointer)(segment))}`;\n            expr = (0, codegen_1._) `${expr} && ${data}`;\n        }\n    }\n    return expr;\n    function errorMsg(pointerType, up) {\n        return `Cannot access ${pointerType} ${up} levels up, current level is ${dataLevel}`;\n    }\n}\nexports.getData = getData;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass ValidationError extends Error {\n    constructor(errors) {\n        super(\"validation failed\");\n        this.errors = errors;\n        this.ajv = this.validation = true;\n    }\n}\nexports.default = ValidationError;\n//# sourceMappingURL=validation_error.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst resolve_1 = require(\"./resolve\");\nclass MissingRefError extends Error {\n    constructor(resolver, baseId, ref, msg) {\n        super(msg || `can't resolve reference ${ref} from id ${baseId}`);\n        this.missingRef = (0, resolve_1.resolveUrl)(resolver, baseId, ref);\n        this.missingSchema = (0, resolve_1.normalizeId)((0, resolve_1.getFullPath)(resolver, this.missingRef));\n    }\n}\nexports.default = MissingRefError;\n//# sourceMappingURL=ref_error.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.resolveSchema = exports.getCompilingSchema = exports.resolveRef = exports.compileSchema = exports.SchemaEnv = void 0;\nconst codegen_1 = require(\"./codegen\");\nconst validation_error_1 = require(\"../runtime/validation_error\");\nconst names_1 = require(\"./names\");\nconst resolve_1 = require(\"./resolve\");\nconst util_1 = require(\"./util\");\nconst validate_1 = require(\"./validate\");\nclass SchemaEnv {\n    constructor(env) {\n        var _a;\n        this.refs = {};\n        this.dynamicAnchors = {};\n        let schema;\n        if (typeof env.schema == \"object\")\n            schema = env.schema;\n        this.schema = env.schema;\n        this.schemaId = env.schemaId;\n        this.root = env.root || this;\n        this.baseId = (_a = env.baseId) !== null && _a !== void 0 ? _a : (0, resolve_1.normalizeId)(schema === null || schema === void 0 ? void 0 : schema[env.schemaId || \"$id\"]);\n        this.schemaPath = env.schemaPath;\n        this.localRefs = env.localRefs;\n        this.meta = env.meta;\n        this.$async = schema === null || schema === void 0 ? void 0 : schema.$async;\n        this.refs = {};\n    }\n}\nexports.SchemaEnv = SchemaEnv;\n// let codeSize = 0\n// let nodeCount = 0\n// Compiles schema in SchemaEnv\nfunction compileSchema(sch) {\n    // TODO refactor - remove compilations\n    const _sch = getCompilingSchema.call(this, sch);\n    if (_sch)\n        return _sch;\n    const rootId = (0, resolve_1.getFullPath)(this.opts.uriResolver, sch.root.baseId); // TODO if getFullPath removed 1 tests fails\n    const { es5, lines } = this.opts.code;\n    const { ownProperties } = this.opts;\n    const gen = new codegen_1.CodeGen(this.scope, { es5, lines, ownProperties });\n    let _ValidationError;\n    if (sch.$async) {\n        _ValidationError = gen.scopeValue(\"Error\", {\n            ref: validation_error_1.default,\n            code: (0, codegen_1._) `require(\"ajv/dist/runtime/validation_error\").default`,\n        });\n    }\n    const validateName = gen.scopeName(\"validate\");\n    sch.validateName = validateName;\n    const schemaCxt = {\n        gen,\n        allErrors: this.opts.allErrors,\n        data: names_1.default.data,\n        parentData: names_1.default.parentData,\n        parentDataProperty: names_1.default.parentDataProperty,\n        dataNames: [names_1.default.data],\n        dataPathArr: [codegen_1.nil], // TODO can its length be used as dataLevel if nil is removed?\n        dataLevel: 0,\n        dataTypes: [],\n        definedProperties: new Set(),\n        topSchemaRef: gen.scopeValue(\"schema\", this.opts.code.source === true\n            ? { ref: sch.schema, code: (0, codegen_1.stringify)(sch.schema) }\n            : { ref: sch.schema }),\n        validateName,\n        ValidationError: _ValidationError,\n        schema: sch.schema,\n        schemaEnv: sch,\n        rootId,\n        baseId: sch.baseId || rootId,\n        schemaPath: codegen_1.nil,\n        errSchemaPath: sch.schemaPath || (this.opts.jtd ? \"\" : \"#\"),\n        errorPath: (0, codegen_1._) `\"\"`,\n        opts: this.opts,\n        self: this,\n    };\n    let sourceCode;\n    try {\n        this._compilations.add(sch);\n        (0, validate_1.validateFunctionCode)(schemaCxt);\n        gen.optimize(this.opts.code.optimize);\n        // gen.optimize(1)\n        const validateCode = gen.toString();\n        sourceCode = `${gen.scopeRefs(names_1.default.scope)}return ${validateCode}`;\n        // console.log((codeSize += sourceCode.length), (nodeCount += gen.nodeCount))\n        if (this.opts.code.process)\n            sourceCode = this.opts.code.process(sourceCode, sch);\n        // console.log(\"\\n\\n\\n *** \\n\", sourceCode)\n        const makeValidate = new Function(`${names_1.default.self}`, `${names_1.default.scope}`, sourceCode);\n        const validate = makeValidate(this, this.scope.get());\n        this.scope.value(validateName, { ref: validate });\n        validate.errors = null;\n        validate.schema = sch.schema;\n        validate.schemaEnv = sch;\n        if (sch.$async)\n            validate.$async = true;\n        if (this.opts.code.source === true) {\n            validate.source = { validateName, validateCode, scopeValues: gen._values };\n        }\n        if (this.opts.unevaluated) {\n            const { props, items } = schemaCxt;\n            validate.evaluated = {\n                props: props instanceof codegen_1.Name ? undefined : props,\n                items: items instanceof codegen_1.Name ? undefined : items,\n                dynamicProps: props instanceof codegen_1.Name,\n                dynamicItems: items instanceof codegen_1.Name,\n            };\n            if (validate.source)\n                validate.source.evaluated = (0, codegen_1.stringify)(validate.evaluated);\n        }\n        sch.validate = validate;\n        return sch;\n    }\n    catch (e) {\n        delete sch.validate;\n        delete sch.validateName;\n        if (sourceCode)\n            this.logger.error(\"Error compiling schema, function code:\", sourceCode);\n        // console.log(\"\\n\\n\\n *** \\n\", sourceCode, this.opts)\n        throw e;\n    }\n    finally {\n        this._compilations.delete(sch);\n    }\n}\nexports.compileSchema = compileSchema;\nfunction resolveRef(root, baseId, ref) {\n    var _a;\n    ref = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, ref);\n    const schOrFunc = root.refs[ref];\n    if (schOrFunc)\n        return schOrFunc;\n    let _sch = resolve.call(this, root, ref);\n    if (_sch === undefined) {\n        const schema = (_a = root.localRefs) === null || _a === void 0 ? void 0 : _a[ref]; // TODO maybe localRefs should hold SchemaEnv\n        const { schemaId } = this.opts;\n        if (schema)\n            _sch = new SchemaEnv({ schema, schemaId, root, baseId });\n    }\n    if (_sch === undefined)\n        return;\n    return (root.refs[ref] = inlineOrCompile.call(this, _sch));\n}\nexports.resolveRef = resolveRef;\nfunction inlineOrCompile(sch) {\n    if ((0, resolve_1.inlineRef)(sch.schema, this.opts.inlineRefs))\n        return sch.schema;\n    return sch.validate ? sch : compileSchema.call(this, sch);\n}\n// Index of schema compilation in the currently compiled list\nfunction getCompilingSchema(schEnv) {\n    for (const sch of this._compilations) {\n        if (sameSchemaEnv(sch, schEnv))\n            return sch;\n    }\n}\nexports.getCompilingSchema = getCompilingSchema;\nfunction sameSchemaEnv(s1, s2) {\n    return s1.schema === s2.schema && s1.root === s2.root && s1.baseId === s2.baseId;\n}\n// resolve and compile the references ($ref)\n// TODO returns AnySchemaObject (if the schema can be inlined) or validation function\nfunction resolve(root, // information about the root schema for the current schema\nref // reference to resolve\n) {\n    let sch;\n    while (typeof (sch = this.refs[ref]) == \"string\")\n        ref = sch;\n    return sch || this.schemas[ref] || resolveSchema.call(this, root, ref);\n}\n// Resolve schema, its root and baseId\nfunction resolveSchema(root, // root object with properties schema, refs TODO below SchemaEnv is assigned to it\nref // reference to resolve\n) {\n    const p = this.opts.uriResolver.parse(ref);\n    const refPath = (0, resolve_1._getFullPath)(this.opts.uriResolver, p);\n    let baseId = (0, resolve_1.getFullPath)(this.opts.uriResolver, root.baseId, undefined);\n    // TODO `Object.keys(root.schema).length > 0` should not be needed - but removing breaks 2 tests\n    if (Object.keys(root.schema).length > 0 && refPath === baseId) {\n        return getJsonPointer.call(this, p, root);\n    }\n    const id = (0, resolve_1.normalizeId)(refPath);\n    const schOrRef = this.refs[id] || this.schemas[id];\n    if (typeof schOrRef == \"string\") {\n        const sch = resolveSchema.call(this, root, schOrRef);\n        if (typeof (sch === null || sch === void 0 ? void 0 : sch.schema) !== \"object\")\n            return;\n        return getJsonPointer.call(this, p, sch);\n    }\n    if (typeof (schOrRef === null || schOrRef === void 0 ? void 0 : schOrRef.schema) !== \"object\")\n        return;\n    if (!schOrRef.validate)\n        compileSchema.call(this, schOrRef);\n    if (id === (0, resolve_1.normalizeId)(ref)) {\n        const { schema } = schOrRef;\n        const { schemaId } = this.opts;\n        const schId = schema[schemaId];\n        if (schId)\n            baseId = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, schId);\n        return new SchemaEnv({ schema, schemaId, root, baseId });\n    }\n    return getJsonPointer.call(this, p, schOrRef);\n}\nexports.resolveSchema = resolveSchema;\nconst PREVENT_SCOPE_CHANGE = new Set([\n    \"properties\",\n    \"patternProperties\",\n    \"enum\",\n    \"dependencies\",\n    \"definitions\",\n]);\nfunction getJsonPointer(parsedRef, { baseId, schema, root }) {\n    var _a;\n    if (((_a = parsedRef.fragment) === null || _a === void 0 ? void 0 : _a[0]) !== \"/\")\n        return;\n    for (const part of parsedRef.fragment.slice(1).split(\"/\")) {\n        if (typeof schema === \"boolean\")\n            return;\n        const partSchema = schema[(0, util_1.unescapeFragment)(part)];\n        if (partSchema === undefined)\n            return;\n        schema = partSchema;\n        // TODO PREVENT_SCOPE_CHANGE could be defined in keyword def?\n        const schId = typeof schema === \"object\" && schema[this.opts.schemaId];\n        if (!PREVENT_SCOPE_CHANGE.has(part) && schId) {\n            baseId = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, schId);\n        }\n    }\n    let env;\n    if (typeof schema != \"boolean\" && schema.$ref && !(0, util_1.schemaHasRulesButRef)(schema, this.RULES)) {\n        const $ref = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, schema.$ref);\n        env = resolveSchema.call(this, root, $ref);\n    }\n    // even though resolution failed we need to return SchemaEnv to throw exception\n    // so that compileAsync loads missing schema.\n    const { schemaId } = this.opts;\n    env = env || new SchemaEnv({ schema, schemaId, root, baseId });\n    if (env.schema !== env.root.schema)\n        return env;\n    return undefined;\n}\n//# sourceMappingURL=index.js.map","'use strict'\n\nconst HEX = {\n  0: 0,\n  1: 1,\n  2: 2,\n  3: 3,\n  4: 4,\n  5: 5,\n  6: 6,\n  7: 7,\n  8: 8,\n  9: 9,\n  a: 10,\n  A: 10,\n  b: 11,\n  B: 11,\n  c: 12,\n  C: 12,\n  d: 13,\n  D: 13,\n  e: 14,\n  E: 14,\n  f: 15,\n  F: 15\n}\n\nmodule.exports = {\n  HEX\n}\n","'use strict'\n\nconst { HEX } = require('./scopedChars')\n\nconst IPV4_REG = /^(?:(?:25[0-5]|2[0-4]\\d|1\\d{2}|[1-9]\\d|\\d)\\.){3}(?:25[0-5]|2[0-4]\\d|1\\d{2}|[1-9]\\d|\\d)$/u\n\nfunction normalizeIPv4 (host) {\n  if (findToken(host, '.') < 3) { return { host, isIPV4: false } }\n  const matches = host.match(IPV4_REG) || []\n  const [address] = matches\n  if (address) {\n    return { host: stripLeadingZeros(address, '.'), isIPV4: true }\n  } else {\n    return { host, isIPV4: false }\n  }\n}\n\n/**\n * @param {string[]} input\n * @param {boolean} [keepZero=false]\n * @returns {string|undefined}\n */\nfunction stringArrayToHexStripped (input, keepZero = false) {\n  let acc = ''\n  let strip = true\n  for (const c of input) {\n    if (HEX[c] === undefined) return undefined\n    if (c !== '0' && strip === true) strip = false\n    if (!strip) acc += c\n  }\n  if (keepZero && acc.length === 0) acc = '0'\n  return acc\n}\n\nfunction getIPV6 (input) {\n  let tokenCount = 0\n  const output = { error: false, address: '', zone: '' }\n  const address = []\n  const buffer = []\n  let isZone = false\n  let endipv6Encountered = false\n  let endIpv6 = false\n\n  function consume () {\n    if (buffer.length) {\n      if (isZone === false) {\n        const hex = stringArrayToHexStripped(buffer)\n        if (hex !== undefined) {\n          address.push(hex)\n        } else {\n          output.error = true\n          return false\n        }\n      }\n      buffer.length = 0\n    }\n    return true\n  }\n\n  for (let i = 0; i < input.length; i++) {\n    const cursor = input[i]\n    if (cursor === '[' || cursor === ']') { continue }\n    if (cursor === ':') {\n      if (endipv6Encountered === true) {\n        endIpv6 = true\n      }\n      if (!consume()) { break }\n      tokenCount++\n      address.push(':')\n      if (tokenCount > 7) {\n        // not valid\n        output.error = true\n        break\n      }\n      if (i - 1 >= 0 && input[i - 1] === ':') {\n        endipv6Encountered = true\n      }\n      continue\n    } else if (cursor === '%') {\n      if (!consume()) { break }\n      // switch to zone detection\n      isZone = true\n    } else {\n      buffer.push(cursor)\n      continue\n    }\n  }\n  if (buffer.length) {\n    if (isZone) {\n      output.zone = buffer.join('')\n    } else if (endIpv6) {\n      address.push(buffer.join(''))\n    } else {\n      address.push(stringArrayToHexStripped(buffer))\n    }\n  }\n  output.address = address.join('')\n  return output\n}\n\nfunction normalizeIPv6 (host) {\n  if (findToken(host, ':') < 2) { return { host, isIPV6: false } }\n  const ipv6 = getIPV6(host)\n\n  if (!ipv6.error) {\n    let newHost = ipv6.address\n    let escapedHost = ipv6.address\n    if (ipv6.zone) {\n      newHost += '%' + ipv6.zone\n      escapedHost += '%25' + ipv6.zone\n    }\n    return { host: newHost, escapedHost, isIPV6: true }\n  } else {\n    return { host, isIPV6: false }\n  }\n}\n\nfunction stripLeadingZeros (str, token) {\n  let out = ''\n  let skip = true\n  const l = str.length\n  for (let i = 0; i < l; i++) {\n    const c = str[i]\n    if (c === '0' && skip) {\n      if ((i + 1 <= l && str[i + 1] === token) || i + 1 === l) {\n        out += c\n        skip = false\n      }\n    } else {\n      if (c === token) {\n        skip = true\n      } else {\n        skip = false\n      }\n      out += c\n    }\n  }\n  return out\n}\n\nfunction findToken (str, token) {\n  let ind = 0\n  for (let i = 0; i < str.length; i++) {\n    if (str[i] === token) ind++\n  }\n  return ind\n}\n\nconst RDS1 = /^\\.\\.?\\//u\nconst RDS2 = /^\\/\\.(?:\\/|$)/u\nconst RDS3 = /^\\/\\.\\.(?:\\/|$)/u\nconst RDS5 = /^\\/?(?:.|\\n)*?(?=\\/|$)/u\n\nfunction removeDotSegments (input) {\n  const output = []\n\n  while (input.length) {\n    if (input.match(RDS1)) {\n      input = input.replace(RDS1, '')\n    } else if (input.match(RDS2)) {\n      input = input.replace(RDS2, '/')\n    } else if (input.match(RDS3)) {\n      input = input.replace(RDS3, '/')\n      output.pop()\n    } else if (input === '.' || input === '..') {\n      input = ''\n    } else {\n      const im = input.match(RDS5)\n      if (im) {\n        const s = im[0]\n        input = input.slice(s.length)\n        output.push(s)\n      } else {\n        throw new Error('Unexpected dot segment condition')\n      }\n    }\n  }\n  return output.join('')\n}\n\nfunction normalizeComponentEncoding (components, esc) {\n  const func = esc !== true ? escape : unescape\n  if (components.scheme !== undefined) {\n    components.scheme = func(components.scheme)\n  }\n  if (components.userinfo !== undefined) {\n    components.userinfo = func(components.userinfo)\n  }\n  if (components.host !== undefined) {\n    components.host = func(components.host)\n  }\n  if (components.path !== undefined) {\n    components.path = func(components.path)\n  }\n  if (components.query !== undefined) {\n    components.query = func(components.query)\n  }\n  if (components.fragment !== undefined) {\n    components.fragment = func(components.fragment)\n  }\n  return components\n}\n\nfunction recomposeAuthority (components) {\n  const uriTokens = []\n\n  if (components.userinfo !== undefined) {\n    uriTokens.push(components.userinfo)\n    uriTokens.push('@')\n  }\n\n  if (components.host !== undefined) {\n    let host = unescape(components.host)\n    const ipV4res = normalizeIPv4(host)\n\n    if (ipV4res.isIPV4) {\n      host = ipV4res.host\n    } else {\n      const ipV6res = normalizeIPv6(ipV4res.host)\n      if (ipV6res.isIPV6 === true) {\n        host = `[${ipV6res.escapedHost}]`\n      } else {\n        host = components.host\n      }\n    }\n    uriTokens.push(host)\n  }\n\n  if (typeof components.port === 'number' || typeof components.port === 'string') {\n    uriTokens.push(':')\n    uriTokens.push(String(components.port))\n  }\n\n  return uriTokens.length ? uriTokens.join('') : undefined\n};\n\nmodule.exports = {\n  recomposeAuthority,\n  normalizeComponentEncoding,\n  removeDotSegments,\n  normalizeIPv4,\n  normalizeIPv6,\n  stringArrayToHexStripped\n}\n","'use strict'\n\nconst UUID_REG = /^[\\da-f]{8}-[\\da-f]{4}-[\\da-f]{4}-[\\da-f]{4}-[\\da-f]{12}$/iu\nconst URN_REG = /([\\da-z][\\d\\-a-z]{0,31}):((?:[\\w!$'()*+,\\-.:;=@]|%[\\da-f]{2})+)/iu\n\nfunction isSecure (wsComponents) {\n  return typeof wsComponents.secure === 'boolean' ? wsComponents.secure : String(wsComponents.scheme).toLowerCase() === 'wss'\n}\n\nfunction httpParse (components) {\n  if (!components.host) {\n    components.error = components.error || 'HTTP URIs must have a host.'\n  }\n\n  return components\n}\n\nfunction httpSerialize (components) {\n  const secure = String(components.scheme).toLowerCase() === 'https'\n\n  // normalize the default port\n  if (components.port === (secure ? 443 : 80) || components.port === '') {\n    components.port = undefined\n  }\n\n  // normalize the empty path\n  if (!components.path) {\n    components.path = '/'\n  }\n\n  // NOTE: We do not parse query strings for HTTP URIs\n  // as WWW Form Url Encoded query strings are part of the HTML4+ spec,\n  // and not the HTTP spec.\n\n  return components\n}\n\nfunction wsParse (wsComponents) {\n// indicate if the secure flag is set\n  wsComponents.secure = isSecure(wsComponents)\n\n  // construct resouce name\n  wsComponents.resourceName = (wsComponents.path || '/') + (wsComponents.query ? '?' + wsComponents.query : '')\n  wsComponents.path = undefined\n  wsComponents.query = undefined\n\n  return wsComponents\n}\n\nfunction wsSerialize (wsComponents) {\n// normalize the default port\n  if (wsComponents.port === (isSecure(wsComponents) ? 443 : 80) || wsComponents.port === '') {\n    wsComponents.port = undefined\n  }\n\n  // ensure scheme matches secure flag\n  if (typeof wsComponents.secure === 'boolean') {\n    wsComponents.scheme = (wsComponents.secure ? 'wss' : 'ws')\n    wsComponents.secure = undefined\n  }\n\n  // reconstruct path from resource name\n  if (wsComponents.resourceName) {\n    const [path, query] = wsComponents.resourceName.split('?')\n    wsComponents.path = (path && path !== '/' ? path : undefined)\n    wsComponents.query = query\n    wsComponents.resourceName = undefined\n  }\n\n  // forbid fragment component\n  wsComponents.fragment = undefined\n\n  return wsComponents\n}\n\nfunction urnParse (urnComponents, options) {\n  if (!urnComponents.path) {\n    urnComponents.error = 'URN can not be parsed'\n    return urnComponents\n  }\n  const matches = urnComponents.path.match(URN_REG)\n  if (matches) {\n    const scheme = options.scheme || urnComponents.scheme || 'urn'\n    urnComponents.nid = matches[1].toLowerCase()\n    urnComponents.nss = matches[2]\n    const urnScheme = `${scheme}:${options.nid || urnComponents.nid}`\n    const schemeHandler = SCHEMES[urnScheme]\n    urnComponents.path = undefined\n\n    if (schemeHandler) {\n      urnComponents = schemeHandler.parse(urnComponents, options)\n    }\n  } else {\n    urnComponents.error = urnComponents.error || 'URN can not be parsed.'\n  }\n\n  return urnComponents\n}\n\nfunction urnSerialize (urnComponents, options) {\n  const scheme = options.scheme || urnComponents.scheme || 'urn'\n  const nid = urnComponents.nid.toLowerCase()\n  const urnScheme = `${scheme}:${options.nid || nid}`\n  const schemeHandler = SCHEMES[urnScheme]\n\n  if (schemeHandler) {\n    urnComponents = schemeHandler.serialize(urnComponents, options)\n  }\n\n  const uriComponents = urnComponents\n  const nss = urnComponents.nss\n  uriComponents.path = `${nid || options.nid}:${nss}`\n\n  options.skipEscape = true\n  return uriComponents\n}\n\nfunction urnuuidParse (urnComponents, options) {\n  const uuidComponents = urnComponents\n  uuidComponents.uuid = uuidComponents.nss\n  uuidComponents.nss = undefined\n\n  if (!options.tolerant && (!uuidComponents.uuid || !UUID_REG.test(uuidComponents.uuid))) {\n    uuidComponents.error = uuidComponents.error || 'UUID is not valid.'\n  }\n\n  return uuidComponents\n}\n\nfunction urnuuidSerialize (uuidComponents) {\n  const urnComponents = uuidComponents\n  // normalize UUID\n  urnComponents.nss = (uuidComponents.uuid || '').toLowerCase()\n  return urnComponents\n}\n\nconst http = {\n  scheme: 'http',\n  domainHost: true,\n  parse: httpParse,\n  serialize: httpSerialize\n}\n\nconst https = {\n  scheme: 'https',\n  domainHost: http.domainHost,\n  parse: httpParse,\n  serialize: httpSerialize\n}\n\nconst ws = {\n  scheme: 'ws',\n  domainHost: true,\n  parse: wsParse,\n  serialize: wsSerialize\n}\n\nconst wss = {\n  scheme: 'wss',\n  domainHost: ws.domainHost,\n  parse: ws.parse,\n  serialize: ws.serialize\n}\n\nconst urn = {\n  scheme: 'urn',\n  parse: urnParse,\n  serialize: urnSerialize,\n  skipNormalize: true\n}\n\nconst urnuuid = {\n  scheme: 'urn:uuid',\n  parse: urnuuidParse,\n  serialize: urnuuidSerialize,\n  skipNormalize: true\n}\n\nconst SCHEMES = {\n  http,\n  https,\n  ws,\n  wss,\n  urn,\n  'urn:uuid': urnuuid\n}\n\nmodule.exports = SCHEMES\n","'use strict'\n\nconst { normalizeIPv6, normalizeIPv4, removeDotSegments, recomposeAuthority, normalizeComponentEncoding } = require('./lib/utils')\nconst SCHEMES = require('./lib/schemes')\n\nfunction normalize (uri, options) {\n  if (typeof uri === 'string') {\n    uri = serialize(parse(uri, options), options)\n  } else if (typeof uri === 'object') {\n    uri = parse(serialize(uri, options), options)\n  }\n  return uri\n}\n\nfunction resolve (baseURI, relativeURI, options) {\n  const schemelessOptions = Object.assign({ scheme: 'null' }, options)\n  const resolved = resolveComponents(parse(baseURI, schemelessOptions), parse(relativeURI, schemelessOptions), schemelessOptions, true)\n  return serialize(resolved, { ...schemelessOptions, skipEscape: true })\n}\n\nfunction resolveComponents (base, relative, options, skipNormalization) {\n  const target = {}\n  if (!skipNormalization) {\n    base = parse(serialize(base, options), options) // normalize base components\n    relative = parse(serialize(relative, options), options) // normalize relative components\n  }\n  options = options || {}\n\n  if (!options.tolerant && relative.scheme) {\n    target.scheme = relative.scheme\n    // target.authority = relative.authority;\n    target.userinfo = relative.userinfo\n    target.host = relative.host\n    target.port = relative.port\n    target.path = removeDotSegments(relative.path || '')\n    target.query = relative.query\n  } else {\n    if (relative.userinfo !== undefined || relative.host !== undefined || relative.port !== undefined) {\n      // target.authority = relative.authority;\n      target.userinfo = relative.userinfo\n      target.host = relative.host\n      target.port = relative.port\n      target.path = removeDotSegments(relative.path || '')\n      target.query = relative.query\n    } else {\n      if (!relative.path) {\n        target.path = base.path\n        if (relative.query !== undefined) {\n          target.query = relative.query\n        } else {\n          target.query = base.query\n        }\n      } else {\n        if (relative.path.charAt(0) === '/') {\n          target.path = removeDotSegments(relative.path)\n        } else {\n          if ((base.userinfo !== undefined || base.host !== undefined || base.port !== undefined) && !base.path) {\n            target.path = '/' + relative.path\n          } else if (!base.path) {\n            target.path = relative.path\n          } else {\n            target.path = base.path.slice(0, base.path.lastIndexOf('/') + 1) + relative.path\n          }\n          target.path = removeDotSegments(target.path)\n        }\n        target.query = relative.query\n      }\n      // target.authority = base.authority;\n      target.userinfo = base.userinfo\n      target.host = base.host\n      target.port = base.port\n    }\n    target.scheme = base.scheme\n  }\n\n  target.fragment = relative.fragment\n\n  return target\n}\n\nfunction equal (uriA, uriB, options) {\n  if (typeof uriA === 'string') {\n    uriA = unescape(uriA)\n    uriA = serialize(normalizeComponentEncoding(parse(uriA, options), true), { ...options, skipEscape: true })\n  } else if (typeof uriA === 'object') {\n    uriA = serialize(normalizeComponentEncoding(uriA, true), { ...options, skipEscape: true })\n  }\n\n  if (typeof uriB === 'string') {\n    uriB = unescape(uriB)\n    uriB = serialize(normalizeComponentEncoding(parse(uriB, options), true), { ...options, skipEscape: true })\n  } else if (typeof uriB === 'object') {\n    uriB = serialize(normalizeComponentEncoding(uriB, true), { ...options, skipEscape: true })\n  }\n\n  return uriA.toLowerCase() === uriB.toLowerCase()\n}\n\nfunction serialize (cmpts, opts) {\n  const components = {\n    host: cmpts.host,\n    scheme: cmpts.scheme,\n    userinfo: cmpts.userinfo,\n    port: cmpts.port,\n    path: cmpts.path,\n    query: cmpts.query,\n    nid: cmpts.nid,\n    nss: cmpts.nss,\n    uuid: cmpts.uuid,\n    fragment: cmpts.fragment,\n    reference: cmpts.reference,\n    resourceName: cmpts.resourceName,\n    secure: cmpts.secure,\n    error: ''\n  }\n  const options = Object.assign({}, opts)\n  const uriTokens = []\n\n  // find scheme handler\n  const schemeHandler = SCHEMES[(options.scheme || components.scheme || '').toLowerCase()]\n\n  // perform scheme specific serialization\n  if (schemeHandler && schemeHandler.serialize) schemeHandler.serialize(components, options)\n\n  if (components.path !== undefined) {\n    if (!options.skipEscape) {\n      components.path = escape(components.path)\n\n      if (components.scheme !== undefined) {\n        components.path = components.path.split('%3A').join(':')\n      }\n    } else {\n      components.path = unescape(components.path)\n    }\n  }\n\n  if (options.reference !== 'suffix' && components.scheme) {\n    uriTokens.push(components.scheme, ':')\n  }\n\n  const authority = recomposeAuthority(components)\n  if (authority !== undefined) {\n    if (options.reference !== 'suffix') {\n      uriTokens.push('//')\n    }\n\n    uriTokens.push(authority)\n\n    if (components.path && components.path.charAt(0) !== '/') {\n      uriTokens.push('/')\n    }\n  }\n  if (components.path !== undefined) {\n    let s = components.path\n\n    if (!options.absolutePath && (!schemeHandler || !schemeHandler.absolutePath)) {\n      s = removeDotSegments(s)\n    }\n\n    if (authority === undefined) {\n      s = s.replace(/^\\/\\//u, '/%2F') // don't allow the path to start with \"//\"\n    }\n\n    uriTokens.push(s)\n  }\n\n  if (components.query !== undefined) {\n    uriTokens.push('?', components.query)\n  }\n\n  if (components.fragment !== undefined) {\n    uriTokens.push('#', components.fragment)\n  }\n  return uriTokens.join('')\n}\n\nconst hexLookUp = Array.from({ length: 127 }, (_v, k) => /[^!\"$&'()*+,\\-.;=_`a-z{}~]/u.test(String.fromCharCode(k)))\n\nfunction nonSimpleDomain (value) {\n  let code = 0\n  for (let i = 0, len = value.length; i < len; ++i) {\n    code = value.charCodeAt(i)\n    if (code > 126 || hexLookUp[code]) {\n      return true\n    }\n  }\n  return false\n}\n\nconst URI_PARSE = /^(?:([^#/:?]+):)?(?:\\/\\/((?:([^#/?@]*)@)?(\\[[^#/?\\]]+\\]|[^#/:?]*)(?::(\\d*))?))?([^#?]*)(?:\\?([^#]*))?(?:#((?:.|[\\n\\r])*))?/u\n\nfunction parse (uri, opts) {\n  const options = Object.assign({}, opts)\n  const parsed = {\n    scheme: undefined,\n    userinfo: undefined,\n    host: '',\n    port: undefined,\n    path: '',\n    query: undefined,\n    fragment: undefined\n  }\n  const gotEncoding = uri.indexOf('%') !== -1\n  let isIP = false\n  if (options.reference === 'suffix') uri = (options.scheme ? options.scheme + ':' : '') + '//' + uri\n\n  const matches = uri.match(URI_PARSE)\n\n  if (matches) {\n    // store each component\n    parsed.scheme = matches[1]\n    parsed.userinfo = matches[3]\n    parsed.host = matches[4]\n    parsed.port = parseInt(matches[5], 10)\n    parsed.path = matches[6] || ''\n    parsed.query = matches[7]\n    parsed.fragment = matches[8]\n\n    // fix port number\n    if (isNaN(parsed.port)) {\n      parsed.port = matches[5]\n    }\n    if (parsed.host) {\n      const ipv4result = normalizeIPv4(parsed.host)\n      if (ipv4result.isIPV4 === false) {\n        const ipv6result = normalizeIPv6(ipv4result.host)\n        parsed.host = ipv6result.host.toLowerCase()\n        isIP = ipv6result.isIPV6\n      } else {\n        parsed.host = ipv4result.host\n        isIP = true\n      }\n    }\n    if (parsed.scheme === undefined && parsed.userinfo === undefined && parsed.host === undefined && parsed.port === undefined && parsed.query === undefined && !parsed.path) {\n      parsed.reference = 'same-document'\n    } else if (parsed.scheme === undefined) {\n      parsed.reference = 'relative'\n    } else if (parsed.fragment === undefined) {\n      parsed.reference = 'absolute'\n    } else {\n      parsed.reference = 'uri'\n    }\n\n    // check for reference errors\n    if (options.reference && options.reference !== 'suffix' && options.reference !== parsed.reference) {\n      parsed.error = parsed.error || 'URI is not a ' + options.reference + ' reference.'\n    }\n\n    // find scheme handler\n    const schemeHandler = SCHEMES[(options.scheme || parsed.scheme || '').toLowerCase()]\n\n    // check if scheme can't handle IRIs\n    if (!options.unicodeSupport && (!schemeHandler || !schemeHandler.unicodeSupport)) {\n      // if host component is a domain name\n      if (parsed.host && (options.domainHost || (schemeHandler && schemeHandler.domainHost)) && isIP === false && nonSimpleDomain(parsed.host)) {\n        // convert Unicode IDN -> ASCII IDN\n        try {\n          parsed.host = URL.domainToASCII(parsed.host.toLowerCase())\n        } catch (e) {\n          parsed.error = parsed.error || \"Host's domain name can not be converted to ASCII: \" + e\n        }\n      }\n      // convert IRI -> URI\n    }\n\n    if (!schemeHandler || (schemeHandler && !schemeHandler.skipNormalize)) {\n      if (gotEncoding && parsed.scheme !== undefined) {\n        parsed.scheme = unescape(parsed.scheme)\n      }\n      if (gotEncoding && parsed.host !== undefined) {\n        parsed.host = unescape(parsed.host)\n      }\n      if (parsed.path) {\n        parsed.path = escape(unescape(parsed.path))\n      }\n      if (parsed.fragment) {\n        parsed.fragment = encodeURI(decodeURIComponent(parsed.fragment))\n      }\n    }\n\n    // perform scheme specific parsing\n    if (schemeHandler && schemeHandler.parse) {\n      schemeHandler.parse(parsed, options)\n    }\n  } else {\n    parsed.error = parsed.error || 'URI can not be parsed.'\n  }\n  return parsed\n}\n\nconst fastUri = {\n  SCHEMES,\n  normalize,\n  resolve,\n  resolveComponents,\n  equal,\n  serialize,\n  parse\n}\n\nmodule.exports = fastUri\nmodule.exports.default = fastUri\nmodule.exports.fastUri = fastUri\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst uri = require(\"fast-uri\");\nuri.code = 'require(\"ajv/dist/runtime/uri\").default';\nexports.default = uri;\n//# sourceMappingURL=uri.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CodeGen = exports.Name = exports.nil = exports.stringify = exports.str = exports._ = exports.KeywordCxt = void 0;\nvar validate_1 = require(\"./compile/validate\");\nObject.defineProperty(exports, \"KeywordCxt\", { enumerable: true, get: function () { return validate_1.KeywordCxt; } });\nvar codegen_1 = require(\"./compile/codegen\");\nObject.defineProperty(exports, \"_\", { enumerable: true, get: function () { return codegen_1._; } });\nObject.defineProperty(exports, \"str\", { enumerable: true, get: function () { return codegen_1.str; } });\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return codegen_1.stringify; } });\nObject.defineProperty(exports, \"nil\", { enumerable: true, get: function () { return codegen_1.nil; } });\nObject.defineProperty(exports, \"Name\", { enumerable: true, get: function () { return codegen_1.Name; } });\nObject.defineProperty(exports, \"CodeGen\", { enumerable: true, get: function () { return codegen_1.CodeGen; } });\nconst validation_error_1 = require(\"./runtime/validation_error\");\nconst ref_error_1 = require(\"./compile/ref_error\");\nconst rules_1 = require(\"./compile/rules\");\nconst compile_1 = require(\"./compile\");\nconst codegen_2 = require(\"./compile/codegen\");\nconst resolve_1 = require(\"./compile/resolve\");\nconst dataType_1 = require(\"./compile/validate/dataType\");\nconst util_1 = require(\"./compile/util\");\nconst $dataRefSchema = require(\"./refs/data.json\");\nconst uri_1 = require(\"./runtime/uri\");\nconst defaultRegExp = (str, flags) => new RegExp(str, flags);\ndefaultRegExp.code = \"new RegExp\";\nconst META_IGNORE_OPTIONS = [\"removeAdditional\", \"useDefaults\", \"coerceTypes\"];\nconst EXT_SCOPE_NAMES = new Set([\n    \"validate\",\n    \"serialize\",\n    \"parse\",\n    \"wrapper\",\n    \"root\",\n    \"schema\",\n    \"keyword\",\n    \"pattern\",\n    \"formats\",\n    \"validate$data\",\n    \"func\",\n    \"obj\",\n    \"Error\",\n]);\nconst removedOptions = {\n    errorDataPath: \"\",\n    format: \"`validateFormats: false` can be used instead.\",\n    nullable: '\"nullable\" keyword is supported by default.',\n    jsonPointers: \"Deprecated jsPropertySyntax can be used instead.\",\n    extendRefs: \"Deprecated ignoreKeywordsWithRef can be used instead.\",\n    missingRefs: \"Pass empty schema with $id that should be ignored to ajv.addSchema.\",\n    processCode: \"Use option `code: {process: (code, schemaEnv: object) => string}`\",\n    sourceCode: \"Use option `code: {source: true}`\",\n    strictDefaults: \"It is default now, see option `strict`.\",\n    strictKeywords: \"It is default now, see option `strict`.\",\n    uniqueItems: '\"uniqueItems\" keyword is always validated.',\n    unknownFormats: \"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).\",\n    cache: \"Map is used as cache, schema object as key.\",\n    serialize: \"Map is used as cache, schema object as key.\",\n    ajvErrors: \"It is default now.\",\n};\nconst deprecatedOptions = {\n    ignoreKeywordsWithRef: \"\",\n    jsPropertySyntax: \"\",\n    unicode: '\"minLength\"/\"maxLength\" account for unicode characters by default.',\n};\nconst MAX_EXPRESSION = 200;\n// eslint-disable-next-line complexity\nfunction requiredOptions(o) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0;\n    const s = o.strict;\n    const _optz = (_a = o.code) === null || _a === void 0 ? void 0 : _a.optimize;\n    const optimize = _optz === true || _optz === undefined ? 1 : _optz || 0;\n    const regExp = (_c = (_b = o.code) === null || _b === void 0 ? void 0 : _b.regExp) !== null && _c !== void 0 ? _c : defaultRegExp;\n    const uriResolver = (_d = o.uriResolver) !== null && _d !== void 0 ? _d : uri_1.default;\n    return {\n        strictSchema: (_f = (_e = o.strictSchema) !== null && _e !== void 0 ? _e : s) !== null && _f !== void 0 ? _f : true,\n        strictNumbers: (_h = (_g = o.strictNumbers) !== null && _g !== void 0 ? _g : s) !== null && _h !== void 0 ? _h : true,\n        strictTypes: (_k = (_j = o.strictTypes) !== null && _j !== void 0 ? _j : s) !== null && _k !== void 0 ? _k : \"log\",\n        strictTuples: (_m = (_l = o.strictTuples) !== null && _l !== void 0 ? _l : s) !== null && _m !== void 0 ? _m : \"log\",\n        strictRequired: (_p = (_o = o.strictRequired) !== null && _o !== void 0 ? _o : s) !== null && _p !== void 0 ? _p : false,\n        code: o.code ? { ...o.code, optimize, regExp } : { optimize, regExp },\n        loopRequired: (_q = o.loopRequired) !== null && _q !== void 0 ? _q : MAX_EXPRESSION,\n        loopEnum: (_r = o.loopEnum) !== null && _r !== void 0 ? _r : MAX_EXPRESSION,\n        meta: (_s = o.meta) !== null && _s !== void 0 ? _s : true,\n        messages: (_t = o.messages) !== null && _t !== void 0 ? _t : true,\n        inlineRefs: (_u = o.inlineRefs) !== null && _u !== void 0 ? _u : true,\n        schemaId: (_v = o.schemaId) !== null && _v !== void 0 ? _v : \"$id\",\n        addUsedSchema: (_w = o.addUsedSchema) !== null && _w !== void 0 ? _w : true,\n        validateSchema: (_x = o.validateSchema) !== null && _x !== void 0 ? _x : true,\n        validateFormats: (_y = o.validateFormats) !== null && _y !== void 0 ? _y : true,\n        unicodeRegExp: (_z = o.unicodeRegExp) !== null && _z !== void 0 ? _z : true,\n        int32range: (_0 = o.int32range) !== null && _0 !== void 0 ? _0 : true,\n        uriResolver: uriResolver,\n    };\n}\nclass Ajv {\n    constructor(opts = {}) {\n        this.schemas = {};\n        this.refs = {};\n        this.formats = {};\n        this._compilations = new Set();\n        this._loading = {};\n        this._cache = new Map();\n        opts = this.opts = { ...opts, ...requiredOptions(opts) };\n        const { es5, lines } = this.opts.code;\n        this.scope = new codegen_2.ValueScope({ scope: {}, prefixes: EXT_SCOPE_NAMES, es5, lines });\n        this.logger = getLogger(opts.logger);\n        const formatOpt = opts.validateFormats;\n        opts.validateFormats = false;\n        this.RULES = (0, rules_1.getRules)();\n        checkOptions.call(this, removedOptions, opts, \"NOT SUPPORTED\");\n        checkOptions.call(this, deprecatedOptions, opts, \"DEPRECATED\", \"warn\");\n        this._metaOpts = getMetaSchemaOptions.call(this);\n        if (opts.formats)\n            addInitialFormats.call(this);\n        this._addVocabularies();\n        this._addDefaultMetaSchema();\n        if (opts.keywords)\n            addInitialKeywords.call(this, opts.keywords);\n        if (typeof opts.meta == \"object\")\n            this.addMetaSchema(opts.meta);\n        addInitialSchemas.call(this);\n        opts.validateFormats = formatOpt;\n    }\n    _addVocabularies() {\n        this.addKeyword(\"$async\");\n    }\n    _addDefaultMetaSchema() {\n        const { $data, meta, schemaId } = this.opts;\n        let _dataRefSchema = $dataRefSchema;\n        if (schemaId === \"id\") {\n            _dataRefSchema = { ...$dataRefSchema };\n            _dataRefSchema.id = _dataRefSchema.$id;\n            delete _dataRefSchema.$id;\n        }\n        if (meta && $data)\n            this.addMetaSchema(_dataRefSchema, _dataRefSchema[schemaId], false);\n    }\n    defaultMeta() {\n        const { meta, schemaId } = this.opts;\n        return (this.opts.defaultMeta = typeof meta == \"object\" ? meta[schemaId] || meta : undefined);\n    }\n    validate(schemaKeyRef, // key, ref or schema object\n    // eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\n    data // to be validated\n    ) {\n        let v;\n        if (typeof schemaKeyRef == \"string\") {\n            v = this.getSchema(schemaKeyRef);\n            if (!v)\n                throw new Error(`no schema with key or ref \"${schemaKeyRef}\"`);\n        }\n        else {\n            v = this.compile(schemaKeyRef);\n        }\n        const valid = v(data);\n        if (!(\"$async\" in v))\n            this.errors = v.errors;\n        return valid;\n    }\n    compile(schema, _meta) {\n        const sch = this._addSchema(schema, _meta);\n        return (sch.validate || this._compileSchemaEnv(sch));\n    }\n    compileAsync(schema, meta) {\n        if (typeof this.opts.loadSchema != \"function\") {\n            throw new Error(\"options.loadSchema should be a function\");\n        }\n        const { loadSchema } = this.opts;\n        return runCompileAsync.call(this, schema, meta);\n        async function runCompileAsync(_schema, _meta) {\n            await loadMetaSchema.call(this, _schema.$schema);\n            const sch = this._addSchema(_schema, _meta);\n            return sch.validate || _compileAsync.call(this, sch);\n        }\n        async function loadMetaSchema($ref) {\n            if ($ref && !this.getSchema($ref)) {\n                await runCompileAsync.call(this, { $ref }, true);\n            }\n        }\n        async function _compileAsync(sch) {\n            try {\n                return this._compileSchemaEnv(sch);\n            }\n            catch (e) {\n                if (!(e instanceof ref_error_1.default))\n                    throw e;\n                checkLoaded.call(this, e);\n                await loadMissingSchema.call(this, e.missingSchema);\n                return _compileAsync.call(this, sch);\n            }\n        }\n        function checkLoaded({ missingSchema: ref, missingRef }) {\n            if (this.refs[ref]) {\n                throw new Error(`AnySchema ${ref} is loaded but ${missingRef} cannot be resolved`);\n            }\n        }\n        async function loadMissingSchema(ref) {\n            const _schema = await _loadSchema.call(this, ref);\n            if (!this.refs[ref])\n                await loadMetaSchema.call(this, _schema.$schema);\n            if (!this.refs[ref])\n                this.addSchema(_schema, ref, meta);\n        }\n        async function _loadSchema(ref) {\n            const p = this._loading[ref];\n            if (p)\n                return p;\n            try {\n                return await (this._loading[ref] = loadSchema(ref));\n            }\n            finally {\n                delete this._loading[ref];\n            }\n        }\n    }\n    // Adds schema to the instance\n    addSchema(schema, // If array is passed, `key` will be ignored\n    key, // Optional schema key. Can be passed to `validate` method instead of schema object or id/ref. One schema per instance can have empty `id` and `key`.\n    _meta, // true if schema is a meta-schema. Used internally, addMetaSchema should be used instead.\n    _validateSchema = this.opts.validateSchema // false to skip schema validation. Used internally, option validateSchema should be used instead.\n    ) {\n        if (Array.isArray(schema)) {\n            for (const sch of schema)\n                this.addSchema(sch, undefined, _meta, _validateSchema);\n            return this;\n        }\n        let id;\n        if (typeof schema === \"object\") {\n            const { schemaId } = this.opts;\n            id = schema[schemaId];\n            if (id !== undefined && typeof id != \"string\") {\n                throw new Error(`schema ${schemaId} must be string`);\n            }\n        }\n        key = (0, resolve_1.normalizeId)(key || id);\n        this._checkUnique(key);\n        this.schemas[key] = this._addSchema(schema, _meta, key, _validateSchema, true);\n        return this;\n    }\n    // Add schema that will be used to validate other schemas\n    // options in META_IGNORE_OPTIONS are alway set to false\n    addMetaSchema(schema, key, // schema key\n    _validateSchema = this.opts.validateSchema // false to skip schema validation, can be used to override validateSchema option for meta-schema\n    ) {\n        this.addSchema(schema, key, true, _validateSchema);\n        return this;\n    }\n    //  Validate schema against its meta-schema\n    validateSchema(schema, throwOrLogError) {\n        if (typeof schema == \"boolean\")\n            return true;\n        let $schema;\n        $schema = schema.$schema;\n        if ($schema !== undefined && typeof $schema != \"string\") {\n            throw new Error(\"$schema must be a string\");\n        }\n        $schema = $schema || this.opts.defaultMeta || this.defaultMeta();\n        if (!$schema) {\n            this.logger.warn(\"meta-schema not available\");\n            this.errors = null;\n            return true;\n        }\n        const valid = this.validate($schema, schema);\n        if (!valid && throwOrLogError) {\n            const message = \"schema is invalid: \" + this.errorsText();\n            if (this.opts.validateSchema === \"log\")\n                this.logger.error(message);\n            else\n                throw new Error(message);\n        }\n        return valid;\n    }\n    // Get compiled schema by `key` or `ref`.\n    // (`key` that was passed to `addSchema` or full schema reference - `schema.$id` or resolved id)\n    getSchema(keyRef) {\n        let sch;\n        while (typeof (sch = getSchEnv.call(this, keyRef)) == \"string\")\n            keyRef = sch;\n        if (sch === undefined) {\n            const { schemaId } = this.opts;\n            const root = new compile_1.SchemaEnv({ schema: {}, schemaId });\n            sch = compile_1.resolveSchema.call(this, root, keyRef);\n            if (!sch)\n                return;\n            this.refs[keyRef] = sch;\n        }\n        return (sch.validate || this._compileSchemaEnv(sch));\n    }\n    // Remove cached schema(s).\n    // If no parameter is passed all schemas but meta-schemas are removed.\n    // If RegExp is passed all schemas with key/id matching pattern but meta-schemas are removed.\n    // Even if schema is referenced by other schemas it still can be removed as other schemas have local references.\n    removeSchema(schemaKeyRef) {\n        if (schemaKeyRef instanceof RegExp) {\n            this._removeAllSchemas(this.schemas, schemaKeyRef);\n            this._removeAllSchemas(this.refs, schemaKeyRef);\n            return this;\n        }\n        switch (typeof schemaKeyRef) {\n            case \"undefined\":\n                this._removeAllSchemas(this.schemas);\n                this._removeAllSchemas(this.refs);\n                this._cache.clear();\n                return this;\n            case \"string\": {\n                const sch = getSchEnv.call(this, schemaKeyRef);\n                if (typeof sch == \"object\")\n                    this._cache.delete(sch.schema);\n                delete this.schemas[schemaKeyRef];\n                delete this.refs[schemaKeyRef];\n                return this;\n            }\n            case \"object\": {\n                const cacheKey = schemaKeyRef;\n                this._cache.delete(cacheKey);\n                let id = schemaKeyRef[this.opts.schemaId];\n                if (id) {\n                    id = (0, resolve_1.normalizeId)(id);\n                    delete this.schemas[id];\n                    delete this.refs[id];\n                }\n                return this;\n            }\n            default:\n                throw new Error(\"ajv.removeSchema: invalid parameter\");\n        }\n    }\n    // add \"vocabulary\" - a collection of keywords\n    addVocabulary(definitions) {\n        for (const def of definitions)\n            this.addKeyword(def);\n        return this;\n    }\n    addKeyword(kwdOrDef, def // deprecated\n    ) {\n        let keyword;\n        if (typeof kwdOrDef == \"string\") {\n            keyword = kwdOrDef;\n            if (typeof def == \"object\") {\n                this.logger.warn(\"these parameters are deprecated, see docs for addKeyword\");\n                def.keyword = keyword;\n            }\n        }\n        else if (typeof kwdOrDef == \"object\" && def === undefined) {\n            def = kwdOrDef;\n            keyword = def.keyword;\n            if (Array.isArray(keyword) && !keyword.length) {\n                throw new Error(\"addKeywords: keyword must be string or non-empty array\");\n            }\n        }\n        else {\n            throw new Error(\"invalid addKeywords parameters\");\n        }\n        checkKeyword.call(this, keyword, def);\n        if (!def) {\n            (0, util_1.eachItem)(keyword, (kwd) => addRule.call(this, kwd));\n            return this;\n        }\n        keywordMetaschema.call(this, def);\n        const definition = {\n            ...def,\n            type: (0, dataType_1.getJSONTypes)(def.type),\n            schemaType: (0, dataType_1.getJSONTypes)(def.schemaType),\n        };\n        (0, util_1.eachItem)(keyword, definition.type.length === 0\n            ? (k) => addRule.call(this, k, definition)\n            : (k) => definition.type.forEach((t) => addRule.call(this, k, definition, t)));\n        return this;\n    }\n    getKeyword(keyword) {\n        const rule = this.RULES.all[keyword];\n        return typeof rule == \"object\" ? rule.definition : !!rule;\n    }\n    // Remove keyword\n    removeKeyword(keyword) {\n        // TODO return type should be Ajv\n        const { RULES } = this;\n        delete RULES.keywords[keyword];\n        delete RULES.all[keyword];\n        for (const group of RULES.rules) {\n            const i = group.rules.findIndex((rule) => rule.keyword === keyword);\n            if (i >= 0)\n                group.rules.splice(i, 1);\n        }\n        return this;\n    }\n    // Add format\n    addFormat(name, format) {\n        if (typeof format == \"string\")\n            format = new RegExp(format);\n        this.formats[name] = format;\n        return this;\n    }\n    errorsText(errors = this.errors, // optional array of validation errors\n    { separator = \", \", dataVar = \"data\" } = {} // optional options with properties `separator` and `dataVar`\n    ) {\n        if (!errors || errors.length === 0)\n            return \"No errors\";\n        return errors\n            .map((e) => `${dataVar}${e.instancePath} ${e.message}`)\n            .reduce((text, msg) => text + separator + msg);\n    }\n    $dataMetaSchema(metaSchema, keywordsJsonPointers) {\n        const rules = this.RULES.all;\n        metaSchema = JSON.parse(JSON.stringify(metaSchema));\n        for (const jsonPointer of keywordsJsonPointers) {\n            const segments = jsonPointer.split(\"/\").slice(1); // first segment is an empty string\n            let keywords = metaSchema;\n            for (const seg of segments)\n                keywords = keywords[seg];\n            for (const key in rules) {\n                const rule = rules[key];\n                if (typeof rule != \"object\")\n                    continue;\n                const { $data } = rule.definition;\n                const schema = keywords[key];\n                if ($data && schema)\n                    keywords[key] = schemaOrData(schema);\n            }\n        }\n        return metaSchema;\n    }\n    _removeAllSchemas(schemas, regex) {\n        for (const keyRef in schemas) {\n            const sch = schemas[keyRef];\n            if (!regex || regex.test(keyRef)) {\n                if (typeof sch == \"string\") {\n                    delete schemas[keyRef];\n                }\n                else if (sch && !sch.meta) {\n                    this._cache.delete(sch.schema);\n                    delete schemas[keyRef];\n                }\n            }\n        }\n    }\n    _addSchema(schema, meta, baseId, validateSchema = this.opts.validateSchema, addSchema = this.opts.addUsedSchema) {\n        let id;\n        const { schemaId } = this.opts;\n        if (typeof schema == \"object\") {\n            id = schema[schemaId];\n        }\n        else {\n            if (this.opts.jtd)\n                throw new Error(\"schema must be object\");\n            else if (typeof schema != \"boolean\")\n                throw new Error(\"schema must be object or boolean\");\n        }\n        let sch = this._cache.get(schema);\n        if (sch !== undefined)\n            return sch;\n        baseId = (0, resolve_1.normalizeId)(id || baseId);\n        const localRefs = resolve_1.getSchemaRefs.call(this, schema, baseId);\n        sch = new compile_1.SchemaEnv({ schema, schemaId, meta, baseId, localRefs });\n        this._cache.set(sch.schema, sch);\n        if (addSchema && !baseId.startsWith(\"#\")) {\n            // TODO atm it is allowed to overwrite schemas without id (instead of not adding them)\n            if (baseId)\n                this._checkUnique(baseId);\n            this.refs[baseId] = sch;\n        }\n        if (validateSchema)\n            this.validateSchema(schema, true);\n        return sch;\n    }\n    _checkUnique(id) {\n        if (this.schemas[id] || this.refs[id]) {\n            throw new Error(`schema with key or id \"${id}\" already exists`);\n        }\n    }\n    _compileSchemaEnv(sch) {\n        if (sch.meta)\n            this._compileMetaSchema(sch);\n        else\n            compile_1.compileSchema.call(this, sch);\n        /* istanbul ignore if */\n        if (!sch.validate)\n            throw new Error(\"ajv implementation error\");\n        return sch.validate;\n    }\n    _compileMetaSchema(sch) {\n        const currentOpts = this.opts;\n        this.opts = this._metaOpts;\n        try {\n            compile_1.compileSchema.call(this, sch);\n        }\n        finally {\n            this.opts = currentOpts;\n        }\n    }\n}\nAjv.ValidationError = validation_error_1.default;\nAjv.MissingRefError = ref_error_1.default;\nexports.default = Ajv;\nfunction checkOptions(checkOpts, options, msg, log = \"error\") {\n    for (const key in checkOpts) {\n        const opt = key;\n        if (opt in options)\n            this.logger[log](`${msg}: option ${key}. ${checkOpts[opt]}`);\n    }\n}\nfunction getSchEnv(keyRef) {\n    keyRef = (0, resolve_1.normalizeId)(keyRef); // TODO tests fail without this line\n    return this.schemas[keyRef] || this.refs[keyRef];\n}\nfunction addInitialSchemas() {\n    const optsSchemas = this.opts.schemas;\n    if (!optsSchemas)\n        return;\n    if (Array.isArray(optsSchemas))\n        this.addSchema(optsSchemas);\n    else\n        for (const key in optsSchemas)\n            this.addSchema(optsSchemas[key], key);\n}\nfunction addInitialFormats() {\n    for (const name in this.opts.formats) {\n        const format = this.opts.formats[name];\n        if (format)\n            this.addFormat(name, format);\n    }\n}\nfunction addInitialKeywords(defs) {\n    if (Array.isArray(defs)) {\n        this.addVocabulary(defs);\n        return;\n    }\n    this.logger.warn(\"keywords option as map is deprecated, pass array\");\n    for (const keyword in defs) {\n        const def = defs[keyword];\n        if (!def.keyword)\n            def.keyword = keyword;\n        this.addKeyword(def);\n    }\n}\nfunction getMetaSchemaOptions() {\n    const metaOpts = { ...this.opts };\n    for (const opt of META_IGNORE_OPTIONS)\n        delete metaOpts[opt];\n    return metaOpts;\n}\nconst noLogs = { log() { }, warn() { }, error() { } };\nfunction getLogger(logger) {\n    if (logger === false)\n        return noLogs;\n    if (logger === undefined)\n        return console;\n    if (logger.log && logger.warn && logger.error)\n        return logger;\n    throw new Error(\"logger must implement log, warn and error methods\");\n}\nconst KEYWORD_NAME = /^[a-z_$][a-z0-9_$:-]*$/i;\nfunction checkKeyword(keyword, def) {\n    const { RULES } = this;\n    (0, util_1.eachItem)(keyword, (kwd) => {\n        if (RULES.keywords[kwd])\n            throw new Error(`Keyword ${kwd} is already defined`);\n        if (!KEYWORD_NAME.test(kwd))\n            throw new Error(`Keyword ${kwd} has invalid name`);\n    });\n    if (!def)\n        return;\n    if (def.$data && !(\"code\" in def || \"validate\" in def)) {\n        throw new Error('$data keyword must have \"code\" or \"validate\" function');\n    }\n}\nfunction addRule(keyword, definition, dataType) {\n    var _a;\n    const post = definition === null || definition === void 0 ? void 0 : definition.post;\n    if (dataType && post)\n        throw new Error('keyword with \"post\" flag cannot have \"type\"');\n    const { RULES } = this;\n    let ruleGroup = post ? RULES.post : RULES.rules.find(({ type: t }) => t === dataType);\n    if (!ruleGroup) {\n        ruleGroup = { type: dataType, rules: [] };\n        RULES.rules.push(ruleGroup);\n    }\n    RULES.keywords[keyword] = true;\n    if (!definition)\n        return;\n    const rule = {\n        keyword,\n        definition: {\n            ...definition,\n            type: (0, dataType_1.getJSONTypes)(definition.type),\n            schemaType: (0, dataType_1.getJSONTypes)(definition.schemaType),\n        },\n    };\n    if (definition.before)\n        addBeforeRule.call(this, ruleGroup, rule, definition.before);\n    else\n        ruleGroup.rules.push(rule);\n    RULES.all[keyword] = rule;\n    (_a = definition.implements) === null || _a === void 0 ? void 0 : _a.forEach((kwd) => this.addKeyword(kwd));\n}\nfunction addBeforeRule(ruleGroup, rule, before) {\n    const i = ruleGroup.rules.findIndex((_rule) => _rule.keyword === before);\n    if (i >= 0) {\n        ruleGroup.rules.splice(i, 0, rule);\n    }\n    else {\n        ruleGroup.rules.push(rule);\n        this.logger.warn(`rule ${before} is not defined`);\n    }\n}\nfunction keywordMetaschema(def) {\n    let { metaSchema } = def;\n    if (metaSchema === undefined)\n        return;\n    if (def.$data && this.opts.$data)\n        metaSchema = schemaOrData(metaSchema);\n    def.validateSchema = this.compile(metaSchema, true);\n}\nconst $dataRef = {\n    $ref: \"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#\",\n};\nfunction schemaOrData(schema) {\n    return { anyOf: [schema, $dataRef] };\n}\n//# sourceMappingURL=core.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst def = {\n    keyword: \"id\",\n    code() {\n        throw new Error('NOT SUPPORTED: keyword \"id\", use \"$id\" for schema ID');\n    },\n};\nexports.default = def;\n//# sourceMappingURL=id.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.callRef = exports.getValidate = void 0;\nconst ref_error_1 = require(\"../../compile/ref_error\");\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst names_1 = require(\"../../compile/names\");\nconst compile_1 = require(\"../../compile\");\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"$ref\",\n    schemaType: \"string\",\n    code(cxt) {\n        const { gen, schema: $ref, it } = cxt;\n        const { baseId, schemaEnv: env, validateName, opts, self } = it;\n        const { root } = env;\n        if (($ref === \"#\" || $ref === \"#/\") && baseId === root.baseId)\n            return callRootRef();\n        const schOrEnv = compile_1.resolveRef.call(self, root, baseId, $ref);\n        if (schOrEnv === undefined)\n            throw new ref_error_1.default(it.opts.uriResolver, baseId, $ref);\n        if (schOrEnv instanceof compile_1.SchemaEnv)\n            return callValidate(schOrEnv);\n        return inlineRefSchema(schOrEnv);\n        function callRootRef() {\n            if (env === root)\n                return callRef(cxt, validateName, env, env.$async);\n            const rootName = gen.scopeValue(\"root\", { ref: root });\n            return callRef(cxt, (0, codegen_1._) `${rootName}.validate`, root, root.$async);\n        }\n        function callValidate(sch) {\n            const v = getValidate(cxt, sch);\n            callRef(cxt, v, sch, sch.$async);\n        }\n        function inlineRefSchema(sch) {\n            const schName = gen.scopeValue(\"schema\", opts.code.source === true ? { ref: sch, code: (0, codegen_1.stringify)(sch) } : { ref: sch });\n            const valid = gen.name(\"valid\");\n            const schCxt = cxt.subschema({\n                schema: sch,\n                dataTypes: [],\n                schemaPath: codegen_1.nil,\n                topSchemaRef: schName,\n                errSchemaPath: $ref,\n            }, valid);\n            cxt.mergeEvaluated(schCxt);\n            cxt.ok(valid);\n        }\n    },\n};\nfunction getValidate(cxt, sch) {\n    const { gen } = cxt;\n    return sch.validate\n        ? gen.scopeValue(\"validate\", { ref: sch.validate })\n        : (0, codegen_1._) `${gen.scopeValue(\"wrapper\", { ref: sch })}.validate`;\n}\nexports.getValidate = getValidate;\nfunction callRef(cxt, v, sch, $async) {\n    const { gen, it } = cxt;\n    const { allErrors, schemaEnv: env, opts } = it;\n    const passCxt = opts.passContext ? names_1.default.this : codegen_1.nil;\n    if ($async)\n        callAsyncRef();\n    else\n        callSyncRef();\n    function callAsyncRef() {\n        if (!env.$async)\n            throw new Error(\"async schema referenced by sync schema\");\n        const valid = gen.let(\"valid\");\n        gen.try(() => {\n            gen.code((0, codegen_1._) `await ${(0, code_1.callValidateCode)(cxt, v, passCxt)}`);\n            addEvaluatedFrom(v); // TODO will not work with async, it has to be returned with the result\n            if (!allErrors)\n                gen.assign(valid, true);\n        }, (e) => {\n            gen.if((0, codegen_1._) `!(${e} instanceof ${it.ValidationError})`, () => gen.throw(e));\n            addErrorsFrom(e);\n            if (!allErrors)\n                gen.assign(valid, false);\n        });\n        cxt.ok(valid);\n    }\n    function callSyncRef() {\n        cxt.result((0, code_1.callValidateCode)(cxt, v, passCxt), () => addEvaluatedFrom(v), () => addErrorsFrom(v));\n    }\n    function addErrorsFrom(source) {\n        const errs = (0, codegen_1._) `${source}.errors`;\n        gen.assign(names_1.default.vErrors, (0, codegen_1._) `${names_1.default.vErrors} === null ? ${errs} : ${names_1.default.vErrors}.concat(${errs})`); // TODO tagged\n        gen.assign(names_1.default.errors, (0, codegen_1._) `${names_1.default.vErrors}.length`);\n    }\n    function addEvaluatedFrom(source) {\n        var _a;\n        if (!it.opts.unevaluated)\n            return;\n        const schEvaluated = (_a = sch === null || sch === void 0 ? void 0 : sch.validate) === null || _a === void 0 ? void 0 : _a.evaluated;\n        // TODO refactor\n        if (it.props !== true) {\n            if (schEvaluated && !schEvaluated.dynamicProps) {\n                if (schEvaluated.props !== undefined) {\n                    it.props = util_1.mergeEvaluated.props(gen, schEvaluated.props, it.props);\n                }\n            }\n            else {\n                const props = gen.var(\"props\", (0, codegen_1._) `${source}.evaluated.props`);\n                it.props = util_1.mergeEvaluated.props(gen, props, it.props, codegen_1.Name);\n            }\n        }\n        if (it.items !== true) {\n            if (schEvaluated && !schEvaluated.dynamicItems) {\n                if (schEvaluated.items !== undefined) {\n                    it.items = util_1.mergeEvaluated.items(gen, schEvaluated.items, it.items);\n                }\n            }\n            else {\n                const items = gen.var(\"items\", (0, codegen_1._) `${source}.evaluated.items`);\n                it.items = util_1.mergeEvaluated.items(gen, items, it.items, codegen_1.Name);\n            }\n        }\n    }\n}\nexports.callRef = callRef;\nexports.default = def;\n//# sourceMappingURL=ref.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst id_1 = require(\"./id\");\nconst ref_1 = require(\"./ref\");\nconst core = [\n    \"$schema\",\n    \"$id\",\n    \"$defs\",\n    \"$vocabulary\",\n    { keyword: \"$comment\" },\n    \"definitions\",\n    id_1.default,\n    ref_1.default,\n];\nexports.default = core;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst ops = codegen_1.operators;\nconst KWDs = {\n    maximum: { okStr: \"<=\", ok: ops.LTE, fail: ops.GT },\n    minimum: { okStr: \">=\", ok: ops.GTE, fail: ops.LT },\n    exclusiveMaximum: { okStr: \"<\", ok: ops.LT, fail: ops.GTE },\n    exclusiveMinimum: { okStr: \">\", ok: ops.GT, fail: ops.LTE },\n};\nconst error = {\n    message: ({ keyword, schemaCode }) => (0, codegen_1.str) `must be ${KWDs[keyword].okStr} ${schemaCode}`,\n    params: ({ keyword, schemaCode }) => (0, codegen_1._) `{comparison: ${KWDs[keyword].okStr}, limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: Object.keys(KWDs),\n    type: \"number\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode } = cxt;\n        cxt.fail$data((0, codegen_1._) `${data} ${KWDs[keyword].fail} ${schemaCode} || isNaN(${data})`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitNumber.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message: ({ schemaCode }) => (0, codegen_1.str) `must be multiple of ${schemaCode}`,\n    params: ({ schemaCode }) => (0, codegen_1._) `{multipleOf: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"multipleOf\",\n    type: \"number\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, schemaCode, it } = cxt;\n        // const bdt = bad$DataType(schemaCode, <string>def.schemaType, $data)\n        const prec = it.opts.multipleOfPrecision;\n        const res = gen.let(\"res\");\n        const invalid = prec\n            ? (0, codegen_1._) `Math.abs(Math.round(${res}) - ${res}) > 1e-${prec}`\n            : (0, codegen_1._) `${res} !== parseInt(${res})`;\n        cxt.fail$data((0, codegen_1._) `(${schemaCode} === 0 || (${res} = ${data}/${schemaCode}, ${invalid}))`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=multipleOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// https://mathiasbynens.be/notes/javascript-encoding\n// https://github.com/bestiejs/punycode.js - punycode.ucs2.decode\nfunction ucs2length(str) {\n    const len = str.length;\n    let length = 0;\n    let pos = 0;\n    let value;\n    while (pos < len) {\n        length++;\n        value = str.charCodeAt(pos++);\n        if (value >= 0xd800 && value <= 0xdbff && pos < len) {\n            // high surrogate, and there is a next character\n            value = str.charCodeAt(pos);\n            if ((value & 0xfc00) === 0xdc00)\n                pos++; // low surrogate\n        }\n    }\n    return length;\n}\nexports.default = ucs2length;\nucs2length.code = 'require(\"ajv/dist/runtime/ucs2length\").default';\n//# sourceMappingURL=ucs2length.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst ucs2length_1 = require(\"../../runtime/ucs2length\");\nconst error = {\n    message({ keyword, schemaCode }) {\n        const comp = keyword === \"maxLength\" ? \"more\" : \"fewer\";\n        return (0, codegen_1.str) `must NOT have ${comp} than ${schemaCode} characters`;\n    },\n    params: ({ schemaCode }) => (0, codegen_1._) `{limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: [\"maxLength\", \"minLength\"],\n    type: \"string\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode, it } = cxt;\n        const op = keyword === \"maxLength\" ? codegen_1.operators.GT : codegen_1.operators.LT;\n        const len = it.opts.unicode === false ? (0, codegen_1._) `${data}.length` : (0, codegen_1._) `${(0, util_1.useFunc)(cxt.gen, ucs2length_1.default)}(${data})`;\n        cxt.fail$data((0, codegen_1._) `${len} ${op} ${schemaCode}`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitLength.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message: ({ schemaCode }) => (0, codegen_1.str) `must match pattern \"${schemaCode}\"`,\n    params: ({ schemaCode }) => (0, codegen_1._) `{pattern: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"pattern\",\n    type: \"string\",\n    schemaType: \"string\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { data, $data, schema, schemaCode, it } = cxt;\n        // TODO regexp should be wrapped in try/catchs\n        const u = it.opts.unicodeRegExp ? \"u\" : \"\";\n        const regExp = $data ? (0, codegen_1._) `(new RegExp(${schemaCode}, ${u}))` : (0, code_1.usePattern)(cxt, schema);\n        cxt.fail$data((0, codegen_1._) `!${regExp}.test(${data})`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=pattern.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message({ keyword, schemaCode }) {\n        const comp = keyword === \"maxProperties\" ? \"more\" : \"fewer\";\n        return (0, codegen_1.str) `must NOT have ${comp} than ${schemaCode} properties`;\n    },\n    params: ({ schemaCode }) => (0, codegen_1._) `{limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: [\"maxProperties\", \"minProperties\"],\n    type: \"object\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode } = cxt;\n        const op = keyword === \"maxProperties\" ? codegen_1.operators.GT : codegen_1.operators.LT;\n        cxt.fail$data((0, codegen_1._) `Object.keys(${data}).length ${op} ${schemaCode}`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitProperties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { missingProperty } }) => (0, codegen_1.str) `must have required property '${missingProperty}'`,\n    params: ({ params: { missingProperty } }) => (0, codegen_1._) `{missingProperty: ${missingProperty}}`,\n};\nconst def = {\n    keyword: \"required\",\n    type: \"object\",\n    schemaType: \"array\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, schema, schemaCode, data, $data, it } = cxt;\n        const { opts } = it;\n        if (!$data && schema.length === 0)\n            return;\n        const useLoop = schema.length >= opts.loopRequired;\n        if (it.allErrors)\n            allErrorsMode();\n        else\n            exitOnErrorMode();\n        if (opts.strictRequired) {\n            const props = cxt.parentSchema.properties;\n            const { definedProperties } = cxt.it;\n            for (const requiredKey of schema) {\n                if ((props === null || props === void 0 ? void 0 : props[requiredKey]) === undefined && !definedProperties.has(requiredKey)) {\n                    const schemaPath = it.schemaEnv.baseId + it.errSchemaPath;\n                    const msg = `required property \"${requiredKey}\" is not defined at \"${schemaPath}\" (strictRequired)`;\n                    (0, util_1.checkStrictMode)(it, msg, it.opts.strictRequired);\n                }\n            }\n        }\n        function allErrorsMode() {\n            if (useLoop || $data) {\n                cxt.block$data(codegen_1.nil, loopAllRequired);\n            }\n            else {\n                for (const prop of schema) {\n                    (0, code_1.checkReportMissingProp)(cxt, prop);\n                }\n            }\n        }\n        function exitOnErrorMode() {\n            const missing = gen.let(\"missing\");\n            if (useLoop || $data) {\n                const valid = gen.let(\"valid\", true);\n                cxt.block$data(valid, () => loopUntilMissing(missing, valid));\n                cxt.ok(valid);\n            }\n            else {\n                gen.if((0, code_1.checkMissingProp)(cxt, schema, missing));\n                (0, code_1.reportMissingProp)(cxt, missing);\n                gen.else();\n            }\n        }\n        function loopAllRequired() {\n            gen.forOf(\"prop\", schemaCode, (prop) => {\n                cxt.setParams({ missingProperty: prop });\n                gen.if((0, code_1.noPropertyInData)(gen, data, prop, opts.ownProperties), () => cxt.error());\n            });\n        }\n        function loopUntilMissing(missing, valid) {\n            cxt.setParams({ missingProperty: missing });\n            gen.forOf(missing, schemaCode, () => {\n                gen.assign(valid, (0, code_1.propertyInData)(gen, data, missing, opts.ownProperties));\n                gen.if((0, codegen_1.not)(valid), () => {\n                    cxt.error();\n                    gen.break();\n                });\n            }, codegen_1.nil);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=required.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message({ keyword, schemaCode }) {\n        const comp = keyword === \"maxItems\" ? \"more\" : \"fewer\";\n        return (0, codegen_1.str) `must NOT have ${comp} than ${schemaCode} items`;\n    },\n    params: ({ schemaCode }) => (0, codegen_1._) `{limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: [\"maxItems\", \"minItems\"],\n    type: \"array\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode } = cxt;\n        const op = keyword === \"maxItems\" ? codegen_1.operators.GT : codegen_1.operators.LT;\n        cxt.fail$data((0, codegen_1._) `${data}.length ${op} ${schemaCode}`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// https://github.com/ajv-validator/ajv/issues/889\nconst equal = require(\"fast-deep-equal\");\nequal.code = 'require(\"ajv/dist/runtime/equal\").default';\nexports.default = equal;\n//# sourceMappingURL=equal.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst dataType_1 = require(\"../../compile/validate/dataType\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst equal_1 = require(\"../../runtime/equal\");\nconst error = {\n    message: ({ params: { i, j } }) => (0, codegen_1.str) `must NOT have duplicate items (items ## ${j} and ${i} are identical)`,\n    params: ({ params: { i, j } }) => (0, codegen_1._) `{i: ${i}, j: ${j}}`,\n};\nconst def = {\n    keyword: \"uniqueItems\",\n    type: \"array\",\n    schemaType: \"boolean\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, $data, schema, parentSchema, schemaCode, it } = cxt;\n        if (!$data && !schema)\n            return;\n        const valid = gen.let(\"valid\");\n        const itemTypes = parentSchema.items ? (0, dataType_1.getSchemaTypes)(parentSchema.items) : [];\n        cxt.block$data(valid, validateUniqueItems, (0, codegen_1._) `${schemaCode} === false`);\n        cxt.ok(valid);\n        function validateUniqueItems() {\n            const i = gen.let(\"i\", (0, codegen_1._) `${data}.length`);\n            const j = gen.let(\"j\");\n            cxt.setParams({ i, j });\n            gen.assign(valid, true);\n            gen.if((0, codegen_1._) `${i} > 1`, () => (canOptimize() ? loopN : loopN2)(i, j));\n        }\n        function canOptimize() {\n            return itemTypes.length > 0 && !itemTypes.some((t) => t === \"object\" || t === \"array\");\n        }\n        function loopN(i, j) {\n            const item = gen.name(\"item\");\n            const wrongType = (0, dataType_1.checkDataTypes)(itemTypes, item, it.opts.strictNumbers, dataType_1.DataType.Wrong);\n            const indices = gen.const(\"indices\", (0, codegen_1._) `{}`);\n            gen.for((0, codegen_1._) `;${i}--;`, () => {\n                gen.let(item, (0, codegen_1._) `${data}[${i}]`);\n                gen.if(wrongType, (0, codegen_1._) `continue`);\n                if (itemTypes.length > 1)\n                    gen.if((0, codegen_1._) `typeof ${item} == \"string\"`, (0, codegen_1._) `${item} += \"_\"`);\n                gen\n                    .if((0, codegen_1._) `typeof ${indices}[${item}] == \"number\"`, () => {\n                    gen.assign(j, (0, codegen_1._) `${indices}[${item}]`);\n                    cxt.error();\n                    gen.assign(valid, false).break();\n                })\n                    .code((0, codegen_1._) `${indices}[${item}] = ${i}`);\n            });\n        }\n        function loopN2(i, j) {\n            const eql = (0, util_1.useFunc)(gen, equal_1.default);\n            const outer = gen.name(\"outer\");\n            gen.label(outer).for((0, codegen_1._) `;${i}--;`, () => gen.for((0, codegen_1._) `${j} = ${i}; ${j}--;`, () => gen.if((0, codegen_1._) `${eql}(${data}[${i}], ${data}[${j}])`, () => {\n                cxt.error();\n                gen.assign(valid, false).break(outer);\n            })));\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=uniqueItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst equal_1 = require(\"../../runtime/equal\");\nconst error = {\n    message: \"must be equal to constant\",\n    params: ({ schemaCode }) => (0, codegen_1._) `{allowedValue: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"const\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, $data, schemaCode, schema } = cxt;\n        if ($data || (schema && typeof schema == \"object\")) {\n            cxt.fail$data((0, codegen_1._) `!${(0, util_1.useFunc)(gen, equal_1.default)}(${data}, ${schemaCode})`);\n        }\n        else {\n            cxt.fail((0, codegen_1._) `${schema} !== ${data}`);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=const.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst equal_1 = require(\"../../runtime/equal\");\nconst error = {\n    message: \"must be equal to one of the allowed values\",\n    params: ({ schemaCode }) => (0, codegen_1._) `{allowedValues: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"enum\",\n    schemaType: \"array\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, $data, schema, schemaCode, it } = cxt;\n        if (!$data && schema.length === 0)\n            throw new Error(\"enum must have non-empty array\");\n        const useLoop = schema.length >= it.opts.loopEnum;\n        let eql;\n        const getEql = () => (eql !== null && eql !== void 0 ? eql : (eql = (0, util_1.useFunc)(gen, equal_1.default)));\n        let valid;\n        if (useLoop || $data) {\n            valid = gen.let(\"valid\");\n            cxt.block$data(valid, loopEnum);\n        }\n        else {\n            /* istanbul ignore if */\n            if (!Array.isArray(schema))\n                throw new Error(\"ajv implementation error\");\n            const vSchema = gen.const(\"vSchema\", schemaCode);\n            valid = (0, codegen_1.or)(...schema.map((_x, i) => equalCode(vSchema, i)));\n        }\n        cxt.pass(valid);\n        function loopEnum() {\n            gen.assign(valid, false);\n            gen.forOf(\"v\", schemaCode, (v) => gen.if((0, codegen_1._) `${getEql()}(${data}, ${v})`, () => gen.assign(valid, true).break()));\n        }\n        function equalCode(vSchema, i) {\n            const sch = schema[i];\n            return typeof sch === \"object\" && sch !== null\n                ? (0, codegen_1._) `${getEql()}(${data}, ${vSchema}[${i}])`\n                : (0, codegen_1._) `${data} === ${sch}`;\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=enum.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst limitNumber_1 = require(\"./limitNumber\");\nconst multipleOf_1 = require(\"./multipleOf\");\nconst limitLength_1 = require(\"./limitLength\");\nconst pattern_1 = require(\"./pattern\");\nconst limitProperties_1 = require(\"./limitProperties\");\nconst required_1 = require(\"./required\");\nconst limitItems_1 = require(\"./limitItems\");\nconst uniqueItems_1 = require(\"./uniqueItems\");\nconst const_1 = require(\"./const\");\nconst enum_1 = require(\"./enum\");\nconst validation = [\n    // number\n    limitNumber_1.default,\n    multipleOf_1.default,\n    // string\n    limitLength_1.default,\n    pattern_1.default,\n    // object\n    limitProperties_1.default,\n    required_1.default,\n    // array\n    limitItems_1.default,\n    uniqueItems_1.default,\n    // any\n    { keyword: \"type\", schemaType: [\"string\", \"array\"] },\n    { keyword: \"nullable\", schemaType: \"boolean\" },\n    const_1.default,\n    enum_1.default,\n];\nexports.default = validation;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateAdditionalItems = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { len } }) => (0, codegen_1.str) `must NOT have more than ${len} items`,\n    params: ({ params: { len } }) => (0, codegen_1._) `{limit: ${len}}`,\n};\nconst def = {\n    keyword: \"additionalItems\",\n    type: \"array\",\n    schemaType: [\"boolean\", \"object\"],\n    before: \"uniqueItems\",\n    error,\n    code(cxt) {\n        const { parentSchema, it } = cxt;\n        const { items } = parentSchema;\n        if (!Array.isArray(items)) {\n            (0, util_1.checkStrictMode)(it, '\"additionalItems\" is ignored when \"items\" is not an array of schemas');\n            return;\n        }\n        validateAdditionalItems(cxt, items);\n    },\n};\nfunction validateAdditionalItems(cxt, items) {\n    const { gen, schema, data, keyword, it } = cxt;\n    it.items = true;\n    const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n    if (schema === false) {\n        cxt.setParams({ len: items.length });\n        cxt.pass((0, codegen_1._) `${len} <= ${items.length}`);\n    }\n    else if (typeof schema == \"object\" && !(0, util_1.alwaysValidSchema)(it, schema)) {\n        const valid = gen.var(\"valid\", (0, codegen_1._) `${len} <= ${items.length}`); // TODO var\n        gen.if((0, codegen_1.not)(valid), () => validateItems(valid));\n        cxt.ok(valid);\n    }\n    function validateItems(valid) {\n        gen.forRange(\"i\", items.length, len, (i) => {\n            cxt.subschema({ keyword, dataProp: i, dataPropType: util_1.Type.Num }, valid);\n            if (!it.allErrors)\n                gen.if((0, codegen_1.not)(valid), () => gen.break());\n        });\n    }\n}\nexports.validateAdditionalItems = validateAdditionalItems;\nexports.default = def;\n//# sourceMappingURL=additionalItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateTuple = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst code_1 = require(\"../code\");\nconst def = {\n    keyword: \"items\",\n    type: \"array\",\n    schemaType: [\"object\", \"array\", \"boolean\"],\n    before: \"uniqueItems\",\n    code(cxt) {\n        const { schema, it } = cxt;\n        if (Array.isArray(schema))\n            return validateTuple(cxt, \"additionalItems\", schema);\n        it.items = true;\n        if ((0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        cxt.ok((0, code_1.validateArray)(cxt));\n    },\n};\nfunction validateTuple(cxt, extraItems, schArr = cxt.schema) {\n    const { gen, parentSchema, data, keyword, it } = cxt;\n    checkStrictTuple(parentSchema);\n    if (it.opts.unevaluated && schArr.length && it.items !== true) {\n        it.items = util_1.mergeEvaluated.items(gen, schArr.length, it.items);\n    }\n    const valid = gen.name(\"valid\");\n    const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n    schArr.forEach((sch, i) => {\n        if ((0, util_1.alwaysValidSchema)(it, sch))\n            return;\n        gen.if((0, codegen_1._) `${len} > ${i}`, () => cxt.subschema({\n            keyword,\n            schemaProp: i,\n            dataProp: i,\n        }, valid));\n        cxt.ok(valid);\n    });\n    function checkStrictTuple(sch) {\n        const { opts, errSchemaPath } = it;\n        const l = schArr.length;\n        const fullTuple = l === sch.minItems && (l === sch.maxItems || sch[extraItems] === false);\n        if (opts.strictTuples && !fullTuple) {\n            const msg = `\"${keyword}\" is ${l}-tuple, but minItems or maxItems/${extraItems} are not specified or different at path \"${errSchemaPath}\"`;\n            (0, util_1.checkStrictMode)(it, msg, opts.strictTuples);\n        }\n    }\n}\nexports.validateTuple = validateTuple;\nexports.default = def;\n//# sourceMappingURL=items.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst items_1 = require(\"./items\");\nconst def = {\n    keyword: \"prefixItems\",\n    type: \"array\",\n    schemaType: [\"array\"],\n    before: \"uniqueItems\",\n    code: (cxt) => (0, items_1.validateTuple)(cxt, \"items\"),\n};\nexports.default = def;\n//# sourceMappingURL=prefixItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst code_1 = require(\"../code\");\nconst additionalItems_1 = require(\"./additionalItems\");\nconst error = {\n    message: ({ params: { len } }) => (0, codegen_1.str) `must NOT have more than ${len} items`,\n    params: ({ params: { len } }) => (0, codegen_1._) `{limit: ${len}}`,\n};\nconst def = {\n    keyword: \"items\",\n    type: \"array\",\n    schemaType: [\"object\", \"boolean\"],\n    before: \"uniqueItems\",\n    error,\n    code(cxt) {\n        const { schema, parentSchema, it } = cxt;\n        const { prefixItems } = parentSchema;\n        it.items = true;\n        if ((0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        if (prefixItems)\n            (0, additionalItems_1.validateAdditionalItems)(cxt, prefixItems);\n        else\n            cxt.ok((0, code_1.validateArray)(cxt));\n    },\n};\nexports.default = def;\n//# sourceMappingURL=items2020.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { min, max } }) => max === undefined\n        ? (0, codegen_1.str) `must contain at least ${min} valid item(s)`\n        : (0, codegen_1.str) `must contain at least ${min} and no more than ${max} valid item(s)`,\n    params: ({ params: { min, max } }) => max === undefined ? (0, codegen_1._) `{minContains: ${min}}` : (0, codegen_1._) `{minContains: ${min}, maxContains: ${max}}`,\n};\nconst def = {\n    keyword: \"contains\",\n    type: \"array\",\n    schemaType: [\"object\", \"boolean\"],\n    before: \"uniqueItems\",\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, parentSchema, data, it } = cxt;\n        let min;\n        let max;\n        const { minContains, maxContains } = parentSchema;\n        if (it.opts.next) {\n            min = minContains === undefined ? 1 : minContains;\n            max = maxContains;\n        }\n        else {\n            min = 1;\n        }\n        const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n        cxt.setParams({ min, max });\n        if (max === undefined && min === 0) {\n            (0, util_1.checkStrictMode)(it, `\"minContains\" == 0 without \"maxContains\": \"contains\" keyword ignored`);\n            return;\n        }\n        if (max !== undefined && min > max) {\n            (0, util_1.checkStrictMode)(it, `\"minContains\" > \"maxContains\" is always invalid`);\n            cxt.fail();\n            return;\n        }\n        if ((0, util_1.alwaysValidSchema)(it, schema)) {\n            let cond = (0, codegen_1._) `${len} >= ${min}`;\n            if (max !== undefined)\n                cond = (0, codegen_1._) `${cond} && ${len} <= ${max}`;\n            cxt.pass(cond);\n            return;\n        }\n        it.items = true;\n        const valid = gen.name(\"valid\");\n        if (max === undefined && min === 1) {\n            validateItems(valid, () => gen.if(valid, () => gen.break()));\n        }\n        else if (min === 0) {\n            gen.let(valid, true);\n            if (max !== undefined)\n                gen.if((0, codegen_1._) `${data}.length > 0`, validateItemsWithCount);\n        }\n        else {\n            gen.let(valid, false);\n            validateItemsWithCount();\n        }\n        cxt.result(valid, () => cxt.reset());\n        function validateItemsWithCount() {\n            const schValid = gen.name(\"_valid\");\n            const count = gen.let(\"count\", 0);\n            validateItems(schValid, () => gen.if(schValid, () => checkLimits(count)));\n        }\n        function validateItems(_valid, block) {\n            gen.forRange(\"i\", 0, len, (i) => {\n                cxt.subschema({\n                    keyword: \"contains\",\n                    dataProp: i,\n                    dataPropType: util_1.Type.Num,\n                    compositeRule: true,\n                }, _valid);\n                block();\n            });\n        }\n        function checkLimits(count) {\n            gen.code((0, codegen_1._) `${count}++`);\n            if (max === undefined) {\n                gen.if((0, codegen_1._) `${count} >= ${min}`, () => gen.assign(valid, true).break());\n            }\n            else {\n                gen.if((0, codegen_1._) `${count} > ${max}`, () => gen.assign(valid, false).break());\n                if (min === 1)\n                    gen.assign(valid, true);\n                else\n                    gen.if((0, codegen_1._) `${count} >= ${min}`, () => gen.assign(valid, true));\n            }\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=contains.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateSchemaDeps = exports.validatePropertyDeps = exports.error = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst code_1 = require(\"../code\");\nexports.error = {\n    message: ({ params: { property, depsCount, deps } }) => {\n        const property_ies = depsCount === 1 ? \"property\" : \"properties\";\n        return (0, codegen_1.str) `must have ${property_ies} ${deps} when property ${property} is present`;\n    },\n    params: ({ params: { property, depsCount, deps, missingProperty } }) => (0, codegen_1._) `{property: ${property},\n    missingProperty: ${missingProperty},\n    depsCount: ${depsCount},\n    deps: ${deps}}`, // TODO change to reference\n};\nconst def = {\n    keyword: \"dependencies\",\n    type: \"object\",\n    schemaType: \"object\",\n    error: exports.error,\n    code(cxt) {\n        const [propDeps, schDeps] = splitDependencies(cxt);\n        validatePropertyDeps(cxt, propDeps);\n        validateSchemaDeps(cxt, schDeps);\n    },\n};\nfunction splitDependencies({ schema }) {\n    const propertyDeps = {};\n    const schemaDeps = {};\n    for (const key in schema) {\n        if (key === \"__proto__\")\n            continue;\n        const deps = Array.isArray(schema[key]) ? propertyDeps : schemaDeps;\n        deps[key] = schema[key];\n    }\n    return [propertyDeps, schemaDeps];\n}\nfunction validatePropertyDeps(cxt, propertyDeps = cxt.schema) {\n    const { gen, data, it } = cxt;\n    if (Object.keys(propertyDeps).length === 0)\n        return;\n    const missing = gen.let(\"missing\");\n    for (const prop in propertyDeps) {\n        const deps = propertyDeps[prop];\n        if (deps.length === 0)\n            continue;\n        const hasProperty = (0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties);\n        cxt.setParams({\n            property: prop,\n            depsCount: deps.length,\n            deps: deps.join(\", \"),\n        });\n        if (it.allErrors) {\n            gen.if(hasProperty, () => {\n                for (const depProp of deps) {\n                    (0, code_1.checkReportMissingProp)(cxt, depProp);\n                }\n            });\n        }\n        else {\n            gen.if((0, codegen_1._) `${hasProperty} && (${(0, code_1.checkMissingProp)(cxt, deps, missing)})`);\n            (0, code_1.reportMissingProp)(cxt, missing);\n            gen.else();\n        }\n    }\n}\nexports.validatePropertyDeps = validatePropertyDeps;\nfunction validateSchemaDeps(cxt, schemaDeps = cxt.schema) {\n    const { gen, data, keyword, it } = cxt;\n    const valid = gen.name(\"valid\");\n    for (const prop in schemaDeps) {\n        if ((0, util_1.alwaysValidSchema)(it, schemaDeps[prop]))\n            continue;\n        gen.if((0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties), () => {\n            const schCxt = cxt.subschema({ keyword, schemaProp: prop }, valid);\n            cxt.mergeValidEvaluated(schCxt, valid);\n        }, () => gen.var(valid, true) // TODO var\n        );\n        cxt.ok(valid);\n    }\n}\nexports.validateSchemaDeps = validateSchemaDeps;\nexports.default = def;\n//# sourceMappingURL=dependencies.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: \"property name must be valid\",\n    params: ({ params }) => (0, codegen_1._) `{propertyName: ${params.propertyName}}`,\n};\nconst def = {\n    keyword: \"propertyNames\",\n    type: \"object\",\n    schemaType: [\"object\", \"boolean\"],\n    error,\n    code(cxt) {\n        const { gen, schema, data, it } = cxt;\n        if ((0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        const valid = gen.name(\"valid\");\n        gen.forIn(\"key\", data, (key) => {\n            cxt.setParams({ propertyName: key });\n            cxt.subschema({\n                keyword: \"propertyNames\",\n                data: key,\n                dataTypes: [\"string\"],\n                propertyName: key,\n                compositeRule: true,\n            }, valid);\n            gen.if((0, codegen_1.not)(valid), () => {\n                cxt.error(true);\n                if (!it.allErrors)\n                    gen.break();\n            });\n        });\n        cxt.ok(valid);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=propertyNames.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst names_1 = require(\"../../compile/names\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: \"must NOT have additional properties\",\n    params: ({ params }) => (0, codegen_1._) `{additionalProperty: ${params.additionalProperty}}`,\n};\nconst def = {\n    keyword: \"additionalProperties\",\n    type: [\"object\"],\n    schemaType: [\"boolean\", \"object\"],\n    allowUndefined: true,\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, parentSchema, data, errsCount, it } = cxt;\n        /* istanbul ignore if */\n        if (!errsCount)\n            throw new Error(\"ajv implementation error\");\n        const { allErrors, opts } = it;\n        it.props = true;\n        if (opts.removeAdditional !== \"all\" && (0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        const props = (0, code_1.allSchemaProperties)(parentSchema.properties);\n        const patProps = (0, code_1.allSchemaProperties)(parentSchema.patternProperties);\n        checkAdditionalProperties();\n        cxt.ok((0, codegen_1._) `${errsCount} === ${names_1.default.errors}`);\n        function checkAdditionalProperties() {\n            gen.forIn(\"key\", data, (key) => {\n                if (!props.length && !patProps.length)\n                    additionalPropertyCode(key);\n                else\n                    gen.if(isAdditional(key), () => additionalPropertyCode(key));\n            });\n        }\n        function isAdditional(key) {\n            let definedProp;\n            if (props.length > 8) {\n                // TODO maybe an option instead of hard-coded 8?\n                const propsSchema = (0, util_1.schemaRefOrVal)(it, parentSchema.properties, \"properties\");\n                definedProp = (0, code_1.isOwnProperty)(gen, propsSchema, key);\n            }\n            else if (props.length) {\n                definedProp = (0, codegen_1.or)(...props.map((p) => (0, codegen_1._) `${key} === ${p}`));\n            }\n            else {\n                definedProp = codegen_1.nil;\n            }\n            if (patProps.length) {\n                definedProp = (0, codegen_1.or)(definedProp, ...patProps.map((p) => (0, codegen_1._) `${(0, code_1.usePattern)(cxt, p)}.test(${key})`));\n            }\n            return (0, codegen_1.not)(definedProp);\n        }\n        function deleteAdditional(key) {\n            gen.code((0, codegen_1._) `delete ${data}[${key}]`);\n        }\n        function additionalPropertyCode(key) {\n            if (opts.removeAdditional === \"all\" || (opts.removeAdditional && schema === false)) {\n                deleteAdditional(key);\n                return;\n            }\n            if (schema === false) {\n                cxt.setParams({ additionalProperty: key });\n                cxt.error();\n                if (!allErrors)\n                    gen.break();\n                return;\n            }\n            if (typeof schema == \"object\" && !(0, util_1.alwaysValidSchema)(it, schema)) {\n                const valid = gen.name(\"valid\");\n                if (opts.removeAdditional === \"failing\") {\n                    applyAdditionalSchema(key, valid, false);\n                    gen.if((0, codegen_1.not)(valid), () => {\n                        cxt.reset();\n                        deleteAdditional(key);\n                    });\n                }\n                else {\n                    applyAdditionalSchema(key, valid);\n                    if (!allErrors)\n                        gen.if((0, codegen_1.not)(valid), () => gen.break());\n                }\n            }\n        }\n        function applyAdditionalSchema(key, valid, errors) {\n            const subschema = {\n                keyword: \"additionalProperties\",\n                dataProp: key,\n                dataPropType: util_1.Type.Str,\n            };\n            if (errors === false) {\n                Object.assign(subschema, {\n                    compositeRule: true,\n                    createErrors: false,\n                    allErrors: false,\n                });\n            }\n            cxt.subschema(subschema, valid);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=additionalProperties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst validate_1 = require(\"../../compile/validate\");\nconst code_1 = require(\"../code\");\nconst util_1 = require(\"../../compile/util\");\nconst additionalProperties_1 = require(\"./additionalProperties\");\nconst def = {\n    keyword: \"properties\",\n    type: \"object\",\n    schemaType: \"object\",\n    code(cxt) {\n        const { gen, schema, parentSchema, data, it } = cxt;\n        if (it.opts.removeAdditional === \"all\" && parentSchema.additionalProperties === undefined) {\n            additionalProperties_1.default.code(new validate_1.KeywordCxt(it, additionalProperties_1.default, \"additionalProperties\"));\n        }\n        const allProps = (0, code_1.allSchemaProperties)(schema);\n        for (const prop of allProps) {\n            it.definedProperties.add(prop);\n        }\n        if (it.opts.unevaluated && allProps.length && it.props !== true) {\n            it.props = util_1.mergeEvaluated.props(gen, (0, util_1.toHash)(allProps), it.props);\n        }\n        const properties = allProps.filter((p) => !(0, util_1.alwaysValidSchema)(it, schema[p]));\n        if (properties.length === 0)\n            return;\n        const valid = gen.name(\"valid\");\n        for (const prop of properties) {\n            if (hasDefault(prop)) {\n                applyPropertySchema(prop);\n            }\n            else {\n                gen.if((0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties));\n                applyPropertySchema(prop);\n                if (!it.allErrors)\n                    gen.else().var(valid, true);\n                gen.endIf();\n            }\n            cxt.it.definedProperties.add(prop);\n            cxt.ok(valid);\n        }\n        function hasDefault(prop) {\n            return it.opts.useDefaults && !it.compositeRule && schema[prop].default !== undefined;\n        }\n        function applyPropertySchema(prop) {\n            cxt.subschema({\n                keyword: \"properties\",\n                schemaProp: prop,\n                dataProp: prop,\n            }, valid);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=properties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst util_2 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"patternProperties\",\n    type: \"object\",\n    schemaType: \"object\",\n    code(cxt) {\n        const { gen, schema, data, parentSchema, it } = cxt;\n        const { opts } = it;\n        const patterns = (0, code_1.allSchemaProperties)(schema);\n        const alwaysValidPatterns = patterns.filter((p) => (0, util_1.alwaysValidSchema)(it, schema[p]));\n        if (patterns.length === 0 ||\n            (alwaysValidPatterns.length === patterns.length &&\n                (!it.opts.unevaluated || it.props === true))) {\n            return;\n        }\n        const checkProperties = opts.strictSchema && !opts.allowMatchingProperties && parentSchema.properties;\n        const valid = gen.name(\"valid\");\n        if (it.props !== true && !(it.props instanceof codegen_1.Name)) {\n            it.props = (0, util_2.evaluatedPropsToName)(gen, it.props);\n        }\n        const { props } = it;\n        validatePatternProperties();\n        function validatePatternProperties() {\n            for (const pat of patterns) {\n                if (checkProperties)\n                    checkMatchingProperties(pat);\n                if (it.allErrors) {\n                    validateProperties(pat);\n                }\n                else {\n                    gen.var(valid, true); // TODO var\n                    validateProperties(pat);\n                    gen.if(valid);\n                }\n            }\n        }\n        function checkMatchingProperties(pat) {\n            for (const prop in checkProperties) {\n                if (new RegExp(pat).test(prop)) {\n                    (0, util_1.checkStrictMode)(it, `property ${prop} matches pattern ${pat} (use allowMatchingProperties)`);\n                }\n            }\n        }\n        function validateProperties(pat) {\n            gen.forIn(\"key\", data, (key) => {\n                gen.if((0, codegen_1._) `${(0, code_1.usePattern)(cxt, pat)}.test(${key})`, () => {\n                    const alwaysValid = alwaysValidPatterns.includes(pat);\n                    if (!alwaysValid) {\n                        cxt.subschema({\n                            keyword: \"patternProperties\",\n                            schemaProp: pat,\n                            dataProp: key,\n                            dataPropType: util_2.Type.Str,\n                        }, valid);\n                    }\n                    if (it.opts.unevaluated && props !== true) {\n                        gen.assign((0, codegen_1._) `${props}[${key}]`, true);\n                    }\n                    else if (!alwaysValid && !it.allErrors) {\n                        // can short-circuit if `unevaluatedProperties` is not supported (opts.next === false)\n                        // or if all properties were evaluated (props === true)\n                        gen.if((0, codegen_1.not)(valid), () => gen.break());\n                    }\n                });\n            });\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=patternProperties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"not\",\n    schemaType: [\"object\", \"boolean\"],\n    trackErrors: true,\n    code(cxt) {\n        const { gen, schema, it } = cxt;\n        if ((0, util_1.alwaysValidSchema)(it, schema)) {\n            cxt.fail();\n            return;\n        }\n        const valid = gen.name(\"valid\");\n        cxt.subschema({\n            keyword: \"not\",\n            compositeRule: true,\n            createErrors: false,\n            allErrors: false,\n        }, valid);\n        cxt.failResult(valid, () => cxt.reset(), () => cxt.error());\n    },\n    error: { message: \"must NOT be valid\" },\n};\nexports.default = def;\n//# sourceMappingURL=not.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst def = {\n    keyword: \"anyOf\",\n    schemaType: \"array\",\n    trackErrors: true,\n    code: code_1.validateUnion,\n    error: { message: \"must match a schema in anyOf\" },\n};\nexports.default = def;\n//# sourceMappingURL=anyOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: \"must match exactly one schema in oneOf\",\n    params: ({ params }) => (0, codegen_1._) `{passingSchemas: ${params.passing}}`,\n};\nconst def = {\n    keyword: \"oneOf\",\n    schemaType: \"array\",\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, parentSchema, it } = cxt;\n        /* istanbul ignore if */\n        if (!Array.isArray(schema))\n            throw new Error(\"ajv implementation error\");\n        if (it.opts.discriminator && parentSchema.discriminator)\n            return;\n        const schArr = schema;\n        const valid = gen.let(\"valid\", false);\n        const passing = gen.let(\"passing\", null);\n        const schValid = gen.name(\"_valid\");\n        cxt.setParams({ passing });\n        // TODO possibly fail straight away (with warning or exception) if there are two empty always valid schemas\n        gen.block(validateOneOf);\n        cxt.result(valid, () => cxt.reset(), () => cxt.error(true));\n        function validateOneOf() {\n            schArr.forEach((sch, i) => {\n                let schCxt;\n                if ((0, util_1.alwaysValidSchema)(it, sch)) {\n                    gen.var(schValid, true);\n                }\n                else {\n                    schCxt = cxt.subschema({\n                        keyword: \"oneOf\",\n                        schemaProp: i,\n                        compositeRule: true,\n                    }, schValid);\n                }\n                if (i > 0) {\n                    gen\n                        .if((0, codegen_1._) `${schValid} && ${valid}`)\n                        .assign(valid, false)\n                        .assign(passing, (0, codegen_1._) `[${passing}, ${i}]`)\n                        .else();\n                }\n                gen.if(schValid, () => {\n                    gen.assign(valid, true);\n                    gen.assign(passing, i);\n                    if (schCxt)\n                        cxt.mergeEvaluated(schCxt, codegen_1.Name);\n                });\n            });\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=oneOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"allOf\",\n    schemaType: \"array\",\n    code(cxt) {\n        const { gen, schema, it } = cxt;\n        /* istanbul ignore if */\n        if (!Array.isArray(schema))\n            throw new Error(\"ajv implementation error\");\n        const valid = gen.name(\"valid\");\n        schema.forEach((sch, i) => {\n            if ((0, util_1.alwaysValidSchema)(it, sch))\n                return;\n            const schCxt = cxt.subschema({ keyword: \"allOf\", schemaProp: i }, valid);\n            cxt.ok(valid);\n            cxt.mergeEvaluated(schCxt);\n        });\n    },\n};\nexports.default = def;\n//# sourceMappingURL=allOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params }) => (0, codegen_1.str) `must match \"${params.ifClause}\" schema`,\n    params: ({ params }) => (0, codegen_1._) `{failingKeyword: ${params.ifClause}}`,\n};\nconst def = {\n    keyword: \"if\",\n    schemaType: [\"object\", \"boolean\"],\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, parentSchema, it } = cxt;\n        if (parentSchema.then === undefined && parentSchema.else === undefined) {\n            (0, util_1.checkStrictMode)(it, '\"if\" without \"then\" and \"else\" is ignored');\n        }\n        const hasThen = hasSchema(it, \"then\");\n        const hasElse = hasSchema(it, \"else\");\n        if (!hasThen && !hasElse)\n            return;\n        const valid = gen.let(\"valid\", true);\n        const schValid = gen.name(\"_valid\");\n        validateIf();\n        cxt.reset();\n        if (hasThen && hasElse) {\n            const ifClause = gen.let(\"ifClause\");\n            cxt.setParams({ ifClause });\n            gen.if(schValid, validateClause(\"then\", ifClause), validateClause(\"else\", ifClause));\n        }\n        else if (hasThen) {\n            gen.if(schValid, validateClause(\"then\"));\n        }\n        else {\n            gen.if((0, codegen_1.not)(schValid), validateClause(\"else\"));\n        }\n        cxt.pass(valid, () => cxt.error(true));\n        function validateIf() {\n            const schCxt = cxt.subschema({\n                keyword: \"if\",\n                compositeRule: true,\n                createErrors: false,\n                allErrors: false,\n            }, schValid);\n            cxt.mergeEvaluated(schCxt);\n        }\n        function validateClause(keyword, ifClause) {\n            return () => {\n                const schCxt = cxt.subschema({ keyword }, schValid);\n                gen.assign(valid, schValid);\n                cxt.mergeValidEvaluated(schCxt, valid);\n                if (ifClause)\n                    gen.assign(ifClause, (0, codegen_1._) `${keyword}`);\n                else\n                    cxt.setParams({ ifClause: keyword });\n            };\n        }\n    },\n};\nfunction hasSchema(it, keyword) {\n    const schema = it.schema[keyword];\n    return schema !== undefined && !(0, util_1.alwaysValidSchema)(it, schema);\n}\nexports.default = def;\n//# sourceMappingURL=if.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: [\"then\", \"else\"],\n    schemaType: [\"object\", \"boolean\"],\n    code({ keyword, parentSchema, it }) {\n        if (parentSchema.if === undefined)\n            (0, util_1.checkStrictMode)(it, `\"${keyword}\" without \"if\" is ignored`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=thenElse.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst additionalItems_1 = require(\"./additionalItems\");\nconst prefixItems_1 = require(\"./prefixItems\");\nconst items_1 = require(\"./items\");\nconst items2020_1 = require(\"./items2020\");\nconst contains_1 = require(\"./contains\");\nconst dependencies_1 = require(\"./dependencies\");\nconst propertyNames_1 = require(\"./propertyNames\");\nconst additionalProperties_1 = require(\"./additionalProperties\");\nconst properties_1 = require(\"./properties\");\nconst patternProperties_1 = require(\"./patternProperties\");\nconst not_1 = require(\"./not\");\nconst anyOf_1 = require(\"./anyOf\");\nconst oneOf_1 = require(\"./oneOf\");\nconst allOf_1 = require(\"./allOf\");\nconst if_1 = require(\"./if\");\nconst thenElse_1 = require(\"./thenElse\");\nfunction getApplicator(draft2020 = false) {\n    const applicator = [\n        // any\n        not_1.default,\n        anyOf_1.default,\n        oneOf_1.default,\n        allOf_1.default,\n        if_1.default,\n        thenElse_1.default,\n        // object\n        propertyNames_1.default,\n        additionalProperties_1.default,\n        dependencies_1.default,\n        properties_1.default,\n        patternProperties_1.default,\n    ];\n    // array\n    if (draft2020)\n        applicator.push(prefixItems_1.default, items2020_1.default);\n    else\n        applicator.push(additionalItems_1.default, items_1.default);\n    applicator.push(contains_1.default);\n    return applicator;\n}\nexports.default = getApplicator;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message: ({ schemaCode }) => (0, codegen_1.str) `must match format \"${schemaCode}\"`,\n    params: ({ schemaCode }) => (0, codegen_1._) `{format: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"format\",\n    type: [\"number\", \"string\"],\n    schemaType: \"string\",\n    $data: true,\n    error,\n    code(cxt, ruleType) {\n        const { gen, data, $data, schema, schemaCode, it } = cxt;\n        const { opts, errSchemaPath, schemaEnv, self } = it;\n        if (!opts.validateFormats)\n            return;\n        if ($data)\n            validate$DataFormat();\n        else\n            validateFormat();\n        function validate$DataFormat() {\n            const fmts = gen.scopeValue(\"formats\", {\n                ref: self.formats,\n                code: opts.code.formats,\n            });\n            const fDef = gen.const(\"fDef\", (0, codegen_1._) `${fmts}[${schemaCode}]`);\n            const fType = gen.let(\"fType\");\n            const format = gen.let(\"format\");\n            // TODO simplify\n            gen.if((0, codegen_1._) `typeof ${fDef} == \"object\" && !(${fDef} instanceof RegExp)`, () => gen.assign(fType, (0, codegen_1._) `${fDef}.type || \"string\"`).assign(format, (0, codegen_1._) `${fDef}.validate`), () => gen.assign(fType, (0, codegen_1._) `\"string\"`).assign(format, fDef));\n            cxt.fail$data((0, codegen_1.or)(unknownFmt(), invalidFmt()));\n            function unknownFmt() {\n                if (opts.strictSchema === false)\n                    return codegen_1.nil;\n                return (0, codegen_1._) `${schemaCode} && !${format}`;\n            }\n            function invalidFmt() {\n                const callFormat = schemaEnv.$async\n                    ? (0, codegen_1._) `(${fDef}.async ? await ${format}(${data}) : ${format}(${data}))`\n                    : (0, codegen_1._) `${format}(${data})`;\n                const validData = (0, codegen_1._) `(typeof ${format} == \"function\" ? ${callFormat} : ${format}.test(${data}))`;\n                return (0, codegen_1._) `${format} && ${format} !== true && ${fType} === ${ruleType} && !${validData}`;\n            }\n        }\n        function validateFormat() {\n            const formatDef = self.formats[schema];\n            if (!formatDef) {\n                unknownFormat();\n                return;\n            }\n            if (formatDef === true)\n                return;\n            const [fmtType, format, fmtRef] = getFormat(formatDef);\n            if (fmtType === ruleType)\n                cxt.pass(validCondition());\n            function unknownFormat() {\n                if (opts.strictSchema === false) {\n                    self.logger.warn(unknownMsg());\n                    return;\n                }\n                throw new Error(unknownMsg());\n                function unknownMsg() {\n                    return `unknown format \"${schema}\" ignored in schema at path \"${errSchemaPath}\"`;\n                }\n            }\n            function getFormat(fmtDef) {\n                const code = fmtDef instanceof RegExp\n                    ? (0, codegen_1.regexpCode)(fmtDef)\n                    : opts.code.formats\n                        ? (0, codegen_1._) `${opts.code.formats}${(0, codegen_1.getProperty)(schema)}`\n                        : undefined;\n                const fmt = gen.scopeValue(\"formats\", { key: schema, ref: fmtDef, code });\n                if (typeof fmtDef == \"object\" && !(fmtDef instanceof RegExp)) {\n                    return [fmtDef.type || \"string\", fmtDef.validate, (0, codegen_1._) `${fmt}.validate`];\n                }\n                return [\"string\", fmtDef, fmt];\n            }\n            function validCondition() {\n                if (typeof formatDef == \"object\" && !(formatDef instanceof RegExp) && formatDef.async) {\n                    if (!schemaEnv.$async)\n                        throw new Error(\"async format in sync schema\");\n                    return (0, codegen_1._) `await ${fmtRef}(${data})`;\n                }\n                return typeof format == \"function\" ? (0, codegen_1._) `${fmtRef}(${data})` : (0, codegen_1._) `${fmtRef}.test(${data})`;\n            }\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=format.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst format_1 = require(\"./format\");\nconst format = [format_1.default];\nexports.default = format;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.contentVocabulary = exports.metadataVocabulary = void 0;\nexports.metadataVocabulary = [\n    \"title\",\n    \"description\",\n    \"default\",\n    \"deprecated\",\n    \"readOnly\",\n    \"writeOnly\",\n    \"examples\",\n];\nexports.contentVocabulary = [\n    \"contentMediaType\",\n    \"contentEncoding\",\n    \"contentSchema\",\n];\n//# sourceMappingURL=metadata.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst core_1 = require(\"./core\");\nconst validation_1 = require(\"./validation\");\nconst applicator_1 = require(\"./applicator\");\nconst format_1 = require(\"./format\");\nconst metadata_1 = require(\"./metadata\");\nconst draft7Vocabularies = [\n    core_1.default,\n    validation_1.default,\n    (0, applicator_1.default)(),\n    format_1.default,\n    metadata_1.metadataVocabulary,\n    metadata_1.contentVocabulary,\n];\nexports.default = draft7Vocabularies;\n//# sourceMappingURL=draft7.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DiscrError = void 0;\nvar DiscrError;\n(function (DiscrError) {\n    DiscrError[\"Tag\"] = \"tag\";\n    DiscrError[\"Mapping\"] = \"mapping\";\n})(DiscrError || (exports.DiscrError = DiscrError = {}));\n//# sourceMappingURL=types.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst types_1 = require(\"../discriminator/types\");\nconst compile_1 = require(\"../../compile\");\nconst ref_error_1 = require(\"../../compile/ref_error\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { discrError, tagName } }) => discrError === types_1.DiscrError.Tag\n        ? `tag \"${tagName}\" must be string`\n        : `value of tag \"${tagName}\" must be in oneOf`,\n    params: ({ params: { discrError, tag, tagName } }) => (0, codegen_1._) `{error: ${discrError}, tag: ${tagName}, tagValue: ${tag}}`,\n};\nconst def = {\n    keyword: \"discriminator\",\n    type: \"object\",\n    schemaType: \"object\",\n    error,\n    code(cxt) {\n        const { gen, data, schema, parentSchema, it } = cxt;\n        const { oneOf } = parentSchema;\n        if (!it.opts.discriminator) {\n            throw new Error(\"discriminator: requires discriminator option\");\n        }\n        const tagName = schema.propertyName;\n        if (typeof tagName != \"string\")\n            throw new Error(\"discriminator: requires propertyName\");\n        if (schema.mapping)\n            throw new Error(\"discriminator: mapping is not supported\");\n        if (!oneOf)\n            throw new Error(\"discriminator: requires oneOf keyword\");\n        const valid = gen.let(\"valid\", false);\n        const tag = gen.const(\"tag\", (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(tagName)}`);\n        gen.if((0, codegen_1._) `typeof ${tag} == \"string\"`, () => validateMapping(), () => cxt.error(false, { discrError: types_1.DiscrError.Tag, tag, tagName }));\n        cxt.ok(valid);\n        function validateMapping() {\n            const mapping = getMapping();\n            gen.if(false);\n            for (const tagValue in mapping) {\n                gen.elseIf((0, codegen_1._) `${tag} === ${tagValue}`);\n                gen.assign(valid, applyTagSchema(mapping[tagValue]));\n            }\n            gen.else();\n            cxt.error(false, { discrError: types_1.DiscrError.Mapping, tag, tagName });\n            gen.endIf();\n        }\n        function applyTagSchema(schemaProp) {\n            const _valid = gen.name(\"valid\");\n            const schCxt = cxt.subschema({ keyword: \"oneOf\", schemaProp }, _valid);\n            cxt.mergeEvaluated(schCxt, codegen_1.Name);\n            return _valid;\n        }\n        function getMapping() {\n            var _a;\n            const oneOfMapping = {};\n            const topRequired = hasRequired(parentSchema);\n            let tagRequired = true;\n            for (let i = 0; i < oneOf.length; i++) {\n                let sch = oneOf[i];\n                if ((sch === null || sch === void 0 ? void 0 : sch.$ref) && !(0, util_1.schemaHasRulesButRef)(sch, it.self.RULES)) {\n                    const ref = sch.$ref;\n                    sch = compile_1.resolveRef.call(it.self, it.schemaEnv.root, it.baseId, ref);\n                    if (sch instanceof compile_1.SchemaEnv)\n                        sch = sch.schema;\n                    if (sch === undefined)\n                        throw new ref_error_1.default(it.opts.uriResolver, it.baseId, ref);\n                }\n                const propSch = (_a = sch === null || sch === void 0 ? void 0 : sch.properties) === null || _a === void 0 ? void 0 : _a[tagName];\n                if (typeof propSch != \"object\") {\n                    throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have \"properties/${tagName}\"`);\n                }\n                tagRequired = tagRequired && (topRequired || hasRequired(sch));\n                addMappings(propSch, i);\n            }\n            if (!tagRequired)\n                throw new Error(`discriminator: \"${tagName}\" must be required`);\n            return oneOfMapping;\n            function hasRequired({ required }) {\n                return Array.isArray(required) && required.includes(tagName);\n            }\n            function addMappings(sch, i) {\n                if (sch.const) {\n                    addMapping(sch.const, i);\n                }\n                else if (sch.enum) {\n                    for (const tagValue of sch.enum) {\n                        addMapping(tagValue, i);\n                    }\n                }\n                else {\n                    throw new Error(`discriminator: \"properties/${tagName}\" must have \"const\" or \"enum\"`);\n                }\n            }\n            function addMapping(tagValue, i) {\n                if (typeof tagValue != \"string\" || tagValue in oneOfMapping) {\n                    throw new Error(`discriminator: \"${tagName}\" values must be unique strings`);\n                }\n                oneOfMapping[tagValue] = i;\n            }\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MissingRefError = exports.ValidationError = exports.CodeGen = exports.Name = exports.nil = exports.stringify = exports.str = exports._ = exports.KeywordCxt = exports.Ajv = void 0;\nconst core_1 = require(\"./core\");\nconst draft7_1 = require(\"./vocabularies/draft7\");\nconst discriminator_1 = require(\"./vocabularies/discriminator\");\nconst draft7MetaSchema = require(\"./refs/json-schema-draft-07.json\");\nconst META_SUPPORT_DATA = [\"/properties\"];\nconst META_SCHEMA_ID = \"http://json-schema.org/draft-07/schema\";\nclass Ajv extends core_1.default {\n    _addVocabularies() {\n        super._addVocabularies();\n        draft7_1.default.forEach((v) => this.addVocabulary(v));\n        if (this.opts.discriminator)\n            this.addKeyword(discriminator_1.default);\n    }\n    _addDefaultMetaSchema() {\n        super._addDefaultMetaSchema();\n        if (!this.opts.meta)\n            return;\n        const metaSchema = this.opts.$data\n            ? this.$dataMetaSchema(draft7MetaSchema, META_SUPPORT_DATA)\n            : draft7MetaSchema;\n        this.addMetaSchema(metaSchema, META_SCHEMA_ID, false);\n        this.refs[\"http://json-schema.org/schema\"] = META_SCHEMA_ID;\n    }\n    defaultMeta() {\n        return (this.opts.defaultMeta =\n            super.defaultMeta() || (this.getSchema(META_SCHEMA_ID) ? META_SCHEMA_ID : undefined));\n    }\n}\nexports.Ajv = Ajv;\nmodule.exports = exports = Ajv;\nmodule.exports.Ajv = Ajv;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = Ajv;\nvar validate_1 = require(\"./compile/validate\");\nObject.defineProperty(exports, \"KeywordCxt\", { enumerable: true, get: function () { return validate_1.KeywordCxt; } });\nvar codegen_1 = require(\"./compile/codegen\");\nObject.defineProperty(exports, \"_\", { enumerable: true, get: function () { return codegen_1._; } });\nObject.defineProperty(exports, \"str\", { enumerable: true, get: function () { return codegen_1.str; } });\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return codegen_1.stringify; } });\nObject.defineProperty(exports, \"nil\", { enumerable: true, get: function () { return codegen_1.nil; } });\nObject.defineProperty(exports, \"Name\", { enumerable: true, get: function () { return codegen_1.Name; } });\nObject.defineProperty(exports, \"CodeGen\", { enumerable: true, get: function () { return codegen_1.CodeGen; } });\nvar validation_error_1 = require(\"./runtime/validation_error\");\nObject.defineProperty(exports, \"ValidationError\", { enumerable: true, get: function () { return validation_error_1.default; } });\nvar ref_error_1 = require(\"./compile/ref_error\");\nObject.defineProperty(exports, \"MissingRefError\", { enumerable: true, get: function () { return ref_error_1.default; } });\n//# sourceMappingURL=ajv.js.map","import Ajv from \"ajv\";\r\nimport type {\r\n  Data_Actor,\r\n  Data_Armor,\r\n  Data_Class,\r\n  Data_Enemy,\r\n  Data_State,\r\n  Data_Weapon,\r\n} from \"./traitContainers\";\r\nimport {\r\n  SCHEMA_DATA_ACTOR,\r\n  SCHEMA_DATA_ARMMOR,\r\n  SCHEMA_DATA_CLASS,\r\n  SCHEMA_DATA_ENEMY,\r\n  SCHEMA_DATA_STATE,\r\n  SCHEMA_DATA_WEAPON,\r\n} from \"./traitContainers\";\r\nimport type { Data_Item, Data_Skill } from \"./usableItems\";\r\nimport { SCHEMA_DATA_ITEM, SCHEMA_DATA_SKILL } from \"./usableItems\";\r\nconst ajv = new Ajv();\r\nconst item = ajv.compile(SCHEMA_DATA_ITEM);\r\nconst skill = ajv.compile(SCHEMA_DATA_SKILL);\r\nconst actor = ajv.compile(SCHEMA_DATA_ACTOR);\r\nconst armor = ajv.compile(SCHEMA_DATA_ARMMOR);\r\nconst weapon = ajv.compile(SCHEMA_DATA_WEAPON);\r\nconst enemy = ajv.compile(SCHEMA_DATA_ENEMY);\r\nconst state = ajv.compile(SCHEMA_DATA_STATE);\r\nconst class_ = ajv.compile(SCHEMA_DATA_CLASS);\r\n\r\nexport const isDataItem = (data: unknown): data is Data_Item => {\r\n  return item(data);\r\n};\r\n\r\nexport const isDataSkill = (data: unknown): data is Data_Skill => {\r\n  return skill(data);\r\n};\r\n\r\nexport const isDataActor = (data: unknown): data is Data_Actor => {\r\n  return actor(data);\r\n};\r\n\r\nexport const isDataArmor = (data: unknown): data is Data_Armor => {\r\n  return armor(data);\r\n};\r\n\r\nexport const isDataWeapon = (data: unknown): data is Data_Weapon => {\r\n  return weapon(data);\r\n};\r\n\r\nexport const isDataEnemy = (data: unknown): data is Data_Enemy => {\r\n  return enemy(data);\r\n};\r\nexport const isDataState = (data: unknown): data is Data_State => {\r\n  return state(data);\r\n};\r\nexport const isDataClass = (data: unknown): data is Data_Class => {\r\n  return class_(data);\r\n};\r\n","export const NO_OPERATION = 0 as const;\r\nexport const SHOW_MESSAGE = 101 as const;\r\nexport const SHOW_MESSAGE_BODY = 401 as const;\r\nexport const SHOW_CHOICES = 102 as const;\r\nexport const SHOW_CHOICES_ITEM = 402 as const;\r\nexport const INPUT_NUMBER = 103 as const;\r\nexport const SELECT_ITEM = 104 as const;\r\nexport const SHOW_SCROLLING_TEXT = 105 as const;\r\nexport const SHOW_SCROLLING_TEXT_BODY = 405 as const;\r\nexport const COMMENT = 108 as const;\r\nexport const COMMENT_BODY = 408 as const;\r\nexport const SKIP = 109 as const;\r\nexport const CONDITIONAL_BRANCH = 111 as const;\r\nexport const CONDITIONAL_BRANCH_ELSE = 411 as const;\r\nexport const LOOP = 112 as const;\r\nexport const LOOP_BREAK = 113 as const;\r\nexport const EXIT_EVENT_PROCESSING = 115 as const;\r\nexport const COMMON_EVENT = 117 as const;\r\nexport const LABEL = 118 as const;\r\nexport const LABEL_JUMP = 119 as const;\r\nexport const CONTROL_SWITCHES = 121 as const;\r\nexport const CONTROL_VARIABLES = 122 as const;\r\nexport const CONTROL_SELF_SWITCH = 123 as const;\r\nexport const CONTROL_TIMER = 124 as const;\r\nexport const CHANGE_GOLD = 125 as const;\r\nexport const CHANGE_ITEMS = 126 as const;\r\nexport const CHANGE_WEAPONS = 127 as const;\r\nexport const CHANGE_ARMORS = 128 as const;\r\nexport const CHANGE_PARTY_MEMBER = 129 as const;\r\nexport const CHANGE_BATTLE_BGM = 132 as const;\r\nexport const CHANGE_VICTORY_ME = 133 as const;\r\nexport const CHANGE_SAVE_ACCESS = 134 as const;\r\nexport const CHANGE_MENU_ACCESS = 135 as const;\r\nexport const CHANGE_ENCOUNTER = 136 as const;\r\nexport const CHANGE_FORMATION_ACCESS = 137 as const;\r\nexport const CHANGE_WINDOW_COLOR = 138 as const;\r\n\r\nexport const CHANGE_DEFEAT_ME = 139 as const;\r\nexport const CHANGE_VEHICLE_BGM = 140 as const;\r\n\r\nexport const TRANSFER_PLAYER = 201 as const;\r\nexport const SET_VEHICLE_LOCATION = 202 as const;\r\nexport const SET_EVENT_LOCATION = 203 as const;\r\nexport const SCROLL_MAP = 204 as const;\r\nexport const SET_MOVEMENT_ROUTE = 205 as const;\r\nexport const GET_ONOFF_VEHICLE = 206 as const;\r\nexport const CHANGE_TRANSPARENCY = 211 as const;\r\nexport const SHOW_ANIMATION = 212 as const;\r\nexport const SHOW_BALLOON_ICON = 213 as const;\r\nexport const ERASE_EVENT = 214 as const;\r\nexport const CHANGE_PLAYER_FOLLOWERS = 216 as const;\r\nexport const GATHER_FOLLOWERS = 217 as const;\r\nexport const FADEOUT_SCREEN = 221 as const;\r\nexport const FADEIN_SCREEN = 222 as const;\r\nexport const TINT_SCREEN = 223 as const;\r\nexport const FLASH_SCREEN = 224 as const;\r\nexport const SHAKE_SCREEN = 225 as const;\r\n\r\nexport const WAIT = 230 as const;\r\nexport const SHOW_PICTURE = 231 as const;\r\nexport const MOVE_PICTURE = 232 as const;\r\nexport const ROTATE_PICTURE = 233 as const;\r\nexport const TINT_PICTURE = 234 as const;\r\nexport const ERASE_PICTURE = 235 as const;\r\nexport const SET_WEATHER_EFFECT = 236 as const;\r\n\r\nexport const PLAY_BGM = 241 as const;\r\nexport const FADEOUT_BGM = 242 as const;\r\nexport const SAVE_BGM = 243 as const;\r\nexport const RESUME_BGM = 244 as const;\r\n\r\nexport const PLAY_BGS = 245 as const;\r\nexport const FADEOUT_BGS = 246 as const;\r\nexport const PLAY_ME = 249 as const;\r\nexport const PLAY_SE = 250 as const;\r\nexport const STOP_SE = 251 as const;\r\n\r\nexport const PLAY_MOVIE = 261 as const;\r\n\r\nexport const CHANGE_TILESET = 282 as const;\r\nexport const CHANGE_BATTLE_BACKGROUND = 283 as const;\r\nexport const CHANGE_PARALLAX = 284 as const;\r\nexport const GET_LOCATION_INFO = 285 as const;\r\n\r\nexport const BATTLE_PROCESSING = 301 as const;\r\n\r\nexport const SHOP_PROCESSING = 302 as const;\r\nexport const SHOP_PROCESSING_BODY = 605 as const;\r\nexport const NAME_INPUT_PROCESSING = 303 as const;\r\nexport const CHANGE_HP = 311 as const;\r\nexport const CHANGE_MP = 312 as const;\r\nexport const CHANGE_TP = 313 as const;\r\nexport const RECOVER_ALL = 314 as const;\r\nexport const CHANGE_EXP = 315 as const;\r\n\r\nexport const CHANGE_NAME = 320 as const;\r\nexport const CHANGE_CLASS = 321 as const;\r\nexport const CHANGE_ACTOR_IMAGES = 322 as const;\r\nexport const CHANGE_VEHICLE_IMAGE = 323 as const;\r\nexport const CHANGE_NICKNAME = 324 as const;\r\nexport const CHANGE_PROFILE = 325 as const;\r\n\r\nexport const CHANGE_ENEMY_HP = 331 as const;\r\nexport const CHANGE_ENEMY_MP = 332 as const;\r\n\r\nexport const CHANGE_ENEMY_STATE = 333 as const;\r\nexport const ENEMY_RECOVER_ALL = 334 as const;\r\nexport const ENEMY_APPEAR = 335 as const;\r\nexport const ENEMY_TRANSFORM = 336 as const;\r\nexport const SHOW_BATTLE_ANIMATION = 337 as const;\r\nexport const FORCE_ACTION = 339 as const;\r\nexport const ABORT_BATTLE = 340 as const;\r\nexport const OPEN_MENU_SCREEN = 351 as const;\r\n\r\nexport const CHANGE_ENEMY_TP = 342 as const;\r\n\r\nexport const OPEN_SAVE_SCREEN = 352 as const;\r\nexport const GAME_OVER = 353 as const;\r\nexport const RETURN_TO_TITLE_SCREEN = 354 as const;\r\nexport const SCRIPT_EVAL = 355 as const;\r\nexport const SCRIPT_EVAL_BODY = 655 as const;\r\nexport const PLUGIN_COMMAND_MV = 356 as const;\r\nexport const PLUGIN_COMMAND_MZ = 357 as const;\r\n","export const ROUTE_END = 0 as const;\r\nexport const ROUTE_MOVE_DOWN = 1 as const;\r\nexport const ROUTE_MOVE_LEFT = 2 as const;\r\nexport const ROUTE_MOVE_RIGHT = 3 as const;\r\nexport const ROUTE_MOVE_UP = 4 as const;\r\nexport const ROUTE_MOVE_LOWER_L = 5 as const;\r\nexport const ROUTE_MOVE_LOWER_R = 6 as const;\r\nexport const ROUTE_MOVE_UPPER_L = 7 as const;\r\nexport const ROUTE_MOVE_UPPER_R = 8 as const;\r\nexport const ROUTE_MOVE_RANDOM = 9 as const;\r\nexport const ROUTE_MOVE_TOWARD = 10 as const;\r\nexport const ROUTE_MOVE_AWAY = 11 as const;\r\nexport const ROUTE_MOVE_FORWARD = 12 as const;\r\nexport const ROUTE_MOVE_BACKWARD = 13 as const;\r\nexport const ROUTE_JUMP = 14 as const;\r\nexport const ROUTE_WAIT = 15 as const;\r\nexport const ROUTE_TURN_DOWN = 16 as const;\r\nexport const ROUTE_TURN_LEFT = 17 as const;\r\nexport const ROUTE_TURN_RIGHT = 18 as const;\r\nexport const ROUTE_TURN_UP = 19 as const;\r\nexport const ROUTE_TURN_90D_R = 20 as const;\r\nexport const ROUTE_TURN_90D_L = 21 as const;\r\nexport const ROUTE_TURN_180D = 22 as const;\r\nexport const ROUTE_TURN_90D_R_L = 23 as const;\r\nexport const ROUTE_TURN_RANDOM = 24 as const;\r\nexport const ROUTE_TURN_TOWARD = 25 as const;\r\nexport const ROUTE_TURN_AWAY = 26 as const;\r\nexport const ROUTE_SWITCH_ON = 27 as const;\r\nexport const ROUTE_SWITCH_OFF = 28 as const;\r\nexport const ROUTE_CHANGE_SPEED = 29 as const;\r\nexport const ROUTE_CHANGE_FREQ = 30 as const;\r\nexport const ROUTE_WALK_ANIME_ON = 31 as const;\r\nexport const ROUTE_WALK_ANIME_OFF = 32 as const;\r\nexport const ROUTE_STEP_ANIME_ON = 33 as const;\r\nexport const ROUTE_STEP_ANIME_OFF = 34 as const;\r\nexport const ROUTE_DIR_FIX_ON = 35 as const;\r\nexport const ROUTE_DIR_FIX_OFF = 36 as const;\r\nexport const ROUTE_THROUGH_ON = 37 as const;\r\nexport const ROUTE_THROUGH_OFF = 38 as const;\r\nexport const ROUTE_TRANSPARENT_ON = 39 as const;\r\nexport const ROUTE_TRANSPARENT_OFF = 40 as const;\r\nexport const ROUTE_CHANGE_IMAGE = 41 as const;\r\nexport const ROUTE_CHANGE_OPACITY = 42 as const;\r\nexport const ROUTE_CHANGE_BLEND_MODE = 43 as const;\r\nexport const ROUTE_PLAY_SE = 44 as const;\r\nexport const ROUTE_SCRIPT = 45 as const;\r\n","import type { Data_MapInfo } from \"./mapInfo\";\r\nimport type { JSONSchemaType } from \"ajv\";\r\n\r\nexport const SCHEMA_DATA_MAP_INFO = {\r\n  type: \"object\",\r\n  required: [\r\n    \"name\",\r\n    \"id\",\r\n    \"expanded\",\r\n    \"order\",\r\n    \"parentId\",\r\n    \"scrollX\",\r\n    \"scrollY\",\r\n  ],\r\n  properties: {\r\n    name: { type: \"string\" },\r\n    id: { type: \"integer\", minimum: 0 },\r\n    expanded: { type: \"boolean\" },\r\n    order: { type: \"integer\" },\r\n    parentId: { type: \"integer\" },\r\n    scrollX: { type: \"integer\" },\r\n    scrollY: { type: \"integer\" },\r\n  },\r\n} as const satisfies JSONSchemaType<Data_MapInfo>;\r\n","import type { Data_Map } from \"./map\";\r\n\r\nexport const makeMapData = (map: Partial<Data_Map> = {}): Data_Map => {\r\n  return {\r\n    autoplayBgm: map.autoplayBgm ?? false,\r\n    autoplayBgs: map.autoplayBgs ?? false,\r\n    battleback1Name: map.battleback1Name ?? \"\",\r\n    battleback2Name: map.battleback2Name ?? \"\",\r\n    bgm: map.bgm ?? { name: \"\", pan: 0, pitch: 100, volume: 100 },\r\n    bgs: map.bgs ?? { name: \"\", pan: 0, pitch: 100, volume: 100 },\r\n    disableDashing: map.disableDashing ?? false,\r\n    displayName: map.displayName ?? \"\",\r\n    encounterList: map.encounterList ?? [],\r\n    events: map.events ?? [],\r\n    height: map.height ?? 0,\r\n    note: map.note ?? \"\",\r\n    parallaxLoopX: map.parallaxLoopX ?? false,\r\n    parallaxLoopY: map.parallaxLoopY ?? false,\r\n    parallaxName: map.parallaxName ?? \"\",\r\n    parallaxShow: map.parallaxShow ?? false,\r\n    parallaxSx: map.parallaxSx ?? 0,\r\n    parallaxSy: map.parallaxSy ?? 0,\r\n    width: map.width ?? 0,\r\n    x: map.x ?? 0,\r\n    y: map.y ?? 0,\r\n    data: map.data ?? [],\r\n  };\r\n};\r\n","import type { Data_Troop } from \"./troop\";\r\nimport type { Data_CommonEvent } from \"./commonEvent\";\r\nimport type { Troop_EventConditions, Troop_Member } from \"./troopMembers\";\r\n\r\nexport const makeCommonEventData = (\r\n  data: Partial<Data_CommonEvent> = {}\r\n): Data_CommonEvent => ({\r\n  id: data.id ?? 0,\r\n  name: data.name ?? \"\",\r\n  trigger: data.trigger ?? 0,\r\n  list: data.list ?? [],\r\n  switchId: data.switchId ?? 0,\r\n});\r\n\r\nexport const makeTroopData = (data: Partial<Data_Troop> = {}): Data_Troop => ({\r\n  id: data.id ?? 0,\r\n  name: data.name ?? \"\",\r\n  members: data.members ?? [],\r\n  pages: data.pages ?? [],\r\n});\r\n\r\nexport const makeTroopMember = (\r\n  data: Partial<Troop_Member> = {}\r\n): Troop_Member => ({\r\n  enemyId: data.enemyId ?? 0,\r\n  x: data.x ?? 0,\r\n  y: data.y ?? 0,\r\n  hidden: data.hidden ?? false,\r\n});\r\n\r\nexport const makeTroopEventConditions = (\r\n  data: Partial<Troop_EventConditions> = {}\r\n): Troop_EventConditions => ({\r\n  actorHp: data.actorHp ?? 0,\r\n  actorId: data.actorId ?? 0,\r\n  enemyValid: data.enemyValid ?? 0,\r\n  switchValid: data.switchValid ?? 0,\r\n});\r\n","import type { DomainLabel } from \"@RpgTypes/templates\";\r\nimport type {\r\n  System_DataNames,\r\n  System_Images,\r\n  System_Text,\r\n  System_Bgm,\r\n  System_BoolanOptions,\r\n} from \"./system\";\r\n\r\ntype AsLabel<T> = Record<keyof T, string>;\r\n\r\nexport type SystemLabel_DataNames = AsLabel<System_DataNames>;\r\nexport type SystemLabel_Images = AsLabel<System_Images>;\r\nexport type SystemLabel_Text = AsLabel<System_Text>;\r\nexport type SystemLabel_Bgm = AsLabel<System_Bgm>;\r\nexport type SystemLabel_BoolanOptions = AsLabel<System_BoolanOptions>;\r\n\r\nexport const DEFAULT_SYSTEM_LABELS_BOOLEAN = {\r\n  domainName: \"オプション\",\r\n  options: {\r\n    optDrawTitle: \"ゲームタイトルの描画\",\r\n    optDisplayTp: \"ウィンドウにTPを表示\",\r\n    optFloorDeath: \"床ダメージで戦闘不能\",\r\n    optSlipDeath: \"スリップダメージで戦闘不能\",\r\n    optAutosave: \"オートセーブを有効化\",\r\n    optExtraExp: \"控えメンバーも経験値を獲得\",\r\n    optFollowers: \"隊列歩行\",\r\n    optSideView: \"戦闘をサイドビューにする\",\r\n    optKeyItemsNumber: \"大事なものの個数を表示\",\r\n    optTransparent: \"透明状態で開始\",\r\n    optMessageSkip: \"メッセージスキップを有効化\",\r\n    optSplashScreen: \"スプラッシュ画面を表示\",\r\n  },\r\n} as const satisfies DomainLabel<SystemLabel_BoolanOptions>;\r\n\r\nexport const MockSystemLabelDataTypes = {\r\n  domainName: \"タイプ\",\r\n  options: {\r\n    armorTypes: \"防具タイプ\",\r\n    elements: \"属性\",\r\n    equipTypes: \"装備タイプ\",\r\n    skillTypes: \"スキルタイプ\",\r\n    weaponTypes: \"武器タイプ\",\r\n    switches: \"スイッチ\",\r\n    variables: \"変数\",\r\n  },\r\n} as const satisfies DomainLabel<SystemLabel_DataNames>;\r\n","import type { GlobalLabel } from \"./globalLabels\";\r\n\r\nexport const DEFAULT_GLOBAL_LABELS = {\r\n  id: \"識別子\",\r\n  name: \"名前\",\r\n  note: \"メモ\",\r\n  description: \"説明\",\r\n  iconIndex: \"アイコンインデックス\",\r\n  occasion: \"使用タイミング\",\r\n  params: \"パラメータ\",\r\n  repeats: \"繰り返し回数\",\r\n  scope: \"範囲\",\r\n  speed: \"速度補正\",\r\n  successRate: \"成功率\",\r\n  animationId: \"アニメーションID\",\r\n  displayType: \"表示タイプ\",\r\n  characterIndex: \"キャラクターインデックス\",\r\n  characterName: \"キャラクター名\",\r\n  effectName: \"効果名\",\r\n  faceIndex: \"顔グラフィックインデックス\",\r\n  faceName: \"顔グラフィック名\",\r\n  flashTimings: \"フラッシュタイミング\",\r\n  list: \"リスト\",\r\n  messageType: \"メッセージタイプ\",\r\n  offsetX: \"オフセットX\",\r\n  offsetY: \"オフセットY\",\r\n  overlay: \"オーバーレイ\",\r\n  priority: \"優先度\",\r\n  restriction: \"制約\",\r\n  rotation: \"回転\",\r\n  scale: \"スケール\",\r\n  soundTimings: \"サウンドタイミング\",\r\n  stepsToRemove: \"解除までの歩数\",\r\n  type: \"タイプ\",\r\n  variance: \"分散度\",\r\n  unknownCode: \"不明なコード\",\r\n  content: \"内容\",\r\n  apply: \"適用\",\r\n  turn: \"ターン\",\r\n  commonEvent: \"コモンイベント\",\r\n  normal: \"通常\",\r\n  dualWield: \"二刀流\",\r\n  bossCollaps: \"ボス崩壊\",\r\n  instantCollaps: \"即時崩壊\",\r\n  noneCollaps: \"崩壊なし\",\r\n  escape: \"逃走\",\r\n} as const satisfies GlobalLabel;\r\n","import type { LabelRegistry } from \"./labelRegistry\";\r\nimport { DEFAULT_GLOBAL_LABELS } from \"./labelUtils\";\r\nimport {\r\n  DEFAULT_DAMAGE_LABELS,\r\n  LABEL_SET_ITEM_EFFECT,\r\n  LABEL_SET_DATA,\r\n  LABEL_SET_TRAIT,\r\n} from \"./data\";\r\n\r\nexport const LABEL_REGISTRY_JP = {\r\n  rpg: {\r\n    damage: DEFAULT_DAMAGE_LABELS,\r\n    data: LABEL_SET_DATA,\r\n    traits: LABEL_SET_TRAIT,\r\n    itemEffect: LABEL_SET_ITEM_EFFECT,\r\n  },\r\n  global: DEFAULT_GLOBAL_LABELS,\r\n} as const satisfies LabelRegistry;\r\n","import type { AudioFileParams } from \"./audioFileParams\";\r\n\r\nexport const makeAudioFileParams = (\r\n  audioFileParams: Partial<AudioFileParams>\r\n): AudioFileParams => {\r\n  return {\r\n    name: audioFileParams.name ?? \"\",\r\n    volume: audioFileParams.volume ?? 100,\r\n    pitch: audioFileParams.pitch ?? 100,\r\n    pan: audioFileParams.pan ?? 0,\r\n  };\r\n};\r\n"],"names":["FOLDER_AUDIO_BGM","FOLDER_AUDIO_SE","FOLDER_AUDIO_ME","FOLDER_AUDIO_BGS","FOLDER_IMG_BATTLEBACK1","FOLDER_IMG_BATTLEBACK2","FOLDER_IMG_CHACTERS","FOLDER_IMG_ENEMIES","FOLDER_IMG_FACES","FOLDER_IMG_PARALLACES","FOLDER_IMG_PICTURES","FOLDER_IMG_SV_ACTORS","FOLDER_IMG_SV_ENEMIES","FOLDER_IMG_SYSTEM","FOLDER_IMG_TILESETS","FOLDER_IMG_TITLES1","FOLDER_IMG_TITLES2","FILENAME_SYSTEM","FILENAME_ACTORS","FILANAME_CLASSES","FILENAME_SKILLS","FILENAME_ITEMS","FILENAME_WEAPONS","FILENAME_ARMORS","FILENAME_ENEMIES","FILENAME_TROOPS","FILENAME_STATES","FILENAME_ANIMATIONS","FILENAME_TILESET","FILENAME_COMMON_EVENTS","FILENAME_MAP_INFOS","FOLDER_DATA","FOLDER_IMG","FOLDER_AUDIO","FOLDER_JS","mergeWithDefaults","defaultLabels","labels","reulst","key","value","mergeDomainLabel","base","override","mergeNestedPrimitiveRecords","result","domain","domainBase","domainOverride","makeNamedItem","name","index","getVariableNames","system","getElementTypes","getEquipTypes","getSkillTypes","getWeaponTypes","getArmorTypes","getParamNames","AUTHOR_RMMZ","MODULE_TRAIT","MODULE_DATA","MODULE_SYSTEM","TRAIT_ELEMENT_RATE","TRAIT_DEBUFF_RATE","TRAIT_STATE_RATE","TRAIT_STATE_RESIST","TRAIT_PARAM","TRAIT_XPARAM","TRAIT_SPARAM","TRAIT_ATTACK_ELEMENT","TRAIT_ATTACK_STATE","TRAIT_ATTACK_SPEED","TRAIT_ATTACK_TIMES","TRAIT_ATTACK_SKILL","TRAIT_SKILL_TYPE_ADD","TRAIT_SKILL_TYPE_SEAL","TRAIT_SKILL_ADD","TRAIT_SKILL_SEAL","TRAIT_EQUIP_WEAPON_TYPE","TRAIT_EQUIP_ARMOR_TYPE","TRAIT_EQUIP_LOCK","TRAIT_EQUIP_SEAL","TRAIT_SLOT_TYPE","TRAIT_ACTION_PLUS","TRAIT_SPECIAL_FLAG","TRAIT_COLLAPSE_TYPE","TRAIT_PARTY_ABILITY","COLLAPS_NORMAL","COLLAPS_BOSS","COLLAPS_INSTANT","COLLAPS_NONE","PARTY_ABILITY_ENCOUNTER_HALF","PARTY_ABILITY_ENCOUNTER_NONE","PARTY_ABILITY_CANCEL_SURPRISE","PARTY_ABILITY_RAISE_PREEMPTIVE","PARTY_ABILITY_GOLD_DOUBLE","PARTY_ABILITY_DROP_ITEM_DOUBLE","FLAG_ID_AUTO_BATTLE","FLAG_ID_GUARD","FLAG_ID_SUBSTITUTE","FLAG_ID_PRESERVE_TP","EXTRA_PARAM_HIT","EXTRA_PARAM_EVA","EXTRA_PARAM_CRI","EXTRA_PARAM_CEV","EXTRA_PARAM_MEV","EXTRA_PARAM_MRF","EXTRA_PARAM_CNT","EXTRA_PARAM_HRG","EXTRA_PARAM_MRG","EXTRA_PARAM_TRG","REGULAR_PARAM_MAX_HP","REGULAR_PARAM_MAX_MP","REGULAR_PARAM_ATK","REGULAR_PARAM_DEF","REGULAR_PARAM_MATK","REGULAR_PARAM_MDEF","REGULAR_PARAM_AGI","REGULAR_PARAM_LUK","SPECIAL_PARAM_TGR","SPECIAL_PARAM_GRD","SPECIAL_PARAM_REC","SPECIAL_PARAM_PHA","SPECIAL_PARAM_MCR","SPECIAL_PARAM_TCR","SPECIAL_PARAM_PDR","SPECIAL_PARAM_MDR","SPECIAL_PARAM_FDR","SPECIAL_PARAM_EXR","regularParamName","paramIndex","extraParamName","specialParamName","foldCollapsOptions","options","global","foldPartyAbilityOptions","foldRegularParam","param","foldExtraParam","xparam","foldSpecialParams","specialParams","foldSpecialFlag","label","traitDomain","sourceKey","fn","buildCollapsSource","SRC_TRAIT_COLLAPS","col","buildPartyAbilitySource","SRC_TRAIT_PARTY_ABILITY","buildRegularParamSource","SRC_PARAMS_REGULAR","buildExtraParamSource","SRC_PARAMS_EXTRA","buildSpecialParamSource","SRC_PARAMS_SPECIAL","buildSpecialFlagSource","SRC_TRAIT_SPECIAL_FLAG","FORMAT_NAME","FORMAT_PARAM_RATE_MUL","FORMAT_PARAM_RATE_PLUS","FORMAT_PARAM_VALUE","LABEL_SET_TRAIT","PLACEHOLDER_VALUE","PLACEHOLDER_NAME","TraitDescriptor","code","format","dataSource","trait","resolveName","text","allowed","m","soruceError","nameError","invalidPlaceHolder","resolveTraitLabels","defineTraitElementRate","defineTraitDebuffRate","defineTraitStateRate","defineTraitStateResist","defineTraitRegularParam","defineTraitExtraParam","defineTraitSpecialParam","defineTraitAttackElement","defineTraitAttackState","defineTraitAttackSpeed","defineTraitAttackTimes","defineTraitAttackSkill","defineTraitSkillTypeAdd","defineTraitSkillTypeSeal","defineTraitSkillAdd","defineTraitSkillSeal","defineTraitEquipWeaponType","defineTraitEquipArmorType","defineTraitEquipLock","defineTraitEquipSeal","defineTraitSlotType","defineTraitActionPlus","defineTraitSpecialFlag","defineTraitCollapseType","defineTraitPartyAbility","validate","defineTrait","srcElement","SRC_ELEMENTS","srcData","srcTrait","src","srcSystem","SRC_DATA_STATE","SRC_DATA_SKILL","SRC_WEAPON_TYPES","SRC_ARMOR_TYPES","TYPENAME_TRAIT","SCHEMA_TRAIT","makeActor","actor","SCHEMA_DATA_ACTOR","normalizeDataActor","data","makeArmor","armor","SCHEMA_DATA_ARMMOR","makeClass","SCHEMA_DATA_CLASS","makeState","SCHEMA_DATA_STATE","LABELS_DATA_WEAPON","makeWeapon","weapon","makeDamage","SCHEMA_DATA_WEAPON","makeDropItem","dropItem","makeEnemyAction","action","makeEnemy","_a","SCHEMA_DATA_ENEMY","makeItem","item","makeSkill","skill","SCHEMA_DATA_SKILL","SCHEMA_DATA_ITEM","HITTYPE_CERTAIN","HITTYPE_PHYSICAL","HITTYPE_MAGICAL","FORMAT_GROW","FORMAT_STATE","FORMAT_RECOVER","FORMAT_ADD_BUFF","LABEL_SET_ITEM_EFFECT","EFFECT_RECOVER_HP","EFFECT_RECOVER_MP","EFFECT_GAIN_TP","EFFECT_ADD_STATE","EFFECT_REMOVE_STATE","EFFECT_ADD_BUFF","EFFECT_ADD_DEBUFF","EFFECT_REMOVE_BUFF","EFFECT_REMOVE_DEBUFF","EFFECT_SPECIAL","EFFECT_GROW","EFFECT_LEARN_SKILL","EFFECT_COMMON_EVENT","SPECIAL_EFFECT_ESCAPE","validAsciiKey","sanitizeKey","testUnknonwKey","joinSourceKey","isValid","source","SRC_DATA_ACTOR","SRC_DATA_VARIABLE","SRC_DATA_MAP","SRC_DATA_ENEMY","SRC_DATA_ITEMS","SRC_DATA_WEAPON","SRC_DATA_ARMOR","SRC_DATA_CLASS","SRC_COMMON_EVNET","SRC_TROOP","SRC_COLOR","SRC_EQUIP_TYPES","SRC_SWITCHES","SRC_SKILL_TYPES","PLACEHOLDER_VALUE1","PLACEHOLDER_VALUE2","ItemEffectDescriptor","codeId","description","effect","formatItemEffectText","effectDefine","resolveItemEffectLabels","defineEffectRecoverHp","defineEffectRecoverMp","defineEffectGainTp","defineEffectAddState","defineEffectRemoveState","defineEffectAddBuff","defineEffectAddDebuff","defineEffectRemoveBuff","defineEffectRemoveDebuff","defineEffectLearnSkill","defineEffectCommonEvent","regularParam","defineEffect","baseLabel","defineEffectGrow","DEFAULT_ITEM_LABELS","DEFAULT_SKILL_LABELS","DEFAULT_USABLE_ITEM_LABELS","LABEL_SET_DATA","DEFAULT_DAMAGE_LABELS","damage","SCHEMA_DAMAGE","exports","_CodeOrName","Name","s","_Code","c","names","_","strs","args","i","addCodeArg","plus","str","expr","safeStringify","optimize","arg","interpolate","res","mergeExprItems","b","strConcat","c1","c2","x","stringify","getProperty","getEsmExportName","regexpCode","rx","code_1","require$$0","ValueError","UsedValueState","Scope","prefixes","parent","nameOrPrefix","prefix","ng","_b","ValueScopeName","nameStr","property","itemIndex","line","ValueScope","opts","valueKey","vs","_name","keyOrRef","scopeName","values","usedValues","getCode","valueCode","nameSet","def","scope_1","require$$1","code_2","scope_2","Node","_names","_constants","Def","varKind","rhs","es5","_n","constants","optimizeExpr","Assign","lhs","sideEffects","addExprNames","AssignOp","op","Label","Break","Throw","error","AnyCode","ParentNode","nodes","n","subtractNames","addNames","BlockNode","Root","Else","If","condition","cond","e","ns","not","For","ForLoop","iteration","ForRange","from","to","ForIter","loop","iterable","Func","async","Return","Try","Catch","Finally","CodeGen","extScope","prefixOrName","constant","_constant","keyValues","thenBody","elseBody","node","forBody","arr","obj","tryBody","catchCode","finallyCode","body","nodeCount","len","toClose","funcBody","N1","N2","replaceName","canOptimize","items","par","andCode","mappend","and","orCode","or","y","util","codegen_1","toHash","hash","alwaysValidSchema","it","schema","checkUnknownRules","schemaHasRules","self","rules","checkStrictMode","schemaHasRulesButRef","RULES","schemaRefOrVal","topSchemaRef","schemaPath","keyword","$data","unescapeFragment","unescapeJsonPointer","escapeFragment","escapeJsonPointer","eachItem","xs","f","makeMergeEvaluated","mergeNames","mergeToName","mergeValues","resultToName","gen","toName","setEvaluated","evaluatedPropsToName","ps","props","p","snippets","useFunc","Type","getErrorPath","dataProp","dataPropType","jsPropertySyntax","isNumber","msg","mode","names_1","util_1","require$$2","schemaType","reportError","cxt","errorPaths","overrideAllErrors","compositeRule","allErrors","errObj","errorObjectCode","addError","returnErrors","reportExtraError","resetErrorsCount","errsCount","extendErrors","schemaValue","err","errs","validateName","schemaEnv","E","createErrors","errorObject","errorInstancePath","errorSchemaPath","extraErrorProps","errorPath","instancePath","instPath","errSchemaPath","parentSchema","schPath","params","message","propertyName","boolSchema","errors_1","boolError","topBoolOrEmptySchema","falseSchemaError","boolOrEmptySchema","valid","_jsonTypes","jsonTypes","isJSONType","getRules","groups","applicability","schemaHasRulesForType","type","group","shouldUseGroup","rule","shouldUseRule","kwd","dataType","rules_1","applicability_1","require$$3","require$$4","DataType","getSchemaTypes","types","getJSONTypes","ts","coerceAndCheckDataType","coerceTo","coerceToTypes","checkTypes","wrongType","checkDataTypes","coerceData","reportTypeError","COERCIBLE","coerceTypes","t","coerced","coerceSpecificType","assignParentData","parentData","parentDataProperty","checkDataType","strictNums","correct","EQ","numCond","_cond","dataTypes","notObj","typeError","getTypeErrorContext","schemaCode","defaults","assignDefaults","ty","properties","assignDefault","sch","prop","defaultValue","childData","util_2","checkReportMissingProp","noPropertyInData","checkMissingProp","missing","reportMissingProp","hasPropFunc","isOwnProperty","propertyInData","ownProperties","allSchemaProperties","schemaMap","schemaProperties","callValidateCode","func","context","passSchema","dataAndSchema","valCxt","newRegExp","usePattern","pattern","u","regExp","validateArray","validArr","validateItems","notValid","validateUnion","schValid","_sch","schCxt","macroKeywordCode","macroSchema","schemaRef","useKeyword","funcKeywordCode","checkAsyncKeyword","validateRef","validateKeyword","assignValid","modifyData","reportErrs","ruleErrs","validateAsync","validateSync","addErrs","validateErrs","_await","passCxt","errors","validSchemaType","allowUndefined","st","validateKeywordUsage","deps","subschema","getSubschema","schemaProp","extendSubschemaData","dpType","dataPathArr","nextData","dataContextProps","_nextData","extendSubschemaMode","jtdDiscriminator","jtdMetadata","fastDeepEqual","equal","a","length","keys","traverse","jsonSchemaTraverseModule","cb","pre","post","_traverse","jsonPtr","rootSchema","parentJsonPtr","parentKeyword","keyIndex","escapeJsonPtr","resolve","SIMPLE_INLINED","inlineRef","limit","hasRef","countKeys","REF_KEYWORDS","count","getFullPath","resolver","id","normalize","normalizeId","_getFullPath","TRAILING_SLASH_HASH","resolveUrl","baseId","ANCHOR","getSchemaRefs","schemaId","uriResolver","schId","baseIds","pathPrefix","localRefs","schemaRefs","fullPath","innerBaseId","addRef","addAnchor","ref","_resolve","ambiguos","schOrRef","checkAmbiguosRef","anchor","sch1","sch2","boolSchema_1","dataType_1","dataType_2","defaults_1","keyword_1","subschema_1","require$$5","require$$6","require$$7","resolve_1","require$$8","require$$9","require$$10","validateFunctionCode","isSchemaObj","checkKeywords","schemaCxtHasRules","topSchemaObjCode","validateFunction","funcSourceUrl","destructureValCxtES5","destructureValCxt","commentKeyword","checkNoDefault","resetEvaluated","typeAndKeywords","returnResults","subschemaCode","subSchemaObjCode","updateContext","checkAsyncSchema","checkRefsAndKeywords","schemaKeywords","checkedTypes","rootName","ValidationError","assignEvaluated","evaluated","typeErrors","keywordCode","checkStrictTypes","groupKeywords","iterateKeywords","useDefaults","checkContextTypes","checkMultipleTypes","checkKeywordTypes","includesType","strictTypesError","narrowSchemaTypes","hasApplicableType","schTs","kwdT","withTypes","KeywordCxt","getData","successAction","failAction","append","errorParams","assign","codeBlock","$dataValid","wrong$DataType","invalid$DataSchema","validateSchemaRef","appl","nextContext","schemaCxt","ruleType","JSON_POINTER","RELATIVE_JSON_POINTER","dataLevel","dataNames","jsonPointer","matches","up","errorMsg","segments","segment","pointerType","validation_error","ref_error","MissingRefError","compile","validation_error_1","validate_1","SchemaEnv","env","compileSchema","getCompilingSchema","rootId","lines","_ValidationError","sourceCode","validateCode","resolveRef","root","schOrFunc","inlineOrCompile","schEnv","sameSchemaEnv","s1","s2","resolveSchema","refPath","getJsonPointer","PREVENT_SCOPE_CHANGE","parsedRef","part","partSchema","$ref","scopedChars","HEX","IPV4_REG","normalizeIPv4","host","findToken","address","stripLeadingZeros","stringArrayToHexStripped","input","keepZero","acc","strip","getIPV6","tokenCount","output","buffer","isZone","endipv6Encountered","endIpv6","consume","hex","cursor","normalizeIPv6","ipv6","newHost","escapedHost","token","out","skip","l","ind","RDS1","RDS2","RDS3","RDS5","removeDotSegments","im","normalizeComponentEncoding","components","esc","recomposeAuthority","uriTokens","ipV4res","ipV6res","utils","UUID_REG","URN_REG","isSecure","wsComponents","httpParse","httpSerialize","secure","wsParse","wsSerialize","path","query","urnParse","urnComponents","scheme","urnScheme","schemeHandler","SCHEMES","urnSerialize","nid","uriComponents","nss","urnuuidParse","uuidComponents","urnuuidSerialize","http","https","ws","wss","schemes","uri","serialize","parse","baseURI","relativeURI","schemelessOptions","resolved","resolveComponents","relative","skipNormalization","target","uriA","uriB","cmpts","authority","hexLookUp","_v","k","nonSimpleDomain","URI_PARSE","parsed","gotEncoding","isIP","ipv4result","ipv6result","fastUri","fastUriModule","uri_1","ref_error_1","compile_1","codegen_2","$dataRefSchema","defaultRegExp","flags","META_IGNORE_OPTIONS","EXT_SCOPE_NAMES","removedOptions","deprecatedOptions","MAX_EXPRESSION","requiredOptions","o","_c","_d","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","_q","_r","_s","_t","_u","_w","_x","_y","_z","_0","_optz","Ajv","getLogger","formatOpt","checkOptions","getMetaSchemaOptions","addInitialFormats","addInitialKeywords","addInitialSchemas","meta","_dataRefSchema","schemaKeyRef","v","_meta","loadSchema","runCompileAsync","_schema","loadMetaSchema","_compileAsync","checkLoaded","loadMissingSchema","missingRef","_loadSchema","_validateSchema","throwOrLogError","$schema","keyRef","getSchEnv","cacheKey","definitions","kwdOrDef","checkKeyword","addRule","keywordMetaschema","definition","separator","dataVar","metaSchema","keywordsJsonPointers","keywords","seg","schemaOrData","schemas","regex","validateSchema","addSchema","currentOpts","checkOpts","log","opt","optsSchemas","defs","metaOpts","noLogs","logger","KEYWORD_NAME","ruleGroup","addBeforeRule","before","_rule","$dataRef","callRootRef","schOrEnv","callValidate","inlineRefSchema","callRef","getValidate","schName","$async","callAsyncRef","callSyncRef","addEvaluatedFrom","addErrorsFrom","schEvaluated","core_1","id_1","ref_1","core","limitNumber","ops","KWDs","multipleOf","prec","invalid","ucs2length_1","ucs2length","pos","limitLength","comp","limitProperties","required","missingProperty","useLoop","allErrorsMode","exitOnErrorMode","definedProperties","requiredKey","loopAllRequired","loopUntilMissing","limitItems","equal_1","uniqueItems","j","itemTypes","validateUniqueItems","loopN","loopN2","indices","eql","outer","_const","_enum","getEql","loopEnum","vSchema","equalCode","validation_1","limitNumber_1","multipleOf_1","limitLength_1","pattern_1","limitProperties_1","required_1","limitItems_1","uniqueItems_1","const_1","enum_1","validation","additionalItems","validateAdditionalItems","validateTuple","extraItems","schArr","checkStrictTuple","fullTuple","prefixItems","items_1","items2020","additionalItems_1","contains","min","max","minContains","maxContains","validateItemsWithCount","checkLimits","_valid","block","depsCount","property_ies","propDeps","schDeps","splitDependencies","validatePropertyDeps","validateSchemaDeps","propertyDeps","schemaDeps","hasProperty","depProp","propertyNames","additionalProperties","patProps","checkAdditionalProperties","additionalPropertyCode","isAdditional","definedProp","propsSchema","deleteAdditional","applyAdditionalSchema","additionalProperties_1","allProps","hasDefault","applyPropertySchema","patternProperties","patterns","alwaysValidPatterns","checkProperties","validatePatternProperties","pat","checkMatchingProperties","validateProperties","alwaysValid","anyOf","oneOf","passing","validateOneOf","allOf","_if","hasThen","hasSchema","hasElse","validateIf","ifClause","validateClause","thenElse","applicator","prefixItems_1","items2020_1","contains_1","dependencies_1","propertyNames_1","properties_1","patternProperties_1","not_1","anyOf_1","require$$11","oneOf_1","require$$12","allOf_1","require$$13","if_1","require$$14","thenElse_1","require$$15","getApplicator","draft2020","validate$DataFormat","validateFormat","fmts","fDef","fType","unknownFmt","invalidFmt","callFormat","validData","formatDef","unknownFormat","fmtType","fmtRef","getFormat","validCondition","unknownMsg","fmtDef","fmt","format_2","metadata","draft7","applicator_1","format_1","metadata_1","draft7Vocabularies","DiscrError","discriminator","types_1","discrError","tagName","tag","validateMapping","mapping","getMapping","tagValue","applyTagSchema","oneOfMapping","topRequired","hasRequired","tagRequired","propSch","addMappings","addMapping","draft7_1","discriminator_1","draft7MetaSchema","META_SUPPORT_DATA","META_SCHEMA_ID","module","ajv","enemy","state","class_","isDataItem","isDataSkill","isDataActor","isDataArmor","isDataWeapon","isDataEnemy","isDataState","isDataClass","NO_OPERATION","SHOW_MESSAGE","SHOW_MESSAGE_BODY","SHOW_CHOICES","SHOW_CHOICES_ITEM","INPUT_NUMBER","SELECT_ITEM","SHOW_SCROLLING_TEXT","SHOW_SCROLLING_TEXT_BODY","COMMENT","COMMENT_BODY","SKIP","CONDITIONAL_BRANCH","CONDITIONAL_BRANCH_ELSE","LOOP","LOOP_BREAK","EXIT_EVENT_PROCESSING","COMMON_EVENT","LABEL","LABEL_JUMP","CONTROL_SWITCHES","CONTROL_VARIABLES","CONTROL_SELF_SWITCH","CONTROL_TIMER","CHANGE_GOLD","CHANGE_ITEMS","CHANGE_WEAPONS","CHANGE_ARMORS","CHANGE_PARTY_MEMBER","CHANGE_BATTLE_BGM","CHANGE_VICTORY_ME","CHANGE_SAVE_ACCESS","CHANGE_MENU_ACCESS","CHANGE_ENCOUNTER","CHANGE_FORMATION_ACCESS","CHANGE_WINDOW_COLOR","CHANGE_DEFEAT_ME","CHANGE_VEHICLE_BGM","TRANSFER_PLAYER","SET_VEHICLE_LOCATION","SET_EVENT_LOCATION","SCROLL_MAP","SET_MOVEMENT_ROUTE","GET_ONOFF_VEHICLE","CHANGE_TRANSPARENCY","SHOW_ANIMATION","SHOW_BALLOON_ICON","ERASE_EVENT","CHANGE_PLAYER_FOLLOWERS","GATHER_FOLLOWERS","FADEOUT_SCREEN","FADEIN_SCREEN","TINT_SCREEN","FLASH_SCREEN","SHAKE_SCREEN","WAIT","SHOW_PICTURE","MOVE_PICTURE","ROTATE_PICTURE","TINT_PICTURE","ERASE_PICTURE","SET_WEATHER_EFFECT","PLAY_BGM","FADEOUT_BGM","SAVE_BGM","RESUME_BGM","PLAY_BGS","FADEOUT_BGS","PLAY_ME","PLAY_SE","STOP_SE","PLAY_MOVIE","CHANGE_TILESET","CHANGE_BATTLE_BACKGROUND","CHANGE_PARALLAX","GET_LOCATION_INFO","BATTLE_PROCESSING","SHOP_PROCESSING","SHOP_PROCESSING_BODY","NAME_INPUT_PROCESSING","CHANGE_HP","CHANGE_MP","CHANGE_TP","RECOVER_ALL","CHANGE_EXP","CHANGE_NAME","CHANGE_CLASS","CHANGE_ACTOR_IMAGES","CHANGE_VEHICLE_IMAGE","CHANGE_NICKNAME","CHANGE_PROFILE","CHANGE_ENEMY_HP","CHANGE_ENEMY_MP","CHANGE_ENEMY_STATE","ENEMY_RECOVER_ALL","ENEMY_APPEAR","ENEMY_TRANSFORM","SHOW_BATTLE_ANIMATION","FORCE_ACTION","ABORT_BATTLE","OPEN_MENU_SCREEN","CHANGE_ENEMY_TP","OPEN_SAVE_SCREEN","GAME_OVER","RETURN_TO_TITLE_SCREEN","SCRIPT_EVAL","SCRIPT_EVAL_BODY","PLUGIN_COMMAND_MV","PLUGIN_COMMAND_MZ","ROUTE_END","ROUTE_MOVE_DOWN","ROUTE_MOVE_LEFT","ROUTE_MOVE_RIGHT","ROUTE_MOVE_UP","ROUTE_MOVE_LOWER_L","ROUTE_MOVE_LOWER_R","ROUTE_MOVE_UPPER_L","ROUTE_MOVE_UPPER_R","ROUTE_MOVE_RANDOM","ROUTE_MOVE_TOWARD","ROUTE_MOVE_AWAY","ROUTE_MOVE_FORWARD","ROUTE_MOVE_BACKWARD","ROUTE_JUMP","ROUTE_WAIT","ROUTE_TURN_DOWN","ROUTE_TURN_LEFT","ROUTE_TURN_RIGHT","ROUTE_TURN_UP","ROUTE_TURN_90D_R","ROUTE_TURN_90D_L","ROUTE_TURN_180D","ROUTE_TURN_90D_R_L","ROUTE_TURN_RANDOM","ROUTE_TURN_TOWARD","ROUTE_TURN_AWAY","ROUTE_SWITCH_ON","ROUTE_SWITCH_OFF","ROUTE_CHANGE_SPEED","ROUTE_CHANGE_FREQ","ROUTE_WALK_ANIME_ON","ROUTE_WALK_ANIME_OFF","ROUTE_STEP_ANIME_ON","ROUTE_STEP_ANIME_OFF","ROUTE_DIR_FIX_ON","ROUTE_DIR_FIX_OFF","ROUTE_THROUGH_ON","ROUTE_THROUGH_OFF","ROUTE_TRANSPARENT_ON","ROUTE_TRANSPARENT_OFF","ROUTE_CHANGE_IMAGE","ROUTE_CHANGE_OPACITY","ROUTE_CHANGE_BLEND_MODE","ROUTE_PLAY_SE","ROUTE_SCRIPT","SCHEMA_DATA_MAP_INFO","makeMapData","map","makeCommonEventData","makeTroopData","makeTroopMember","makeTroopEventConditions","DEFAULT_SYSTEM_LABELS_BOOLEAN","MockSystemLabelDataTypes","DEFAULT_GLOBAL_LABELS","LABEL_REGISTRY_JP","makeAudioFileParams","audioFileParams"],"mappings":"gFAAO,MAAMA,GAAmB,MACnBC,GAAkB,KAClBC,GAAkB,KAClBC,GAAmB,MCHnBC,GAAyB,eACzBC,GAAyB,eACzBC,GAAsB,aACtBC,GAAqB,UACrBC,GAAmB,QACnBC,GAAwB,aACxBC,GAAsB,WACtBC,GAAuB,YACvBC,GAAwB,aACxBC,GAAoB,SACpBC,GAAsB,WACtBC,GAAqB,UACrBC,GAAqB,UCZrBC,GAAkB,cAClBC,GAAkB,cAClBC,GAAmB,eACnBC,GAAkB,cAClBC,GAAiB,aACjBC,GAAmB,eACnBC,GAAkB,cAClBC,GAAmB,eACnBC,GAAkB,cAClBC,GAAkB,cAClBC,GAAsB,kBACtBC,GAAmB,gBACnBC,GAAyB,oBACzBC,GAAqB,gBCbrBC,GAAc,OACdC,GAAa,MACbC,GAAe,QACfC,GAAY,KCCZC,GAAoB,CAC/BC,EACAC,IAGG,CACG,MAAAC,EAAS,CAAE,GAAGF,CAAc,EAClC,UAAWG,KAAOH,EAAe,CACzB,MAAAI,EAAQH,EAAOE,CAAG,EACpB,OAAOC,GAAU,WACnBF,EAAOC,CAAG,EAAIC,EAChB,CAEK,OAAAF,CACT,EAEaG,GAAmB,CAC9BC,EACAC,KAEO,CACL,WAAYA,EAAS,YAAcD,EAAK,WACxC,QAASP,GAAkBO,EAAK,QAASC,EAAS,SAAW,CAAE,CAAA,CACjE,GAGWC,GAA8B,CACzCF,EACAC,IACM,CACN,MAAME,EAAqB,CAAC,EAC5B,UAAWC,KAAUJ,EAAM,CACnB,MAAAK,EAAaL,EAAKI,CAAM,EACxBE,EAAiBL,EAASG,CAAM,GAAK,CAAC,EAC5CD,EAAOC,CAAM,EAAIX,GACfY,EACAC,CACF,CAAA,CAEK,OAAAH,CACT,ECtCMI,GAAgB,CAACC,EAAcC,KAAmC,CACtE,KAAAD,EACA,GAAIC,CACN,GAEaC,GACXC,GAEOA,EAAO,UAAU,IAAIJ,EAAa,EAG9BK,GACXD,GAEOA,EAAO,SAAS,IAAIJ,EAAa,EAG7BM,GACXF,GAEOA,EAAO,WAAW,IAAIJ,EAAa,EAG/BO,GACXH,GAEOA,EAAO,WAAW,IAAIJ,EAAa,EAG/BQ,GACXJ,GAEOA,EAAO,YAAY,IAAIJ,EAAa,EAGhCS,GACXL,GAEOA,EAAO,WAAW,IAAIJ,EAAa,EAG/BU,GAAiBN,GACrBA,EAAO,MAAM,OAAO,IAAIJ,EAAa,EChDjCW,GAAc,OACdC,GAAe,QACfC,GAAc,OACdC,GAAgB,SCHhBC,GAAqB,GACrBC,GAAoB,GACpBC,GAAmB,GACnBC,GAAqB,GACrBC,GAAc,GACdC,GAAe,GACfC,GAAe,GACfC,GAAuB,GACvBC,GAAqB,GACrBC,GAAqB,GACrBC,GAAqB,GACrBC,GAAqB,GACrBC,GAAuB,GACvBC,GAAwB,GACxBC,GAAkB,GAClBC,GAAmB,GACnBC,GAA0B,GAC1BC,GAAyB,GACzBC,GAAmB,GACnBC,GAAmB,GACnBC,GAAkB,GAClBC,GAAoB,GACpBC,GAAqB,GACrBC,GAAsB,GACtBC,GAAsB,GCxBtBC,GAAiB,EACjBC,GAAe,EACfC,GAAkB,EAClBC,GAAe,ECHfC,GAA+B,EAC/BC,GAA+B,EAC/BC,GAAgC,EAChCC,GAAiC,EACjCC,GAA4B,EAC5BC,GAAiC,ECLjCC,GAAsB,EACtBC,GAAgB,EAChBC,GAAqB,EACrBC,GAAsB,ECAtBC,GAAkB,EAKlBC,GAAkB,EAKlBC,GAAkB,EAKlBC,GAAkB,EAKlBC,GAAkB,EAKlBC,GAAkB,EAKlBC,GAAkB,EAKlBC,GAAkB,EAKlBC,GAAkB,EAKlBC,GAAkB,EC7ClBC,GAAuB,EAKvBC,GAAuB,EAIvBC,GAAoB,EAIpBC,GAAoB,EAIpBC,GAAqB,EAKrBC,GAAqB,EAKrBC,GAAoB,EAIpBC,GAAoB,EC/BpBC,GAAoB,EAKpBC,GAAoB,EAKpBC,GAAoB,EAKpBC,GAAoB,EAKpBC,GAAoB,EAKpBC,GAAoB,EAKpBC,GAAoB,EAKpBC,GAAoB,EAKpBC,GAAoB,EAKpBC,GAAoB,ECZpBC,GAAmB,CAC9BC,EACA/F,IACW,CACX,OAAQ+F,EAAY,CAClB,KAAKnB,GACH,OAAO5E,EAAO,MAChB,KAAK6E,GACH,OAAO7E,EAAO,MAChB,KAAK8E,GACH,OAAO9E,EAAO,IAChB,KAAK+E,GACH,OAAO/E,EAAO,IAChB,KAAKgF,GACH,OAAOhF,EAAO,KAChB,KAAKiF,GACH,OAAOjF,EAAO,KAChB,KAAKkF,GACH,OAAOlF,EAAO,IAChB,KAAKmF,GACH,OAAOnF,EAAO,IAChB,QACE,MAAO,YAAY+F,CAAU,GAAA,CAEnC,EAEaC,GAAiB,CAC5BD,EACA/F,IACW,CACX,OAAQ+F,EAAY,CAClB,KAAK1B,GACH,OAAOrE,EAAO,oBAChB,KAAKmE,GACH,OAAOnE,EAAO,YAChB,KAAKwE,GACH,OAAOxE,EAAO,kBAChB,KAAKoE,GACH,OAAOpE,EAAO,aAChB,KAAKkE,GACH,OAAOlE,EAAO,QAChB,KAAKyE,GACH,OAAOzE,EAAO,mBAChB,KAAKsE,GACH,OAAOtE,EAAO,iBAChB,KAAKuE,GACH,OAAOvE,EAAO,oBAChB,KAAK0E,GACH,OAAO1E,EAAO,mBAChB,KAAK2E,GACH,OAAO3E,EAAO,kBAAA,CAElB,MAAO,YAAY+F,CAAU,GAC/B,EAEaE,GAAmB,CAC9BF,EACA/F,IACW,CACX,OAAQ+F,EAAY,CAClB,KAAKF,GACH,OAAO7F,EAAO,eAChB,KAAKoF,GACH,OAAOpF,EAAO,WAChB,KAAK4F,GACH,OAAO5F,EAAO,gBAChB,KAAKqF,GACH,OAAOrF,EAAO,gBAChB,KAAKwF,GACH,OAAOxF,EAAO,WAChB,KAAKyF,GACH,OAAOzF,EAAO,aAChB,KAAK0F,GACH,OAAO1F,EAAO,mBAChB,KAAK2F,GACH,OAAO3F,EAAO,gBAChB,KAAKuF,GACH,OAAOvF,EAAO,aAChB,KAAKsF,GACH,OAAOtF,EAAO,kBAAA,CAElB,MAAO,YAAY+F,CAAU,GAC/B,ECpDaG,GAAqB,CAChCC,EACAC,IAEO,CACL,CACE,GAAIhD,GACJ,KAAMgD,EAAO,MACf,EACA,CACE,GAAI/C,GACJ,KAAM8C,EAAQ,WAChB,EACA,CACE,GAAI7C,GACJ,KAAM6C,EAAQ,cAChB,EACA,CACE,GAAI5C,GACJ,KAAM4C,EAAQ,WAAA,CAElB,EAGWE,GACXF,GAEO,CACL,CACE,GAAI3C,GACJ,KAAM2C,EAAQ,aAChB,EACA,CACE,GAAI1C,GACJ,KAAM0C,EAAQ,aAChB,EACA,CACE,GAAIzC,GACJ,KAAMyC,EAAQ,cAChB,EACA,CACE,GAAIxC,GACJ,KAAMwC,EAAQ,eAChB,EACA,CACE,GAAIvC,GACJ,KAAMuC,EAAQ,UAChB,EACA,CACE,GAAItC,GACJ,KAAMsC,EAAQ,cAAA,CAElB,EAGWG,GACXC,GAEO,CACL,CAAE,GAAI3B,GAAsB,KAAM2B,EAAM,KAAM,EAC9C,CAAE,GAAI1B,GAAsB,KAAM0B,EAAM,KAAM,EAC9C,CAAE,GAAIzB,GAAmB,KAAMyB,EAAM,GAAI,EACzC,CAAE,GAAIxB,GAAmB,KAAMwB,EAAM,GAAI,EACzC,CAAE,GAAIvB,GAAoB,KAAMuB,EAAM,IAAK,EAC3C,CAAE,GAAItB,GAAoB,KAAMsB,EAAM,IAAK,EAC3C,CAAE,GAAIrB,GAAmB,KAAMqB,EAAM,GAAI,EACzC,CAAE,GAAIpB,GAAmB,KAAMoB,EAAM,GAAI,CAC3C,EAGWC,GAAkBC,GACtB,CACL,CACE,GAAIvC,GACJ,KAAMuC,EAAO,OACf,EACA,CACE,GAAItC,GACJ,KAAMsC,EAAO,WACf,EACA,CACE,GAAIrC,GACJ,KAAMqC,EAAO,YACf,EACA,CACE,GAAIpC,GACJ,KAAMoC,EAAO,mBACf,EACA,CACE,GAAInC,GACJ,KAAMmC,EAAO,gBACf,EACA,CACE,GAAIlC,GACJ,KAAMkC,EAAO,mBACf,EACA,CACE,GAAIjC,GACJ,KAAMiC,EAAO,iBACf,EACA,CACE,GAAIhC,GACJ,KAAMgC,EAAO,kBACf,EACA,CACE,GAAI/B,GACJ,KAAM+B,EAAO,kBACf,EACA,CACE,GAAI9B,GACJ,KAAM8B,EAAO,kBAAA,CAEjB,EAGWC,GACXC,GAEO,CACL,CACE,GAAIvB,GACJ,KAAMuB,EAAc,UACtB,EACA,CACE,GAAItB,GACJ,KAAMsB,EAAc,eACtB,EACA,CACE,GAAIrB,GACJ,KAAMqB,EAAc,kBACtB,EACA,CACE,GAAIpB,GACJ,KAAMoB,EAAc,YACtB,EACA,CACE,GAAInB,GACJ,KAAMmB,EAAc,UACtB,EACA,CACE,GAAIlB,GACJ,KAAMkB,EAAc,YACtB,EACA,CACE,GAAIjB,GACJ,KAAMiB,EAAc,kBACtB,EACA,CACE,GAAIhB,GACJ,KAAMgB,EAAc,eACtB,EACA,CACE,GAAIf,GACJ,KAAMe,EAAc,eACtB,EACA,CACE,GAAId,GACJ,KAAMc,EAAc,cAAA,CAExB,EAGWC,GACXC,GAEO,CACL,CACE,GAAI/C,GACJ,KAAM+C,EAAM,UACd,EACA,CACE,GAAI9C,GACJ,KAAM8C,EAAM,KACd,EACA,CACE,GAAI7C,GACJ,KAAM6C,EAAM,UACd,EACA,CACE,GAAI5C,GACJ,KAAM4C,EAAM,aAAA,CAEhB,EC3NWC,GAAc,CACzBC,EACA/G,EACAgH,KAEO,CACL,MAAOA,EAAGhH,EAAO,OAAO,EACxB,MAAOA,EAAO,WACd,OAAQ,CACN,OAAQuB,GACR,OAAQC,GACR,KAAMuF,CAAA,CAEV,GAGWE,GAAqB,CAChCjH,EACAoG,IAEOU,GAAYI,GAAmBlH,EAASmH,GAC7CjB,GAAmBiB,EAAKf,CAAM,CAChC,EAGWgB,GACXpH,GAEO8G,GAAYO,GAAyBrH,EAAQqG,EAAuB,EAGhEiB,GACXT,GAEOC,GAAYS,GAAoBV,EAAOP,EAAgB,EAGnDkB,GACXX,GAEOC,GAAYW,GAAkBZ,EAAOL,EAAc,EAG/CkB,GACXb,GAEOC,GAAYa,GAAoBd,EAAOH,EAAiB,EAGpDkB,GACXf,GAEOC,GAAYe,GAAwBhB,EAAOD,EAAe,ECpE7DkB,GAAc,SACdC,GAAwB,oBACxBC,GAAyB,oBACzBC,GAAqB,UAEdC,EAAkB,CAC7B,WAAY,KACZ,QAAS,CACP,aAAc,CACZ,WAAY,QACZ,OAAQH,GACR,QAAS,CACP,MAAO,OACP,MAAO,OACP,IAAK,MACL,IAAK,MACL,KAAM,QACN,KAAM,QACN,IAAK,MACL,IAAK,GAAA,CAET,EACA,WAAY,CACV,WAAY,QACZ,OAAQC,GACR,QAAS,CACP,QAAS,MACT,YAAa,MACb,aAAc,UACd,oBAAqB,YACrB,iBAAkB,QAClB,oBAAqB,QACrB,kBAAmB,MACnB,mBAAoB,QACpB,mBAAoB,QACpB,mBAAoB,OAAA,CAExB,EACA,aAAc,CACZ,WAAY,QACZ,OAAQD,GACR,QAAS,CACP,WAAY,OACZ,gBAAiB,QACjB,mBAAoB,QACpB,aAAc,OACd,WAAY,QACZ,aAAc,UACd,mBAAoB,UACpB,gBAAiB,UACjB,gBAAiB,SACjB,eAAgB,MAAA,CAEpB,EACA,YAAa,CACX,WAAY,QACZ,OAAQD,GACR,QAAS,CACP,WAAY,OACZ,MAAO,KACP,WAAY,OACZ,cAAe,MAAA,CAEnB,EACA,QAAS,CACP,WAAY,UACZ,OAAQA,GACR,QAAS,CACP,YAAa,OACb,eAAgB,OAChB,YAAa,MAAA,CAEjB,EACA,aAAc,CACZ,WAAY,SACZ,OAAQA,GACR,QAAS,CACP,eAAgB,SAChB,eAAgB,aAChB,cAAe,WACf,cAAe,WACf,WAAY,SACZ,gBAAiB,UAAA,CAErB,EACA,YAAa,CACX,WAAY,QACZ,OAAQC,EACV,EACA,WAAY,CACV,WAAY,QACZ,OAAQA,EACV,EACA,UAAW,CACT,WAAY,UACZ,OAAQA,EACV,EACA,YAAa,CACX,WAAY,SACZ,OAAQD,EACV,EACA,cAAe,CACb,WAAY,OACZ,OAAQA,EACV,EACA,YAAa,CACX,WAAY,SACZ,OAAQE,EACV,EACA,YAAa,CACX,WAAY,SACZ,OAAQC,EACV,EACA,YAAa,CACX,WAAY,SACZ,OAAQA,EACV,EACA,WAAY,CACV,WAAY,OACZ,OAAQF,EACV,EACA,YAAa,CACX,WAAY,QACZ,OAAQD,EACV,EACA,gBAAiB,CACf,WAAY,UACZ,OAAQA,EACV,EACA,eAAgB,CACd,WAAY,UACZ,OAAQA,EACV,EACA,UAAW,CACT,WAAY,OACZ,OAAQA,EACV,EACA,UAAW,CACT,WAAY,OACZ,OAAQA,EACV,EACA,SAAU,CACR,WAAY,UACZ,OAAQA,EACV,EACA,SAAU,CACR,WAAY,QACZ,OAAQA,EACV,EACA,UAAW,CACT,WAAY,WACZ,OAAQA,EACV,EACA,aAAc,CACZ,WAAY,WACZ,OAAQA,EACV,EACA,cAAe,CACb,WAAY,WACZ,OAAQA,EAAA,CACV,CAEJ,EC3KMK,GAAoB,UACpBC,GAAmB,SAElB,MAAMC,EAA8C,CACzD,YACkBC,EACAzB,EACA0B,EACAC,EAChB,CAJgB,KAAA,KAAAF,EACA,KAAA,MAAAzB,EACA,KAAA,OAAA0B,EACA,KAAA,WAAAC,CAAA,CAElB,MAAMC,EAAuB,CACpB,OAAA,KAAK,OAASA,EAAM,IAAA,CAE7B,cAAcA,EAAc,CACtB,KAAK,MAAMA,CAAK,CAEpB,CAKF,WACEA,EACAC,EAIQ,CACR,KAAK,cAAcD,CAAK,EAClB,MAAAE,EAAO,KAAK,OAAO,WACvBR,GACAM,EAAM,MAAM,SAAS,CACvB,EACI,OAAC,KAAK,WAGHE,EAAK,WACVP,GACAM,EAAY,KAAK,WAAYD,EAAM,MAAM,CAC3C,EALSE,CAKT,CAEF,eAAyB,CAChB,OAAA,KAAK,OAAO,SAASR,EAAiB,CAAA,CAE/C,cAAwB,CACf,OAAA,KAAK,OAAO,SAASC,EAAgB,CAAA,CAG9C,oBAA+B,CACvB,MAAAQ,EAAU,CAAC,QAAS,MAAM,EAIhC,MAHmC,CACjC,GAAG,KAAK,OAAO,SAAS,cAAc,CACxC,EACe,IAAKC,GAAMA,EAAE,CAAC,CAAC,EAAE,OAAQ3I,GAAQ,CAAC0I,EAAQ,SAAS1I,CAAG,CAAC,CAAA,CAExE,4BAAsC,CACpC,MAAI,OAAK,YAAc,CAAC,KAAK,eAGtB,CAET,UAAiC,CACzB,MAAA4I,EAAc,CAAC,KAAK,2BAA2B,EAC/CC,EAAY,KAAK,aAAa,GAAK,CAAC,KAAK,WACzCC,EAAqB,KAAK,mBAAmB,EAE5C,MAAA,CACL,KAAM,KAAK,KACX,MAAO,KAAK,MACZ,OAAQ,KAAK,OACb,SAAUF,GAAeC,GAAaC,EAAmB,OAAS,EAClE,uBAAwBF,EACxB,oBAAqBC,EACrB,oBAAqBC,CACvB,CAAA,CAEJ,CC7Ba,MAAAC,GACXjJ,GAEO,CACLkJ,GAAuBlJ,EAAO,WAAW,EACzCmJ,GAAsBnJ,EAAO,UAAU,EACvCoJ,GAAqBpJ,EAAO,SAAS,EACrCqJ,GAAuBrJ,EAAO,WAAW,EACzCsJ,GAAwBtJ,EAAO,YAAY,EAC3CuJ,GAAsBvJ,EAAO,UAAU,EACvCwJ,GAAwBxJ,EAAO,YAAY,EAC3CyJ,GAAyBzJ,EAAO,aAAa,EAC7C0J,GAAuB1J,EAAO,WAAW,EACzC2J,GAAuB3J,EAAO,WAAW,EACzC4J,GAAuB5J,EAAO,WAAW,EACzC6J,GAAuB7J,EAAO,WAAW,EACzC8J,GAAwB9J,EAAO,YAAY,EAC3C+J,GAAyB/J,EAAO,aAAa,EAC7CgK,GAAoBhK,EAAO,QAAQ,EACnCiK,GAAqBjK,EAAO,SAAS,EACrCkK,GAA2BlK,EAAO,eAAe,EACjDmK,GAA0BnK,EAAO,cAAc,EAC/CoK,GAAqBpK,EAAO,SAAS,EACrCqK,GAAqBrK,EAAO,SAAS,EACrCsK,GAAoBtK,EAAO,QAAQ,EACnCuK,GAAsBvK,EAAO,UAAU,EACvCwK,GAAuBxK,EAAO,WAAW,EACzCyK,GAAwBzK,EAAO,OAAO,EACtC0K,GAAwB1K,EAAO,YAAY,CAC7C,EAGI2K,GAAW,CAACtK,EAAcC,IAC9B,OAAOA,GAAa,SAAWA,EAAWD,EAEtCuK,GAAc,CAClBtC,EACAjI,EACAC,EACAkI,IACoB,CACpB,MAAM3B,EAAQ8D,GAAStK,EAAK,WAAYC,EAAS,UAAU,EACrDiI,EAASoC,GAAStK,EAAK,OAAQC,EAAS,MAAM,EACpD,OAAO,IAAI+H,GAAgBC,EAAMzB,EAAO0B,EAAQC,CAAU,CAC5D,EAEMqC,GAAa,KACV,CACL,OAAQnJ,GACR,OAAQH,GACR,KAAMuJ,EACR,GAGIC,GAAW7K,IACR,CACL,OAAQuB,GACR,OAAQF,GACR,KAAMrB,CACR,GAGI8K,GAAYC,IAAmC,CACnD,OAAQ1J,GACR,OAAQC,GACR,KAAMyJ,CACR,GAEMC,GAAaD,IAAmC,CACpD,OAAQ1J,GACR,OAAQG,GACR,KAAMuJ,CACR,GAEa/B,GAA0BrC,GACrC+D,GACEjJ,GACAuG,EAAgB,QAAQ,YACxBrB,EACAgE,GAAW,CACb,EAEW1B,GAAyBtC,GACpC+D,GACEhJ,GACAsG,EAAgB,QAAQ,WACxBrB,EACAmE,GAASzD,EAAkB,CAC7B,EAEW6B,GAAwBvC,GACnC+D,GACE/I,GACAqG,EAAgB,QAAQ,UACxBrB,EACAmE,GAASzD,EAAkB,CAC7B,EAEW8B,GAA0BxC,GACrC+D,GACE9I,GACAoG,EAAgB,QAAQ,YACxBrB,EACAkE,GAAQI,EAAc,CACxB,EAEW7B,GAA2BzC,GACtC+D,GACE7I,GACAmG,EAAgB,QAAQ,aACxBrB,EACAmE,GAASzD,EAAkB,CAC7B,EAEWgC,GAAyB1C,GACpC+D,GACE5I,GACAkG,EAAgB,QAAQ,WACxBrB,EACAmE,GAASvD,EAAgB,CAC3B,EAEW+B,GAA2B3C,GACtC+D,GACE3I,GACAiG,EAAgB,QAAQ,aACxBrB,EACAmE,GAASrD,EAAkB,CAC7B,EAEW8B,GAA4B5C,GACvC+D,GACE1I,GACAgG,EAAgB,QAAQ,cACxBrB,EACAgE,GAAW,CACb,EAEWnB,GAA0B7C,GACrC+D,GACEzI,GACA+F,EAAgB,QAAQ,YACxBrB,EACAmE,GAASG,EAAc,CACzB,EAEWxB,GAA0B9C,GACrC+D,GAAYxI,GAAoB8F,EAAgB,QAAQ,YAAarB,CAAK,EAE/D+C,GAA0B/C,GACrC+D,GAAYvI,GAAoB6F,EAAgB,QAAQ,YAAarB,CAAK,EAE/DgD,GAA0BhD,GACrC+D,GACEtI,GACA4F,EAAgB,QAAQ,YACxBrB,EACAkE,GAAQK,EAAc,CACxB,EAEWb,GAAyB1D,GACpC+D,GAAY5H,GAAmBkF,EAAgB,QAAQ,WAAYrB,CAAK,EAE7D2D,GAA0B3D,GACrC+D,GACE3H,GACAiF,EAAgB,QAAQ,YACxBrB,EACAmE,GAASnD,EAAsB,CACjC,EAEW4C,GAA2B5D,GACtC+D,GACE1H,GACAgF,EAAgB,QAAQ,QACxBrB,EACAmE,GAAS9D,EAAiB,CAC5B,EAEWwD,GAA2B7D,GACtC+D,GACEzH,GACA+E,EAAgB,QAAQ,aACxBrB,EACAmE,GAAS3D,EAAuB,CAClC,EAEW6C,GAA8BrD,GACzC+D,GACEjI,GACAuF,EAAgB,QAAQ,gBACxBrB,EACAqE,GAAUG,EAAgB,CAC5B,EAEWlB,GAA6BtD,GACxC+D,GACEhI,GACAsF,EAAgB,QAAQ,eACxBrB,EACAqE,GAAUI,EAAe,CAC3B,EAEWlB,GAAwBvD,GACnC+D,GAAY/H,GAAkBqF,EAAgB,QAAQ,UAAWrB,CAAK,EAE3DwD,GAAwBxD,GACnC+D,GAAY9H,GAAkBoF,EAAgB,QAAQ,UAAWrB,CAAK,EAE3DmD,GAAuBnD,GAClC+D,GAAYnI,GAAiByF,EAAgB,QAAQ,SAAUrB,CAAK,EAEzDoD,GAAwBpD,GACnC+D,GAAYlI,GAAkBwF,EAAgB,QAAQ,UAAWrB,CAAK,EAE3DyD,GAAuBzD,GAClC+D,GAAY7H,GAAiBmF,EAAgB,QAAQ,SAAUrB,CAAK,EAEzDiD,GAA2BjD,GACtC+D,GACErI,GACA2F,EAAgB,QAAQ,aACxBrB,CACF,EAEWkD,GAA4BlD,GACvC+D,GACEpI,GACA0F,EAAgB,QAAQ,cACxBrB,CACF,ECtRW0E,GAAiB,QAEjBC,GAAe,CAC1B,KAAM,SACN,SAAU,CAAC,OAAQ,SAAU,OAAO,EACpC,WAAY,CACV,KAAM,CAAE,KAAM,SAAU,EACxB,OAAQ,CAAE,KAAM,SAAU,EAC1B,MAAO,CAAE,KAAM,SAAU,CAAA,CAE7B,ECXaC,GAAY,CAACC,EAA6B,MAAoB,CACzE,KAAMA,EAAM,MAAQ,GACpB,GAAIA,EAAM,IAAM,EAChB,YAAaA,EAAM,aAAe,GAClC,cAAeA,EAAM,eAAiB,GACtC,eAAgBA,EAAM,gBAAkB,EACxC,SAAUA,EAAM,UAAY,GAC5B,UAAWA,EAAM,WAAa,EAC9B,OAAQ,CAAC,EACT,KAAMA,EAAM,MAAQ,GACpB,QAASA,EAAM,SAAW,EAC1B,SAAUA,EAAM,UAAY,GAC5B,QAASA,EAAM,SAAW,GAC1B,OAAQ,CAAC,EACT,aAAcA,EAAM,cAAgB,EACpC,SAAUA,EAAM,UAAY,CAC9B,GCdaC,GAAoB,CAC/B,KAAM,SACN,SAAU,CACR,OACA,KACA,WACA,cACA,gBACA,iBACA,WACA,YACA,UACA,eACA,UACF,EACA,WAAY,CACV,KAAM,CAAE,KAAM,QAAS,EACvB,YAAa,CAAE,KAAM,QAAS,EAC9B,cAAe,CAAE,KAAM,QAAS,EAChC,eAAgB,CAAE,KAAM,SAAU,EAClC,SAAU,CAAE,KAAM,QAAS,EAC3B,UAAW,CAAE,KAAM,UAAW,QAAS,EAAG,QAAS,CAAE,EACrD,GAAI,CAAE,KAAM,UAAW,QAAS,CAAE,EAClC,SAAU,CAAE,KAAM,QAAS,EAE3B,QAAS,CAAE,KAAM,QAAS,EAC1B,aAAc,CAAE,KAAM,UAAW,QAAS,CAAE,EAC5C,SAAU,CAAE,KAAM,SAAU,EAC5B,QAAS,CAAE,KAAM,UAAW,QAAS,CAAE,EACvC,OAAQ,CAAE,KAAM,QAAS,MAAO,CAAE,KAAM,UAAY,EACpD,KAAM,CAAE,KAAM,QAAS,EACvB,OAAQ,CACN,KAAM,QACN,MAAO,CACL,KAAM,SACN,WAAY,CACV,KAAM,CAAE,KAAM,SAAU,EACxB,OAAQ,CAAE,KAAM,SAAU,EAC1B,MAAO,CAAE,KAAM,SAAU,CAC3B,EACA,SAAU,CAAC,OAAQ,SAAU,OAAO,CAAA,CACtC,CACF,CAEJ,EAEaC,GAAsBC,IAC1B,CACL,KAAMA,EAAK,MAAQ,GACnB,GAAIA,EAAK,IAAM,EACf,YAAaA,EAAK,aAAe,GACjC,cAAeA,EAAK,eAAiB,GACrC,eAAgBA,EAAK,gBAAkB,EACvC,SAAUA,EAAK,UAAY,GAC3B,UAAWA,EAAK,WAAa,EAC7B,OAAQ,CAAC,EACT,KAAMA,EAAK,MAAQ,GACnB,QAASA,EAAK,SAAW,EACzB,SAAUA,EAAK,UAAY,GAC3B,QAASA,EAAK,SAAW,GACzB,OAAQ,CAAC,EACT,aAAcA,EAAK,cAAgB,EACnC,SAAUA,EAAK,UAAY,CAC7B,GClEWC,GAAY,CAACC,EAA6B,MAAoB,CACzE,GAAIA,EAAM,IAAM,EAChB,KAAMA,EAAM,MAAQ,GACpB,UAAWA,EAAM,WAAa,EAC9B,YAAaA,EAAM,aAAe,GAClC,OAAQA,EAAM,QAAU,CAAC,EACzB,KAAMA,EAAM,MAAQ,GACpB,OAAQA,EAAM,QAAU,CACtB,EACA,EACA,EACA,EACA,EACA,EACA,EACA,CACF,EACA,QAASA,EAAM,SAAW,EAC1B,MAAOA,EAAM,OAAS,CACxB,GCfaC,GAAqB,CAChC,KAAM,SACN,SAAU,CACR,OACA,KACA,cACA,YACA,QACA,SACA,SACA,OACA,SACF,EAEA,WAAY,CACV,KAAM,CAAE,KAAM,QAAS,EACvB,GAAI,CAAE,KAAM,UAAW,QAAS,CAAE,EAClC,YAAa,CAAE,KAAM,QAAS,EAC9B,UAAW,CAAE,KAAM,UAAW,QAAS,CAAE,EACzC,MAAO,CAAE,KAAM,UAAW,QAAS,CAAE,EACrC,KAAM,CAAE,KAAM,QAAS,EACvB,QAAS,CAAE,KAAM,UAAW,QAAS,CAAE,EAEvC,OAAQ,CACN,KAAM,QACN,MAAO,CACL,CAAE,KAAM,SAAU,EAClB,CAAE,KAAM,SAAU,EAClB,CAAE,KAAM,SAAU,EAClB,CAAE,KAAM,SAAU,EAClB,CAAE,KAAM,SAAU,EAClB,CAAE,KAAM,SAAU,EAClB,CAAE,KAAM,SAAU,EAClB,CAAE,KAAM,SAAU,CACpB,EACA,SAAU,EACV,SAAU,CACZ,EAEA,OAAQ,CACN,KAAM,QACN,MAAO,CACL,KAAM,SACN,WAAY,CACV,KAAM,CAAE,KAAM,SAAU,EACxB,OAAQ,CAAE,KAAM,SAAU,EAC1B,MAAO,CAAE,KAAM,SAAU,CAC3B,EACA,SAAU,CAAC,OAAQ,SAAU,OAAO,CAAA,CACtC,CACF,CAEJ,ECxDaC,GAAY,CAACJ,EAA4B,MAAoB,CACxE,KAAMA,EAAK,MAAQ,GACnB,GAAIA,EAAK,IAAM,EACf,OAAQ,CAAC,EACT,KAAMA,EAAK,MAAQ,GACnB,OAAQ,CACN,EACA,EACA,EACA,EACA,EACA,EACA,EACA,CACF,EACA,UAAWA,EAAK,WAAa,CAAC,EAC9B,UAAWA,EAAK,WAAa,CAAA,CAC/B,GCfaK,GAAoB,CAC/B,KAAM,SACN,SAAU,CACR,OACA,KACA,OACA,YACA,SACA,YACA,QACF,EAEA,WAAY,CACV,KAAM,CAAE,KAAM,QAAS,EACvB,GAAI,CAAE,KAAM,UAAW,QAAS,CAAE,EAClC,KAAM,CAAE,KAAM,QAAS,EAEvB,UAAW,CACT,KAAM,QACN,MAAO,CAAE,KAAM,SAAU,CAC3B,EACA,OAAQ,CACN,KAAM,QACN,MAAO,CACL,CAAE,KAAM,SAAU,EAClB,CAAE,KAAM,SAAU,EAClB,CAAE,KAAM,SAAU,EAClB,CAAE,KAAM,SAAU,EAClB,CAAE,KAAM,SAAU,EAClB,CAAE,KAAM,SAAU,EAClB,CAAE,KAAM,SAAU,EAClB,CAAE,KAAM,SAAU,CACpB,EACA,SAAU,EACV,SAAU,CACZ,EACA,UAAW,CACT,KAAM,QACN,MAAO,CACL,KAAM,SACN,WAAY,CACV,MAAO,CAAE,KAAM,SAAU,EACzB,QAAS,CAAE,KAAM,SAAU,EAC3B,KAAM,CAAE,KAAM,QAAS,CACzB,EACA,SAAU,CAAC,QAAS,SAAS,EAC7B,qBAAsB,EAAA,CAE1B,EACA,OAAQ,CACN,KAAM,QACN,MAAO,CACL,KAAM,SACN,WAAY,CACV,KAAM,CAAE,KAAM,SAAU,EACxB,OAAQ,CAAE,KAAM,SAAU,EAC1B,MAAO,CAAE,KAAM,SAAU,CAC3B,EACA,SAAU,CAAC,OAAQ,SAAU,OAAO,EACpC,qBAAsB,EAAA,CACxB,CAEJ,EAEA,qBAAsB,EACxB,ECnEaC,GAAY,CAACN,EAA4B,MAAoB,CACxE,KAAMA,EAAK,MAAQ,GACnB,GAAIA,EAAK,IAAM,EACf,UAAWA,EAAK,WAAa,EAC7B,SAAUA,EAAK,UAAY,GAC3B,SAAUA,EAAK,UAAY,GAC3B,SAAUA,EAAK,UAAY,GAC3B,SAAUA,EAAK,UAAY,GAC3B,OAAQ,CAAC,EACT,KAAMA,EAAK,MAAQ,GAEnB,YAAaA,EAAK,aAAe,EACjC,SAAUA,EAAK,UAAY,EAC3B,OAAQA,EAAK,QAAU,EACvB,QAASA,EAAK,SAAW,EACzB,kBAAmBA,EAAK,mBAAqB,GAC7C,oBAAqBA,EAAK,qBAAuB,GACjD,kBAAmBA,EAAK,mBAAqB,EAC7C,SAAUA,EAAK,UAAY,EAC3B,SAAUA,EAAK,UAAY,EAC3B,eAAgBA,EAAK,gBAAkB,GACvC,eAAgBA,EAAK,gBAAkB,EACvC,gBAAiBA,EAAK,iBAAmB,GACzC,cAAeA,EAAK,eAAiB,CACvC,GCtBaO,GAAoB,CAC/B,KAAM,SACN,SAAU,CACR,OACA,KACA,YACA,WACA,WACA,WACA,WACA,cACA,WACA,SACA,UACA,oBACA,iBACA,kBACA,sBACA,oBACA,WACA,WACA,iBACA,gBACA,MACF,EAEA,WAAY,CACV,KAAM,CAAE,KAAM,QAAS,EACvB,GAAI,CAAE,KAAM,UAAW,QAAS,CAAE,EAClC,UAAW,CAAE,KAAM,UAAW,QAAS,CAAE,EAEzC,SAAU,CAAE,KAAM,QAAS,EAC3B,SAAU,CAAE,KAAM,QAAS,EAC3B,SAAU,CAAE,KAAM,QAAS,EAC3B,SAAU,CAAE,KAAM,QAAS,EAE3B,YAAa,CAAE,KAAM,SAAU,EAC/B,SAAU,CAAE,KAAM,SAAU,EAC5B,OAAQ,CAAE,KAAM,SAAU,EAC1B,QAAS,CAAE,KAAM,SAAU,EAE3B,kBAAmB,CAAE,KAAM,SAAU,EACrC,eAAgB,CAAE,KAAM,SAAU,EAElC,gBAAiB,CAAE,KAAM,SAAU,EACnC,oBAAqB,CAAE,KAAM,SAAU,EACvC,kBAAmB,CAAE,KAAM,SAAU,EAErC,SAAU,CAAE,KAAM,SAAU,EAC5B,SAAU,CAAE,KAAM,SAAU,EAE5B,eAAgB,CAAE,KAAM,SAAU,EAClC,cAAe,CAAE,KAAM,SAAU,EACjC,KAAM,CAAE,KAAM,QAAS,EAEvB,OAAQ,CACN,KAAM,QACN,MAAO,CACL,KAAM,SACN,WAAY,CACV,KAAM,CAAE,KAAM,SAAU,EACxB,OAAQ,CAAE,KAAM,SAAU,EAC1B,MAAO,CAAE,KAAM,SAAU,CAC3B,EACA,SAAU,CAAC,OAAQ,SAAU,OAAO,CAAA,CACtC,CACF,CAEJ,ECpEaC,GAAqB,CAChC,WAAY,KACZ,QAAS,CACP,aAAc,SAAA,CAElB,ECLaC,GAAa,CAACC,EAA+B,MAAqB,CAC7E,GAAIA,EAAO,IAAM,EACjB,KAAMA,EAAO,MAAQ,GACrB,UAAWA,EAAO,WAAa,EAC/B,YAAaA,EAAO,aAAe,GACnC,OAAQA,EAAO,QAAU,CAAC,EAC1B,KAAMA,EAAO,MAAQ,GACrB,OAAQA,EAAO,QAAU,CACvB,EACA,EACA,EACA,EACA,EACA,EACA,EACA,CACF,EACA,QAASA,EAAO,SAAW,EAC3B,MAAOA,EAAO,OAAS,EACvB,OAAQC,GAAWD,EAAO,QAAU,CAAA,CAAE,EACtC,QAASA,EAAO,SAAW,CAC7B,GCpBaE,GAAqB,CAChC,KAAM,SACN,SAAU,CACR,OACA,KACA,cACA,YACA,QACA,SACA,SACA,OACA,SACF,EAEA,WAAY,CACV,KAAM,CAAE,KAAM,QAAS,EACvB,GAAI,CAAE,KAAM,UAAW,QAAS,CAAE,EAClC,YAAa,CAAE,KAAM,QAAS,EAC9B,UAAW,CAAE,KAAM,UAAW,QAAS,CAAE,EACzC,MAAO,CAAE,KAAM,UAAW,QAAS,CAAE,EACrC,KAAM,CAAE,KAAM,QAAS,EACvB,QAAS,CAAE,KAAM,UAAW,QAAS,CAAE,EACvC,QAAS,CAAE,KAAM,UAAW,QAAS,CAAE,EACvC,OAAQ,CACN,KAAM,QACN,MAAO,CACL,CAAE,KAAM,SAAU,EAClB,CAAE,KAAM,SAAU,EAClB,CAAE,KAAM,SAAU,EAClB,CAAE,KAAM,SAAU,EAClB,CAAE,KAAM,SAAU,EAClB,CAAE,KAAM,SAAU,EAClB,CAAE,KAAM,SAAU,EAClB,CAAE,KAAM,SAAU,CACpB,EACA,SAAU,EACV,SAAU,CACZ,EACA,OAAQ,CACN,KAAM,SACN,WAAY,CACV,KAAM,CAAE,KAAM,UAAW,QAAS,CAAE,EACpC,UAAW,CAAE,KAAM,UAAW,QAAS,CAAE,EACzC,QAAS,CAAE,KAAM,QAAS,EAC1B,SAAU,CAAE,KAAM,UAAW,QAAS,EAAG,QAAS,GAAI,EACtD,SAAU,CAAE,KAAM,SAAU,CAC9B,EACA,SAAU,CAAC,OAAQ,YAAa,UAAW,WAAY,UAAU,CACnE,EACA,OAAQ,CACN,KAAM,QACN,MAAO,CACL,KAAM,SACN,WAAY,CACV,KAAM,CAAE,KAAM,SAAU,EACxB,OAAQ,CAAE,KAAM,SAAU,EAC1B,MAAO,CAAE,KAAM,SAAU,CAC3B,EACA,SAAU,CAAC,OAAQ,SAAU,OAAO,CAAA,CACtC,CACF,CAEJ,EC/DaC,GAAe,CAACC,EAA8B,MAAkB,CAC3E,OAAQA,EAAS,QAAU,EAC3B,YAAaA,EAAS,aAAe,EACrC,KAAMA,EAAS,MAAQ,CACzB,GAEaC,GAAkB,CAC7BC,EAAgC,MACd,CAClB,gBAAiBA,EAAO,iBAAmB,EAC3C,gBAAiBA,EAAO,iBAAmB,EAC3C,cAAeA,EAAO,eAAiB,EACvC,OAAQA,EAAO,QAAU,EAEzB,QAASA,EAAO,SAAW,CAC7B,GAEaC,GAAY,CAACjB,EAA4B,KAAoB,OAAA,OACxE,KAAMA,EAAK,MAAQ,GACnB,GAAIA,EAAK,IAAM,EACf,YAAaA,EAAK,aAAe,GACjC,WAAYA,EAAK,YAAc,EAC/B,YAAWkB,EAAAlB,EAAK,YAAL,YAAAkB,EAAgB,IAAI,IAAML,GAAc,KAAK,CAAC,EACzD,IAAKb,EAAK,KAAO,EACjB,KAAMA,EAAK,MAAQ,EACnB,OAAQ,CAAC,EACT,KAAMA,EAAK,MAAQ,GACnB,OAAQ,CACN,EACA,EACA,EACA,EACA,EACA,EACA,EACA,CACF,EACA,QAAS,CAAA,CACX,GCpCamB,GAAoB,CAC/B,KAAM,SACN,SAAU,CACR,OACA,KACA,cACA,aACA,MACA,OACA,OACA,SACA,YACA,SACA,SACF,EAEA,WAAY,CACV,KAAM,CAAE,KAAM,QAAS,EACvB,GAAI,CAAE,KAAM,UAAW,QAAS,CAAE,EAClC,WAAY,CAAE,KAAM,UAAW,QAAS,CAAE,EAC1C,YAAa,CAAE,KAAM,QAAS,EAC9B,IAAK,CAAE,KAAM,UAAW,QAAS,CAAE,EACnC,KAAM,CAAE,KAAM,UAAW,QAAS,CAAE,EACpC,KAAM,CAAE,KAAM,QAAS,EAEvB,OAAQ,CACN,KAAM,QACN,MAAO,CACL,CAAE,KAAM,SAAU,EAClB,CAAE,KAAM,SAAU,EAClB,CAAE,KAAM,SAAU,EAClB,CAAE,KAAM,SAAU,EAClB,CAAE,KAAM,SAAU,EAClB,CAAE,KAAM,SAAU,EAClB,CAAE,KAAM,SAAU,EAClB,CAAE,KAAM,SAAU,CACpB,EACA,SAAU,EACV,SAAU,CACZ,EACA,QAAS,CACP,KAAM,QAEN,MAAO,CACL,KAAM,SACN,SAAU,CACR,kBACA,kBACA,gBACA,UACA,QACF,EACA,WAAY,CACV,gBAAiB,CAAE,KAAM,SAAU,EACnC,gBAAiB,CAAE,KAAM,SAAU,EACnC,cAAe,CAAE,KAAM,SAAU,EACjC,QAAS,CAAE,KAAM,SAAU,EAC3B,OAAQ,CAAE,KAAM,SAAU,CAAA,CAC5B,CAEJ,EAEA,OAAQ,CACN,KAAM,QACN,MAAO,CACL,KAAM,SACN,WAAY,CACV,KAAM,CAAE,KAAM,SAAU,EACxB,OAAQ,CAAE,KAAM,SAAU,EAC1B,MAAO,CAAE,KAAM,SAAU,CAC3B,EACA,SAAU,CAAC,OAAQ,SAAU,OAAO,CAAA,CAExC,EAEA,UAAW,CACT,KAAM,QACN,MAAO,CACL,KAAM,SACN,WAAY,CACV,KAAM,CAAE,KAAM,SAAU,EACxB,OAAQ,CAAE,KAAM,SAAU,EAC1B,YAAa,CAAE,KAAM,UAAW,QAAS,CAAE,EAC3C,KAAM,CAAE,KAAM,QAAS,CACzB,EACA,SAAU,CAAC,OAAQ,SAAU,aAAa,CAAA,CAC5C,CACF,CAEJ,EC3FaC,GAAW,CAACC,EAA2B,MAAmB,CACrE,YAAaA,EAAK,aAAe,EACjC,GAAIA,EAAK,IAAM,EACf,KAAMA,EAAK,MAAQ,GACnB,UAAWA,EAAK,WAAa,EAC7B,YAAaA,EAAK,aAAe,GAEjC,KAAMA,EAAK,MAAQ,GACnB,WAAYA,EAAK,YAAc,GAC/B,MAAOA,EAAK,OAAS,EACrB,SAAUA,EAAK,UAAY,EAC3B,MAAOA,EAAK,OAAS,EACrB,YAAaA,EAAK,aAAe,EACjC,QAASA,EAAK,SAAW,EACzB,OAAQA,EAAK,QAAU,EACvB,QAASA,EAAK,SAAW,EACzB,OAAQV,GAAWU,EAAK,QAAU,CAAA,CAAE,EACpC,QAAS,CAAC,EACV,MAAO,CACT,GAEaC,GAAY,CAACC,EAA6B,MAAoB,CACzE,QAASA,EAAM,SAAW,EAC1B,iBAAkBA,EAAM,kBAAoB,EAC5C,iBAAkBA,EAAM,kBAAoB,EAC5C,YAAaA,EAAM,aAAe,EAClC,OAAQZ,GAAWY,EAAM,QAAU,CAAA,CAAE,EACrC,YAAaA,EAAM,aAAe,GAClC,QAAS,CAAC,EACV,QAASA,EAAM,SAAW,EAC1B,UAAWA,EAAM,WAAa,EAC9B,GAAIA,EAAM,IAAM,EAChB,SAAUA,EAAM,UAAY,GAC5B,SAAUA,EAAM,UAAY,GAC5B,YAAaA,EAAM,aAAe,EAClC,KAAMA,EAAM,MAAQ,GACpB,KAAMA,EAAM,MAAQ,GACpB,OAAQA,EAAM,QAAU,EACxB,SAAUA,EAAM,UAAY,EAC5B,QAASA,EAAM,SAAW,EAC1B,MAAOA,EAAM,OAAS,EACtB,MAAOA,EAAM,OAAS,EACtB,YAAaA,EAAM,aAAe,EAClC,OAAQA,EAAM,QAAU,EACxB,OAAQA,EAAM,QAAU,CAC1B,GC7CaC,GAAoB,CAC/B,KAAM,SACN,SAAU,CACR,OACA,KACA,cACA,YACA,WACA,WACA,cACA,SACA,mBACA,mBACA,UACA,SACA,cACA,UACA,WACA,UACA,QACA,QACA,cACA,SACA,OACA,SACF,EAEA,WAAY,CACV,KAAM,CAAE,KAAM,QAAS,EACvB,GAAI,CAAE,KAAM,UAAW,QAAS,CAAE,EAClC,YAAa,CAAE,KAAM,QAAS,EAC9B,UAAW,CAAE,KAAM,UAAW,QAAS,CAAE,EACzC,SAAU,CAAE,KAAM,QAAS,EAC3B,SAAU,CAAE,KAAM,QAAS,EAE3B,YAAa,CAAE,KAAM,SAAU,EAC/B,OAAQ,CAAE,KAAM,SAAU,EAC1B,iBAAkB,CAAE,KAAM,SAAU,EACpC,iBAAkB,CAAE,KAAM,SAAU,EACpC,QAAS,CAAE,KAAM,SAAU,EAC3B,OAAQ,CAAE,KAAM,SAAU,EAE1B,YAAa,CAAE,KAAM,UAAW,QAAS,CAAE,EAC3C,QAAS,CAAE,KAAM,SAAU,EAC3B,SAAU,CAAE,KAAM,SAAU,EAC5B,QAAS,CAAE,KAAM,SAAU,EAC3B,MAAO,CAAE,KAAM,SAAU,EACzB,MAAO,CAAE,KAAM,SAAU,EACzB,YAAa,CAAE,KAAM,SAAU,EAC/B,OAAQ,CAAE,KAAM,SAAU,EAE1B,KAAM,CAAE,KAAM,QAAS,EAEvB,QAAS,CACP,KAAM,QACN,MAAO,CACL,KAAM,SACN,WAAY,CACV,KAAM,CAAE,KAAM,SAAU,EACxB,OAAQ,CAAE,KAAM,SAAU,EAC1B,OAAQ,CAAE,KAAM,SAAU,EAC1B,OAAQ,CAAE,KAAM,SAAU,CAC5B,EACA,SAAU,CAAC,OAAQ,SAAU,SAAU,QAAQ,EAC/C,qBAAsB,EAAA,CAE1B,EACA,OAAQ,CACN,KAAM,SACN,WAAY,CACV,KAAM,CAAE,KAAM,SAAU,EACxB,UAAW,CAAE,KAAM,SAAU,EAC7B,QAAS,CAAE,KAAM,QAAS,EAC1B,SAAU,CAAE,KAAM,SAAU,EAC5B,SAAU,CAAE,KAAM,SAAU,CAC9B,EACA,SAAU,CAAC,OAAQ,YAAa,UAAW,WAAY,UAAU,EACjE,qBAAsB,EAAA,CAE1B,EAEA,qBAAsB,EACxB,EAEaC,GAAmB,CAC9B,KAAM,SACN,SAAU,CACR,OACA,KACA,cACA,YACA,OACA,cACA,UACA,WACA,UACA,QACA,QACA,cACA,SACA,aACA,QACA,SACF,EAEA,WAAY,CACV,KAAM,CAAE,KAAM,QAAS,EACvB,GAAI,CAAE,KAAM,UAAW,QAAS,CAAE,EAClC,YAAa,CAAE,KAAM,QAAS,EAC9B,UAAW,CAAE,KAAM,UAAW,QAAS,CAAE,EAEzC,KAAM,CAAE,KAAM,QAAS,EACvB,YAAa,CAAE,KAAM,UAAW,QAAS,CAAE,EAC3C,QAAS,CAAE,KAAM,SAAU,EAC3B,SAAU,CAAE,KAAM,SAAU,EAC5B,QAAS,CAAE,KAAM,SAAU,EAC3B,MAAO,CAAE,KAAM,SAAU,EACzB,MAAO,CAAE,KAAM,SAAU,EACzB,YAAa,CAAE,KAAM,SAAU,EAC/B,OAAQ,CAAE,KAAM,SAAU,EAC1B,WAAY,CAAE,KAAM,SAAU,EAC9B,MAAO,CAAE,KAAM,UAAW,QAAS,CAAE,EAErC,QAAS,CACP,KAAM,QACN,MAAO,CACL,KAAM,SACN,WAAY,CACV,KAAM,CAAE,KAAM,SAAU,EACxB,OAAQ,CAAE,KAAM,SAAU,EAC1B,OAAQ,CAAE,KAAM,SAAU,EAC1B,OAAQ,CAAE,KAAM,SAAU,CAC5B,EACA,SAAU,CAAC,OAAQ,SAAU,SAAU,QAAQ,EAC/C,qBAAsB,EAAA,CAE1B,EACA,OAAQ,CACN,KAAM,SACN,WAAY,CACV,KAAM,CAAE,KAAM,SAAU,EACxB,UAAW,CAAE,KAAM,SAAU,EAC7B,QAAS,CAAE,KAAM,QAAS,EAC1B,SAAU,CAAE,KAAM,SAAU,EAC5B,SAAU,CAAE,KAAM,SAAU,CAC9B,EACA,SAAU,CAAC,OAAQ,YAAa,UAAW,WAAY,UAAU,EACjE,qBAAsB,EAAA,CACxB,CAEJ,ECzJaC,GAAkB,EAClBC,GAAmB,EACnBC,GAAkB,ECCzBC,GAAc,oBACdC,GAAe,mBACfC,GAAiB,uBACjBC,GAAkB,qBAClB/F,GAAc,SAEPgG,GAAwB,CACnC,WAAY,OACZ,QAAS,CACP,QAAS,CACP,KAAM,UACN,WAAY,OACZ,OAAQD,EACV,EACA,UAAW,CACT,KAAM,WACN,WAAY,QACZ,OAAQA,EACV,EACA,OAAQ,CACN,KAAM,oBACN,WAAY,OACZ,OAAQD,EACV,EACA,KAAM,CACJ,KAAM,OACN,WAAY,OACZ,OAAQF,EACV,EACA,WAAY,CACV,KAAM,WACN,WAAY,QACZ,OAAQ5F,EACV,EACA,UAAW,CACT,KAAM,4EACN,WAAY,OACZ,OAAQ8F,EACV,EACA,UAAW,CACT,KAAM,4EACN,WAAY,OACZ,OAAQA,EACV,EACA,WAAY,CACV,KAAM,UACN,WAAY,OACZ,OAAQ9F,EACV,EACA,aAAc,CACZ,KAAM,WACN,WAAY,QACZ,OAAQA,EACV,EACA,YAAa,CACX,KAAM,kBACN,WAAY,SACZ,OAAQ6F,EACV,EACA,QAAS,CACP,KAAM,OACN,WAAY,OACZ,OAAQ7F,EACV,EACA,SAAU,CACR,KAAM,YACN,WAAY,SACZ,OAAQ6F,EACV,EACA,YAAa,CACX,KAAM,eACN,WAAY,UACZ,OAAQ7F,EAAA,CACV,CAEJ,EC9EaiG,GAAoB,GACpBC,GAAoB,GACpBC,GAAiB,GACjBC,GAAmB,GACnBC,GAAsB,GACtBC,GAAkB,GAClBC,GAAoB,GACpBC,GAAqB,GACrBC,GAAuB,GACvBC,GAAiB,GACjBC,GAAc,GACdC,GAAqB,GACrBC,GAAsB,GCZtBC,GAAwB,ECE/BC,GAAgB,iBAETC,GAAe3O,GACnB0O,GAAc,KAAK1O,CAAK,EAAIA,EAAQ,OAGhC4O,GAAkB5O,GACtB,OAAOA,GAAU,SAAW0O,GAAc,KAAK1O,CAAK,EAAI,GAGpD6O,GAAiB9O,GACrB,CAACA,EAAI,OAAQA,EAAI,OAAQA,EAAI,IAAI,EAAE,KAAK,GAAG,EAGvC+O,GACXC,GAGEH,GAAeG,EAAO,MAAM,GAC5BH,GAAeG,EAAO,MAAM,GAC5BH,GAAeG,EAAO,IAAI,ECtBjB3H,GAAqB,SACrBE,GAAmB,UACnBE,GAAqB,UACrBT,GAAoB,UACpBG,GAA0B,gBAC1BQ,GAAyB,QAEzBsH,GAAiB,SACjBC,GAAoB,YACpBC,GAAe,MACfC,GAAiB,QACjBnE,GAAiB,QACjBC,GAAiB,QACjBmE,GAAiB,QACjBC,GAAkB,SAClBC,GAAiB,QACjBC,GAAiB,QACjBC,GAAmB,eACnBC,GAAY,QACZC,GAAY,SAEZxE,GAAmB,cACnBC,GAAkB,aAClBwE,GAAkB,aAClBC,GAAe,WACfC,GAAkB,aAClBlF,GAAe,WCtBtBmF,GAAqB,WACrBC,GAAqB,WACrB9H,GAAmB,SAElB,MAAM+H,EAAyD,CACpE,YACkBC,EACAvJ,EACA0B,EACA8H,EACA7H,EAChB,CALgB,KAAA,OAAA4H,EACA,KAAA,MAAAvJ,EACA,KAAA,OAAA0B,EACA,KAAA,YAAA8H,EACA,KAAA,WAAA7H,CAAA,CAElB,WACE8H,EACA5H,EAIA,CACA,MAAMC,EAAO,KAAK,OACf,WAAWsH,GAAoBK,EAAO,OAAO,SAAU,CAAA,EACvD,WAAWJ,GAAoBI,EAAO,OAAO,UAAU,EACtD,OAAC,KAAK,WAGH3H,EAAK,WACVP,GACAM,EAAY,KAAK,WAAY4H,EAAO,MAAM,CAC5C,EALS3H,CAKT,CAEF,gBAA0B,CACjB,OAAA,KAAK,OAAO,SAASsH,EAAkB,CAAA,CAEhD,gBAA0B,CACjB,OAAA,KAAK,OAAO,SAASC,EAAkB,CAAA,CAEhD,cAAwB,CACf,OAAA,KAAK,OAAO,SAAS9H,EAAgB,CAAA,CAE9C,oBAA+B,CAC7B,MAAMQ,EAAU,CAAC,SAAU,SAAU,MAAM,EAI3C,MAHmC,CACjC,GAAG,KAAK,OAAO,SAAS,cAAc,CACxC,EACe,IAAKC,GAAMA,EAAE,CAAC,CAAC,EAAE,OAAQ3I,GAAQ,CAAC0I,EAAQ,SAAS1I,CAAG,CAAC,CAAA,CAExE,4BAAsC,CACpC,MAAI,OAAK,YAAc,CAAC,KAAK,eAGtB,CAEX,CClBO,MAAMqQ,GAAuB,CAClCC,EACAF,EACAzP,IAEO2P,EAAa,OACjB,WAAW,WAAYF,EAAO,OAAO,UAAU,EAC/C,WAAW,WAAYA,EAAO,OAAO,SAAA,CAAU,EAC/C,WAAW,SAAUzP,CAAI,EAGjB4P,GACX5J,GAEO,CACL6J,GAAsB7J,EAAM,QAAQ,SAAS,EAC7C8J,GAAsB9J,EAAM,QAAQ,SAAS,EAC7C+J,GAAmB/J,EAAM,QAAQ,MAAM,EACvCgK,GAAqBhK,EAAM,QAAQ,QAAQ,EAC3CiK,GAAwBjK,EAAM,QAAQ,WAAW,EACjDkK,GAAoBlK,EAAM,QAAQ,OAAO,EACzCmK,GAAsBnK,EAAM,QAAQ,SAAS,EAC7CoK,GAAuBpK,EAAM,QAAQ,UAAU,EAC/CqK,GAAyBrK,EAAM,QAAQ,YAAY,EACnDsK,GAAuBtK,EAAM,QAAQ,UAAU,EAC/CuK,GAAwBvK,EAAM,QAAQ,WAAW,CACnD,EAGIwK,GAAe,KAAyB,CAC5C,OAAQ9P,GACR,OAAQC,GACR,KAAM+F,EACR,GAEMwD,GAAWhE,IAAyC,CACxD,OAAQxF,GACR,OAAQE,GACR,KAAMsF,CACR,GAEMuK,GAAe,CACnBhJ,EACAiJ,EACAjR,EACAkI,IACyB,CACnB,MAAA3B,EAAQvG,EAAS,YAAciR,EAAU,WACzChJ,EAASjI,EAAS,QAAUiR,EAAU,OACtClB,EAAc/P,EAAS,MAAQiR,EAAU,KAC/C,OAAO,IAAIpB,GAAqB7H,EAAMzB,EAAO0B,EAAQ8H,EAAa7H,CAAU,CAC9E,EAEakI,GACX1Q,GAEAsR,GACEvD,GACAD,GAAsB,QAAQ,UAC9B9N,CACF,EAEW2Q,GACX3Q,GAEAsR,GACEtD,GACAF,GAAsB,QAAQ,UAC9B9N,CACF,EAEW4Q,GACX5Q,GAEAsR,GAAarD,GAAgBH,GAAsB,QAAQ,OAAQ9N,CAAM,EAE9DwR,GACXxR,GAEAsR,GAAa7C,GAAaX,GAAsB,QAAQ,KAAM9N,CAAM,EAEzD6Q,GACX7Q,GAEAsR,GACEpD,GACAJ,GAAsB,QAAQ,SAC9B9N,EACA+K,GAAQI,EAAc,CACxB,EAEW2F,GACX9Q,GAEAsR,GACEnD,GACAL,GAAsB,QAAQ,YAC9B9N,EACA+K,GAAQI,EAAc,CACxB,EAEW4F,GACX/Q,GAEAsR,GACElD,GACAN,GAAsB,QAAQ,QAC9B9N,EACAqR,GAAa,CACf,EAEWJ,GACXjR,GAEAsR,GACEhD,GACAR,GAAsB,QAAQ,WAC9B9N,EACAqR,GAAa,CACf,EAEWF,GACXnR,GAEAsR,GACE5C,GACAZ,GAAsB,QAAQ,WAC9B9N,EACA+K,GAAQK,EAAc,CACxB,EAEW4F,GACXhR,GAEAsR,GACEjD,GACAP,GAAsB,QAAQ,QAC9B9N,EACAqR,GAAa,CACf,EAEWH,GACXlR,GAEAsR,GACE/C,GACAT,GAAsB,QAAQ,aAC9B9N,EACAqR,GAAa,CACf,EAEWD,GACXpR,GAEAsR,GACE3C,GACAb,GAAsB,QAAQ,YAC9B9N,EACA+K,GAAQ4E,EAAgB,CAC1B,EClMW8B,GAAsB,CACjC,WAAY,OACZ,QAAS,CACP,WAAY,KAAA,CAEhB,ECLaC,GAAuB,CAClC,WAAY,MACZ,QAAS,CACP,sBAAuB,WACvB,sBAAuB,WACvB,OAAQ,OACR,OAAQ,MAAA,CAEZ,ECRaC,GAA6B,CACxC,WAAY,GACZ,QAAS,CACP,MAAO,KACP,MAAO,OACP,YAAa,KAAA,CAEjB,ECEaC,GAAiB,CAC5B,MAAO,CACL,WAAY,OACZ,QAAS,CACP,kBAAmB,OACnB,UAAW,MACX,eAAgB,WAChB,eAAgB,WAChB,SAAU,SACV,QAAS,SACT,QAAS,OACT,aAAc,QACd,SAAU,OAAA,CAEd,EACA,MAAO,CACL,WAAY,KACZ,QAAS,CACP,OAAQ,QACR,UAAW,QACX,UAAW,UAAA,CAEf,EACA,MAAO,CACL,WAAY,KACZ,QAAS,CACP,YAAa,UACb,WAAY,WAAA,CAEhB,EACA,MAAO,CACL,WAAY,OACZ,QAAS,CACP,UAAW,WACX,WAAY,UACZ,YAAa,QACb,KAAM,MAAA,CAEV,EACA,KAAM,CACJ,WAAY,OACZ,QAAS,CACP,WAAY,KAAA,CAEhB,EACA,MAAO,CACL,WAAY,MACZ,QAAS,CACP,sBAAuB,WACvB,sBAAuB,WACvB,OAAQ,OACR,OAAQ,MAAA,CAEZ,EACA,MAAO,CACL,WAAY,OACZ,QAAS,CACP,YAAa,KACb,SAAU,MACV,OAAQ,QACR,QAAS,SACT,kBAAmB,UACnB,oBAAqB,UACrB,kBAAmB,YACnB,SAAU,SACV,SAAU,SACV,eAAgB,YAChB,eAAgB,cAChB,gBAAiB,UACjB,cAAe,SAAA,CAEnB,EACA,OAAQ,CACN,WAAY,KACZ,QAAS,CACP,aAAc,SAAA,CAElB,EACA,WAAY,CACV,WAAY,GACZ,QAAS,CACP,MAAO,KACP,MAAO,OACP,YAAa,KAAA,CACf,CAEJ,EC/FaC,GAAwB,CACnC,WAAY,OACZ,QAAS,CAAA,CACX,ECJarF,GAAa,CAACsF,EAA0B,MAAgB,CACnE,KAAMA,EAAO,MAAQ,EACrB,UAAWA,EAAO,WAAa,EAC/B,QAASA,EAAO,SAAW,GAC3B,SAAUA,EAAO,UAAY,EAC7B,SAAUA,EAAO,UAAY,EAC/B,GCNaC,GAAgB,CAC3B,KAAM,SACN,SAAU,CAAC,OAAQ,YAAa,UAAW,WAAY,UAAU,EACjE,WAAY,CACV,KAAM,CAAE,KAAM,UAAW,QAAS,CAAE,EACpC,UAAW,CAAE,KAAM,UAAW,QAAS,CAAE,EACzC,QAAS,CAAE,KAAM,QAAS,EAC1B,SAAU,CAAE,KAAM,SAAU,EAC5B,SAAU,CAAE,KAAM,SAAU,CAAA,CAEhC,6MCXA,OAAO,eAAcC,EAAU,aAAc,CAAE,MAAO,GAAM,EAC5DA,EAAA,WAAqBA,EAA2B,iBAAAA,EAAA,YAAsBA,EAAwB,cAAAA,EAAA,UAAoBA,YAAoBA,EAAqB,WAAAA,EAAA,IAAcA,EAAY,EAAAA,EAAA,IAAcA,EAAgB,MAAAA,EAAA,KAAeA,EAAqB,WAAAA,EAAA,YAAsB,OAE7Q,MAAMC,CAAY,CAClB,CACAD,EAAA,YAAsBC,EACtBD,EAAA,WAAqB,wBACrB,MAAME,UAAaD,CAAY,CAC3B,YAAYE,EAAG,CAEX,GADA,MAAO,EACH,CAACH,EAAQ,WAAW,KAAKG,CAAC,EAC1B,MAAM,IAAI,MAAM,0CAA0C,EAC9D,KAAK,IAAMA,CACnB,CACI,UAAW,CACP,OAAO,KAAK,GACpB,CACI,UAAW,CACP,MAAO,EACf,CACI,IAAI,OAAQ,CACR,MAAO,CAAE,CAAC,KAAK,GAAG,EAAG,CAAG,CAChC,CACA,CACAH,EAAA,KAAeE,EACf,MAAME,UAAcH,CAAY,CAC5B,YAAY3J,EAAM,CACd,MAAO,EACP,KAAK,OAAS,OAAOA,GAAS,SAAW,CAACA,CAAI,EAAIA,CAC1D,CACI,UAAW,CACP,OAAO,KAAK,GACpB,CACI,UAAW,CACP,GAAI,KAAK,OAAO,OAAS,EACrB,MAAO,GACX,MAAM4E,EAAO,KAAK,OAAO,CAAC,EAC1B,OAAOA,IAAS,IAAMA,IAAS,IACvC,CACI,IAAI,KAAM,CACN,IAAIH,EACJ,OAASA,EAAK,KAAK,QAAU,MAAQA,IAAO,OAASA,EAAM,KAAK,KAAO,KAAK,OAAO,OAAO,CAACoF,EAAGE,IAAM,GAAGF,CAAC,GAAGE,CAAC,GAAI,EAAE,CAC1H,CACI,IAAI,OAAQ,CACR,IAAItF,EACJ,OAASA,EAAK,KAAK,UAAY,MAAQA,IAAO,OAASA,EAAM,KAAK,OAAS,KAAK,OAAO,OAAO,CAACuF,EAAOD,KAC9FA,aAAaH,IACbI,EAAMD,EAAE,GAAG,GAAKC,EAAMD,EAAE,GAAG,GAAK,GAAK,GAClCC,GACR,CAAE,CAAA,CACb,CACA,CACAN,EAAA,MAAgBI,EAChBJ,EAAA,IAAc,IAAII,EAAM,EAAE,EAC1B,SAASG,EAAEC,KAASC,EAAM,CACtB,MAAMnK,EAAO,CAACkK,EAAK,CAAC,CAAC,EACrB,IAAIE,EAAI,EACR,KAAOA,EAAID,EAAK,QACZE,EAAWrK,EAAMmK,EAAKC,CAAC,CAAC,EACxBpK,EAAK,KAAKkK,EAAK,EAAEE,CAAC,CAAC,EAEvB,OAAO,IAAIN,EAAM9J,CAAI,CACzB,CACA0J,EAAA,EAAYO,EACZ,MAAMK,EAAO,IAAIR,EAAM,GAAG,EAC1B,SAASS,EAAIL,KAASC,EAAM,CACxB,MAAMK,EAAO,CAACC,EAAcP,EAAK,CAAC,CAAC,CAAC,EACpC,IAAIE,EAAI,EACR,KAAOA,EAAID,EAAK,QACZK,EAAK,KAAKF,CAAI,EACdD,EAAWG,EAAML,EAAKC,CAAC,CAAC,EACxBI,EAAK,KAAKF,EAAMG,EAAcP,EAAK,EAAEE,CAAC,CAAC,CAAC,EAE5C,OAAAM,EAASF,CAAI,EACN,IAAIV,EAAMU,CAAI,CACzB,CACAd,EAAA,IAAca,EACd,SAASF,EAAWrK,EAAM2K,EAAK,CACvBA,aAAeb,EACf9J,EAAK,KAAK,GAAG2K,EAAI,MAAM,EAClBA,aAAef,EACpB5J,EAAK,KAAK2K,CAAG,EAEb3K,EAAK,KAAK4K,EAAYD,CAAG,CAAC,CAClC,CACAjB,EAAA,WAAqBW,EACrB,SAASK,EAASF,EAAM,CACpB,IAAIJ,EAAI,EACR,KAAOA,EAAII,EAAK,OAAS,GAAG,CACxB,GAAIA,EAAKJ,CAAC,IAAME,EAAM,CAClB,MAAMO,EAAMC,EAAeN,EAAKJ,EAAI,CAAC,EAAGI,EAAKJ,EAAI,CAAC,CAAC,EACnD,GAAIS,IAAQ,OAAW,CACnBL,EAAK,OAAOJ,EAAI,EAAG,EAAGS,CAAG,EACzB,QAChB,CACYL,EAAKJ,GAAG,EAAI,GACxB,CACQA,GACR,CACA,CACA,SAASU,EAAe,EAAGC,EAAG,CAC1B,GAAIA,IAAM,KACN,OAAO,EACX,GAAI,IAAM,KACN,OAAOA,EACX,GAAI,OAAO,GAAK,SACZ,OAAIA,aAAanB,GAAQ,EAAE,EAAE,OAAS,CAAC,IAAM,IACzC,OACA,OAAOmB,GAAK,SACL,GAAG,EAAE,MAAM,EAAG,EAAE,CAAC,GAAGA,CAAC,IAC5BA,EAAE,CAAC,IAAM,IACF,EAAE,MAAM,EAAG,EAAE,EAAIA,EAAE,MAAM,CAAC,EACrC,OAEJ,GAAI,OAAOA,GAAK,UAAYA,EAAE,CAAC,IAAM,KAAO,EAAE,aAAanB,GACvD,MAAO,IAAI,CAAC,GAAGmB,EAAE,MAAM,CAAC,CAAC,EAEjC,CACA,SAASC,EAAUC,EAAIC,EAAI,CACvB,OAAOA,EAAG,SAAQ,EAAKD,EAAKA,EAAG,SAAQ,EAAKC,EAAKX,IAAOU,CAAE,GAAGC,CAAE,EACnE,CACAxB,EAAA,UAAoBsB,EAEpB,SAASJ,EAAYO,EAAG,CACpB,OAAO,OAAOA,GAAK,UAAY,OAAOA,GAAK,WAAaA,IAAM,KACxDA,EACAV,EAAc,MAAM,QAAQU,CAAC,EAAIA,EAAE,KAAK,GAAG,EAAIA,CAAC,CAC1D,CACA,SAASC,EAAUD,EAAG,CAClB,OAAO,IAAIrB,EAAMW,EAAcU,CAAC,CAAC,CACrC,CACAzB,EAAA,UAAoB0B,EACpB,SAASX,EAAcU,EAAG,CACtB,OAAO,KAAK,UAAUA,CAAC,EAClB,QAAQ,UAAW,SAAS,EAC5B,QAAQ,UAAW,SAAS,CACrC,CACAzB,EAAA,cAAwBe,EACxB,SAASY,EAAYzT,EAAK,CACtB,OAAO,OAAOA,GAAO,UAAY8R,EAAQ,WAAW,KAAK9R,CAAG,EAAI,IAAIkS,EAAM,IAAIlS,CAAG,EAAE,EAAIqS,KAAMrS,CAAG,GACpG,CACA8R,EAAA,YAAsB2B,EAEtB,SAASC,EAAiB1T,EAAK,CAC3B,GAAI,OAAOA,GAAO,UAAY8R,EAAQ,WAAW,KAAK9R,CAAG,EACrD,OAAO,IAAIkS,EAAM,GAAGlS,CAAG,EAAE,EAE7B,MAAM,IAAI,MAAM,iCAAiCA,CAAG,iCAAiC,CACzF,CACA8R,EAAA,iBAA2B4B,EAC3B,SAASC,EAAWC,EAAI,CACpB,OAAO,IAAI1B,EAAM0B,EAAG,UAAU,CAClC,CACA9B,EAAA,WAAqB6B,mECzJrB,OAAO,eAAc7B,EAAU,aAAc,CAAE,MAAO,GAAM,EAC5DA,EAAA,WAAqBA,EAAyB,eAAAA,EAAA,MAAgBA,EAAmB,SAAAA,EAAA,eAAyB,OAC1G,MAAM+B,EAASC,GAAiB,EAChC,MAAMC,UAAmB,KAAM,CAC3B,YAAYpT,EAAM,CACd,MAAM,uBAAuBA,CAAI,cAAc,EAC/C,KAAK,MAAQA,EAAK,KAC1B,CACA,CACA,IAAIqT,GACH,SAAUA,EAAgB,CACvBA,EAAeA,EAAe,QAAa,CAAC,EAAI,UAChDA,EAAeA,EAAe,UAAe,CAAC,EAAI,WACrD,GAAEA,IAAmBlC,EAAA,eAAyBkC,EAAiB,CAAE,EAAC,EACnElC,EAAmB,SAAA,CACf,MAAO,IAAI+B,EAAO,KAAK,OAAO,EAC9B,IAAK,IAAIA,EAAO,KAAK,KAAK,EAC1B,IAAK,IAAIA,EAAO,KAAK,KAAK,CAC7B,EACD,MAAMI,CAAM,CACR,YAAY,CAAE,SAAAC,EAAU,OAAAC,CAAM,EAAK,CAAA,EAAI,CACnC,KAAK,OAAS,CAAE,EAChB,KAAK,UAAYD,EACjB,KAAK,QAAUC,CACvB,CACI,OAAOC,EAAc,CACjB,OAAOA,aAAwBP,EAAO,KAAOO,EAAe,KAAK,KAAKA,CAAY,CAC1F,CACI,KAAKC,EAAQ,CACT,OAAO,IAAIR,EAAO,KAAK,KAAK,SAASQ,CAAM,CAAC,CACpD,CACI,SAASA,EAAQ,CACb,MAAMC,EAAK,KAAK,OAAOD,CAAM,GAAK,KAAK,WAAWA,CAAM,EACxD,MAAO,GAAGA,CAAM,GAAGC,EAAG,OAAO,EACrC,CACI,WAAWD,EAAQ,CACf,IAAIxH,EAAI0H,EACR,GAAM,GAAAA,GAAM1H,EAAK,KAAK,WAAa,MAAQA,IAAO,OAAS,OAASA,EAAG,aAAe,MAAQ0H,IAAO,SAAkBA,EAAG,IAAIF,CAAM,GAAO,KAAK,WAAa,CAAC,KAAK,UAAU,IAAIA,CAAM,EACnL,MAAM,IAAI,MAAM,oBAAoBA,CAAM,gCAAgC,EAE9E,OAAQ,KAAK,OAAOA,CAAM,EAAI,CAAE,OAAAA,EAAQ,MAAO,CAAG,CAC1D,CACA,CACAvC,EAAA,MAAgBmC,EAChB,MAAMO,UAAuBX,EAAO,IAAK,CACrC,YAAYQ,EAAQI,EAAS,CACzB,MAAMA,CAAO,EACb,KAAK,OAASJ,CACtB,CACI,SAASpU,EAAO,CAAE,SAAAyU,EAAU,UAAAC,CAAS,EAAI,CACrC,KAAK,MAAQ1U,EACb,KAAK,aAAgB4T,EAAO,MAAO,IAAIA,EAAO,KAAKa,CAAQ,CAAC,IAAIC,CAAS,GACjF,CACA,CACA7C,EAAA,eAAyB0C,EACzB,MAAMI,KAAWf,EAAO,OACxB,MAAMgB,UAAmBZ,CAAM,CAC3B,YAAYa,EAAM,CACd,MAAMA,CAAI,EACV,KAAK,QAAU,CAAE,EACjB,KAAK,OAASA,EAAK,MACnB,KAAK,KAAO,CAAE,GAAGA,EAAM,GAAIA,EAAK,MAAQF,EAAOf,EAAO,GAAK,CACnE,CACI,KAAM,CACF,OAAO,KAAK,MACpB,CACI,KAAKQ,EAAQ,CACT,OAAO,IAAIG,EAAeH,EAAQ,KAAK,SAASA,CAAM,CAAC,CAC/D,CACI,MAAMD,EAAcnU,EAAO,CACvB,IAAI4M,EACJ,GAAI5M,EAAM,MAAQ,OACd,MAAM,IAAI,MAAM,sCAAsC,EAC1D,MAAMU,EAAO,KAAK,OAAOyT,CAAY,EAC/B,CAAE,OAAAC,CAAM,EAAK1T,EACboU,GAAYlI,EAAK5M,EAAM,OAAS,MAAQ4M,IAAO,OAASA,EAAK5M,EAAM,IACzE,IAAI+U,EAAK,KAAK,QAAQX,CAAM,EAC5B,GAAIW,EAAI,CACJ,MAAMC,EAAQD,EAAG,IAAID,CAAQ,EAC7B,GAAIE,EACA,OAAOA,CACvB,MAEYD,EAAK,KAAK,QAAQX,CAAM,EAAI,IAAI,IAEpCW,EAAG,IAAID,EAAUpU,CAAI,EACrB,MAAM,EAAI,KAAK,OAAO0T,CAAM,IAAM,KAAK,OAAOA,CAAM,EAAI,IAClDM,EAAY,EAAE,OACpB,SAAEA,CAAS,EAAI1U,EAAM,IACrBU,EAAK,SAASV,EAAO,CAAE,SAAUoU,EAAQ,UAAAM,EAAW,EAC7ChU,CACf,CACI,SAAS0T,EAAQa,EAAU,CACvB,MAAMF,EAAK,KAAK,QAAQX,CAAM,EAC9B,GAAKW,EAEL,OAAOA,EAAG,IAAIE,CAAQ,CAC9B,CACI,UAAUC,EAAWC,EAAS,KAAK,QAAS,CACxC,OAAO,KAAK,cAAcA,EAASzU,GAAS,CACxC,GAAIA,EAAK,YAAc,OACnB,MAAM,IAAI,MAAM,kBAAkBA,CAAI,gBAAgB,EAC1D,SAAWkT,EAAO,KAAMsB,CAAS,GAAGxU,EAAK,SAAS,EAC9D,CAAS,CACT,CACI,UAAUyU,EAAS,KAAK,QAASC,EAAYC,EAAS,CAClD,OAAO,KAAK,cAAcF,EAASzU,GAAS,CACxC,GAAIA,EAAK,QAAU,OACf,MAAM,IAAI,MAAM,kBAAkBA,CAAI,gBAAgB,EAC1D,OAAOA,EAAK,MAAM,IAC9B,EAAW0U,EAAYC,CAAO,CAC9B,CACI,cAAcF,EAAQG,EAAWF,EAAa,CAAA,EAAIC,EAAS,CACvD,IAAIlN,EAAOyL,EAAO,IAClB,UAAWQ,KAAUe,EAAQ,CACzB,MAAMJ,EAAKI,EAAOf,CAAM,EACxB,GAAI,CAACW,EACD,SACJ,MAAMQ,EAAWH,EAAWhB,CAAM,EAAIgB,EAAWhB,CAAM,GAAK,IAAI,IAChEW,EAAG,QAASrU,GAAS,CACjB,GAAI6U,EAAQ,IAAI7U,CAAI,EAChB,OACJ6U,EAAQ,IAAI7U,EAAMqT,EAAe,OAAO,EACxC,IAAI7B,EAAIoD,EAAU5U,CAAI,EACtB,GAAIwR,EAAG,CACH,MAAMsD,EAAM,KAAK,KAAK,IAAM3D,EAAQ,SAAS,IAAMA,EAAQ,SAAS,MACpE1J,KAAWyL,EAAO,KAAMzL,CAAI,GAAGqN,CAAG,IAAI9U,CAAI,MAAMwR,CAAC,IAAI,KAAK,KAAK,EAAE,EACrF,SAC0BA,EAAImD,GAAY,KAA6B,OAASA,EAAQ3U,CAAI,EACxEyH,KAAWyL,EAAO,KAAMzL,CAAI,GAAG+J,CAAC,GAAG,KAAK,KAAK,EAAE,OAG/C,OAAM,IAAI4B,EAAWpT,CAAI,EAE7B6U,EAAQ,IAAI7U,EAAMqT,EAAe,SAAS,CAC1D,CAAa,CACb,CACQ,OAAO5L,CACf,CACA,CACA0J,EAAA,WAAqB+C,4DC5IrB,OAAO,eAAc/C,EAAU,aAAc,CAAE,MAAO,GAAM,EAC5DA,EAAA,GAAaA,MAAcA,EAAc,IAAAA,EAAA,QAAkBA,EAAoB,UAAAA,EAAA,SAAmBA,iBAAyBA,EAAqB,WAAAA,EAAA,MAAgBA,EAAe,KAAAA,EAAA,WAAqBA,YAAoBA,EAAsB,YAAAA,EAAA,IAAcA,YAAoBA,EAAc,IAAAA,EAAA,EAAY,OAC1S,MAAM+B,EAASC,GAAiB,EAC1B4B,EAAUC,GAAkB,EAClC,IAAIC,EAAS9B,GAAiB,EAC9B,OAAO,eAAehC,EAAS,IAAK,CAAE,WAAY,GAAM,IAAK,UAAY,CAAE,OAAO8D,EAAO,CAAI,CAAA,CAAE,EAC/F,OAAO,eAAe9D,EAAS,MAAO,CAAE,WAAY,GAAM,IAAK,UAAY,CAAE,OAAO8D,EAAO,GAAM,CAAA,CAAE,EACnG,OAAO,eAAe9D,EAAS,YAAa,CAAE,WAAY,GAAM,IAAK,UAAY,CAAE,OAAO8D,EAAO,SAAY,CAAA,CAAE,EAC/G,OAAO,eAAe9D,EAAS,MAAO,CAAE,WAAY,GAAM,IAAK,UAAY,CAAE,OAAO8D,EAAO,GAAM,CAAA,CAAE,EACnG,OAAO,eAAe9D,EAAS,cAAe,CAAE,WAAY,GAAM,IAAK,UAAY,CAAE,OAAO8D,EAAO,WAAc,CAAA,CAAE,EACnH,OAAO,eAAe9D,EAAS,YAAa,CAAE,WAAY,GAAM,IAAK,UAAY,CAAE,OAAO8D,EAAO,SAAY,CAAA,CAAE,EAC/G,OAAO,eAAe9D,EAAS,aAAc,CAAE,WAAY,GAAM,IAAK,UAAY,CAAE,OAAO8D,EAAO,UAAa,CAAA,CAAE,EACjH,OAAO,eAAe9D,EAAS,OAAQ,CAAE,WAAY,GAAM,IAAK,UAAY,CAAE,OAAO8D,EAAO,IAAO,CAAA,CAAE,EACrG,IAAIC,EAAUF,GAAkB,EAChC,OAAO,eAAe7D,EAAS,QAAS,CAAE,WAAY,GAAM,IAAK,UAAY,CAAE,OAAO+D,EAAQ,KAAQ,CAAA,CAAE,EACxG,OAAO,eAAe/D,EAAS,aAAc,CAAE,WAAY,GAAM,IAAK,UAAY,CAAE,OAAO+D,EAAQ,UAAa,CAAA,CAAE,EAClH,OAAO,eAAe/D,EAAS,iBAAkB,CAAE,WAAY,GAAM,IAAK,UAAY,CAAE,OAAO+D,EAAQ,cAAiB,CAAA,CAAE,EAC1H,OAAO,eAAe/D,EAAS,WAAY,CAAE,WAAY,GAAM,IAAK,UAAY,CAAE,OAAO+D,EAAQ,QAAW,CAAA,CAAE,EAC9G/D,EAAoB,UAAA,CAChB,GAAI,IAAI+B,EAAO,MAAM,GAAG,EACxB,IAAK,IAAIA,EAAO,MAAM,IAAI,EAC1B,GAAI,IAAIA,EAAO,MAAM,GAAG,EACxB,IAAK,IAAIA,EAAO,MAAM,IAAI,EAC1B,GAAI,IAAIA,EAAO,MAAM,KAAK,EAC1B,IAAK,IAAIA,EAAO,MAAM,KAAK,EAC3B,IAAK,IAAIA,EAAO,MAAM,GAAG,EACzB,GAAI,IAAIA,EAAO,MAAM,IAAI,EACzB,IAAK,IAAIA,EAAO,MAAM,IAAI,EAC1B,IAAK,IAAIA,EAAO,MAAM,GAAG,CAC5B,EACD,MAAMiC,CAAK,CACP,eAAgB,CACZ,OAAO,IACf,CACI,cAAcC,EAAQC,EAAY,CAC9B,OAAO,IACf,CACA,CACA,MAAMC,UAAYH,CAAK,CACnB,YAAYI,EAASvV,EAAMwV,EAAK,CAC5B,MAAO,EACP,KAAK,QAAUD,EACf,KAAK,KAAOvV,EACZ,KAAK,IAAMwV,CACnB,CACI,OAAO,CAAE,IAAAC,EAAK,GAAAC,GAAM,CAChB,MAAMH,EAAUE,EAAMV,EAAQ,SAAS,IAAM,KAAK,QAC5CS,EAAM,KAAK,MAAQ,OAAY,GAAK,MAAM,KAAK,GAAG,GACxD,MAAO,GAAGD,CAAO,IAAI,KAAK,IAAI,GAAGC,CAAG,IAAME,CAClD,CACI,cAAcjE,EAAOkE,EAAW,CAC5B,GAAKlE,EAAM,KAAK,KAAK,GAAG,EAExB,OAAI,KAAK,MACL,KAAK,IAAMmE,EAAa,KAAK,IAAKnE,EAAOkE,CAAS,GAC/C,IACf,CACI,IAAI,OAAQ,CACR,OAAO,KAAK,eAAezC,EAAO,YAAc,KAAK,IAAI,MAAQ,CAAE,CAC3E,CACA,CACA,MAAM2C,UAAeV,CAAK,CACtB,YAAYW,EAAKN,EAAKO,EAAa,CAC/B,MAAO,EACP,KAAK,IAAMD,EACX,KAAK,IAAMN,EACX,KAAK,YAAcO,CAC3B,CACI,OAAO,CAAE,GAAAL,GAAM,CACX,MAAO,GAAG,KAAK,GAAG,MAAM,KAAK,GAAG,IAAMA,CAC9C,CACI,cAAcjE,EAAOkE,EAAW,CAC5B,GAAI,OAAK,eAAezC,EAAO,MAAQ,CAACzB,EAAM,KAAK,IAAI,GAAG,GAAK,CAAC,KAAK,aAErE,YAAK,IAAMmE,EAAa,KAAK,IAAKnE,EAAOkE,CAAS,EAC3C,IACf,CACI,IAAI,OAAQ,CACR,MAAMlE,EAAQ,KAAK,eAAeyB,EAAO,KAAO,CAAE,EAAG,CAAE,GAAG,KAAK,IAAI,KAAO,EAC1E,OAAO8C,EAAavE,EAAO,KAAK,GAAG,CAC3C,CACA,CACA,MAAMwE,UAAiBJ,CAAO,CAC1B,YAAYC,EAAKI,EAAIV,EAAKO,EAAa,CACnC,MAAMD,EAAKN,EAAKO,CAAW,EAC3B,KAAK,GAAKG,CAClB,CACI,OAAO,CAAE,GAAAR,GAAM,CACX,MAAO,GAAG,KAAK,GAAG,IAAI,KAAK,EAAE,KAAK,KAAK,GAAG,IAAMA,CACxD,CACA,CACA,MAAMS,UAAchB,CAAK,CACrB,YAAYnP,EAAO,CACf,MAAO,EACP,KAAK,MAAQA,EACb,KAAK,MAAQ,CAAE,CACvB,CACI,OAAO,CAAE,GAAA0P,GAAM,CACX,MAAO,GAAG,KAAK,KAAK,IAAMA,CAClC,CACA,CACA,MAAMU,UAAcjB,CAAK,CACrB,YAAYnP,EAAO,CACf,MAAO,EACP,KAAK,MAAQA,EACb,KAAK,MAAQ,CAAE,CACvB,CACI,OAAO,CAAE,GAAA0P,GAAM,CAEX,MAAO,QADO,KAAK,MAAQ,IAAI,KAAK,KAAK,GAAK,EAC1B,IAAMA,CAClC,CACA,CACA,MAAMW,UAAclB,CAAK,CACrB,YAAYmB,EAAO,CACf,MAAO,EACP,KAAK,MAAQA,CACrB,CACI,OAAO,CAAE,GAAAZ,GAAM,CACX,MAAO,SAAS,KAAK,KAAK,IAAMA,CACxC,CACI,IAAI,OAAQ,CACR,OAAO,KAAK,MAAM,KAC1B,CACA,CACA,MAAMa,UAAgBpB,CAAK,CACvB,YAAY1N,EAAM,CACd,MAAO,EACP,KAAK,KAAOA,CACpB,CACI,OAAO,CAAE,GAAAiO,GAAM,CACX,MAAO,GAAG,KAAK,IAAI,IAAMA,CACjC,CACI,eAAgB,CACZ,MAAO,GAAG,KAAK,IAAI,GAAK,KAAO,MACvC,CACI,cAAcjE,EAAOkE,EAAW,CAC5B,YAAK,KAAOC,EAAa,KAAK,KAAMnE,EAAOkE,CAAS,EAC7C,IACf,CACI,IAAI,OAAQ,CACR,OAAO,KAAK,gBAAgBzC,EAAO,YAAc,KAAK,KAAK,MAAQ,CAAE,CAC7E,CACA,CACA,MAAMsD,UAAmBrB,CAAK,CAC1B,YAAYsB,EAAQ,GAAI,CACpB,MAAO,EACP,KAAK,MAAQA,CACrB,CACI,OAAOtC,EAAM,CACT,OAAO,KAAK,MAAM,OAAO,CAAC1M,EAAMiP,IAAMjP,EAAOiP,EAAE,OAAOvC,CAAI,EAAG,EAAE,CACvE,CACI,eAAgB,CACZ,KAAM,CAAE,MAAAsC,CAAK,EAAK,KAClB,IAAI5E,EAAI4E,EAAM,OACd,KAAO5E,KAAK,CACR,MAAM6E,EAAID,EAAM5E,CAAC,EAAE,cAAe,EAC9B,MAAM,QAAQ6E,CAAC,EACfD,EAAM,OAAO5E,EAAG,EAAG,GAAG6E,CAAC,EAClBA,EACLD,EAAM5E,CAAC,EAAI6E,EAEXD,EAAM,OAAO5E,EAAG,CAAC,CACjC,CACQ,OAAO4E,EAAM,OAAS,EAAI,KAAO,MACzC,CACI,cAAchF,EAAOkE,EAAW,CAC5B,KAAM,CAAE,MAAAc,CAAK,EAAK,KAClB,IAAI5E,EAAI4E,EAAM,OACd,KAAO5E,KAAK,CAER,MAAM6E,EAAID,EAAM5E,CAAC,EACb6E,EAAE,cAAcjF,EAAOkE,CAAS,IAEpCgB,GAAclF,EAAOiF,EAAE,KAAK,EAC5BD,EAAM,OAAO5E,EAAG,CAAC,EAC7B,CACQ,OAAO4E,EAAM,OAAS,EAAI,KAAO,MACzC,CACI,IAAI,OAAQ,CACR,OAAO,KAAK,MAAM,OAAO,CAAChF,EAAOiF,IAAME,EAASnF,EAAOiF,EAAE,KAAK,EAAG,CAAA,CAAE,CAC3E,CACA,CACA,MAAMG,UAAkBL,CAAW,CAC/B,OAAOrC,EAAM,CACT,MAAO,IAAMA,EAAK,GAAK,MAAM,OAAOA,CAAI,EAAI,IAAMA,EAAK,EAC/D,CACA,CACA,MAAM2C,UAAaN,CAAW,CAC9B,CACA,MAAMO,UAAaF,CAAU,CAC7B,CACAE,EAAK,KAAO,OACZ,MAAMC,UAAWH,CAAU,CACvB,YAAYI,EAAWR,EAAO,CAC1B,MAAMA,CAAK,EACX,KAAK,UAAYQ,CACzB,CACI,OAAO9C,EAAM,CACT,IAAI1M,EAAO,MAAM,KAAK,SAAS,IAAM,MAAM,OAAO0M,CAAI,EACtD,OAAI,KAAK,OACL1M,GAAQ,QAAU,KAAK,KAAK,OAAO0M,CAAI,GACpC1M,CACf,CACI,eAAgB,CACZ,MAAM,cAAe,EACrB,MAAMyP,EAAO,KAAK,UAClB,GAAIA,IAAS,GACT,OAAO,KAAK,MAChB,IAAIC,EAAI,KAAK,KACb,GAAIA,EAAG,CACH,MAAMC,EAAKD,EAAE,cAAe,EAC5BA,EAAI,KAAK,KAAO,MAAM,QAAQC,CAAE,EAAI,IAAIL,EAAKK,CAAE,EAAIA,CAC/D,CACQ,GAAID,EACA,OAAID,IAAS,GACFC,aAAaH,EAAKG,EAAIA,EAAE,MAC/B,KAAK,MAAM,OACJ,KACJ,IAAIH,EAAGK,GAAIH,CAAI,EAAGC,aAAaH,EAAK,CAACG,CAAC,EAAIA,EAAE,KAAK,EAE5D,GAAI,EAAAD,IAAS,IAAS,CAAC,KAAK,MAAM,QAElC,OAAO,IACf,CACI,cAAczF,EAAOkE,EAAW,CAC5B,IAAIzJ,EAEJ,GADA,KAAK,MAAQA,EAAK,KAAK,QAAU,MAAQA,IAAO,OAAS,OAASA,EAAG,cAAcuF,EAAOkE,CAAS,EAC/F,GAAE,MAAM,cAAclE,EAAOkE,CAAS,GAAK,KAAK,MAEpD,YAAK,UAAYC,EAAa,KAAK,UAAWnE,EAAOkE,CAAS,EACvD,IACf,CACI,IAAI,OAAQ,CACR,MAAMlE,EAAQ,MAAM,MACpB,OAAAuE,EAAavE,EAAO,KAAK,SAAS,EAC9B,KAAK,MACLmF,EAASnF,EAAO,KAAK,KAAK,KAAK,EAC5BA,CACf,CACA,CACAuF,EAAG,KAAO,KACV,MAAMM,UAAYT,CAAU,CAC5B,CACAS,EAAI,KAAO,MACX,MAAMC,UAAgBD,CAAI,CACtB,YAAYE,EAAW,CACnB,MAAO,EACP,KAAK,UAAYA,CACzB,CACI,OAAOrD,EAAM,CACT,MAAO,OAAO,KAAK,SAAS,IAAM,MAAM,OAAOA,CAAI,CAC3D,CACI,cAAc1C,EAAOkE,EAAW,CAC5B,GAAK,MAAM,cAAclE,EAAOkE,CAAS,EAEzC,YAAK,UAAYC,EAAa,KAAK,UAAWnE,EAAOkE,CAAS,EACvD,IACf,CACI,IAAI,OAAQ,CACR,OAAOiB,EAAS,MAAM,MAAO,KAAK,UAAU,KAAK,CACzD,CACA,CACA,MAAMa,UAAiBH,CAAI,CACvB,YAAY/B,EAASvV,EAAM0X,EAAMC,EAAI,CACjC,MAAO,EACP,KAAK,QAAUpC,EACf,KAAK,KAAOvV,EACZ,KAAK,KAAO0X,EACZ,KAAK,GAAKC,CAClB,CACI,OAAOxD,EAAM,CACT,MAAMoB,EAAUpB,EAAK,IAAMY,EAAQ,SAAS,IAAM,KAAK,QACjD,CAAE,KAAA/U,EAAM,KAAA0X,EAAM,GAAAC,CAAI,EAAG,KAC3B,MAAO,OAAOpC,CAAO,IAAIvV,CAAI,IAAI0X,CAAI,KAAK1X,CAAI,IAAI2X,CAAE,KAAK3X,CAAI,MAAQ,MAAM,OAAOmU,CAAI,CAC9F,CACI,IAAI,OAAQ,CACR,MAAM1C,EAAQuE,EAAa,MAAM,MAAO,KAAK,IAAI,EACjD,OAAOA,EAAavE,EAAO,KAAK,EAAE,CAC1C,CACA,CACA,MAAMmG,UAAgBN,CAAI,CACtB,YAAYO,EAAMtC,EAASvV,EAAM8X,EAAU,CACvC,MAAO,EACP,KAAK,KAAOD,EACZ,KAAK,QAAUtC,EACf,KAAK,KAAOvV,EACZ,KAAK,SAAW8X,CACxB,CACI,OAAO3D,EAAM,CACT,MAAO,OAAO,KAAK,OAAO,IAAI,KAAK,IAAI,IAAI,KAAK,IAAI,IAAI,KAAK,QAAQ,IAAM,MAAM,OAAOA,CAAI,CACpG,CACI,cAAc1C,EAAOkE,EAAW,CAC5B,GAAK,MAAM,cAAclE,EAAOkE,CAAS,EAEzC,YAAK,SAAWC,EAAa,KAAK,SAAUnE,EAAOkE,CAAS,EACrD,IACf,CACI,IAAI,OAAQ,CACR,OAAOiB,EAAS,MAAM,MAAO,KAAK,SAAS,KAAK,CACxD,CACA,CACA,MAAMmB,UAAalB,CAAU,CACzB,YAAY7W,EAAM4R,EAAMoG,EAAO,CAC3B,MAAO,EACP,KAAK,KAAOhY,EACZ,KAAK,KAAO4R,EACZ,KAAK,MAAQoG,CACrB,CACI,OAAO7D,EAAM,CAET,MAAO,GADQ,KAAK,MAAQ,SAAW,EACvB,YAAY,KAAK,IAAI,IAAI,KAAK,IAAI,IAAM,MAAM,OAAOA,CAAI,CACjF,CACA,CACA4D,EAAK,KAAO,OACZ,MAAME,UAAezB,CAAW,CAC5B,OAAOrC,EAAM,CACT,MAAO,UAAY,MAAM,OAAOA,CAAI,CAC5C,CACA,CACA8D,EAAO,KAAO,SACd,MAAMC,UAAYrB,CAAU,CACxB,OAAO1C,EAAM,CACT,IAAI1M,EAAO,MAAQ,MAAM,OAAO0M,CAAI,EACpC,OAAI,KAAK,QACL1M,GAAQ,KAAK,MAAM,OAAO0M,CAAI,GAC9B,KAAK,UACL1M,GAAQ,KAAK,QAAQ,OAAO0M,CAAI,GAC7B1M,CACf,CACI,eAAgB,CACZ,IAAIyE,EAAI0H,EACR,aAAM,cAAe,GACpB1H,EAAK,KAAK,SAAW,MAAQA,IAAO,QAAkBA,EAAG,cAAe,GACxE0H,EAAK,KAAK,WAAa,MAAQA,IAAO,QAAkBA,EAAG,cAAe,EACpE,IACf,CACI,cAAcnC,EAAOkE,EAAW,CAC5B,IAAIzJ,EAAI0H,EACR,aAAM,cAAcnC,EAAOkE,CAAS,GACnCzJ,EAAK,KAAK,SAAW,MAAQA,IAAO,QAAkBA,EAAG,cAAcuF,EAAOkE,CAAS,GACvF/B,EAAK,KAAK,WAAa,MAAQA,IAAO,QAAkBA,EAAG,cAAcnC,EAAOkE,CAAS,EACnF,IACf,CACI,IAAI,OAAQ,CACR,MAAMlE,EAAQ,MAAM,MACpB,OAAI,KAAK,OACLmF,EAASnF,EAAO,KAAK,MAAM,KAAK,EAChC,KAAK,SACLmF,EAASnF,EAAO,KAAK,QAAQ,KAAK,EAC/BA,CACf,CACA,CACA,MAAM0G,UAActB,CAAU,CAC1B,YAAYP,EAAO,CACf,MAAO,EACP,KAAK,MAAQA,CACrB,CACI,OAAOnC,EAAM,CACT,MAAO,SAAS,KAAK,KAAK,IAAM,MAAM,OAAOA,CAAI,CACzD,CACA,CACAgE,EAAM,KAAO,QACb,MAAMC,UAAgBvB,CAAU,CAC5B,OAAO1C,EAAM,CACT,MAAO,UAAY,MAAM,OAAOA,CAAI,CAC5C,CACA,CACAiE,EAAQ,KAAO,UACf,MAAMC,CAAQ,CACV,YAAYC,EAAUnE,EAAO,GAAI,CAC7B,KAAK,QAAU,CAAE,EACjB,KAAK,aAAe,CAAE,EACtB,KAAK,WAAa,CAAE,EACpB,KAAK,KAAO,CAAE,GAAGA,EAAM,GAAIA,EAAK,MAAQ;AAAA,EAAO,EAAI,EACnD,KAAK,UAAYmE,EACjB,KAAK,OAAS,IAAIvD,EAAQ,MAAM,CAAE,OAAQuD,EAAU,EACpD,KAAK,OAAS,CAAC,IAAIxB,CAAM,CACjC,CACI,UAAW,CACP,OAAO,KAAK,MAAM,OAAO,KAAK,IAAI,CAC1C,CAEI,KAAKpD,EAAQ,CACT,OAAO,KAAK,OAAO,KAAKA,CAAM,CACtC,CAEI,UAAUA,EAAQ,CACd,OAAO,KAAK,UAAU,KAAKA,CAAM,CACzC,CAEI,WAAW6E,EAAcjZ,EAAO,CAC5B,MAAMU,EAAO,KAAK,UAAU,MAAMuY,EAAcjZ,CAAK,EAErD,OADW,KAAK,QAAQU,EAAK,MAAM,IAAM,KAAK,QAAQA,EAAK,MAAM,EAAI,IAAI,MACtE,IAAIA,CAAI,EACJA,CACf,CACI,cAAc0T,EAAQa,EAAU,CAC5B,OAAO,KAAK,UAAU,SAASb,EAAQa,CAAQ,CACvD,CAGI,UAAUC,EAAW,CACjB,OAAO,KAAK,UAAU,UAAUA,EAAW,KAAK,OAAO,CAC/D,CACI,WAAY,CACR,OAAO,KAAK,UAAU,UAAU,KAAK,OAAO,CACpD,CACI,KAAKe,EAAS9B,EAAc+B,EAAKgD,EAAU,CACvC,MAAMxY,EAAO,KAAK,OAAO,OAAOyT,CAAY,EAC5C,OAAI+B,IAAQ,QAAagD,IACrB,KAAK,WAAWxY,EAAK,GAAG,EAAIwV,GAChC,KAAK,UAAU,IAAIF,EAAIC,EAASvV,EAAMwV,CAAG,CAAC,EACnCxV,CACf,CAEI,MAAMyT,EAAc+B,EAAKiD,EAAW,CAChC,OAAO,KAAK,KAAK1D,EAAQ,SAAS,MAAOtB,EAAc+B,EAAKiD,CAAS,CAC7E,CAEI,IAAIhF,EAAc+B,EAAKiD,EAAW,CAC9B,OAAO,KAAK,KAAK1D,EAAQ,SAAS,IAAKtB,EAAc+B,EAAKiD,CAAS,CAC3E,CAEI,IAAIhF,EAAc+B,EAAKiD,EAAW,CAC9B,OAAO,KAAK,KAAK1D,EAAQ,SAAS,IAAKtB,EAAc+B,EAAKiD,CAAS,CAC3E,CAEI,OAAO3C,EAAKN,EAAKO,EAAa,CAC1B,OAAO,KAAK,UAAU,IAAIF,EAAOC,EAAKN,EAAKO,CAAW,CAAC,CAC/D,CAEI,IAAID,EAAKN,EAAK,CACV,OAAO,KAAK,UAAU,IAAIS,EAASH,EAAK3E,EAAQ,UAAU,IAAKqE,CAAG,CAAC,CAC3E,CAEI,KAAKhE,EAAG,CACJ,OAAI,OAAOA,GAAK,WACZA,EAAG,EACEA,IAAM0B,EAAO,KAClB,KAAK,UAAU,IAAIqD,EAAQ/E,CAAC,CAAC,EAC1B,IACf,CAEI,UAAUkH,EAAW,CACjB,MAAMjR,EAAO,CAAC,GAAG,EACjB,SAAW,CAACpI,EAAKC,CAAK,IAAKoZ,EACnBjR,EAAK,OAAS,GACdA,EAAK,KAAK,GAAG,EACjBA,EAAK,KAAKpI,CAAG,GACTA,IAAQC,GAAS,KAAK,KAAK,OAC3BmI,EAAK,KAAK,GAAG,KACTyL,EAAO,YAAYzL,EAAMnI,CAAK,GAG1C,OAAAmI,EAAK,KAAK,GAAG,EACN,IAAIyL,EAAO,MAAMzL,CAAI,CACpC,CAEI,GAAGwP,EAAW0B,EAAUC,EAAU,CAE9B,GADA,KAAK,WAAW,IAAI5B,EAAGC,CAAS,CAAC,EAC7B0B,GAAYC,EACZ,KAAK,KAAKD,CAAQ,EAAE,KAAM,EAAC,KAAKC,CAAQ,EAAE,MAAO,UAE5CD,EACL,KAAK,KAAKA,CAAQ,EAAE,MAAO,UAEtBC,EACL,MAAM,IAAI,MAAM,0CAA0C,EAE9D,OAAO,IACf,CAEI,OAAO3B,EAAW,CACd,OAAO,KAAK,UAAU,IAAID,EAAGC,CAAS,CAAC,CAC/C,CAEI,MAAO,CACH,OAAO,KAAK,UAAU,IAAIF,CAAM,CACxC,CAEI,OAAQ,CACJ,OAAO,KAAK,cAAcC,EAAID,CAAI,CAC1C,CACI,KAAK8B,EAAMC,EAAS,CAChB,YAAK,WAAWD,CAAI,EAChBC,GACA,KAAK,KAAKA,CAAO,EAAE,OAAQ,EACxB,IACf,CAEI,IAAItB,EAAWsB,EAAS,CACpB,OAAO,KAAK,KAAK,IAAIvB,EAAQC,CAAS,EAAGsB,CAAO,CACxD,CAEI,SAASrF,EAAciE,EAAMC,EAAImB,EAASvD,EAAU,KAAK,KAAK,IAAMR,EAAQ,SAAS,IAAMA,EAAQ,SAAS,IAAK,CAC7G,MAAM/U,EAAO,KAAK,OAAO,OAAOyT,CAAY,EAC5C,OAAO,KAAK,KAAK,IAAIgE,EAASlC,EAASvV,EAAM0X,EAAMC,CAAE,EAAG,IAAMmB,EAAQ9Y,CAAI,CAAC,CACnF,CAEI,MAAMyT,EAAcqE,EAAUgB,EAASvD,EAAUR,EAAQ,SAAS,MAAO,CACrE,MAAM/U,EAAO,KAAK,OAAO,OAAOyT,CAAY,EAC5C,GAAI,KAAK,KAAK,IAAK,CACf,MAAMsF,EAAMjB,aAAoB5E,EAAO,KAAO4E,EAAW,KAAK,IAAI,OAAQA,CAAQ,EAClF,OAAO,KAAK,SAAS,KAAM,KAAO5E,EAAO,KAAM6F,CAAG,UAAYlH,GAAM,CAChE,KAAK,IAAI7R,KAAUkT,EAAO,KAAM6F,CAAG,IAAIlH,CAAC,GAAG,EAC3CiH,EAAQ9Y,CAAI,CAC5B,CAAa,CACb,CACQ,OAAO,KAAK,KAAK,IAAI4X,EAAQ,KAAMrC,EAASvV,EAAM8X,CAAQ,EAAG,IAAMgB,EAAQ9Y,CAAI,CAAC,CACxF,CAGI,MAAMyT,EAAcuF,EAAKF,EAASvD,EAAU,KAAK,KAAK,IAAMR,EAAQ,SAAS,IAAMA,EAAQ,SAAS,MAAO,CACvG,GAAI,KAAK,KAAK,cACV,OAAO,KAAK,MAAMtB,KAAkBP,EAAO,iBAAkB8F,CAAG,IAAKF,CAAO,EAEhF,MAAM9Y,EAAO,KAAK,OAAO,OAAOyT,CAAY,EAC5C,OAAO,KAAK,KAAK,IAAImE,EAAQ,KAAMrC,EAASvV,EAAMgZ,CAAG,EAAG,IAAMF,EAAQ9Y,CAAI,CAAC,CACnF,CAEI,QAAS,CACL,OAAO,KAAK,cAAcsX,CAAG,CACrC,CAEI,MAAMtR,EAAO,CACT,OAAO,KAAK,UAAU,IAAImQ,EAAMnQ,CAAK,CAAC,CAC9C,CAEI,MAAMA,EAAO,CACT,OAAO,KAAK,UAAU,IAAIoQ,EAAMpQ,CAAK,CAAC,CAC9C,CAEI,OAAO1G,EAAO,CACV,MAAMuZ,EAAO,IAAIZ,EAGjB,GAFA,KAAK,WAAWY,CAAI,EACpB,KAAK,KAAKvZ,CAAK,EACXuZ,EAAK,MAAM,SAAW,EACtB,MAAM,IAAI,MAAM,wCAAwC,EAC5D,OAAO,KAAK,cAAcZ,CAAM,CACxC,CAEI,IAAIgB,EAASC,EAAWC,EAAa,CACjC,GAAI,CAACD,GAAa,CAACC,EACf,MAAM,IAAI,MAAM,8CAA8C,EAClE,MAAMN,EAAO,IAAIX,EAGjB,GAFA,KAAK,WAAWW,CAAI,EACpB,KAAK,KAAKI,CAAO,EACbC,EAAW,CACX,MAAM5C,EAAQ,KAAK,KAAK,GAAG,EAC3B,KAAK,UAAYuC,EAAK,MAAQ,IAAIV,EAAM7B,CAAK,EAC7C4C,EAAU5C,CAAK,CAC3B,CACQ,OAAI6C,IACA,KAAK,UAAYN,EAAK,QAAU,IAAIT,EACpC,KAAK,KAAKe,CAAW,GAElB,KAAK,cAAchB,EAAOC,CAAO,CAChD,CAEI,MAAM9B,EAAO,CACT,OAAO,KAAK,UAAU,IAAID,EAAMC,CAAK,CAAC,CAC9C,CAEI,MAAM8C,EAAMC,EAAW,CACnB,YAAK,aAAa,KAAK,KAAK,OAAO,MAAM,EACrCD,GACA,KAAK,KAAKA,CAAI,EAAE,SAASC,CAAS,EAC/B,IACf,CAEI,SAASA,EAAW,CAChB,MAAMC,EAAM,KAAK,aAAa,IAAK,EACnC,GAAIA,IAAQ,OACR,MAAM,IAAI,MAAM,sCAAsC,EAC1D,MAAMC,EAAU,KAAK,OAAO,OAASD,EACrC,GAAIC,EAAU,GAAMF,IAAc,QAAaE,IAAYF,EACvD,MAAM,IAAI,MAAM,mCAAmCE,CAAO,OAAOF,CAAS,WAAW,EAEzF,YAAK,OAAO,OAASC,EACd,IACf,CAEI,KAAKtZ,EAAM4R,EAAOsB,EAAO,IAAK8E,EAAOwB,EAAU,CAC3C,YAAK,WAAW,IAAIzB,EAAK/X,EAAM4R,EAAMoG,CAAK,CAAC,EACvCwB,GACA,KAAK,KAAKA,CAAQ,EAAE,QAAS,EAC1B,IACf,CAEI,SAAU,CACN,OAAO,KAAK,cAAczB,CAAI,CACtC,CACI,SAASrB,EAAI,EAAG,CACZ,KAAOA,KAAM,GACT,KAAK,MAAM,cAAe,EAC1B,KAAK,MAAM,cAAc,KAAK,MAAM,MAAO,KAAK,UAAU,CAEtE,CACI,UAAUmC,EAAM,CACZ,YAAK,UAAU,MAAM,KAAKA,CAAI,EACvB,IACf,CACI,WAAWA,EAAM,CACb,KAAK,UAAU,MAAM,KAAKA,CAAI,EAC9B,KAAK,OAAO,KAAKA,CAAI,CAC7B,CACI,cAAcY,EAAIC,EAAI,CAClB,MAAMhD,EAAI,KAAK,UACf,GAAIA,aAAa+C,GAAOC,GAAMhD,aAAagD,EACvC,YAAK,OAAO,IAAK,EACV,KAEX,MAAM,IAAI,MAAM,0BAA0BA,EAAK,GAAGD,EAAG,IAAI,IAAIC,EAAG,IAAI,GAAKD,EAAG,IAAI,GAAG,CAC3F,CACI,UAAUZ,EAAM,CACZ,MAAMnC,EAAI,KAAK,UACf,GAAI,EAAEA,aAAaM,GACf,MAAM,IAAI,MAAM,8BAA8B,EAElD,YAAK,UAAYN,EAAE,KAAOmC,EACnB,IACf,CACI,IAAI,OAAQ,CACR,OAAO,KAAK,OAAO,CAAC,CAC5B,CACI,IAAI,WAAY,CACZ,MAAMzB,EAAK,KAAK,OAChB,OAAOA,EAAGA,EAAG,OAAS,CAAC,CAC/B,CACI,IAAI,UAAUyB,EAAM,CAChB,MAAMzB,EAAK,KAAK,OAChBA,EAAGA,EAAG,OAAS,CAAC,EAAIyB,CAC5B,CACA,CACA1H,EAAA,QAAkBkH,EAClB,SAASzB,EAASnF,EAAOiG,EAAM,CAC3B,UAAWhB,KAAKgB,EACZjG,EAAMiF,CAAC,GAAKjF,EAAMiF,CAAC,GAAK,IAAMgB,EAAKhB,CAAC,GAAK,GAC7C,OAAOjF,CACX,CACA,SAASuE,EAAavE,EAAOiG,EAAM,CAC/B,OAAOA,aAAgBxE,EAAO,YAAc0D,EAASnF,EAAOiG,EAAK,KAAK,EAAIjG,CAC9E,CACA,SAASmE,EAAa3D,EAAMR,EAAOkE,EAAW,CAC1C,GAAI1D,aAAgBiB,EAAO,KACvB,OAAOyG,EAAY1H,CAAI,EAC3B,GAAI,CAAC2H,EAAY3H,CAAI,EACjB,OAAOA,EACX,OAAO,IAAIiB,EAAO,MAAMjB,EAAK,OAAO,OAAO,CAAC4H,EAAOrI,KAC3CA,aAAa0B,EAAO,OACpB1B,EAAImI,EAAYnI,CAAC,GACjBA,aAAa0B,EAAO,MACpB2G,EAAM,KAAK,GAAGrI,EAAE,MAAM,EAEtBqI,EAAM,KAAKrI,CAAC,EACTqI,GACR,CAAE,CAAA,CAAC,EACN,SAASF,EAAYjD,EAAG,CACpB,MAAMlF,EAAImE,EAAUe,EAAE,GAAG,EACzB,OAAIlF,IAAM,QAAaC,EAAMiF,EAAE,GAAG,IAAM,EAC7BA,GACX,OAAOjF,EAAMiF,EAAE,GAAG,EACXlF,EACf,CACI,SAASoI,EAAYzC,EAAG,CACpB,OAAQA,aAAajE,EAAO,OACxBiE,EAAE,OAAO,KAAM3F,GAAMA,aAAa0B,EAAO,MAAQzB,EAAMD,EAAE,GAAG,IAAM,GAAKmE,EAAUnE,EAAE,GAAG,IAAM,MAAS,CACjH,CACA,CACA,SAASmF,GAAclF,EAAOiG,EAAM,CAChC,UAAWhB,KAAKgB,EACZjG,EAAMiF,CAAC,GAAKjF,EAAMiF,CAAC,GAAK,IAAMgB,EAAKhB,CAAC,GAAK,EACjD,CACA,SAASW,GAAIzE,EAAG,CACZ,OAAO,OAAOA,GAAK,WAAa,OAAOA,GAAK,UAAYA,IAAM,KAAO,CAACA,KAAQM,EAAO,MAAO4G,EAAIlH,CAAC,CAAC,EACtG,CACAzB,EAAA,IAAckG,GACd,MAAM0C,GAAUC,EAAQ7I,EAAQ,UAAU,GAAG,EAE7C,SAAS8I,KAAOrI,EAAM,CAClB,OAAOA,EAAK,OAAOmI,EAAO,CAC9B,CACA5I,EAAA,IAAc8I,EACd,MAAMC,GAASF,EAAQ7I,EAAQ,UAAU,EAAE,EAE3C,SAASgJ,KAAMvI,EAAM,CACjB,OAAOA,EAAK,OAAOsI,EAAM,CAC7B,CACA/I,EAAA,GAAagJ,EACb,SAASH,EAAQ9D,EAAI,CACjB,MAAO,CAACtD,EAAGwH,IAAOxH,IAAMM,EAAO,IAAMkH,EAAIA,IAAMlH,EAAO,IAAMN,KAAQM,EAAO,KAAM4G,EAAIlH,CAAC,CAAC,IAAIsD,CAAE,IAAI4D,EAAIM,CAAC,CAAC,EAC3G,CACA,SAASN,EAAIlH,EAAG,CACZ,OAAOA,aAAaM,EAAO,KAAON,KAAQM,EAAO,MAAON,CAAC,GAC7D,wDCtrBA,OAAO,eAAeyH,EAAS,aAAc,CAAE,MAAO,GAAM,EAC5DA,EAAA,gBAA0BA,EAAoB,aAAGA,EAAY,KAAGA,UAAkBA,EAAA,aAAuBA,EAAA,qBAA+BA,EAAsB,eAAGA,EAAgB,SAAGA,sBAA8BA,EAAA,kBAA4BA,EAAA,eAAyBA,EAAwB,iBAAGA,EAAsB,eAAGA,uBAA+BA,EAAA,eAAyBA,EAAA,kBAA4BA,EAAyB,kBAAGA,EAAc,OAAG,OAC5b,MAAMC,EAAYnH,EAAoB,EAChCD,EAAS8B,GAAyB,EAExC,SAASuF,EAAOxB,EAAK,CACjB,MAAMyB,EAAO,CAAE,EACf,UAAWnO,KAAQ0M,EACfyB,EAAKnO,CAAI,EAAI,GACjB,OAAOmO,CACX,CACAH,EAAA,OAAiBE,EACjB,SAASE,EAAkBC,EAAIC,EAAQ,CACnC,OAAI,OAAOA,GAAU,UACVA,EACP,OAAO,KAAKA,CAAM,EAAE,SAAW,EACxB,IACXC,EAAkBF,EAAIC,CAAM,EACrB,CAACE,EAAeF,EAAQD,EAAG,KAAK,MAAM,GAAG,EACpD,CACAL,EAAA,kBAA4BI,EAC5B,SAASG,EAAkBF,EAAIC,EAASD,EAAG,OAAQ,CAC/C,KAAM,CAAE,KAAAvG,EAAM,KAAA2G,CAAI,EAAKJ,EAGvB,GAFI,CAACvG,EAAK,cAEN,OAAOwG,GAAW,UAClB,OACJ,MAAMI,EAAQD,EAAK,MAAM,SACzB,UAAWzb,KAAOsb,EACTI,EAAM1b,CAAG,GACV2b,EAAgBN,EAAI,qBAAqBrb,CAAG,GAAG,CAE3D,CACAgb,EAAA,kBAA4BO,EAC5B,SAASC,EAAeF,EAAQI,EAAO,CACnC,GAAI,OAAOJ,GAAU,UACjB,MAAO,CAACA,EACZ,UAAWtb,KAAOsb,EACd,GAAII,EAAM1b,CAAG,EACT,MAAO,GACf,MAAO,EACX,CACAgb,EAAA,eAAyBQ,EACzB,SAASI,EAAqBN,EAAQO,EAAO,CACzC,GAAI,OAAOP,GAAU,UACjB,MAAO,CAACA,EACZ,UAAWtb,KAAOsb,EACd,GAAItb,IAAQ,QAAU6b,EAAM,IAAI7b,CAAG,EAC/B,MAAO,GACf,MAAO,EACX,CACAgb,EAAA,qBAA+BY,EAC/B,SAASE,EAAe,CAAE,aAAAC,EAAc,WAAAC,CAAY,EAAEV,EAAQW,EAASC,EAAO,CAC1E,GAAI,CAACA,EAAO,CACR,GAAI,OAAOZ,GAAU,UAAY,OAAOA,GAAU,UAC9C,OAAOA,EACX,GAAI,OAAOA,GAAU,SACjB,SAAWL,EAAU,KAAMK,CAAM,EAC7C,CACI,SAAWL,EAAU,KAAMc,CAAY,GAAGC,CAAU,MAAOf,EAAU,aAAagB,CAAO,CAAC,EAC9F,CACAjB,EAAA,eAAyBc,EACzB,SAASK,EAAiBxJ,EAAK,CAC3B,OAAOyJ,EAAoB,mBAAmBzJ,CAAG,CAAC,CACtD,CACAqI,EAAA,iBAA2BmB,EAC3B,SAASE,EAAe1J,EAAK,CACzB,OAAO,mBAAmB2J,EAAkB3J,CAAG,CAAC,CACpD,CACAqI,EAAA,eAAyBqB,EACzB,SAASC,EAAkB3J,EAAK,CAC5B,OAAI,OAAOA,GAAO,SACP,GAAGA,CAAG,GACVA,EAAI,QAAQ,KAAM,IAAI,EAAE,QAAQ,MAAO,IAAI,CACtD,CACAqI,EAAA,kBAA4BsB,EAC5B,SAASF,EAAoBzJ,EAAK,CAC9B,OAAOA,EAAI,QAAQ,MAAO,GAAG,EAAE,QAAQ,MAAO,GAAG,CACrD,CACAqI,EAAA,oBAA8BoB,EAC9B,SAASG,EAASC,EAAIC,EAAG,CACrB,GAAI,MAAM,QAAQD,CAAE,EAChB,UAAWjJ,KAAKiJ,EACZC,EAAElJ,CAAC,OAGPkJ,EAAED,CAAE,CAEZ,CACAxB,EAAA,SAAmBuB,EACnB,SAASG,EAAmB,CAAE,WAAAC,EAAY,YAAAC,EAAa,YAAAC,EAAa,aAAAC,CAAY,EAAK,CACjF,MAAO,CAACC,EAAK1E,EAAMC,EAAI0E,IAAW,CAC9B,MAAM/J,EAAMqF,IAAO,OACbD,EACAC,aAAc2C,EAAU,MACnB5C,aAAgB4C,EAAU,KAAO0B,EAAWI,EAAK1E,EAAMC,CAAE,EAAIsE,EAAYG,EAAK1E,EAAMC,CAAE,EAAGA,GAC1FD,aAAgB4C,EAAU,MACrB2B,EAAYG,EAAKzE,EAAID,CAAI,EAAGA,GAC7BwE,EAAYxE,EAAMC,CAAE,EAClC,OAAO0E,IAAW/B,EAAU,MAAQ,EAAEhI,aAAegI,EAAU,MAAQ6B,EAAaC,EAAK9J,CAAG,EAAIA,CACnG,CACL,CACA+H,EAAA,eAAyB,CACrB,MAAO0B,EAAmB,CACtB,WAAY,CAACK,EAAK1E,EAAMC,IAAOyE,EAAI,MAAO9B,EAAU,KAAM3C,CAAE,gBAAgBD,CAAI,iBAAkB,IAAM,CACpG0E,EAAI,MAAO9B,EAAU,KAAM5C,CAAI,YAAa,IAAM0E,EAAI,OAAOzE,EAAI,EAAI,EAAG,IAAMyE,EAAI,OAAOzE,KAAQ2C,EAAU,KAAM3C,CAAE,QAAQ,EAAE,QAAS2C,EAAU,mBAAoB3C,CAAE,KAAKD,CAAI,GAAG,CAAC,CAC/L,CAAS,EACD,YAAa,CAAC0E,EAAK1E,EAAMC,IAAOyE,EAAI,MAAO9B,EAAU,KAAM3C,CAAE,YAAa,IAAM,CACxED,IAAS,GACT0E,EAAI,OAAOzE,EAAI,EAAI,GAGnByE,EAAI,OAAOzE,KAAQ2C,EAAU,KAAM3C,CAAE,QAAQ,EAC7C2E,EAAaF,EAAKzE,EAAID,CAAI,EAE1C,CAAS,EACD,YAAa,CAACA,EAAMC,IAAQD,IAAS,GAAO,GAAO,CAAE,GAAGA,EAAM,GAAGC,GACjE,aAAc4E,CACtB,CAAK,EACD,MAAOR,EAAmB,CACtB,WAAY,CAACK,EAAK1E,EAAMC,IAAOyE,EAAI,MAAO9B,EAAU,KAAM3C,CAAE,gBAAgBD,CAAI,iBAAkB,IAAM0E,EAAI,OAAOzE,KAAQ2C,EAAU,KAAM5C,CAAI,sBAAsBC,CAAE,MAAMD,CAAI,MAAMC,CAAE,MAAMD,CAAI,EAAE,CAAC,EACtM,YAAa,CAAC0E,EAAK1E,EAAMC,IAAOyE,EAAI,MAAO9B,EAAU,KAAM3C,CAAE,YAAa,IAAMyE,EAAI,OAAOzE,EAAID,IAAS,GAAO,MAAW4C,EAAU,KAAM3C,CAAE,MAAMD,CAAI,MAAMC,CAAE,MAAMD,CAAI,EAAE,CAAC,EAC3K,YAAa,CAACA,EAAMC,IAAQD,IAAS,GAAO,GAAO,KAAK,IAAIA,EAAMC,CAAE,EACpE,aAAc,CAACyE,EAAKvC,IAAUuC,EAAI,IAAI,QAASvC,CAAK,CAC5D,CAAK,CACJ,EACD,SAAS0C,EAAqBH,EAAKI,EAAI,CACnC,GAAIA,IAAO,GACP,OAAOJ,EAAI,IAAI,QAAS,EAAI,EAChC,MAAMK,EAAQL,EAAI,IAAI,WAAa9B,EAAU,MAAO,EACpD,OAAIkC,IAAO,QACPF,EAAaF,EAAKK,EAAOD,CAAE,EACxBC,CACX,CACApC,EAAA,qBAA+BkC,EAC/B,SAASD,EAAaF,EAAKK,EAAOD,EAAI,CAClC,OAAO,KAAKA,CAAE,EAAE,QAASE,GAAMN,EAAI,UAAW9B,EAAU,KAAMmC,CAAK,MAAOnC,EAAU,aAAaoC,CAAC,CAAC,GAAI,EAAI,CAAC,CAChH,CACArC,EAAA,aAAuBiC,EACvB,MAAMK,EAAW,CAAE,EACnB,SAASC,EAAQR,EAAKN,EAAG,CACrB,OAAOM,EAAI,WAAW,OAAQ,CAC1B,IAAKN,EACL,KAAMa,EAASb,EAAE,IAAI,IAAMa,EAASb,EAAE,IAAI,EAAI,IAAI5I,EAAO,MAAM4I,EAAE,IAAI,EAC7E,CAAK,CACL,CACAzB,EAAA,QAAkBuC,EAClB,IAAIC,GACH,SAAUA,EAAM,CACbA,EAAKA,EAAK,IAAS,CAAC,EAAI,MACxBA,EAAKA,EAAK,IAAS,CAAC,EAAI,KAC3B,GAAEA,IAASxC,EAAA,KAAewC,EAAO,CAAE,EAAC,EACrC,SAASC,EAAaC,EAAUC,EAAcC,EAAkB,CAE5D,GAAIF,aAAoBzC,EAAU,KAAM,CACpC,MAAM4C,EAAWF,IAAiBH,EAAK,IACvC,OAAOI,EACDC,KACQ5C,EAAU,WAAYyC,CAAQ,YAC9BzC,EAAU,YAAayC,CAAQ,UACvCG,KACQ5C,EAAU,WAAYyC,CAAQ,MAC9BzC,EAAU,WAAYyC,CAAQ,4CACpD,CACI,OAAOE,KAAuB3C,EAAU,aAAayC,CAAQ,EAAE,WAAa,IAAMpB,EAAkBoB,CAAQ,CAChH,CACA1C,EAAA,aAAuByC,EACvB,SAAS9B,EAAgBN,EAAIyC,EAAKC,EAAO1C,EAAG,KAAK,aAAc,CAC3D,GAAK0C,EAGL,IADAD,EAAM,gBAAgBA,CAAG,GACrBC,IAAS,GACT,MAAM,IAAI,MAAMD,CAAG,EACvBzC,EAAG,KAAK,OAAO,KAAKyC,CAAG,EAC3B,CACA,OAAA9C,EAAA,gBAA0BW,oDC/K1B,OAAO,eAAeqC,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAM/C,EAAYnH,EAAoB,EAChC1B,EAAQ,CAEV,KAAM,IAAI6I,EAAU,KAAK,MAAM,EAE/B,OAAQ,IAAIA,EAAU,KAAK,QAAQ,EACnC,aAAc,IAAIA,EAAU,KAAK,cAAc,EAC/C,WAAY,IAAIA,EAAU,KAAK,YAAY,EAC3C,mBAAoB,IAAIA,EAAU,KAAK,oBAAoB,EAC3D,SAAU,IAAIA,EAAU,KAAK,UAAU,EACvC,eAAgB,IAAIA,EAAU,KAAK,gBAAgB,EAEnD,QAAS,IAAIA,EAAU,KAAK,SAAS,EACrC,OAAQ,IAAIA,EAAU,KAAK,QAAQ,EACnC,KAAM,IAAIA,EAAU,KAAK,MAAM,EAE/B,KAAM,IAAIA,EAAU,KAAK,MAAM,EAC/B,MAAO,IAAIA,EAAU,KAAK,OAAO,EAEjC,KAAM,IAAIA,EAAU,KAAK,MAAM,EAC/B,QAAS,IAAIA,EAAU,KAAK,SAAS,EACrC,QAAS,IAAIA,EAAU,KAAK,SAAS,EACrC,SAAU,IAAIA,EAAU,KAAK,UAAU,CAC1C,EACD+C,OAAAA,GAAA,QAAkB5L,uDCzBlB,OAAO,eAAcN,EAAU,aAAc,CAAE,MAAO,GAAM,EAC5DA,EAAA,aAAuBA,mBAA2BA,EAA2B,iBAAAA,EAAA,YAAsBA,EAA4B,kBAAAA,EAAA,aAAuB,OACtJ,MAAMmJ,EAAYnH,EAAoB,EAChCmK,EAAStI,EAAiB,EAC1BqI,EAAUE,GAAkB,EAClCpM,EAAuB,aAAA,CACnB,QAAS,CAAC,CAAE,QAAAmK,CAAO,OAAWhB,EAAU,kBAAmBgB,CAAO,sBACrE,EACDnK,EAA4B,kBAAA,CACxB,QAAS,CAAC,CAAE,QAAAmK,EAAS,WAAAkC,KAAiBA,KAC5BlD,EAAU,QAASgB,CAAO,qBAAqBkC,CAAU,cACzDlD,EAAU,QAASgB,CAAO,8BACvC,EACD,SAASmC,EAAYC,EAAKpH,EAAQnF,EAAQ,aAAcwM,EAAYC,EAAmB,CACnF,KAAM,CAAE,GAAAlD,CAAE,EAAKgD,EACT,CAAE,IAAAtB,EAAK,cAAAyB,EAAe,UAAAC,CAAW,EAAGpD,EACpCqD,EAASC,EAAgBN,EAAKpH,EAAOqH,CAAU,EACjDC,IAAkFC,GAAiBC,GACnGG,EAAS7B,EAAK2B,CAAM,EAGpBG,EAAaxD,KAAQJ,EAAU,MAAOyD,CAAM,GAAG,CAEvD,CACA5M,EAAA,YAAsBsM,EACtB,SAASU,EAAiBT,EAAKpH,EAAQnF,EAAQ,aAAcwM,EAAY,CACrE,KAAM,CAAE,GAAAjD,CAAE,EAAKgD,EACT,CAAE,IAAAtB,EAAK,cAAAyB,EAAe,UAAAC,CAAW,EAAGpD,EACpCqD,EAASC,EAAgBN,EAAKpH,EAAOqH,CAAU,EACrDM,EAAS7B,EAAK2B,CAAM,EACdF,GAAiBC,GACnBI,EAAaxD,EAAI2C,EAAQ,QAAQ,OAAO,CAEhD,CACAlM,EAAA,iBAA2BgN,EAC3B,SAASC,EAAiBhC,EAAKiC,EAAW,CACtCjC,EAAI,OAAOiB,EAAQ,QAAQ,OAAQgB,CAAS,EAC5CjC,EAAI,MAAO9B,EAAU,KAAM+C,EAAQ,QAAQ,OAAO,YAAa,IAAMjB,EAAI,GAAGiC,EAAW,IAAMjC,EAAI,UAAW9B,EAAU,KAAM+C,EAAQ,QAAQ,OAAO,UAAWgB,CAAS,EAAG,IAAMjC,EAAI,OAAOiB,EAAQ,QAAQ,QAAS,IAAI,CAAC,CAAC,CAC9N,CACAlM,EAAA,iBAA2BiN,EAC3B,SAASE,EAAa,CAAE,IAAAlC,EAAK,QAAAd,EAAS,YAAAiD,EAAa,KAAAvT,EAAM,UAAAqT,EAAW,GAAA3D,GAAO,CAEvE,GAAI2D,IAAc,OACd,MAAM,IAAI,MAAM,0BAA0B,EAC9C,MAAMG,EAAMpC,EAAI,KAAK,KAAK,EAC1BA,EAAI,SAAS,IAAKiC,EAAWhB,EAAQ,QAAQ,OAASxL,GAAM,CACxDuK,EAAI,MAAMoC,KAASlE,EAAU,KAAM+C,EAAQ,QAAQ,OAAO,IAAIxL,CAAC,GAAG,EAClEuK,EAAI,MAAO9B,EAAU,KAAMkE,CAAG,8BAA+B,IAAMpC,EAAI,UAAW9B,EAAU,KAAMkE,CAAG,mBAAqBlE,EAAU,WAAW+C,EAAQ,QAAQ,aAAc3C,EAAG,SAAS,CAAC,CAAC,EAC3L0B,EAAI,UAAW9B,EAAU,KAAMkE,CAAG,iBAAmBlE,EAAU,OAAQI,EAAG,aAAa,IAAIY,CAAO,EAAE,EAChGZ,EAAG,KAAK,UACR0B,EAAI,UAAW9B,EAAU,KAAMkE,CAAG,UAAWD,CAAW,EACxDnC,EAAI,UAAW9B,EAAU,KAAMkE,CAAG,QAASxT,CAAI,EAE3D,CAAK,CACL,CACAmG,EAAA,aAAuBmN,EACvB,SAASL,EAAS7B,EAAK2B,EAAQ,CAC3B,MAAMS,EAAMpC,EAAI,MAAM,MAAO2B,CAAM,EACnC3B,EAAI,MAAO9B,EAAU,KAAM+C,EAAQ,QAAQ,OAAO,YAAa,IAAMjB,EAAI,OAAOiB,EAAQ,QAAQ,WAAa/C,EAAU,MAAOkE,CAAG,GAAG,KAAOlE,EAAU,KAAM+C,EAAQ,QAAQ,OAAO,SAASmB,CAAG,GAAG,EACjMpC,EAAI,QAAS9B,EAAU,KAAM+C,EAAQ,QAAQ,MAAM,IAAI,CAC3D,CACA,SAASa,EAAaxD,EAAI+D,EAAM,CAC5B,KAAM,CAAE,IAAArC,EAAK,aAAAsC,EAAc,UAAAC,CAAW,EAAGjE,EACrCiE,EAAU,OACVvC,EAAI,SAAU9B,EAAU,SAAUI,EAAG,eAAe,IAAI+D,CAAI,GAAG,GAG/DrC,EAAI,UAAW9B,EAAU,KAAMoE,CAAY,UAAWD,CAAI,EAC1DrC,EAAI,OAAO,EAAK,EAExB,CACA,MAAMwC,EAAI,CACN,QAAS,IAAItE,EAAU,KAAK,SAAS,EACrC,WAAY,IAAIA,EAAU,KAAK,YAAY,EAC3C,OAAQ,IAAIA,EAAU,KAAK,QAAQ,EACnC,aAAc,IAAIA,EAAU,KAAK,cAAc,EAC/C,QAAS,IAAIA,EAAU,KAAK,SAAS,EACrC,OAAQ,IAAIA,EAAU,KAAK,QAAQ,EACnC,aAAc,IAAIA,EAAU,KAAK,cAAc,CAClD,EACD,SAAS0D,EAAgBN,EAAKpH,EAAOqH,EAAY,CAC7C,KAAM,CAAE,aAAAkB,GAAiBnB,EAAI,GAC7B,OAAImB,IAAiB,MACNvE,EAAU,OAClBwE,EAAYpB,EAAKpH,EAAOqH,CAAU,CAC7C,CACA,SAASmB,EAAYpB,EAAKpH,EAAOqH,EAAa,CAAA,EAAI,CAC9C,KAAM,CAAE,IAAAvB,EAAK,GAAA1B,CAAE,EAAKgD,EACdhF,EAAY,CACdqG,EAAkBrE,EAAIiD,CAAU,EAChCqB,EAAgBtB,EAAKC,CAAU,CAClC,EACD,OAAAsB,EAAgBvB,EAAKpH,EAAOoC,CAAS,EAC9B0D,EAAI,OAAO,GAAG1D,CAAS,CAClC,CACA,SAASqG,EAAkB,CAAE,UAAAG,GAAa,CAAE,aAAAC,CAAY,EAAI,CACxD,MAAMC,EAAWD,KACP7E,EAAU,OAAQ4E,CAAS,MAAO5B,EAAO,cAAc6B,EAAc7B,EAAO,KAAK,GAAG,CAAC,GACzF4B,EACN,MAAO,CAAC7B,EAAQ,QAAQ,gBAAkB/C,EAAU,WAAW+C,EAAQ,QAAQ,aAAc+B,CAAQ,CAAC,CAC1G,CACA,SAASJ,EAAgB,CAAE,QAAA1D,EAAS,GAAI,CAAE,cAAA+D,CAAa,GAAM,CAAE,WAAAhE,EAAY,aAAAiE,GAAgB,CACvF,IAAIC,EAAUD,EAAeD,KAAoB/E,EAAU,OAAQ+E,CAAa,IAAI/D,CAAO,GAC3F,OAAID,IACAkE,KAAcjF,EAAU,OAAQiF,CAAO,MAAOjC,EAAO,cAAcjC,EAAYiC,EAAO,KAAK,GAAG,CAAC,IAE5F,CAACsB,EAAE,WAAYW,CAAO,CACjC,CACA,SAASN,EAAgBvB,EAAK,CAAE,OAAA8B,EAAQ,QAAAC,CAAO,EAAI/G,EAAW,CAC1D,KAAM,CAAE,QAAA4C,EAAS,KAAAtQ,EAAM,YAAAuT,EAAa,GAAA7D,CAAI,EAAGgD,EACrC,CAAE,KAAAvJ,EAAM,aAAAuL,EAAc,aAAAtE,EAAc,WAAAC,CAAY,EAAGX,EACzDhC,EAAU,KAAK,CAACkG,EAAE,QAAStD,CAAO,EAAG,CAACsD,EAAE,OAAQ,OAAOY,GAAU,WAAaA,EAAO9B,CAAG,EAAI8B,MAAclF,EAAU,MAAO,CAAC,EACxHnG,EAAK,UACLuE,EAAU,KAAK,CAACkG,EAAE,QAAS,OAAOa,GAAW,WAAaA,EAAQ/B,CAAG,EAAI+B,CAAO,CAAC,EAEjFtL,EAAK,SACLuE,EAAU,KAAK,CAACkG,EAAE,OAAQL,CAAW,EAAG,CAACK,EAAE,gBAAkBtE,EAAU,KAAMc,CAAY,GAAGC,CAAU,EAAE,EAAG,CAACgC,EAAQ,QAAQ,KAAMrS,CAAI,CAAC,EAEvI0U,GACAhH,EAAU,KAAK,CAACkG,EAAE,aAAcc,CAAY,CAAC,CACrD,qDCxHA,OAAO,eAAeC,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5DA,GAAA,kBAA4BA,GAAA,qBAA+B,OAC3D,MAAMC,EAAWzM,GAAoB,EAC/BmH,EAAYtF,EAAqB,EACjCqI,EAAUE,GAAmB,EAC7BsC,EAAY,CACd,QAAS,yBACZ,EACD,SAASC,EAAqBpF,EAAI,CAC9B,KAAM,CAAE,IAAA0B,EAAK,OAAAzB,EAAQ,aAAA+D,CAAc,EAAGhE,EAClCC,IAAW,GACXoF,EAAiBrF,EAAI,EAAK,EAErB,OAAOC,GAAU,UAAYA,EAAO,SAAW,GACpDyB,EAAI,OAAOiB,EAAQ,QAAQ,IAAI,GAG/BjB,EAAI,UAAW9B,EAAU,KAAMoE,CAAY,UAAW,IAAI,EAC1DtC,EAAI,OAAO,EAAI,EAEvB,CACAuD,GAAA,qBAA+BG,EAC/B,SAASE,EAAkBtF,EAAIuF,EAAO,CAClC,KAAM,CAAE,IAAA7D,EAAK,OAAAzB,CAAM,EAAKD,EACpBC,IAAW,IACXyB,EAAI,IAAI6D,EAAO,EAAK,EACpBF,EAAiBrF,CAAE,GAGnB0B,EAAI,IAAI6D,EAAO,EAAI,CAE3B,CACAN,GAAA,kBAA4BK,EAC5B,SAASD,EAAiBrF,EAAIkD,EAAmB,CAC7C,KAAM,CAAE,IAAAxB,EAAK,KAAApR,CAAI,EAAK0P,EAEhBgD,EAAM,CACR,IAAAtB,EACA,QAAS,eACT,KAAApR,EACA,OAAQ,GACR,WAAY,GACZ,YAAa,GACb,OAAQ,CAAE,EACV,GAAA0P,CACH,KACGkF,EAAS,aAAalC,EAAKmC,EAAW,OAAWjC,CAAiB,CAC1E,iEC/CA,OAAO,eAAe7C,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5DA,GAAA,SAAmBA,GAAA,WAAqB,OACxC,MAAMmF,EAAa,CAAC,SAAU,SAAU,UAAW,UAAW,OAAQ,SAAU,OAAO,EACjFC,EAAY,IAAI,IAAID,CAAU,EACpC,SAASE,EAAWxN,EAAG,CACnB,OAAO,OAAOA,GAAK,UAAYuN,EAAU,IAAIvN,CAAC,CAClD,CACAmI,GAAA,WAAqBqF,EACrB,SAASC,GAAW,CAChB,MAAMC,EAAS,CACX,OAAQ,CAAE,KAAM,SAAU,MAAO,CAAA,CAAI,EACrC,OAAQ,CAAE,KAAM,SAAU,MAAO,CAAA,CAAI,EACrC,MAAO,CAAE,KAAM,QAAS,MAAO,CAAA,CAAI,EACnC,OAAQ,CAAE,KAAM,SAAU,MAAO,CAAA,CAAI,CACxC,EACD,MAAO,CACH,MAAO,CAAE,GAAGA,EAAQ,QAAS,GAAM,QAAS,GAAM,KAAM,EAAM,EAC9D,MAAO,CAAC,CAAE,MAAO,CAAE,CAAA,EAAIA,EAAO,OAAQA,EAAO,OAAQA,EAAO,MAAOA,EAAO,MAAM,EAChF,KAAM,CAAE,MAAO,EAAI,EACnB,IAAK,CAAE,EACP,SAAU,CAAE,CACf,CACL,CACA,OAAAvF,GAAA,SAAmBsF,qDCvBnB,OAAO,eAAeE,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5DA,GAAA,cAAwBA,GAAsB,eAAGA,GAA6B,sBAAG,OACjF,SAASC,EAAsB,CAAE,OAAA7F,EAAQ,KAAAG,CAAI,EAAI2F,EAAM,CACnD,MAAMC,EAAQ5F,EAAK,MAAM,MAAM2F,CAAI,EACnC,OAAOC,GAASA,IAAU,IAAQC,EAAehG,EAAQ+F,CAAK,CAClE,CACAH,GAAA,sBAAgCC,EAChC,SAASG,EAAehG,EAAQ+F,EAAO,CACnC,OAAOA,EAAM,MAAM,KAAME,GAASC,EAAclG,EAAQiG,CAAI,CAAC,CACjE,CACAL,GAAA,eAAyBI,EACzB,SAASE,EAAclG,EAAQiG,EAAM,CACjC,IAAI1U,EACJ,OAAQyO,EAAOiG,EAAK,OAAO,IAAM,UAC3B1U,EAAK0U,EAAK,WAAW,cAAgB,MAAQ1U,IAAO,OAAS,OAASA,EAAG,KAAM4U,GAAQnG,EAAOmG,CAAG,IAAM,MAAS,EAC1H,CACA,OAAAP,GAAA,cAAwBM,+CChBxB,OAAO,eAAeE,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5DA,GAAA,gBAA0BA,GAAA,eAAyBA,GAAA,cAAwBA,GAA8B,uBAAGA,GAAoB,aAAGA,GAAsB,eAAGA,GAAgB,SAAG,OAC/K,MAAMC,EAAU7N,GAAmB,EAC7B8N,EAAkBjM,GAA0B,EAC5C4K,EAAWrC,GAAoB,EAC/BjD,EAAY4G,EAAqB,EACjC5D,EAAS6D,EAAkB,EACjC,IAAIC,GACH,SAAUA,EAAU,CACjBA,EAASA,EAAS,QAAa,CAAC,EAAI,UACpCA,EAASA,EAAS,MAAW,CAAC,EAAI,OACrC,GAAEA,IAAaL,GAAA,SAAmBK,EAAW,CAAE,EAAC,EACjD,SAASC,EAAe1G,EAAQ,CAC5B,MAAM2G,EAAQC,EAAa5G,EAAO,IAAI,EAEtC,GADgB2G,EAAM,SAAS,MAAM,GAEjC,GAAI3G,EAAO,WAAa,GACpB,MAAM,IAAI,MAAM,wCAAwC,MAE3D,CACD,GAAI,CAAC2G,EAAM,QAAU3G,EAAO,WAAa,OACrC,MAAM,IAAI,MAAM,0CAA0C,EAE1DA,EAAO,WAAa,IACpB2G,EAAM,KAAK,MAAM,CAC7B,CACI,OAAOA,CACX,CACAP,GAAA,eAAyBM,EAEzB,SAASE,EAAaC,EAAI,CACtB,MAAMF,EAAQ,MAAM,QAAQE,CAAE,EAAIA,EAAKA,EAAK,CAACA,CAAE,EAAI,CAAE,EACrD,GAAIF,EAAM,MAAMN,EAAQ,UAAU,EAC9B,OAAOM,EACX,MAAM,IAAI,MAAM,wCAA0CA,EAAM,KAAK,GAAG,CAAC,CAC7E,CACAP,GAAA,aAAuBQ,EACvB,SAASE,EAAuB/G,EAAI4G,EAAO,CACvC,KAAM,CAAE,IAAAlF,EAAK,KAAApR,EAAM,KAAAmJ,CAAM,EAAGuG,EACtBgH,EAAWC,EAAcL,EAAOnN,EAAK,WAAW,EAChDyN,EAAaN,EAAM,OAAS,GAC9B,EAAEI,EAAS,SAAW,GAAKJ,EAAM,SAAW,MAASL,EAAgB,uBAAuBvG,EAAI4G,EAAM,CAAC,CAAC,GAC5G,GAAIM,EAAY,CACZ,MAAMC,EAAYC,EAAeR,EAAOtW,EAAMmJ,EAAK,cAAeiN,EAAS,KAAK,EAChFhF,EAAI,GAAGyF,EAAW,IAAM,CAChBH,EAAS,OACTK,EAAWrH,EAAI4G,EAAOI,CAAQ,EAE9BM,EAAgBtH,CAAE,CAClC,CAAS,CACT,CACI,OAAOkH,CACX,CACAb,GAAA,uBAAiCU,EACjC,MAAMQ,EAAY,IAAI,IAAI,CAAC,SAAU,SAAU,UAAW,UAAW,MAAM,CAAC,EAC5E,SAASN,EAAcL,EAAOY,EAAa,CACvC,OAAOA,EACDZ,EAAM,OAAQa,GAAMF,EAAU,IAAIE,CAAC,GAAMD,IAAgB,SAAWC,IAAM,OAAQ,EAClF,CAAE,CACZ,CACA,SAASJ,EAAWrH,EAAI4G,EAAOI,EAAU,CACrC,KAAM,CAAE,IAAAtF,EAAK,KAAApR,EAAM,KAAAmJ,CAAM,EAAGuG,EACtBqG,EAAW3E,EAAI,IAAI,cAAgB9B,EAAU,YAAatP,CAAI,EAAE,EAChEoX,EAAUhG,EAAI,IAAI,aAAe9B,EAAU,aAAc,EAC3DnG,EAAK,cAAgB,SACrBiI,EAAI,MAAO9B,EAAU,KAAMyG,CAAQ,iCAAiC/V,CAAI,QAAQA,CAAI,eAAgB,IAAMoR,EACrG,OAAOpR,KAAUsP,EAAU,KAAMtP,CAAI,KAAK,EAC1C,OAAO+V,KAAczG,EAAU,YAAatP,CAAI,EAAE,EAClD,GAAG8W,EAAeR,EAAOtW,EAAMmJ,EAAK,aAAa,EAAG,IAAMiI,EAAI,OAAOgG,EAASpX,CAAI,CAAC,CAAC,EAE7FoR,EAAI,MAAO9B,EAAU,KAAM8H,CAAO,gBAAgB,EAClD,UAAWD,KAAKT,GACRO,EAAU,IAAIE,CAAC,GAAMA,IAAM,SAAWhO,EAAK,cAAgB,UAC3DkO,EAAmBF,CAAC,EAG5B/F,EAAI,KAAM,EACV4F,EAAgBtH,CAAE,EAClB0B,EAAI,MAAO,EACXA,EAAI,MAAO9B,EAAU,KAAM8H,CAAO,iBAAkB,IAAM,CACtDhG,EAAI,OAAOpR,EAAMoX,CAAO,EACxBE,EAAiB5H,EAAI0H,CAAO,CACpC,CAAK,EACD,SAASC,EAAmBF,EAAG,CAC3B,OAAQA,EAAC,CACL,IAAK,SACD/F,EACK,UAAW9B,EAAU,KAAMyG,CAAQ,mBAAmBA,CAAQ,eAAe,EAC7E,OAAOqB,KAAa9H,EAAU,UAAWtP,CAAI,EAAE,EAC/C,UAAWsP,EAAU,KAAMtP,CAAI,WAAW,EAC1C,OAAOoX,KAAa9H,EAAU,MAAO,EAC1C,OACJ,IAAK,SACD8B,EACK,UAAW9B,EAAU,KAAMyG,CAAQ,oBAAoB/V,CAAI;AAAA,oBAC5D+V,CAAQ,mBAAmB/V,CAAI,OAAOA,CAAI,QAAQA,CAAI,GAAG,EACxD,OAAOoX,KAAa9H,EAAU,MAAOtP,CAAI,EAAE,EAChD,OACJ,IAAK,UACDoR,EACK,UAAW9B,EAAU,KAAMyG,CAAQ,qBAAqB/V,CAAI;AAAA,oBAC7D+V,CAAQ,oBAAoB/V,CAAI,OAAOA,CAAI,QAAQA,CAAI,SAASA,CAAI,QAAQ,EAC3E,OAAOoX,KAAa9H,EAAU,MAAOtP,CAAI,EAAE,EAChD,OACJ,IAAK,UACDoR,EACK,UAAW9B,EAAU,KAAMtP,CAAI,mBAAmBA,CAAI,aAAaA,CAAI,WAAW,EAClF,OAAOoX,EAAS,EAAK,EACrB,UAAW9H,EAAU,KAAMtP,CAAI,kBAAkBA,CAAI,QAAQ,EAC7D,OAAOoX,EAAS,EAAI,EACzB,OACJ,IAAK,OACDhG,EAAI,UAAW9B,EAAU,KAAMtP,CAAI,cAAcA,CAAI,aAAaA,CAAI,YAAY,EAClFoR,EAAI,OAAOgG,EAAS,IAAI,EACxB,OACJ,IAAK,QACDhG,EACK,UAAW9B,EAAU,KAAMyG,CAAQ,oBAAoBA,CAAQ;AAAA,mBACjEA,CAAQ,qBAAqB/V,CAAI,WAAW,EAC1C,OAAOoX,KAAa9H,EAAU,MAAOtP,CAAI,GAAG,CACjE,CACA,CACA,CACA,SAASsX,EAAiB,CAAE,IAAAlG,EAAK,WAAAmG,EAAY,mBAAAC,CAAkB,EAAIvQ,EAAM,CAErEmK,EAAI,MAAO9B,EAAU,KAAMiI,CAAU,iBAAkB,IAAMnG,EAAI,UAAW9B,EAAU,KAAMiI,CAAU,IAAIC,CAAkB,IAAKvQ,CAAI,CAAC,CAC1I,CACA,SAASwQ,EAAc1B,EAAU/V,EAAM0X,EAAYC,EAAUvB,EAAS,QAAS,CAC3E,MAAMwB,EAAKD,IAAYvB,EAAS,QAAU9G,EAAU,UAAU,GAAKA,EAAU,UAAU,IACvF,IAAIpD,EACJ,OAAQ6J,EAAQ,CACZ,IAAK,OACD,SAAWzG,EAAU,KAAMtP,CAAI,IAAI4X,CAAE,QACzC,IAAK,QACD1L,KAAWoD,EAAU,mBAAoBtP,CAAI,IAC7C,MACJ,IAAK,SACDkM,KAAWoD,EAAU,KAAMtP,CAAI,cAAcA,CAAI,kCAAkCA,CAAI,IACvF,MACJ,IAAK,UACDkM,EAAO2L,KAAYvI,EAAU,OAAQtP,CAAI,mBAAmBA,CAAI,GAAG,EACnE,MACJ,IAAK,SACDkM,EAAO2L,EAAS,EAChB,MACJ,QACI,SAAWvI,EAAU,YAAatP,CAAI,IAAI4X,CAAE,IAAI7B,CAAQ,EACpE,CACI,OAAO4B,IAAYvB,EAAS,QAAUlK,KAAWoD,EAAU,KAAKpD,CAAI,EACpE,SAAS2L,EAAQC,EAAQxI,EAAU,IAAK,CACpC,SAAWA,EAAU,QAASA,EAAU,YAAatP,CAAI,eAAgB8X,EAAOJ,KAAiBpI,EAAU,cAAetP,CAAI,IAAMsP,EAAU,GAAG,CACzJ,CACA,CACAyG,GAAA,cAAwB0B,EACxB,SAASX,EAAeiB,EAAW/X,EAAM0X,EAAYC,EAAS,CAC1D,GAAII,EAAU,SAAW,EACrB,OAAON,EAAcM,EAAU,CAAC,EAAG/X,EAAM0X,EAAYC,CAAO,EAEhE,IAAIzL,EACJ,MAAMoK,KAAYhE,EAAO,QAAQyF,CAAS,EAC1C,GAAIzB,EAAM,OAASA,EAAM,OAAQ,CAC7B,MAAM0B,KAAa1I,EAAU,YAAatP,CAAI,eAC9CkM,EAAOoK,EAAM,KAAO0B,KAAa1I,EAAU,MAAOtP,CAAI,OAAOgY,CAAM,GACnE,OAAO1B,EAAM,KACb,OAAOA,EAAM,MACb,OAAOA,EAAM,MACrB,MAEQpK,EAAOoD,EAAU,IAEjBgH,EAAM,QACN,OAAOA,EAAM,QACjB,UAAWa,KAAKb,EACZpK,KAAWoD,EAAU,KAAKpD,EAAMuL,EAAcN,EAAGnX,EAAM0X,EAAYC,CAAO,CAAC,EAC/E,OAAOzL,CACX,CACA6J,GAAA,eAAyBe,EACzB,MAAMmB,EAAY,CACd,QAAS,CAAC,CAAE,OAAAtI,CAAM,IAAO,WAAWA,CAAM,GAC1C,OAAQ,CAAC,CAAE,OAAAA,EAAQ,YAAA4D,CAAW,IAAO,OAAO5D,GAAU,YAAeL,EAAU,YAAaK,CAAM,OAAUL,EAAU,YAAaiE,CAAW,GACjJ,EACD,SAASyD,EAAgBtH,EAAI,CACzB,MAAMgD,EAAMwF,EAAoBxI,CAAE,KAC9BkF,EAAS,aAAalC,EAAKuF,CAAS,CAC5C,CACAlC,GAAA,gBAA0BiB,EAC1B,SAASkB,EAAoBxI,EAAI,CAC7B,KAAM,CAAE,IAAA0B,EAAK,KAAApR,EAAM,OAAA2P,CAAQ,EAAGD,EACxByI,KAAiB7F,EAAO,gBAAgB5C,EAAIC,EAAQ,MAAM,EAChE,MAAO,CACH,IAAAyB,EACA,QAAS,OACT,KAAApR,EACA,OAAQ2P,EAAO,KACf,WAAAwI,EACA,YAAaA,EACb,aAAcxI,EACd,OAAQ,CAAE,EACV,GAAAD,CACH,CACL,2DCxMA,OAAO,eAAe0I,GAAS,aAAc,CAAE,MAAO,GAAM,EACtCA,GAAA,eAAG,OACzB,MAAM9I,EAAYnH,EAAqB,EACjCmK,EAAStI,EAAkB,EACjC,SAASqO,EAAe3I,EAAI4I,EAAI,CAC5B,KAAM,CAAE,WAAAC,EAAY,MAAA1J,CAAO,EAAGa,EAAG,OACjC,GAAI4I,IAAO,UAAYC,EACnB,UAAWlkB,KAAOkkB,EACdC,EAAc9I,EAAIrb,EAAKkkB,EAAWlkB,CAAG,EAAE,OAAO,OAG7CikB,IAAO,SAAW,MAAM,QAAQzJ,CAAK,GAC1CA,EAAM,QAAQ,CAAC4J,EAAK5R,IAAM2R,EAAc9I,EAAI7I,EAAG4R,EAAI,OAAO,CAAC,CAEnE,CACAL,GAAA,eAAyBC,EACzB,SAASG,EAAc9I,EAAIgJ,EAAMC,EAAc,CAC3C,KAAM,CAAE,IAAAvH,EAAK,cAAAyB,EAAe,KAAA7S,EAAM,KAAAmJ,CAAM,EAAGuG,EAC3C,GAAIiJ,IAAiB,OACjB,OACJ,MAAMC,KAAgBtJ,EAAU,KAAMtP,CAAI,MAAOsP,EAAU,aAAaoJ,CAAI,CAAC,GAC7E,GAAI7F,EAAe,IACXP,EAAO,iBAAiB5C,EAAI,2BAA2BkJ,CAAS,EAAE,EACtE,MACR,CACI,IAAI3M,KAAgBqD,EAAU,KAAMsJ,CAAS,iBACzCzP,EAAK,cAAgB,UACrB8C,KAAgBqD,EAAU,KAAMrD,CAAS,OAAO2M,CAAS,gBAAgBA,CAAS,WAItFxH,EAAI,GAAGnF,KAAeqD,EAAU,KAAMsJ,CAAS,SAAUtJ,EAAU,WAAWqJ,CAAY,CAAC,EAAE,CACjG,+DChCA,OAAO,eAAelc,EAAS,aAAc,CAAE,MAAO,GAAM,EACvCA,EAAA,cAAGA,EAAqB,cAAGA,EAAkB,WAAGA,EAAwB,iBAAGA,EAAwB,iBAAGA,EAA2B,oBAAGA,EAAwB,iBAAGA,iBAAyBA,EAAA,cAAwBA,EAAA,YAAsBA,EAAA,kBAA4BA,EAAA,iBAA2BA,EAAA,uBAAiC,OACnV,MAAM6S,EAAYnH,EAA6B,EACzCmK,EAAStI,EAA0B,EACnCqI,EAAUE,GAA2B,EACrCsG,EAAS7O,EAA0B,EACzC,SAAS8O,EAAuBpG,EAAKgG,EAAM,CACvC,KAAM,CAAE,IAAAtH,EAAK,KAAApR,EAAM,GAAA0P,CAAI,EAAGgD,EAC1BtB,EAAI,GAAG2H,EAAiB3H,EAAKpR,EAAM0Y,EAAMhJ,EAAG,KAAK,aAAa,EAAG,IAAM,CACnEgD,EAAI,UAAU,CAAE,mBAAqBpD,EAAU,KAAMoJ,CAAI,EAAI,EAAE,EAAI,EACnEhG,EAAI,MAAO,CACnB,CAAK,CACL,CACAjW,EAAA,uBAAiCqc,EACjC,SAASE,EAAiB,CAAE,IAAA5H,EAAK,KAAApR,EAAM,GAAI,CAAE,KAAAmJ,CAAM,CAAA,EAAIoP,EAAYU,EAAS,CACxE,SAAW3J,EAAU,IAAI,GAAGiJ,EAAW,IAAKG,MAAapJ,EAAU,KAAKyJ,EAAiB3H,EAAKpR,EAAM0Y,EAAMvP,EAAK,aAAa,KAAOmG,EAAU,KAAM2J,CAAO,MAAMP,CAAI,EAAE,CAAC,CAAC,CAC5K,CACAjc,EAAA,iBAA2Buc,EAC3B,SAASE,EAAkBxG,EAAKuG,EAAS,CACrCvG,EAAI,UAAU,CAAE,gBAAiBuG,CAAO,EAAI,EAAI,EAChDvG,EAAI,MAAO,CACf,CACAjW,EAAA,kBAA4Byc,EAC5B,SAASC,EAAY/H,EAAK,CACtB,OAAOA,EAAI,WAAW,OAAQ,CAE1B,IAAK,OAAO,UAAU,eACtB,QAAU9B,EAAU,mCAC5B,CAAK,CACL,CACA7S,EAAA,YAAsB0c,EACtB,SAASC,EAAchI,EAAKpR,EAAM+I,EAAU,CACxC,SAAWuG,EAAU,KAAM6J,EAAY/H,CAAG,CAAC,SAASpR,CAAI,KAAK+I,CAAQ,GACzE,CACAtM,EAAA,cAAwB2c,EACxB,SAASC,EAAejI,EAAKpR,EAAM+I,EAAUuQ,EAAe,CACxD,MAAMpN,KAAWoD,EAAU,KAAMtP,CAAI,MAAOsP,EAAU,aAAavG,CAAQ,CAAC,iBAC5E,OAAOuQ,KAAoBhK,EAAU,KAAMpD,CAAI,OAAOkN,EAAchI,EAAKpR,EAAM+I,CAAQ,CAAC,GAAKmD,CACjG,CACAzP,EAAA,eAAyB4c,EACzB,SAASN,EAAiB3H,EAAKpR,EAAM+I,EAAUuQ,EAAe,CAC1D,MAAMpN,KAAWoD,EAAU,KAAMtP,CAAI,MAAOsP,EAAU,aAAavG,CAAQ,CAAC,iBAC5E,OAAOuQ,KAAoBhK,EAAU,IAAIpD,KAAUoD,EAAU,KAAK8J,EAAchI,EAAKpR,EAAM+I,CAAQ,CAAC,CAAC,EAAImD,CAC7G,CACAzP,EAAA,iBAA2Bsc,EAC3B,SAASQ,EAAoBC,EAAW,CACpC,OAAOA,EAAY,OAAO,KAAKA,CAAS,EAAE,OAAQ9H,GAAMA,IAAM,WAAW,EAAI,CAAE,CACnF,CACAjV,EAAA,oBAA8B8c,EAC9B,SAASE,EAAiB/J,EAAI8J,EAAW,CACrC,OAAOD,EAAoBC,CAAS,EAAE,OAAQ9H,GAAM,IAAKY,EAAO,mBAAmB5C,EAAI8J,EAAU9H,CAAC,CAAC,CAAC,CACxG,CACAjV,EAAA,iBAA2Bgd,EAC3B,SAASC,EAAiB,CAAE,WAAAvB,EAAY,KAAAnY,EAAM,GAAI,CAAE,IAAAoR,EAAK,aAAAhB,EAAc,WAAAC,EAAY,UAAA6D,CAAW,EAAE,GAAAxE,CAAE,EAAIiK,EAAMC,EAASC,EAAY,CAC7H,MAAMC,EAAgBD,KAAiBvK,EAAU,KAAM6I,CAAU,KAAKnY,CAAI,KAAKoQ,CAAY,GAAGC,CAAU,GAAKrQ,EACvG+Z,EAAS,CACX,CAAC1H,EAAQ,QAAQ,gBAAkB/C,EAAU,WAAW+C,EAAQ,QAAQ,aAAc6B,CAAS,CAAC,EAChG,CAAC7B,EAAQ,QAAQ,WAAY3C,EAAG,UAAU,EAC1C,CAAC2C,EAAQ,QAAQ,mBAAoB3C,EAAG,kBAAkB,EAC1D,CAAC2C,EAAQ,QAAQ,SAAUA,EAAQ,QAAQ,QAAQ,CACtD,EACG3C,EAAG,KAAK,YACRqK,EAAO,KAAK,CAAC1H,EAAQ,QAAQ,eAAgBA,EAAQ,QAAQ,cAAc,CAAC,EAChF,MAAMzL,KAAW0I,EAAU,KAAMwK,CAAa,KAAK1I,EAAI,OAAO,GAAG2I,CAAM,CAAC,GACxE,OAAOH,IAAYtK,EAAU,OAAUA,EAAU,KAAMqK,CAAI,SAASC,CAAO,KAAKhT,CAAI,OAAU0I,EAAU,KAAMqK,CAAI,IAAI/S,CAAI,GAC9H,CACAnK,EAAA,iBAA2Bid,EAC3B,MAAMM,KAAgB1K,EAAU,eAChC,SAAS2K,EAAW,CAAE,IAAA7I,EAAK,GAAI,CAAE,KAAAjI,CAAI,CAAI,EAAE+Q,EAAS,CAChD,MAAMC,EAAIhR,EAAK,cAAgB,IAAM,GAC/B,CAAE,OAAAiR,GAAWjR,EAAK,KAClBlB,EAAKmS,EAAOF,EAASC,CAAC,EAC5B,OAAO/I,EAAI,WAAW,UAAW,CAC7B,IAAKnJ,EAAG,SAAU,EAClB,IAAKA,EACL,QAAUqH,EAAU,KAAM8K,EAAO,OAAS,aAAeJ,KAAgBnB,EAAO,SAASzH,EAAKgJ,CAAM,CAAC,IAAIF,CAAO,KAAKC,CAAC,GAC9H,CAAK,CACL,CACA1d,EAAA,WAAqBwd,EACrB,SAASI,EAAc3H,EAAK,CACxB,KAAM,CAAE,IAAAtB,EAAK,KAAApR,EAAM,QAAAsQ,EAAS,GAAAZ,CAAI,EAAGgD,EAC7BuC,EAAQ7D,EAAI,KAAK,OAAO,EAC9B,GAAI1B,EAAG,UAAW,CACd,MAAM4K,EAAWlJ,EAAI,IAAI,QAAS,EAAI,EACtC,OAAAmJ,EAAc,IAAMnJ,EAAI,OAAOkJ,EAAU,EAAK,CAAC,EACxCA,CACf,CACI,OAAAlJ,EAAI,IAAI6D,EAAO,EAAI,EACnBsF,EAAc,IAAMnJ,EAAI,OAAO,EACxB6D,EACP,SAASsF,EAAcC,EAAU,CAC7B,MAAMlM,EAAM8C,EAAI,MAAM,SAAW9B,EAAU,KAAMtP,CAAI,SAAS,EAC9DoR,EAAI,SAAS,IAAK,EAAG9C,EAAMzH,GAAM,CAC7B6L,EAAI,UAAU,CACV,QAAApC,EACA,SAAUzJ,EACV,aAAcyL,EAAO,KAAK,GAC7B,EAAE2C,CAAK,EACR7D,EAAI,MAAO9B,EAAU,KAAK2F,CAAK,EAAGuF,CAAQ,CACtD,CAAS,CACT,CACA,CACA/d,EAAA,cAAwB4d,EACxB,SAASI,EAAc/H,EAAK,CACxB,KAAM,CAAE,IAAAtB,EAAK,OAAAzB,EAAQ,QAAAW,EAAS,GAAAZ,CAAI,EAAGgD,EAErC,GAAI,CAAC,MAAM,QAAQ/C,CAAM,EACrB,MAAM,IAAI,MAAM,0BAA0B,EAE9C,GADoBA,EAAO,KAAM8I,MAAYnG,EAAO,mBAAmB5C,EAAI+I,CAAG,CAAC,GAC5D,CAAC/I,EAAG,KAAK,YACxB,OACJ,MAAMuF,EAAQ7D,EAAI,IAAI,QAAS,EAAK,EAC9BsJ,EAAWtJ,EAAI,KAAK,QAAQ,EAClCA,EAAI,MAAM,IAAMzB,EAAO,QAAQ,CAACgL,EAAM9T,IAAM,CACxC,MAAM+T,EAASlI,EAAI,UAAU,CACzB,QAAApC,EACA,WAAYzJ,EACZ,cAAe,EAClB,EAAE6T,CAAQ,EACXtJ,EAAI,OAAO6D,KAAW3F,EAAU,KAAM2F,CAAK,OAAOyF,CAAQ,EAAE,EAC7ChI,EAAI,oBAAoBkI,EAAQF,CAAQ,GAInDtJ,EAAI,MAAO9B,EAAU,KAAK2F,CAAK,CAAC,CAC5C,CAAK,CAAC,EACFvC,EAAI,OAAOuC,EAAO,IAAMvC,EAAI,MAAO,EAAE,IAAMA,EAAI,MAAM,EAAI,CAAC,CAC9D,CACA,OAAAjW,EAAA,cAAwBge,8CChIxB,OAAO,eAAenK,GAAS,aAAc,CAAE,MAAO,GAAM,EAChCA,GAAA,qBAAGA,mBAA0BA,GAAA,gBAA0BA,GAAwB,iBAAG,OAC9G,MAAMhB,EAAYnH,EAAqB,EACjCkK,EAAUrI,GAAmB,EAC7B9B,EAASqK,GAAkC,EAC3CqC,EAAWsB,GAAoB,EACrC,SAAS2E,EAAiBnI,EAAK5I,EAAK,CAChC,KAAM,CAAE,IAAAsH,EAAK,QAAAd,EAAS,OAAAX,EAAQ,aAAA2E,EAAc,GAAA5E,CAAE,EAAKgD,EAC7CoI,EAAchR,EAAI,MAAM,KAAK4F,EAAG,KAAMC,EAAQ2E,EAAc5E,CAAE,EAC9DqL,EAAYC,EAAW5J,EAAKd,EAASwK,CAAW,EAClDpL,EAAG,KAAK,iBAAmB,IAC3BA,EAAG,KAAK,eAAeoL,EAAa,EAAI,EAC5C,MAAM7F,EAAQ7D,EAAI,KAAK,OAAO,EAC9BsB,EAAI,UAAU,CACV,OAAQoI,EACR,WAAYxL,EAAU,IACtB,cAAe,GAAGI,EAAG,aAAa,IAAIY,CAAO,GAC7C,aAAcyK,EACd,cAAe,EAClB,EAAE9F,CAAK,EACRvC,EAAI,KAAKuC,EAAO,IAAMvC,EAAI,MAAM,EAAI,CAAC,CACzC,CACApC,GAAA,iBAA2BuK,EAC3B,SAASI,EAAgBvI,EAAK5I,EAAK,CAC/B,IAAI5I,EACJ,KAAM,CAAE,IAAAkQ,EAAK,QAAAd,EAAS,OAAAX,EAAQ,aAAA2E,EAAc,MAAA/D,EAAO,GAAAb,CAAE,EAAKgD,EAC1DwI,EAAkBxL,EAAI5F,CAAG,EACzB,MAAMhL,EAAW,CAACyR,GAASzG,EAAI,QAAUA,EAAI,QAAQ,KAAK4F,EAAG,KAAMC,EAAQ2E,EAAc5E,CAAE,EAAI5F,EAAI,SAC7FqR,EAAcH,EAAW5J,EAAKd,EAASxR,CAAQ,EAC/CmW,EAAQ7D,EAAI,IAAI,OAAO,EAC7BsB,EAAI,WAAWuC,EAAOmG,CAAe,EACrC1I,EAAI,IAAIxR,EAAK4I,EAAI,SAAW,MAAQ5I,IAAO,OAASA,EAAK+T,CAAK,EAC9D,SAASmG,GAAkB,CACvB,GAAItR,EAAI,SAAW,GACfuR,EAAa,EACTvR,EAAI,WACJwR,EAAW5I,CAAG,EAClB6I,EAAW,IAAM7I,EAAI,OAAO,MAE3B,CACD,MAAM8I,EAAW1R,EAAI,MAAQ2R,EAAa,EAAKC,EAAc,EACzD5R,EAAI,WACJwR,EAAW5I,CAAG,EAClB6I,EAAW,IAAMI,EAAQjJ,EAAK8I,CAAQ,CAAC,CACnD,CACA,CACI,SAASC,GAAgB,CACrB,MAAMD,EAAWpK,EAAI,IAAI,WAAY,IAAI,EACzC,OAAAA,EAAI,IAAI,IAAMiK,KAAgB/L,EAAU,UAAW,EAAInD,GAAMiF,EAAI,OAAO6D,EAAO,EAAK,EAAE,MAAO3F,EAAU,KAAMnD,CAAC,eAAeuD,EAAG,eAAe,GAAI,IAAM0B,EAAI,OAAOoK,KAAclM,EAAU,KAAMnD,CAAC,SAAS,EAAG,IAAMiF,EAAI,MAAMjF,CAAC,CAAC,CAAC,EAC3NqP,CACf,CACI,SAASE,GAAe,CACpB,MAAME,KAAmBtM,EAAU,KAAM6L,CAAW,UACpD,OAAA/J,EAAI,OAAOwK,EAAc,IAAI,EAC7BP,EAAY/L,EAAU,GAAG,EAClBsM,CACf,CACI,SAASP,EAAYQ,EAAS/R,EAAI,SAAYwF,EAAU,WAAcA,EAAU,IAAK,CACjF,MAAMwM,EAAUpM,EAAG,KAAK,YAAc2C,EAAQ,QAAQ,KAAOA,EAAQ,QAAQ,KACvEwH,GAAa,EAAG,YAAa/P,GAAO,CAACyG,GAAUzG,EAAI,SAAW,IACpEsH,EAAI,OAAO6D,KAAW3F,EAAU,KAAMuM,CAAM,MAAO3T,EAAO,kBAAkBwK,EAAKyI,EAAaW,EAASjC,EAAU,CAAC,GAAI/P,EAAI,SAAS,CAC3I,CACI,SAASyR,EAAWQ,EAAQ,CACxB,IAAI7a,EACJkQ,EAAI,MAAO9B,EAAU,MAAMpO,EAAK4I,EAAI,SAAW,MAAQ5I,IAAO,OAASA,EAAK+T,CAAK,EAAG8G,CAAM,CAClG,CACA,CACAzL,GAAA,gBAA0B2K,EAC1B,SAASK,EAAW5I,EAAK,CACrB,KAAM,CAAE,IAAAtB,EAAK,KAAApR,EAAM,GAAA0P,CAAI,EAAGgD,EAC1BtB,EAAI,GAAG1B,EAAG,WAAY,IAAM0B,EAAI,OAAOpR,KAAUsP,EAAU,KAAMI,EAAG,UAAU,IAAIA,EAAG,kBAAkB,GAAG,CAAC,CAC/G,CACA,SAASiM,EAAQjJ,EAAKe,EAAM,CACxB,KAAM,CAAE,IAAArC,CAAG,EAAKsB,EAChBtB,EAAI,MAAO9B,EAAU,mBAAoBmE,CAAI,IAAK,IAAM,CACpDrC,EACK,OAAOiB,EAAQ,QAAQ,WAAa/C,EAAU,KAAM+C,EAAQ,QAAQ,OAAO,eAAeoB,CAAI,MAAMpB,EAAQ,QAAQ,OAAO,WAAWoB,CAAI,GAAG,EAC7I,OAAOpB,EAAQ,QAAQ,UAAY/C,EAAU,KAAM+C,EAAQ,QAAQ,OAAO,SAAS,KACpFuC,EAAS,cAAclC,CAAG,CACtC,EAAO,IAAMA,EAAI,OAAO,CACxB,CACA,SAASwI,EAAkB,CAAE,UAAAvH,CAAW,EAAE7J,EAAK,CAC3C,GAAIA,EAAI,OAAS,CAAC6J,EAAU,OACxB,MAAM,IAAI,MAAM,8BAA8B,CACtD,CACA,SAASqH,EAAW5J,EAAKd,EAAS3b,EAAQ,CACtC,GAAIA,IAAW,OACX,MAAM,IAAI,MAAM,YAAY2b,CAAO,qBAAqB,EAC5D,OAAOc,EAAI,WAAW,UAAW,OAAOzc,GAAU,WAAa,CAAE,IAAKA,CAAQ,EAAG,CAAE,IAAKA,EAAQ,QAAU2a,EAAU,WAAW3a,CAAM,EAAG,CAC5I,CACA,SAASqnB,EAAgBrM,EAAQ6C,EAAYyJ,EAAiB,GAAO,CAEjE,MAAQ,CAACzJ,EAAW,QAChBA,EAAW,KAAM0J,GAAOA,IAAO,QACzB,MAAM,QAAQvM,CAAM,EACpBuM,IAAO,SACHvM,GAAU,OAAOA,GAAU,UAAY,CAAC,MAAM,QAAQA,CAAM,EAC5D,OAAOA,GAAUuM,GAAOD,GAAkB,OAAOtM,EAAU,GAAY,CACzF,CACAW,GAAA,gBAA0B0L,EAC1B,SAASG,EAAqB,CAAE,OAAAxM,EAAQ,KAAAxG,EAAM,KAAA2G,EAAM,cAAAuE,CAAe,EAAEvK,EAAKwG,EAAS,CAE/E,GAAI,MAAM,QAAQxG,EAAI,OAAO,EAAI,CAACA,EAAI,QAAQ,SAASwG,CAAO,EAAIxG,EAAI,UAAYwG,EAC9E,MAAM,IAAI,MAAM,0BAA0B,EAE9C,MAAM8L,EAAOtS,EAAI,aACjB,GAAIsS,GAAS,MAAmCA,EAAK,KAAMtG,GAAQ,CAAC,OAAO,UAAU,eAAe,KAAKnG,EAAQmG,CAAG,CAAC,EACjH,MAAM,IAAI,MAAM,2CAA2CxF,CAAO,KAAK8L,EAAK,KAAK,GAAG,CAAC,EAAE,EAE3F,GAAItS,EAAI,gBAEA,CADUA,EAAI,eAAe6F,EAAOW,CAAO,CAAC,EACpC,CACR,MAAM6B,EAAM,YAAY7B,CAAO,+BAA+B+D,CAAa,MACvEvE,EAAK,WAAWhG,EAAI,eAAe,MAAM,EAC7C,GAAIX,EAAK,iBAAmB,MACxB2G,EAAK,OAAO,MAAMqC,CAAG,MAErB,OAAM,IAAI,MAAMA,CAAG,CACnC,CAEA,CACA,OAAA7B,GAAA,qBAA+B6L,qDCzH/B,OAAO,eAAeE,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5DA,GAAA,oBAA8BA,GAA2B,oBAAGA,GAAoB,aAAG,OACnF,MAAM/M,EAAYnH,EAAqB,EACjCmK,EAAStI,EAAkB,EACjC,SAASsS,EAAa5M,EAAI,CAAE,QAAAY,EAAS,WAAAiM,EAAY,OAAA5M,EAAQ,WAAAU,EAAY,cAAAgE,EAAe,aAAAjE,GAAgB,CAChG,GAAIE,IAAY,QAAaX,IAAW,OACpC,MAAM,IAAI,MAAM,sDAAsD,EAE1E,GAAIW,IAAY,OAAW,CACvB,MAAMmI,EAAM/I,EAAG,OAAOY,CAAO,EAC7B,OAAOiM,IAAe,OAChB,CACE,OAAQ9D,EACR,cAAgBnJ,EAAU,KAAMI,EAAG,UAAU,MAAOJ,EAAU,aAAagB,CAAO,CAAC,GACnF,cAAe,GAAGZ,EAAG,aAAa,IAAIY,CAAO,EAC7D,EACc,CACE,OAAQmI,EAAI8D,CAAU,EACtB,cAAgBjN,EAAU,KAAMI,EAAG,UAAU,MAAOJ,EAAU,aAAagB,CAAO,CAAC,MAAOhB,EAAU,aAAaiN,CAAU,CAAC,GAC5H,cAAe,GAAG7M,EAAG,aAAa,IAAIY,CAAO,OAAQgC,EAAO,gBAAgBiK,CAAU,CAAC,EAC1F,CACb,CACI,GAAI5M,IAAW,OAAW,CACtB,GAAIU,IAAe,QAAagE,IAAkB,QAAajE,IAAiB,OAC5E,MAAM,IAAI,MAAM,6EAA6E,EAEjG,MAAO,CACH,OAAAT,EACA,WAAAU,EACA,aAAAD,EACA,cAAAiE,CACH,CACT,CACI,MAAM,IAAI,MAAM,6CAA6C,CACjE,CACAgI,GAAA,aAAuBC,EACvB,SAASE,EAAoBH,EAAW3M,EAAI,CAAE,SAAAqC,EAAU,aAAc0K,EAAQ,KAAAzc,EAAM,UAAA+X,EAAW,aAAArD,GAAgB,CAC3G,GAAI1U,IAAS,QAAa+R,IAAa,OACnC,MAAM,IAAI,MAAM,qDAAqD,EAEzE,KAAM,CAAE,IAAAX,CAAG,EAAK1B,EAChB,GAAIqC,IAAa,OAAW,CACxB,KAAM,CAAE,UAAAmC,EAAW,YAAAwI,EAAa,KAAAvT,CAAM,EAAGuG,EACnCiN,EAAWvL,EAAI,IAAI,UAAY9B,EAAU,KAAMI,EAAG,IAAI,MAAOJ,EAAU,aAAayC,CAAQ,CAAC,GAAI,EAAI,EAC3G6K,EAAiBD,CAAQ,EACzBN,EAAU,aAAgB/M,EAAU,OAAQ4E,CAAS,MAAO5B,EAAO,cAAcP,EAAU0K,EAAQtT,EAAK,gBAAgB,CAAC,GACzHkT,EAAU,sBAAyB/M,EAAU,KAAMyC,CAAQ,GAC3DsK,EAAU,YAAc,CAAC,GAAGK,EAAaL,EAAU,kBAAkB,CAC7E,CACI,GAAIrc,IAAS,OAAW,CACpB,MAAM2c,EAAW3c,aAAgBsP,EAAU,KAAOtP,EAAOoR,EAAI,IAAI,OAAQpR,EAAM,EAAI,EACnF4c,EAAiBD,CAAQ,EACrBjI,IAAiB,SACjB2H,EAAU,aAAe3H,EAErC,CACQqD,IACAsE,EAAU,UAAYtE,GAC1B,SAAS6E,EAAiBC,EAAW,CACjCR,EAAU,KAAOQ,EACjBR,EAAU,UAAY3M,EAAG,UAAY,EACrC2M,EAAU,UAAY,CAAE,EACxB3M,EAAG,kBAAoB,IAAI,IAC3B2M,EAAU,WAAa3M,EAAG,KAC1B2M,EAAU,UAAY,CAAC,GAAG3M,EAAG,UAAWmN,CAAS,CACzD,CACA,CACAR,GAAA,oBAA8BG,EAC9B,SAASM,EAAoBT,EAAW,CAAE,iBAAAU,EAAkB,YAAAC,EAAa,cAAAnK,EAAe,aAAAgB,EAAc,UAAAf,GAAa,CAC3GD,IAAkB,SAClBwJ,EAAU,cAAgBxJ,GAC1BgB,IAAiB,SACjBwI,EAAU,aAAexI,GACzBf,IAAc,SACduJ,EAAU,UAAYvJ,GAC1BuJ,EAAU,iBAAmBU,EAC7BV,EAAU,YAAcW,CAC5B,CACA,OAAAX,GAAA,oBAA8BS,oDCzE9BG,GAAiB,SAASC,EAAMC,EAAG3V,EAAG,CACpC,GAAI2V,IAAM3V,EAAG,MAAO,GAEpB,GAAI2V,GAAK3V,GAAK,OAAO2V,GAAK,UAAY,OAAO3V,GAAK,SAAU,CAC1D,GAAI2V,EAAE,cAAgB3V,EAAE,YAAa,MAAO,GAE5C,IAAI4V,EAAQvW,EAAGwW,EACf,GAAI,MAAM,QAAQF,CAAC,EAAG,CAEpB,GADAC,EAASD,EAAE,OACPC,GAAU5V,EAAE,OAAQ,MAAO,GAC/B,IAAKX,EAAIuW,EAAQvW,MAAQ,GACvB,GAAI,CAACqW,EAAMC,EAAEtW,CAAC,EAAGW,EAAEX,CAAC,CAAC,EAAG,MAAO,GACjC,MAAO,EACb,CAII,GAAIsW,EAAE,cAAgB,OAAQ,OAAOA,EAAE,SAAW3V,EAAE,QAAU2V,EAAE,QAAU3V,EAAE,MAC5E,GAAI2V,EAAE,UAAY,OAAO,UAAU,QAAS,OAAOA,EAAE,QAAO,IAAO3V,EAAE,QAAS,EAC9E,GAAI2V,EAAE,WAAa,OAAO,UAAU,SAAU,OAAOA,EAAE,SAAQ,IAAO3V,EAAE,SAAU,EAIlF,GAFA6V,EAAO,OAAO,KAAKF,CAAC,EACpBC,EAASC,EAAK,OACVD,IAAW,OAAO,KAAK5V,CAAC,EAAE,OAAQ,MAAO,GAE7C,IAAKX,EAAIuW,EAAQvW,MAAQ,GACvB,GAAI,CAAC,OAAO,UAAU,eAAe,KAAKW,EAAG6V,EAAKxW,CAAC,CAAC,EAAG,MAAO,GAEhE,IAAKA,EAAIuW,EAAQvW,MAAQ,GAAI,CAC3B,IAAIxS,EAAMgpB,EAAKxW,CAAC,EAEhB,GAAI,CAACqW,EAAMC,EAAE9oB,CAAG,EAAGmT,EAAEnT,CAAG,CAAC,EAAG,MAAO,EACzC,CAEI,MAAO,EACX,CAGE,OAAO8oB,IAAIA,GAAK3V,IAAIA,CACrB,wEC3CD,IAAI8V,EAAWC,GAAA,QAAiB,SAAU5N,EAAQxG,EAAMqU,EAAI,CAEtD,OAAOrU,GAAQ,aACjBqU,EAAKrU,EACLA,EAAO,CAAE,GAGXqU,EAAKrU,EAAK,IAAMqU,EAChB,IAAIC,EAAO,OAAOD,GAAM,WAAcA,EAAKA,EAAG,KAAO,UAAW,CAAE,EAC9DE,EAAOF,EAAG,MAAQ,UAAW,CAAE,EAEnCG,EAAUxU,EAAMsU,EAAKC,EAAM/N,EAAQ,GAAIA,CAAM,CAC9C,EAGD2N,EAAS,SAAW,CAClB,gBAAiB,GACjB,MAAO,GACP,SAAU,GACV,qBAAsB,GACtB,cAAe,GACf,IAAK,GACL,GAAI,GACJ,KAAM,GACN,KAAM,EACP,EAEDA,EAAS,cAAgB,CACvB,MAAO,GACP,MAAO,GACP,MAAO,GACP,MAAO,EACR,EAEDA,EAAS,cAAgB,CACvB,MAAO,GACP,YAAa,GACb,WAAY,GACZ,kBAAmB,GACnB,aAAc,EACf,EAEDA,EAAS,aAAe,CACtB,QAAS,GACT,KAAM,GACN,MAAO,GACP,SAAU,GACV,QAAS,GACT,QAAS,GACT,iBAAkB,GAClB,iBAAkB,GAClB,WAAY,GACZ,UAAW,GACX,UAAW,GACX,QAAS,GACT,OAAQ,GACR,SAAU,GACV,SAAU,GACV,YAAa,GACb,cAAe,GACf,cAAe,EAChB,EAGD,SAASK,EAAUxU,EAAMsU,EAAKC,EAAM/N,EAAQiO,EAASC,EAAYC,EAAeC,EAAezJ,EAAc0J,EAAU,CACrH,GAAIrO,GAAU,OAAOA,GAAU,UAAY,CAAC,MAAM,QAAQA,CAAM,EAAG,CACjE8N,EAAI9N,EAAQiO,EAASC,EAAYC,EAAeC,EAAezJ,EAAc0J,CAAQ,EACrF,QAAS3pB,KAAOsb,EAAQ,CACtB,IAAI8I,EAAM9I,EAAOtb,CAAG,EACpB,GAAI,MAAM,QAAQokB,CAAG,GACnB,GAAIpkB,KAAOipB,EAAS,cAClB,QAASzW,EAAE,EAAGA,EAAE4R,EAAI,OAAQ5R,IAC1B8W,EAAUxU,EAAMsU,EAAKC,EAAMjF,EAAI5R,CAAC,EAAG+W,EAAU,IAAMvpB,EAAM,IAAMwS,EAAGgX,EAAYD,EAASvpB,EAAKsb,EAAQ9I,CAAC,UAEhGxS,KAAOipB,EAAS,eACzB,GAAI7E,GAAO,OAAOA,GAAO,SACvB,QAASC,KAAQD,EACfkF,EAAUxU,EAAMsU,EAAKC,EAAMjF,EAAIC,CAAI,EAAGkF,EAAU,IAAMvpB,EAAM,IAAM4pB,EAAcvF,CAAI,EAAGmF,EAAYD,EAASvpB,EAAKsb,EAAQ+I,CAAI,OAExHrkB,KAAOipB,EAAS,UAAanU,EAAK,SAAW,EAAE9U,KAAOipB,EAAS,gBACxEK,EAAUxU,EAAMsU,EAAKC,EAAMjF,EAAKmF,EAAU,IAAMvpB,EAAKwpB,EAAYD,EAASvpB,EAAKsb,CAAM,CAE7F,CACI+N,EAAK/N,EAAQiO,EAASC,EAAYC,EAAeC,EAAezJ,EAAc0J,CAAQ,CAC1F,CACA,CAGA,SAASC,EAAcjX,EAAK,CAC1B,OAAOA,EAAI,QAAQ,KAAM,IAAI,EAAE,QAAQ,MAAO,IAAI,CACpD,6DC3FA,OAAO,eAAekX,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5DA,GAAA,cAAwBA,GAAA,WAAqBA,GAAA,YAAsBA,GAAA,aAAuBA,GAAA,YAAsBA,GAAA,UAAoB,OACpI,MAAM5L,EAASnK,EAAiB,EAC1B+U,EAAQlT,GAA0B,EAClCsT,EAAW/K,GAA+B,EAE1C4L,EAAiB,IAAI,IAAI,CAC3B,OACA,SACA,UACA,YACA,YACA,gBACA,gBACA,WACA,WACA,UACA,UACA,cACA,aACA,WACA,OACA,OACJ,CAAC,EACD,SAASC,EAAUzO,EAAQ0O,EAAQ,GAAM,CACrC,OAAI,OAAO1O,GAAU,UACV,GACP0O,IAAU,GACH,CAACC,EAAO3O,CAAM,EACpB0O,EAEEE,EAAU5O,CAAM,GAAK0O,EADjB,EAEf,CACAH,GAAA,UAAoBE,EACpB,MAAMI,EAAe,IAAI,IAAI,CACzB,OACA,gBACA,mBACA,cACA,gBACJ,CAAC,EACD,SAASF,EAAO3O,EAAQ,CACpB,UAAWtb,KAAOsb,EAAQ,CACtB,GAAI6O,EAAa,IAAInqB,CAAG,EACpB,MAAO,GACX,MAAMokB,EAAM9I,EAAOtb,CAAG,EAGtB,GAFI,MAAM,QAAQokB,CAAG,GAAKA,EAAI,KAAK6F,CAAM,GAErC,OAAO7F,GAAO,UAAY6F,EAAO7F,CAAG,EACpC,MAAO,EACnB,CACI,MAAO,EACX,CACA,SAAS8F,EAAU5O,EAAQ,CACvB,IAAI8O,EAAQ,EACZ,UAAWpqB,KAAOsb,EAAQ,CACtB,GAAItb,IAAQ,OACR,MAAO,KAEX,GADAoqB,IACI,CAAAN,EAAe,IAAI9pB,CAAG,IAEtB,OAAOsb,EAAOtb,CAAG,GAAK,aAClBie,EAAO,UAAU3C,EAAOtb,CAAG,EAAIokB,GAASgG,GAASF,EAAU9F,CAAG,CAAE,EAEpEgG,IAAU,KACV,MAAO,IACnB,CACI,OAAOA,CACX,CACA,SAASC,EAAYC,EAAUC,EAAK,GAAIC,EAAW,CAC3CA,IAAc,KACdD,EAAKE,EAAYF,CAAE,GACvB,MAAMlN,EAAIiN,EAAS,MAAMC,CAAE,EAC3B,OAAOG,EAAaJ,EAAUjN,CAAC,CACnC,CACAwM,GAAA,YAAsBQ,EACtB,SAASK,EAAaJ,EAAUjN,EAAG,CAE/B,OADmBiN,EAAS,UAAUjN,CAAC,EACrB,MAAM,GAAG,EAAE,CAAC,EAAI,GACtC,CACAwM,GAAA,aAAuBa,EACvB,MAAMC,EAAsB,QAC5B,SAASF,EAAYF,EAAI,CACrB,OAAOA,EAAKA,EAAG,QAAQI,EAAqB,EAAE,EAAI,EACtD,CACAd,GAAA,YAAsBY,EACtB,SAASG,EAAWN,EAAUO,EAAQN,EAAI,CACtC,OAAAA,EAAKE,EAAYF,CAAE,EACZD,EAAS,QAAQO,EAAQN,CAAE,CACtC,CACAV,GAAA,WAAqBe,EACrB,MAAME,EAAS,wBACf,SAASC,EAAczP,EAAQuP,EAAQ,CACnC,GAAI,OAAOvP,GAAU,UACjB,MAAO,CAAE,EACb,KAAM,CAAE,SAAA0P,EAAU,YAAAC,CAAa,EAAG,KAAK,KACjCC,EAAQT,EAAYnP,EAAO0P,CAAQ,GAAKH,CAAM,EAC9CM,EAAU,CAAE,GAAID,CAAO,EACvBE,EAAaf,EAAYY,EAAaC,EAAO,EAAK,EAClDG,EAAY,CAAE,EACdC,EAAa,IAAI,IACvB,OAAArC,EAAS3N,EAAQ,CAAE,QAAS,EAAI,EAAI,CAAC8I,EAAKmF,EAASlX,EAAGoX,IAAkB,CACpE,GAAIA,IAAkB,OAClB,OACJ,MAAM8B,EAAWH,EAAa7B,EAC9B,IAAIiC,GAAcL,EAAQ1B,CAAa,EACnC,OAAOrF,EAAI4G,CAAQ,GAAK,WACxBQ,GAAcC,GAAO,KAAK,KAAMrH,EAAI4G,CAAQ,CAAC,GACjDU,GAAU,KAAK,KAAMtH,EAAI,OAAO,EAChCsH,GAAU,KAAK,KAAMtH,EAAI,cAAc,EACvC+G,EAAQ5B,CAAO,EAAIiC,GACnB,SAASC,GAAOE,EAAK,CAEjB,MAAMC,GAAW,KAAK,KAAK,YAAY,QAEvC,GADAD,EAAMlB,EAAYe,GAAcI,GAASJ,GAAaG,CAAG,EAAIA,CAAG,EAC5DL,EAAW,IAAIK,CAAG,EAClB,MAAME,EAASF,CAAG,EACtBL,EAAW,IAAIK,CAAG,EAClB,IAAIG,EAAW,KAAK,KAAKH,CAAG,EAC5B,OAAI,OAAOG,GAAY,WACnBA,EAAW,KAAK,KAAKA,CAAQ,GAC7B,OAAOA,GAAY,SACnBC,EAAiB3H,EAAK0H,EAAS,OAAQH,CAAG,EAErCA,IAAQlB,EAAYc,CAAQ,IAC7BI,EAAI,CAAC,IAAM,KACXI,EAAiB3H,EAAKiH,EAAUM,CAAG,EAAGA,CAAG,EACzCN,EAAUM,CAAG,EAAIvH,GAGjB,KAAK,KAAKuH,CAAG,EAAIJ,GAGlBI,CACnB,CACQ,SAASD,GAAUM,EAAQ,CACvB,GAAI,OAAOA,GAAU,SAAU,CAC3B,GAAI,CAAClB,EAAO,KAAKkB,CAAM,EACnB,MAAM,IAAI,MAAM,mBAAmBA,CAAM,GAAG,EAChDP,GAAO,KAAK,KAAM,IAAIO,CAAM,EAAE,CAC9C,CACA,CACA,CAAK,EACMX,EACP,SAASU,EAAiBE,EAAMC,EAAMP,EAAK,CACvC,GAAIO,IAAS,QAAa,CAACrD,EAAMoD,EAAMC,CAAI,EACvC,MAAML,EAASF,CAAG,CAC9B,CACI,SAASE,EAASF,EAAK,CACnB,OAAO,IAAI,MAAM,cAAcA,CAAG,oCAAoC,CAC9E,CACA,CACA,OAAA9B,GAAA,cAAwBkB,+CCxJxB,OAAO,eAAetgB,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5DA,GAAA,QAAkBA,GAAkB,WAAGA,GAA4B,qBAAG,OACtE,MAAM0hB,EAAerY,GAAuB,EACtCsY,EAAazW,GAAqB,EAClCiM,EAAkB1D,GAA0B,EAC5CmO,EAAa1W,GAAqB,EAClC2W,EAAazK,GAAqB,EAClC0K,EAAYzK,GAAoB,EAChC0K,EAAcC,GAAsB,EACpCxR,EAAYyR,EAAqB,EACjC1O,EAAU2O,GAAmB,EAC7BC,EAAYC,GAAqB,EACjC5O,EAAS6O,EAAkB,EAC3BvM,EAAWwM,GAAoB,EAErC,SAASC,EAAqB3R,EAAI,CAC9B,GAAI4R,EAAY5R,CAAE,IACd6R,EAAc7R,CAAE,EACZ8R,EAAkB9R,CAAE,GAAG,CACvB+R,EAAiB/R,CAAE,EACnB,MACZ,CAEIgS,EAAiBhS,EAAI,OAAU8Q,EAAa,sBAAsB9Q,CAAE,CAAC,CACzE,CACA5Q,GAAA,qBAA+BuiB,EAC/B,SAASK,EAAiB,CAAE,IAAAtQ,EAAK,aAAAsC,EAAc,OAAA/D,EAAQ,UAAAgE,EAAW,KAAAxK,CAAM,EAAEiF,EAAM,CACxEjF,EAAK,KAAK,IACViI,EAAI,KAAKsC,KAAkBpE,EAAU,KAAM+C,EAAQ,QAAQ,IAAI,KAAKA,EAAQ,QAAQ,MAAM,GAAIsB,EAAU,OAAQ,IAAM,CAClHvC,EAAI,QAAS9B,EAAU,mBAAoBqS,EAAchS,EAAQxG,CAAI,CAAC,EAAE,EACxEyY,EAAqBxQ,EAAKjI,CAAI,EAC9BiI,EAAI,KAAKhD,CAAI,CACzB,CAAS,EAGDgD,EAAI,KAAKsC,KAAkBpE,EAAU,KAAM+C,EAAQ,QAAQ,IAAI,KAAKwP,EAAkB1Y,CAAI,CAAC,GAAIwK,EAAU,OAAQ,IAAMvC,EAAI,KAAKuQ,EAAchS,EAAQxG,CAAI,CAAC,EAAE,KAAKiF,CAAI,CAAC,CAE/K,CACA,SAASyT,EAAkB1Y,EAAM,CAC7B,SAAWmG,EAAU,MAAO+C,EAAQ,QAAQ,YAAY,QAAQA,EAAQ,QAAQ,UAAU,KAAKA,EAAQ,QAAQ,kBAAkB,KAAKA,EAAQ,QAAQ,QAAQ,IAAIA,EAAQ,QAAQ,IAAI,GAAGlJ,EAAK,cAAiBmG,EAAU,OAAQ+C,EAAQ,QAAQ,cAAc,MAAQ/C,EAAU,GAAG,MACxR,CACA,SAASsS,EAAqBxQ,EAAKjI,EAAM,CACrCiI,EAAI,GAAGiB,EAAQ,QAAQ,OAAQ,IAAM,CACjCjB,EAAI,IAAIiB,EAAQ,QAAQ,gBAAkB/C,EAAU,KAAM+C,EAAQ,QAAQ,MAAM,IAAIA,EAAQ,QAAQ,YAAY,EAAE,EAClHjB,EAAI,IAAIiB,EAAQ,QAAQ,cAAgB/C,EAAU,KAAM+C,EAAQ,QAAQ,MAAM,IAAIA,EAAQ,QAAQ,UAAU,EAAE,EAC9GjB,EAAI,IAAIiB,EAAQ,QAAQ,sBAAwB/C,EAAU,KAAM+C,EAAQ,QAAQ,MAAM,IAAIA,EAAQ,QAAQ,kBAAkB,EAAE,EAC9HjB,EAAI,IAAIiB,EAAQ,QAAQ,YAAc/C,EAAU,KAAM+C,EAAQ,QAAQ,MAAM,IAAIA,EAAQ,QAAQ,QAAQ,EAAE,EACtGlJ,EAAK,YACLiI,EAAI,IAAIiB,EAAQ,QAAQ,kBAAoB/C,EAAU,KAAM+C,EAAQ,QAAQ,MAAM,IAAIA,EAAQ,QAAQ,cAAc,EAAE,CAClI,EAAO,IAAM,CACLjB,EAAI,IAAIiB,EAAQ,QAAQ,gBAAkB/C,EAAU,MAAO,EAC3D8B,EAAI,IAAIiB,EAAQ,QAAQ,cAAgB/C,EAAU,aAAc,EAChE8B,EAAI,IAAIiB,EAAQ,QAAQ,sBAAwB/C,EAAU,aAAc,EACxE8B,EAAI,IAAIiB,EAAQ,QAAQ,SAAUA,EAAQ,QAAQ,IAAI,EAClDlJ,EAAK,YACLiI,EAAI,IAAIiB,EAAQ,QAAQ,kBAAoB/C,EAAU,MAAO,CACzE,CAAK,CACL,CACA,SAASmS,EAAiB/R,EAAI,CAC1B,KAAM,CAAE,OAAAC,EAAQ,KAAAxG,EAAM,IAAAiI,CAAK,EAAG1B,EAC9BgS,EAAiBhS,EAAI,IAAM,CACnBvG,EAAK,UAAYwG,EAAO,UACxBmS,EAAepS,CAAE,EACrBqS,EAAerS,CAAE,EACjB0B,EAAI,IAAIiB,EAAQ,QAAQ,QAAS,IAAI,EACrCjB,EAAI,IAAIiB,EAAQ,QAAQ,OAAQ,CAAC,EAC7BlJ,EAAK,aACL6Y,EAAetS,CAAE,EACrBuS,EAAgBvS,CAAE,EAClBwS,EAAcxS,CAAE,CACxB,CAAK,CAEL,CACA,SAASsS,EAAetS,EAAI,CAExB,KAAM,CAAE,IAAA0B,EAAK,aAAAsC,CAAY,EAAKhE,EAC9BA,EAAG,UAAY0B,EAAI,MAAM,eAAiB9B,EAAU,KAAMoE,CAAY,YAAY,EAClFtC,EAAI,MAAO9B,EAAU,KAAMI,EAAG,SAAS,gBAAiB,IAAM0B,EAAI,UAAW9B,EAAU,KAAMI,EAAG,SAAS,YAAcJ,EAAU,aAAc,CAAC,EAChJ8B,EAAI,MAAO9B,EAAU,KAAMI,EAAG,SAAS,gBAAiB,IAAM0B,EAAI,UAAW9B,EAAU,KAAMI,EAAG,SAAS,YAAcJ,EAAU,aAAc,CAAC,CACpJ,CACA,SAASqS,EAAchS,EAAQxG,EAAM,CACjC,MAAMoW,EAAQ,OAAO5P,GAAU,UAAYA,EAAOxG,EAAK,QAAQ,EAC/D,OAAOoW,IAAUpW,EAAK,KAAK,QAAUA,EAAK,KAAK,YAAemG,EAAU,mBAAoBiQ,CAAK,MAAQjQ,EAAU,GACvH,CAEA,SAAS6S,EAAczS,EAAIuF,EAAO,CAC9B,GAAIqM,EAAY5R,CAAE,IACd6R,EAAc7R,CAAE,EACZ8R,EAAkB9R,CAAE,GAAG,CACvB0S,EAAiB1S,EAAIuF,CAAK,EAC1B,MACZ,IAEQuL,EAAa,mBAAmB9Q,EAAIuF,CAAK,CACjD,CACA,SAASuM,EAAkB,CAAE,OAAA7R,EAAQ,KAAAG,GAAQ,CACzC,GAAI,OAAOH,GAAU,UACjB,MAAO,CAACA,EACZ,UAAWtb,KAAOsb,EACd,GAAIG,EAAK,MAAM,IAAIzb,CAAG,EAClB,MAAO,GACf,MAAO,EACX,CACA,SAASitB,EAAY5R,EAAI,CACrB,OAAO,OAAOA,EAAG,QAAU,SAC/B,CACA,SAAS0S,EAAiB1S,EAAIuF,EAAO,CACjC,KAAM,CAAE,OAAAtF,EAAQ,IAAAyB,EAAK,KAAAjI,CAAM,EAAGuG,EAC1BvG,EAAK,UAAYwG,EAAO,UACxBmS,EAAepS,CAAE,EACrB2S,EAAc3S,CAAE,EAChB4S,EAAiB5S,CAAE,EACnB,MAAM2D,EAAYjC,EAAI,MAAM,QAASiB,EAAQ,QAAQ,MAAM,EAC3D4P,EAAgBvS,EAAI2D,CAAS,EAE7BjC,EAAI,IAAI6D,KAAW3F,EAAU,KAAM+D,CAAS,QAAQhB,EAAQ,QAAQ,MAAM,EAAE,CAChF,CACA,SAASkP,EAAc7R,EAAI,IACnB4C,EAAO,mBAAmB5C,CAAE,EAChC6S,EAAqB7S,CAAE,CAC3B,CACA,SAASuS,EAAgBvS,EAAI2D,EAAW,CACpC,GAAI3D,EAAG,KAAK,IACR,OAAO8S,GAAe9S,EAAI,GAAI,GAAO2D,CAAS,EAClD,MAAMiD,KAAYmK,EAAW,gBAAgB/Q,EAAG,MAAM,EAChD+S,KAAmBhC,EAAW,wBAAwB/Q,EAAI4G,CAAK,EACrEkM,GAAe9S,EAAI4G,EAAO,CAACmM,EAAcpP,CAAS,CACtD,CACA,SAASkP,EAAqB7S,EAAI,CAC9B,KAAM,CAAE,OAAAC,EAAQ,cAAA0E,EAAe,KAAAlL,EAAM,KAAA2G,CAAM,EAAGJ,EAC1CC,EAAO,MAAQxG,EAAK,0BAA6BmJ,EAAO,sBAAsB3C,EAAQG,EAAK,KAAK,GAChGA,EAAK,OAAO,KAAK,6CAA6CuE,CAAa,GAAG,CAEtF,CACA,SAAS0N,EAAerS,EAAI,CACxB,KAAM,CAAE,OAAAC,EAAQ,KAAAxG,CAAI,EAAKuG,EACrBC,EAAO,UAAY,QAAaxG,EAAK,aAAeA,EAAK,iBACrDmJ,EAAO,iBAAiB5C,EAAI,uCAAuC,CAE/E,CACA,SAAS2S,EAAc3S,EAAI,CACvB,MAAM6P,EAAQ7P,EAAG,OAAOA,EAAG,KAAK,QAAQ,EACpC6P,IACA7P,EAAG,UAAauR,EAAU,YAAYvR,EAAG,KAAK,YAAaA,EAAG,OAAQ6P,CAAK,EACnF,CACA,SAAS+C,EAAiB5S,EAAI,CAC1B,GAAIA,EAAG,OAAO,QAAU,CAACA,EAAG,UAAU,OAClC,MAAM,IAAI,MAAM,6BAA6B,CACrD,CACA,SAASoS,EAAe,CAAE,IAAA1Q,EAAK,UAAAuC,EAAW,OAAAhE,EAAQ,cAAA0E,EAAe,KAAAlL,GAAQ,CACrE,MAAMgJ,EAAMxC,EAAO,SACnB,GAAIxG,EAAK,WAAa,GAClBiI,EAAI,QAAS9B,EAAU,KAAM+C,EAAQ,QAAQ,IAAI,eAAeF,CAAG,GAAG,UAEjE,OAAOhJ,EAAK,UAAY,WAAY,CACzC,MAAMkH,MAAiBf,EAAU,OAAQ+E,CAAa,YAChDqO,GAAWtR,EAAI,WAAW,OAAQ,CAAE,IAAKuC,EAAU,KAAM,EAC/DvC,EAAI,QAAS9B,EAAU,KAAM+C,EAAQ,QAAQ,IAAI,kBAAkBF,CAAG,KAAK9B,EAAU,KAAKqS,EAAQ,UAAU,CACpH,CACA,CACA,SAASR,EAAcxS,EAAI,CACvB,KAAM,CAAE,IAAA0B,EAAK,UAAAuC,EAAW,aAAAD,EAAc,gBAAAiP,EAAiB,KAAAxZ,CAAI,EAAKuG,EAC5DiE,EAAU,OAEVvC,EAAI,MAAO9B,EAAU,KAAM+C,EAAQ,QAAQ,MAAM,SAAU,IAAMjB,EAAI,OAAOiB,EAAQ,QAAQ,IAAI,EAAG,IAAMjB,EAAI,SAAU9B,EAAU,SAAUqT,CAAe,IAAItQ,EAAQ,QAAQ,OAAO,GAAG,CAAC,GAGzLjB,EAAI,UAAW9B,EAAU,KAAMoE,CAAY,UAAWrB,EAAQ,QAAQ,OAAO,EACzElJ,EAAK,aACLyZ,GAAgBlT,CAAE,EACtB0B,EAAI,UAAW9B,EAAU,KAAM+C,EAAQ,QAAQ,MAAM,QAAQ,EAErE,CACA,SAASuQ,GAAgB,CAAE,IAAAxR,EAAK,UAAAyR,EAAW,MAAApR,EAAO,MAAA5C,CAAK,EAAI,CACnD4C,aAAiBnC,EAAU,MAC3B8B,EAAI,UAAW9B,EAAU,KAAMuT,CAAS,SAAUpR,CAAK,EACvD5C,aAAiBS,EAAU,MAC3B8B,EAAI,UAAW9B,EAAU,KAAMuT,CAAS,SAAUhU,CAAK,CAC/D,CACA,SAAS2T,GAAe9S,EAAI4G,EAAOwM,EAAYzP,EAAW,CACtD,KAAM,CAAE,IAAAjC,EAAK,OAAAzB,EAAQ,KAAA3P,GAAM,UAAA8S,GAAW,KAAA3J,GAAM,KAAA2G,EAAI,EAAKJ,EAC/C,CAAE,MAAAQ,EAAK,EAAKJ,GAClB,GAAIH,EAAO,OAASxG,GAAK,uBAAyB,IAAKmJ,EAAO,sBAAsB3C,EAAQO,EAAK,GAAI,CACjGkB,EAAI,MAAM,IAAM2R,EAAYrT,EAAI,OAAQQ,GAAM,IAAI,KAAK,UAAU,CAAC,EAClE,MACR,CACS/G,GAAK,KACN6Z,EAAiBtT,EAAI4G,CAAK,EAC9BlF,EAAI,MAAM,IAAM,CACZ,UAAWsE,MAASxF,GAAM,MACtB+S,GAAcvN,EAAK,EACvBuN,GAAc/S,GAAM,IAAI,CAChC,CAAK,EACD,SAAS+S,GAAcvN,GAAO,IACjBO,EAAgB,gBAAgBtG,EAAQ+F,EAAK,IAElDA,GAAM,MACNtE,EAAI,MAAOsP,EAAW,eAAehL,GAAM,KAAM1V,GAAMmJ,GAAK,aAAa,CAAC,EAC1E+Z,GAAgBxT,EAAIgG,EAAK,EACrBY,EAAM,SAAW,GAAKA,EAAM,CAAC,IAAMZ,GAAM,MAAQoN,IACjD1R,EAAI,KAAM,KACNsP,EAAW,iBAAiBhR,CAAE,GAEtC0B,EAAI,MAAO,GAGX8R,GAAgBxT,EAAIgG,EAAK,EAGxB5C,IACD1B,EAAI,MAAO9B,EAAU,KAAM+C,EAAQ,QAAQ,MAAM,QAAQgB,GAAa,CAAC,EAAE,EACrF,CACA,CACA,SAAS6P,GAAgBxT,EAAIgG,EAAO,CAChC,KAAM,CAAE,IAAAtE,EAAK,OAAAzB,EAAQ,KAAM,CAAE,YAAAwT,CAAa,CAAA,EAAMzT,EAC5CyT,MACIxC,EAAW,gBAAgBjR,EAAIgG,EAAM,IAAI,EACjDtE,EAAI,MAAM,IAAM,CACZ,UAAWwE,KAAQF,EAAM,SACbO,EAAgB,eAAetG,EAAQiG,CAAI,GAC/CmN,EAAYrT,EAAIkG,EAAK,QAASA,EAAK,WAAYF,EAAM,IAAI,CAGzE,CAAK,CACL,CACA,SAASsN,EAAiBtT,EAAI4G,EAAO,CAC7B5G,EAAG,UAAU,MAAQ,CAACA,EAAG,KAAK,cAElC0T,GAAkB1T,EAAI4G,CAAK,EACtB5G,EAAG,KAAK,iBACT2T,EAAmB3T,EAAI4G,CAAK,EAChCgN,EAAkB5T,EAAIA,EAAG,SAAS,EACtC,CACA,SAAS0T,GAAkB1T,EAAI4G,EAAO,CAClC,GAAKA,EAAM,OAEX,IAAI,CAAC5G,EAAG,UAAU,OAAQ,CACtBA,EAAG,UAAY4G,EACf,MACR,CACIA,EAAM,QAASa,GAAM,CACZoM,EAAa7T,EAAG,UAAWyH,CAAC,GAC7BqM,EAAiB9T,EAAI,SAASyH,CAAC,6BAA6BzH,EAAG,UAAU,KAAK,GAAG,CAAC,GAAG,CAEjG,CAAK,EACD+T,EAAkB/T,EAAI4G,CAAK,EAC/B,CACA,SAAS+M,EAAmB3T,EAAI8G,EAAI,CAC5BA,EAAG,OAAS,GAAK,EAAEA,EAAG,SAAW,GAAKA,EAAG,SAAS,MAAM,IACxDgN,EAAiB9T,EAAI,iDAAiD,CAE9E,CACA,SAAS4T,EAAkB5T,EAAI8G,EAAI,CAC/B,MAAMzG,EAAQL,EAAG,KAAK,MAAM,IAC5B,UAAWY,KAAWP,EAAO,CACzB,MAAM6F,EAAO7F,EAAMO,CAAO,EAC1B,GAAI,OAAOsF,GAAQ,aAAgBK,EAAgB,eAAevG,EAAG,OAAQkG,CAAI,EAAG,CAChF,KAAM,CAAE,KAAAH,GAASG,EAAK,WAClBH,EAAK,QAAU,CAACA,EAAK,KAAM0B,IAAMuM,EAAkBlN,EAAIW,EAAC,CAAC,GACzDqM,EAAiB9T,EAAI,iBAAiB+F,EAAK,KAAK,GAAG,CAAC,kBAAkBnF,CAAO,GAAG,CAEhG,CACA,CACA,CACA,SAASoT,EAAkBC,EAAOC,EAAM,CACpC,OAAOD,EAAM,SAASC,CAAI,GAAMA,IAAS,UAAYD,EAAM,SAAS,SAAS,CACjF,CACA,SAASJ,EAAa/M,EAAIW,EAAG,CACzB,OAAOX,EAAG,SAASW,CAAC,GAAMA,IAAM,WAAaX,EAAG,SAAS,QAAQ,CACrE,CACA,SAASiN,EAAkB/T,EAAImU,EAAW,CACtC,MAAMrN,EAAK,CAAE,EACb,UAAWW,KAAKzH,EAAG,UACX6T,EAAaM,EAAW1M,CAAC,EACzBX,EAAG,KAAKW,CAAC,EACJ0M,EAAU,SAAS,SAAS,GAAK1M,IAAM,UAC5CX,EAAG,KAAK,SAAS,EAEzB9G,EAAG,UAAY8G,CACnB,CACA,SAASgN,EAAiB9T,EAAIyC,EAAK,CAC/B,MAAM9B,EAAaX,EAAG,UAAU,OAASA,EAAG,cAC5CyC,GAAO,QAAQ9B,CAAU,qBACrBiC,EAAO,iBAAiB5C,EAAIyC,EAAKzC,EAAG,KAAK,WAAW,CAC5D,CACA,MAAMoU,CAAW,CACb,YAAYpU,EAAI5F,EAAKwG,EAAS,CAc1B,MAbIsQ,EAAU,sBAAsBlR,EAAI5F,EAAKwG,CAAO,EACpD,KAAK,IAAMZ,EAAG,IACd,KAAK,UAAYA,EAAG,UACpB,KAAK,QAAUY,EACf,KAAK,KAAOZ,EAAG,KACf,KAAK,OAASA,EAAG,OAAOY,CAAO,EAC/B,KAAK,MAAQxG,EAAI,OAAS4F,EAAG,KAAK,OAAS,KAAK,QAAU,KAAK,OAAO,MACtE,KAAK,eAAkB4C,EAAO,gBAAgB5C,EAAI,KAAK,OAAQY,EAAS,KAAK,KAAK,EAClF,KAAK,WAAaxG,EAAI,WACtB,KAAK,aAAe4F,EAAG,OACvB,KAAK,OAAS,CAAE,EAChB,KAAK,GAAKA,EACV,KAAK,IAAM5F,EACP,KAAK,MACL,KAAK,WAAa4F,EAAG,IAAI,MAAM,UAAWqU,EAAQ,KAAK,MAAOrU,CAAE,CAAC,UAGjE,KAAK,WAAa,KAAK,YACnB,IAAKkR,EAAU,iBAAiB,KAAK,OAAQ9W,EAAI,WAAYA,EAAI,cAAc,EAC/E,MAAM,IAAI,MAAM,GAAGwG,CAAO,kBAAkB,KAAK,UAAUxG,EAAI,UAAU,CAAC,EAAE,GAGhF,SAAUA,EAAMA,EAAI,YAAcA,EAAI,SAAW,MACjD,KAAK,UAAY4F,EAAG,IAAI,MAAM,QAAS2C,EAAQ,QAAQ,MAAM,EAEzE,CACI,OAAOpG,EAAW+X,EAAeC,EAAY,CACzC,KAAK,cAAe3U,EAAU,KAAKrD,CAAS,EAAG+X,EAAeC,CAAU,CAChF,CACI,WAAWhY,EAAW+X,EAAeC,EAAY,CAC7C,KAAK,IAAI,GAAGhY,CAAS,EACjBgY,EACAA,EAAY,EAEZ,KAAK,MAAO,EACZD,GACA,KAAK,IAAI,KAAM,EACfA,EAAe,EACX,KAAK,WACL,KAAK,IAAI,MAAO,GAGhB,KAAK,UACL,KAAK,IAAI,MAAO,EAEhB,KAAK,IAAI,KAAM,CAE/B,CACI,KAAK/X,EAAWgY,EAAY,CACxB,KAAK,cAAe3U,EAAU,KAAKrD,CAAS,EAAG,OAAWgY,CAAU,CAC5E,CACI,KAAKhY,EAAW,CACZ,GAAIA,IAAc,OAAW,CACzB,KAAK,MAAO,EACP,KAAK,WACN,KAAK,IAAI,GAAG,EAAK,EACrB,MACZ,CACQ,KAAK,IAAI,GAAGA,CAAS,EACrB,KAAK,MAAO,EACR,KAAK,UACL,KAAK,IAAI,MAAO,EAEhB,KAAK,IAAI,KAAM,CAC3B,CACI,UAAUA,EAAW,CACjB,GAAI,CAAC,KAAK,MACN,OAAO,KAAK,KAAKA,CAAS,EAC9B,KAAM,CAAE,WAAAkM,CAAU,EAAK,KACvB,KAAK,QAAS7I,EAAU,KAAM6I,CAAU,yBAA0B7I,EAAU,IAAI,KAAK,aAAc,EAAErD,CAAS,CAAC,GAAG,CAC1H,CACI,MAAMiY,EAAQC,EAAaxR,EAAY,CACnC,GAAIwR,EAAa,CACb,KAAK,UAAUA,CAAW,EAC1B,KAAK,OAAOD,EAAQvR,CAAU,EAC9B,KAAK,UAAU,EAAE,EACjB,MACZ,CACQ,KAAK,OAAOuR,EAAQvR,CAAU,CACtC,CACI,OAAOuR,EAAQvR,EAAY,EAEtBuR,EAAStP,EAAS,iBAAmBA,EAAS,aAAa,KAAM,KAAK,IAAI,MAAOjC,CAAU,CACpG,CACI,YAAa,IACLiC,EAAS,aAAa,KAAM,KAAK,IAAI,YAAcA,EAAS,iBAAiB,CACzF,CACI,OAAQ,CACJ,GAAI,KAAK,YAAc,OACnB,MAAM,IAAI,MAAM,yCAAyC,KACzDA,EAAS,kBAAkB,KAAK,IAAK,KAAK,SAAS,CAC/D,CACI,GAAG1I,EAAM,CACA,KAAK,WACN,KAAK,IAAI,GAAGA,CAAI,CAC5B,CACI,UAAU8B,EAAKoW,EAAQ,CACfA,EACA,OAAO,OAAO,KAAK,OAAQpW,CAAG,EAE9B,KAAK,OAASA,CAC1B,CACI,WAAWiH,EAAOoP,EAAWC,EAAahV,EAAU,IAAK,CACrD,KAAK,IAAI,MAAM,IAAM,CACjB,KAAK,WAAW2F,EAAOqP,CAAU,EACjCD,EAAW,CACvB,CAAS,CACT,CACI,WAAWpP,EAAQ3F,EAAU,IAAKgV,EAAahV,EAAU,IAAK,CAC1D,GAAI,CAAC,KAAK,MACN,OACJ,KAAM,CAAE,IAAA8B,EAAK,WAAA+G,EAAY,WAAA3F,EAAY,IAAA1I,EAAK,EAAG,KAC7CsH,EAAI,MAAO9B,EAAU,OAAQA,EAAU,KAAM6I,CAAU,iBAAkBmM,CAAU,CAAC,EAChFrP,IAAU3F,EAAU,KACpB8B,EAAI,OAAO6D,EAAO,EAAI,GACtBzC,EAAW,QAAU1I,GAAI,kBACzBsH,EAAI,OAAO,KAAK,cAAc,EAC9B,KAAK,WAAY,EACb6D,IAAU3F,EAAU,KACpB8B,EAAI,OAAO6D,EAAO,EAAK,GAE/B7D,EAAI,KAAM,CAClB,CACI,cAAe,CACX,KAAM,CAAE,IAAAA,EAAK,WAAA+G,EAAY,WAAA3F,EAAY,IAAA1I,EAAK,GAAA4F,CAAE,EAAK,KACjD,SAAWJ,EAAU,IAAIiV,GAAgB,EAAEC,GAAkB,CAAE,EAC/D,SAASD,IAAiB,CACtB,GAAI/R,EAAW,OAAQ,CAEnB,GAAI,EAAE2F,aAAsB7I,EAAU,MAClC,MAAM,IAAI,MAAM,0BAA0B,EAC9C,MAAM4M,GAAK,MAAM,QAAQ1J,CAAU,EAAIA,EAAa,CAACA,CAAU,EAC/D,SAAWlD,EAAU,QAAUoR,EAAW,gBAAgBxE,GAAI/D,EAAYzI,EAAG,KAAK,cAAegR,EAAW,SAAS,KAAK,CAAC,EAC3I,CACY,OAAOpR,EAAU,GAC7B,CACQ,SAASkV,IAAqB,CAC1B,GAAI1a,EAAI,eAAgB,CACpB,MAAM2a,GAAoBrT,EAAI,WAAW,gBAAiB,CAAE,IAAKtH,EAAI,cAAc,CAAE,EACrF,SAAWwF,EAAU,MAAOmV,EAAiB,IAAItM,CAAU,GAC3E,CACY,OAAO7I,EAAU,GAC7B,CACA,CACI,UAAUoV,EAAMzP,EAAO,CACnB,MAAMoH,KAAgBwE,EAAY,cAAc,KAAK,GAAI6D,CAAI,KACzD7D,EAAY,qBAAqBxE,EAAW,KAAK,GAAIqI,CAAI,KACzD7D,EAAY,qBAAqBxE,EAAWqI,CAAI,EACpD,MAAMC,EAAc,CAAE,GAAG,KAAK,GAAI,GAAGtI,EAAW,MAAO,OAAW,MAAO,MAAW,EACpF,OAAA8F,EAAcwC,EAAa1P,CAAK,EACzB0P,CACf,CACI,eAAeC,EAAWvT,EAAQ,CAC9B,KAAM,CAAE,GAAA3B,EAAI,IAAA0B,CAAG,EAAK,KACf1B,EAAG,KAAK,cAETA,EAAG,QAAU,IAAQkV,EAAU,QAAU,SACzClV,EAAG,MAAQ4C,EAAO,eAAe,MAAMlB,EAAKwT,EAAU,MAAOlV,EAAG,MAAO2B,CAAM,GAE7E3B,EAAG,QAAU,IAAQkV,EAAU,QAAU,SACzClV,EAAG,MAAQ4C,EAAO,eAAe,MAAMlB,EAAKwT,EAAU,MAAOlV,EAAG,MAAO2B,CAAM,GAEzF,CACI,oBAAoBuT,EAAW3P,EAAO,CAClC,KAAM,CAAE,GAAAvF,EAAI,IAAA0B,CAAG,EAAK,KACpB,GAAI1B,EAAG,KAAK,cAAgBA,EAAG,QAAU,IAAQA,EAAG,QAAU,IAC1D,OAAA0B,EAAI,GAAG6D,EAAO,IAAM,KAAK,eAAe2P,EAAWtV,EAAU,IAAI,CAAC,EAC3D,EAEnB,CACA,CACAxQ,GAAA,WAAqBglB,EACrB,SAASf,EAAYrT,EAAIY,EAASxG,EAAK+a,EAAU,CAC7C,MAAMnS,EAAM,IAAIoR,EAAWpU,EAAI5F,EAAKwG,CAAO,EACvC,SAAUxG,EACVA,EAAI,KAAK4I,EAAKmS,CAAQ,EAEjBnS,EAAI,OAAS5I,EAAI,YAClB8W,EAAU,iBAAiBlO,EAAK5I,CAAG,EAElC,UAAWA,KACZ8W,EAAU,kBAAkBlO,EAAK5I,CAAG,GAEnCA,EAAI,SAAWA,EAAI,cACpB8W,EAAU,iBAAiBlO,EAAK5I,CAAG,CAE/C,CACA,MAAMgb,EAAe,sBACfC,EAAwB,mCAC9B,SAAShB,EAAQxT,EAAO,CAAE,UAAAyU,EAAW,UAAAC,EAAW,YAAAvI,CAAW,EAAI,CAC3D,IAAIwI,EACAllB,EACJ,GAAIuQ,IAAU,GACV,OAAO8B,EAAQ,QAAQ,SAC3B,GAAI9B,EAAM,CAAC,IAAM,IAAK,CAClB,GAAI,CAACuU,EAAa,KAAKvU,CAAK,EACxB,MAAM,IAAI,MAAM,yBAAyBA,CAAK,EAAE,EACpD2U,EAAc3U,EACdvQ,EAAOqS,EAAQ,QAAQ,QAC/B,KACS,CACD,MAAM8S,GAAUJ,EAAsB,KAAKxU,CAAK,EAChD,GAAI,CAAC4U,GACD,MAAM,IAAI,MAAM,yBAAyB5U,CAAK,EAAE,EACpD,MAAM6U,GAAK,CAACD,GAAQ,CAAC,EAErB,GADAD,EAAcC,GAAQ,CAAC,EACnBD,IAAgB,IAAK,CACrB,GAAIE,IAAMJ,EACN,MAAM,IAAI,MAAMK,GAAS,iBAAkBD,EAAE,CAAC,EAClD,OAAO1I,EAAYsI,EAAYI,EAAE,CAC7C,CACQ,GAAIA,GAAKJ,EACL,MAAM,IAAI,MAAMK,GAAS,OAAQD,EAAE,CAAC,EAExC,GADAplB,EAAOilB,EAAUD,EAAYI,EAAE,EAC3B,CAACF,EACD,OAAOllB,CACnB,CACI,IAAIiH,GAAOjH,EACX,MAAMslB,GAAWJ,EAAY,MAAM,GAAG,EACtC,UAAWK,MAAWD,GACdC,KACAvlB,KAAWsP,EAAU,KAAMtP,CAAI,MAAOsP,EAAU,gBAAiBgD,EAAO,qBAAqBiT,EAAO,CAAC,CAAC,GACtGte,MAAWqI,EAAU,KAAMrI,EAAI,OAAOjH,CAAI,IAGlD,OAAOiH,GACP,SAASoe,GAASG,GAAaJ,GAAI,CAC/B,MAAO,iBAAiBI,EAAW,IAAIJ,EAAE,gCAAgCJ,CAAS,EAC1F,CACA,CACA,OAAAlmB,GAAA,QAAkBilB,qDCrgBlB,OAAO,eAAe0B,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAM9C,UAAwB,KAAM,CAChC,YAAY5G,EAAQ,CAChB,MAAM,mBAAmB,EACzB,KAAK,OAASA,EACd,KAAK,IAAM,KAAK,WAAa,EACrC,CACA,CACA,OAAA0J,GAAA,QAAkB9C,qDCRlB,OAAO,eAAe+C,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAMzE,EAAY9Y,GAAoB,EACtC,MAAMwd,UAAwB,KAAM,CAChC,YAAYhH,EAAUO,EAAQc,EAAK7N,EAAK,CACpC,MAAMA,GAAO,2BAA2B6N,CAAG,YAAYd,CAAM,EAAE,EAC/D,KAAK,cAAiB+B,EAAU,YAAYtC,EAAUO,EAAQc,CAAG,EACjE,KAAK,iBAAoBiB,EAAU,gBAAiBA,EAAU,aAAatC,EAAU,KAAK,UAAU,CAAC,CAC7G,CACA,CACA,OAAA+G,GAAA,QAAkBC,qDCTlB,OAAO,eAAeC,GAAS,aAAc,CAAE,MAAO,GAAM,EACvCA,GAAA,cAAGA,GAA0B,mBAAGA,GAAkB,WAAGA,iBAAwBA,GAAA,UAAoB,OACtH,MAAMtW,EAAYnH,EAAoB,EAChC0d,EAAqB7b,GAAsC,EAC3DqI,EAAUE,GAAkB,EAC5B0O,EAAY/K,GAAoB,EAChC5D,EAAS6D,EAAiB,EAC1B2P,EAAahF,GAAqB,EACxC,MAAMiF,CAAU,CACZ,YAAYC,EAAK,CACb,IAAI9kB,EACJ,KAAK,KAAO,CAAE,EACd,KAAK,eAAiB,CAAE,EACxB,IAAIyO,EACA,OAAOqW,EAAI,QAAU,WACrBrW,EAASqW,EAAI,QACjB,KAAK,OAASA,EAAI,OAClB,KAAK,SAAWA,EAAI,SACpB,KAAK,KAAOA,EAAI,MAAQ,KACxB,KAAK,QAAU9kB,EAAK8kB,EAAI,UAAY,MAAQ9kB,IAAO,OAASA,KAAS+f,EAAU,aAAatR,GAAW,KAA4B,OAASA,EAAOqW,EAAI,UAAY,KAAK,CAAC,EACzK,KAAK,WAAaA,EAAI,WACtB,KAAK,UAAYA,EAAI,UACrB,KAAK,KAAOA,EAAI,KAChB,KAAK,OAASrW,GAAW,KAA4B,OAASA,EAAO,OACrE,KAAK,KAAO,CAAE,CACtB,CACA,CACAiW,GAAA,UAAoBG,EAIpB,SAASE,EAAcxN,EAAK,CAExB,MAAMkC,EAAOuL,EAAmB,KAAK,KAAMzN,CAAG,EAC9C,GAAIkC,EACA,OAAOA,EACX,MAAMwL,KAAalF,EAAU,aAAa,KAAK,KAAK,YAAaxI,EAAI,KAAK,MAAM,EAC1E,CAAE,IAAAhO,EAAK,MAAA2b,CAAO,EAAG,KAAK,KAAK,KAC3B,CAAE,cAAA9M,GAAkB,KAAK,KACzBlI,EAAM,IAAI9B,EAAU,QAAQ,KAAK,MAAO,CAAE,IAAA7E,EAAK,MAAA2b,EAAO,cAAA9M,EAAe,EAC3E,IAAI+M,EACA5N,EAAI,SACJ4N,EAAmBjV,EAAI,WAAW,QAAS,CACvC,IAAKyU,EAAmB,QACxB,QAAUvW,EAAU,wDAChC,CAAS,GAEL,MAAMoE,EAAetC,EAAI,UAAU,UAAU,EAC7CqH,EAAI,aAAe/E,EACnB,MAAMkR,EAAY,CACd,IAAAxT,EACA,UAAW,KAAK,KAAK,UACrB,KAAMiB,EAAQ,QAAQ,KACtB,WAAYA,EAAQ,QAAQ,WAC5B,mBAAoBA,EAAQ,QAAQ,mBACpC,UAAW,CAACA,EAAQ,QAAQ,IAAI,EAChC,YAAa,CAAC/C,EAAU,GAAG,EAC3B,UAAW,EACX,UAAW,CAAE,EACb,kBAAmB,IAAI,IACvB,aAAc8B,EAAI,WAAW,SAAU,KAAK,KAAK,KAAK,SAAW,GAC3D,CAAE,IAAKqH,EAAI,OAAQ,QAAUnJ,EAAU,WAAWmJ,EAAI,MAAM,CAAC,EAC7D,CAAE,IAAKA,EAAI,OAAQ,EACzB,aAAA/E,EACA,gBAAiB2S,EACjB,OAAQ5N,EAAI,OACZ,UAAWA,EACX,OAAA0N,EACA,OAAQ1N,EAAI,QAAU0N,EACtB,WAAY7W,EAAU,IACtB,cAAemJ,EAAI,aAAe,KAAK,KAAK,IAAM,GAAK,KACvD,aAAenJ,EAAU,OACzB,KAAM,KAAK,KACX,KAAM,IACT,EACD,IAAIgX,EACJ,GAAI,CACA,KAAK,cAAc,IAAI7N,CAAG,KACtBqN,EAAW,sBAAsBlB,CAAS,EAC9CxT,EAAI,SAAS,KAAK,KAAK,KAAK,QAAQ,EAEpC,MAAMmV,EAAenV,EAAI,SAAU,EACnCkV,EAAa,GAAGlV,EAAI,UAAUiB,EAAQ,QAAQ,KAAK,CAAC,UAAUkU,CAAY,GAEtE,KAAK,KAAK,KAAK,UACfD,EAAa,KAAK,KAAK,KAAK,QAAQA,EAAY7N,CAAG,GAGvD,MAAM3Z,EADe,IAAI,SAAS,GAAGuT,EAAQ,QAAQ,IAAI,GAAI,GAAGA,EAAQ,QAAQ,KAAK,GAAIiU,CAAU,EACrE,KAAM,KAAK,MAAM,KAAK,EAUpD,GATA,KAAK,MAAM,MAAM5S,EAAc,CAAE,IAAK5U,EAAU,EAChDA,EAAS,OAAS,KAClBA,EAAS,OAAS2Z,EAAI,OACtB3Z,EAAS,UAAY2Z,EACjBA,EAAI,SACJ3Z,EAAS,OAAS,IAClB,KAAK,KAAK,KAAK,SAAW,KAC1BA,EAAS,OAAS,CAAE,aAAA4U,EAAc,aAAA6S,EAAc,YAAanV,EAAI,OAAS,GAE1E,KAAK,KAAK,YAAa,CACvB,KAAM,CAAE,MAAAK,EAAO,MAAA5C,EAAK,EAAK+V,EACzB9lB,EAAS,UAAY,CACjB,MAAO2S,aAAiBnC,EAAU,KAAO,OAAYmC,EACrD,MAAO5C,cAAiBS,EAAU,KAAO,OAAYT,GACrD,aAAc4C,aAAiBnC,EAAU,KACzC,aAAcT,cAAiBS,EAAU,IAC5C,EACGxQ,EAAS,SACTA,EAAS,OAAO,aAAgBwQ,EAAU,WAAWxQ,EAAS,SAAS,EACvF,CACQ,OAAA2Z,EAAI,SAAW3Z,EACR2Z,CACf,OACWtM,EAAG,CACN,aAAOsM,EAAI,SACX,OAAOA,EAAI,aACP6N,GACA,KAAK,OAAO,MAAM,yCAA0CA,CAAU,EAEpEna,CACd,QACY,CACJ,KAAK,cAAc,OAAOsM,CAAG,CACrC,CACA,CACAmN,GAAA,cAAwBK,EACxB,SAASO,EAAWC,EAAMvH,EAAQc,EAAK,CACnC,IAAI9e,EACJ8e,KAAUiB,EAAU,YAAY,KAAK,KAAK,YAAa/B,EAAQc,CAAG,EAClE,MAAM0G,EAAYD,EAAK,KAAKzG,CAAG,EAC/B,GAAI0G,EACA,OAAOA,EACX,IAAI/L,EAAOuD,EAAQ,KAAK,KAAMuI,EAAMzG,CAAG,EACvC,GAAIrF,IAAS,OAAW,CACpB,MAAMhL,GAAUzO,EAAKulB,EAAK,aAAe,MAAQvlB,IAAO,OAAS,OAASA,EAAG8e,CAAG,EAC1E,CAAE,SAAAX,GAAa,KAAK,KACtB1P,IACAgL,EAAO,IAAIoL,EAAU,CAAE,OAAApW,EAAQ,SAAA0P,EAAU,KAAAoH,EAAM,OAAAvH,EAAQ,EACnE,CACI,GAAIvE,IAAS,OAEb,OAAQ8L,EAAK,KAAKzG,CAAG,EAAI2G,EAAgB,KAAK,KAAMhM,CAAI,CAC5D,CACAiL,GAAA,WAAqBY,EACrB,SAASG,EAAgBlO,EAAK,CAC1B,SAAQwI,EAAU,WAAWxI,EAAI,OAAQ,KAAK,KAAK,UAAU,EAClDA,EAAI,OACRA,EAAI,SAAWA,EAAMwN,EAAc,KAAK,KAAMxN,CAAG,CAC5D,CAEA,SAASyN,EAAmBU,EAAQ,CAChC,UAAWnO,KAAO,KAAK,cACnB,GAAIoO,EAAcpO,EAAKmO,CAAM,EACzB,OAAOnO,CAEnB,CACAmN,GAAA,mBAA6BM,EAC7B,SAASW,EAAcC,EAAIC,EAAI,CAC3B,OAAOD,EAAG,SAAWC,EAAG,QAAUD,EAAG,OAASC,EAAG,MAAQD,EAAG,SAAWC,EAAG,MAC9E,CAGA,SAAS7I,EAAQuI,EACjBzG,EACE,CACE,IAAIvH,EACJ,KAAO,OAAQA,EAAM,KAAK,KAAKuH,CAAG,IAAM,UACpCA,EAAMvH,EACV,OAAOA,GAAO,KAAK,QAAQuH,CAAG,GAAKgH,EAAc,KAAK,KAAMP,EAAMzG,CAAG,CACzE,CAEA,SAASgH,EAAcP,EACvBzG,EACE,CACE,MAAMtO,EAAI,KAAK,KAAK,YAAY,MAAMsO,CAAG,EACnCiH,KAAchG,EAAU,cAAc,KAAK,KAAK,YAAavP,CAAC,EACpE,IAAIwN,KAAa+B,EAAU,aAAa,KAAK,KAAK,YAAawF,EAAK,OAAQ,MAAS,EAErF,GAAI,OAAO,KAAKA,EAAK,MAAM,EAAE,OAAS,GAAKQ,IAAY/H,EACnD,OAAOgI,EAAe,KAAK,KAAMxV,EAAG+U,CAAI,EAE5C,MAAM7H,KAASqC,EAAU,aAAagG,CAAO,EACvC9G,EAAW,KAAK,KAAKvB,CAAE,GAAK,KAAK,QAAQA,CAAE,EACjD,GAAI,OAAOuB,GAAY,SAAU,CAC7B,MAAM1H,EAAMuO,EAAc,KAAK,KAAMP,EAAMtG,CAAQ,EACnD,OAAI,OAAQ1H,GAAQ,KAAyB,OAASA,EAAI,SAAY,SAClE,OACGyO,EAAe,KAAK,KAAMxV,EAAG+G,CAAG,CAC/C,CACI,GAAI,OAAQ0H,GAAa,KAA8B,OAASA,EAAS,SAAY,SAIrF,IAFKA,EAAS,UACV8F,EAAc,KAAK,KAAM9F,CAAQ,EACjCvB,OAAWqC,EAAU,aAAajB,CAAG,EAAG,CACxC,KAAM,CAAE,OAAArQ,CAAM,EAAKwQ,EACb,CAAE,SAAAd,GAAa,KAAK,KACpBE,EAAQ5P,EAAO0P,CAAQ,EAC7B,OAAIE,IACAL,KAAa+B,EAAU,YAAY,KAAK,KAAK,YAAa/B,EAAQK,CAAK,GACpE,IAAIwG,EAAU,CAAE,OAAApW,EAAQ,SAAA0P,EAAU,KAAAoH,EAAM,OAAAvH,EAAQ,CAC/D,CACI,OAAOgI,EAAe,KAAK,KAAMxV,EAAGyO,CAAQ,EAChD,CACAyF,GAAA,cAAwBoB,EACxB,MAAMG,EAAuB,IAAI,IAAI,CACjC,aACA,oBACA,OACA,eACA,aACJ,CAAC,EACD,SAASD,EAAeE,EAAW,CAAE,OAAAlI,EAAQ,OAAAvP,EAAQ,KAAA8W,CAAI,EAAI,CACzD,IAAIvlB,EACJ,KAAMA,EAAKkmB,EAAU,YAAc,MAAQlmB,IAAO,OAAS,OAASA,EAAG,CAAC,KAAO,IAC3E,OACJ,UAAWmmB,KAAQD,EAAU,SAAS,MAAM,CAAC,EAAE,MAAM,GAAG,EAAG,CACvD,GAAI,OAAOzX,GAAW,UAClB,OACJ,MAAM2X,EAAa3X,KAAW2C,EAAO,kBAAkB+U,CAAI,CAAC,EAC5D,GAAIC,IAAe,OACf,OACJ3X,EAAS2X,EAET,MAAM/H,EAAQ,OAAO5P,GAAW,UAAYA,EAAO,KAAK,KAAK,QAAQ,EACjE,CAACwX,EAAqB,IAAIE,CAAI,GAAK9H,IACnCL,KAAa+B,EAAU,YAAY,KAAK,KAAK,YAAa/B,EAAQK,CAAK,EAEnF,CACI,IAAIyG,EACJ,GAAI,OAAOrW,GAAU,WAAaA,EAAO,MAAQ,IAAK2C,EAAO,sBAAsB3C,EAAQ,KAAK,KAAK,EAAG,CACpG,MAAM4X,KAAWtG,EAAU,YAAY,KAAK,KAAK,YAAa/B,EAAQvP,EAAO,IAAI,EACjFqW,EAAMgB,EAAc,KAAK,KAAMP,EAAMc,CAAI,CACjD,CAGI,KAAM,CAAE,SAAAlI,GAAa,KAAK,KAE1B,GADA2G,EAAMA,GAAO,IAAID,EAAU,CAAE,OAAApW,EAAQ,SAAA0P,EAAU,KAAAoH,EAAM,OAAAvH,EAAQ,EACzD8G,EAAI,SAAWA,EAAI,KAAK,OACxB,OAAOA,CAEf,6bCrNAwB,GAAiB,CACf,IA1BU,CACV,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,GACH,EAAG,GACH,EAAG,GACH,EAAG,GACH,EAAG,GACH,EAAG,GACH,EAAG,GACH,EAAG,GACH,EAAG,GACH,EAAG,GACH,EAAG,GACH,EAAG,EACL,CAIA,mDC3BA,KAAM,CAAE,IAAAC,CAAG,EAAKtf,GAAA,EAEVuf,EAAW,2FAEjB,SAASC,EAAeC,EAAM,CAC5B,GAAIC,EAAUD,EAAM,GAAG,EAAI,EAAK,MAAO,CAAE,KAAAA,EAAM,OAAQ,EAAO,EAC9D,MAAMzC,EAAUyC,EAAK,MAAMF,CAAQ,GAAK,CAAA,EAClC,CAACI,CAAO,EAAI3C,EAClB,OAAI2C,EACK,CAAE,KAAMC,EAAkBD,EAAS,GAAG,EAAG,OAAQ,EAAI,EAErD,CAAE,KAAAF,EAAM,OAAQ,EAAK,CAEhC,CAOA,SAASI,EAA0BC,EAAOC,EAAW,GAAO,CAC1D,IAAIC,EAAM,GACNC,EAAQ,GACZ,UAAW5hB,KAAKyhB,EAAO,CACrB,GAAIR,EAAIjhB,CAAC,IAAM,OAAW,OACtBA,IAAM,KAAO4hB,IAAU,KAAMA,EAAQ,IACpCA,IAAOD,GAAO3hB,EACvB,CACE,OAAI0hB,GAAYC,EAAI,SAAW,IAAGA,EAAM,KACjCA,CACT,CAEA,SAASE,EAASJ,EAAO,CACvB,IAAIK,EAAa,EACjB,MAAMC,EAAS,CAAE,MAAO,GAAO,QAAS,GAAI,KAAM,EAAE,EAC9CT,EAAU,CAAA,EACVU,EAAS,CAAA,EACf,IAAIC,EAAS,GACTC,EAAqB,GACrBC,EAAU,GAEd,SAASC,GAAW,CAClB,GAAIJ,EAAO,OAAQ,CACjB,GAAIC,IAAW,GAAO,CACpB,MAAMI,EAAMb,EAAyBQ,CAAM,EAC3C,GAAIK,IAAQ,OACVf,EAAQ,KAAKe,CAAG,MAEhB,QAAAN,EAAO,MAAQ,GACR,EAEjB,CACMC,EAAO,OAAS,CACtB,CACI,MAAO,EACX,CAEE,QAAS3hB,EAAI,EAAGA,EAAIohB,EAAM,OAAQphB,IAAK,CACrC,MAAMiiB,EAASb,EAAMphB,CAAC,EACtB,GAAI,EAAAiiB,IAAW,KAAOA,IAAW,KACjC,GAAIA,IAAW,IAAK,CAIlB,GAHIJ,IAAuB,KACzBC,EAAU,IAER,CAACC,EAAS,EAAI,MAGlB,GAFAN,IACAR,EAAQ,KAAK,GAAG,EACZQ,EAAa,EAAG,CAElBC,EAAO,MAAQ,GACf,KACR,CACU1hB,EAAI,GAAK,GAAKohB,EAAMphB,EAAI,CAAC,IAAM,MACjC6hB,EAAqB,IAEvB,QACN,SAAeI,IAAW,IAAK,CACzB,GAAI,CAACF,EAAS,EAAI,MAElBH,EAAS,EACf,KAAW,CACLD,EAAO,KAAKM,CAAM,EAClB,QACN,CACA,CACE,OAAIN,EAAO,SACLC,EACFF,EAAO,KAAOC,EAAO,KAAK,EAAE,EACnBG,EACTb,EAAQ,KAAKU,EAAO,KAAK,EAAE,CAAC,EAE5BV,EAAQ,KAAKE,EAAyBQ,CAAM,CAAC,GAGjDD,EAAO,QAAUT,EAAQ,KAAK,EAAE,EACzBS,CACT,CAEA,SAASQ,EAAenB,EAAM,CAC5B,GAAIC,EAAUD,EAAM,GAAG,EAAI,EAAK,MAAO,CAAE,KAAAA,EAAM,OAAQ,EAAO,EAC9D,MAAMoB,EAAOX,EAAQT,CAAI,EAEzB,GAAKoB,EAAK,MASR,MAAO,CAAE,KAAApB,EAAM,OAAQ,EAAK,EATb,CACf,IAAIqB,EAAUD,EAAK,QACfE,EAAcF,EAAK,QACvB,OAAIA,EAAK,OACPC,GAAW,IAAMD,EAAK,KACtBE,GAAe,MAAQF,EAAK,MAEvB,CAAE,KAAMC,EAAS,YAAAC,EAAa,OAAQ,EAAI,CACrD,CAGA,CAEA,SAASnB,EAAmB/gB,EAAKmiB,EAAO,CACtC,IAAIC,EAAM,GACNC,EAAO,GACX,MAAMC,EAAItiB,EAAI,OACd,QAASH,EAAI,EAAGA,EAAIyiB,EAAGziB,IAAK,CAC1B,MAAML,EAAIQ,EAAIH,CAAC,EACXL,IAAM,KAAO6iB,GACVxiB,EAAI,GAAKyiB,GAAKtiB,EAAIH,EAAI,CAAC,IAAMsiB,GAAUtiB,EAAI,IAAMyiB,KACpDF,GAAO5iB,EACP6iB,EAAO,KAGL7iB,IAAM2iB,EACRE,EAAO,GAEPA,EAAO,GAETD,GAAO5iB,EAEb,CACE,OAAO4iB,CACT,CAEA,SAASvB,EAAW7gB,EAAKmiB,EAAO,CAC9B,IAAII,EAAM,EACV,QAAS1iB,EAAI,EAAGA,EAAIG,EAAI,OAAQH,IAC1BG,EAAIH,CAAC,IAAMsiB,GAAOI,IAExB,OAAOA,CACT,CAEA,MAAMC,EAAO,YACPC,EAAO,iBACPC,EAAO,mBACPC,EAAO,0BAEb,SAASC,EAAmB3B,EAAO,CACjC,MAAMM,EAAS,CAAA,EAEf,KAAON,EAAM,QACX,GAAIA,EAAM,MAAMuB,CAAI,EAClBvB,EAAQA,EAAM,QAAQuB,EAAM,EAAE,UACrBvB,EAAM,MAAMwB,CAAI,EACzBxB,EAAQA,EAAM,QAAQwB,EAAM,GAAG,UACtBxB,EAAM,MAAMyB,CAAI,EACzBzB,EAAQA,EAAM,QAAQyB,EAAM,GAAG,EAC/BnB,EAAO,IAAG,UACDN,IAAU,KAAOA,IAAU,KACpCA,EAAQ,OACH,CACL,MAAM4B,EAAK5B,EAAM,MAAM0B,CAAI,EAC3B,GAAIE,EAAI,CACN,MAAMvjB,EAAIujB,EAAG,CAAC,EACd5B,EAAQA,EAAM,MAAM3hB,EAAE,MAAM,EAC5BiiB,EAAO,KAAKjiB,CAAC,CACrB,KACQ,OAAM,IAAI,MAAM,kCAAkC,CAE1D,CAEE,OAAOiiB,EAAO,KAAK,EAAE,CACvB,CAEA,SAASuB,EAA4BC,EAAYC,EAAK,CACpD,MAAMrQ,EAAOqQ,IAAQ,GAAO,OAAS,SACrC,OAAID,EAAW,SAAW,SACxBA,EAAW,OAASpQ,EAAKoQ,EAAW,MAAM,GAExCA,EAAW,WAAa,SAC1BA,EAAW,SAAWpQ,EAAKoQ,EAAW,QAAQ,GAE5CA,EAAW,OAAS,SACtBA,EAAW,KAAOpQ,EAAKoQ,EAAW,IAAI,GAEpCA,EAAW,OAAS,SACtBA,EAAW,KAAOpQ,EAAKoQ,EAAW,IAAI,GAEpCA,EAAW,QAAU,SACvBA,EAAW,MAAQpQ,EAAKoQ,EAAW,KAAK,GAEtCA,EAAW,WAAa,SAC1BA,EAAW,SAAWpQ,EAAKoQ,EAAW,QAAQ,GAEzCA,CACT,CAEA,SAASE,EAAoBF,EAAY,CACvC,MAAMG,EAAY,CAAA,EAOlB,GALIH,EAAW,WAAa,SAC1BG,EAAU,KAAKH,EAAW,QAAQ,EAClCG,EAAU,KAAK,GAAG,GAGhBH,EAAW,OAAS,OAAW,CACjC,IAAInC,EAAO,SAASmC,EAAW,IAAI,EACnC,MAAMI,EAAUxC,EAAcC,CAAI,EAElC,GAAIuC,EAAQ,OACVvC,EAAOuC,EAAQ,SACV,CACL,MAAMC,EAAUrB,EAAcoB,EAAQ,IAAI,EACtCC,EAAQ,SAAW,GACrBxC,EAAO,IAAIwC,EAAQ,WAAW,IAE9BxC,EAAOmC,EAAW,IAE1B,CACIG,EAAU,KAAKtC,CAAI,CACvB,CAEE,OAAI,OAAOmC,EAAW,MAAS,UAAY,OAAOA,EAAW,MAAS,YACpEG,EAAU,KAAK,GAAG,EAClBA,EAAU,KAAK,OAAOH,EAAW,IAAI,CAAC,GAGjCG,EAAU,OAASA,EAAU,KAAK,EAAE,EAAI,OAGjD,OAAAG,GAAiB,CACf,mBAAAJ,EACA,2BAAAH,EACA,kBAAAF,EACA,cAAAjC,EACA,cAAAoB,EACA,yBAAAf,CACF,kDCjPA,MAAMsC,EAAW,8DACXC,EAAU,oEAEhB,SAASC,EAAUC,EAAc,CAC/B,OAAO,OAAOA,EAAa,QAAW,UAAYA,EAAa,OAAS,OAAOA,EAAa,MAAM,EAAE,YAAW,IAAO,KACxH,CAEA,SAASC,EAAWX,EAAY,CAC9B,OAAKA,EAAW,OACdA,EAAW,MAAQA,EAAW,OAAS,+BAGlCA,CACT,CAEA,SAASY,EAAeZ,EAAY,CAClC,MAAMa,EAAS,OAAOb,EAAW,MAAM,EAAE,YAAW,IAAO,QAG3D,OAAIA,EAAW,QAAUa,EAAS,IAAM,KAAOb,EAAW,OAAS,MACjEA,EAAW,KAAO,QAIfA,EAAW,OACdA,EAAW,KAAO,KAObA,CACT,CAEA,SAASc,EAASJ,EAAc,CAE9B,OAAAA,EAAa,OAASD,EAASC,CAAY,EAG3CA,EAAa,cAAgBA,EAAa,MAAQ,MAAQA,EAAa,MAAQ,IAAMA,EAAa,MAAQ,IAC1GA,EAAa,KAAO,OACpBA,EAAa,MAAQ,OAEdA,CACT,CAEA,SAASK,EAAaL,EAAc,CAalC,IAXIA,EAAa,QAAUD,EAASC,CAAY,EAAI,IAAM,KAAOA,EAAa,OAAS,MACrFA,EAAa,KAAO,QAIlB,OAAOA,EAAa,QAAW,YACjCA,EAAa,OAAUA,EAAa,OAAS,MAAQ,KACrDA,EAAa,OAAS,QAIpBA,EAAa,aAAc,CAC7B,KAAM,CAACM,EAAMC,CAAK,EAAIP,EAAa,aAAa,MAAM,GAAG,EACzDA,EAAa,KAAQM,GAAQA,IAAS,IAAMA,EAAO,OACnDN,EAAa,MAAQO,EACrBP,EAAa,aAAe,MAChC,CAGE,OAAAA,EAAa,SAAW,OAEjBA,CACT,CAEA,SAASQ,EAAUC,EAAe5wB,EAAS,CACzC,GAAI,CAAC4wB,EAAc,KACjB,OAAAA,EAAc,MAAQ,wBACfA,EAET,MAAM/F,EAAU+F,EAAc,KAAK,MAAMX,CAAO,EAChD,GAAIpF,EAAS,CACX,MAAMgG,EAAS7wB,EAAQ,QAAU4wB,EAAc,QAAU,MACzDA,EAAc,IAAM/F,EAAQ,CAAC,EAAE,YAAW,EAC1C+F,EAAc,IAAM/F,EAAQ,CAAC,EAC7B,MAAMiG,EAAY,GAAGD,CAAM,IAAI7wB,EAAQ,KAAO4wB,EAAc,GAAG,GACzDG,EAAgBC,EAAQF,CAAS,EACvCF,EAAc,KAAO,OAEjBG,IACFH,EAAgBG,EAAc,MAAMH,EAAe5wB,CAAO,EAEhE,MACI4wB,EAAc,MAAQA,EAAc,OAAS,yBAG/C,OAAOA,CACT,CAEA,SAASK,EAAcL,EAAe5wB,EAAS,CAC7C,MAAM6wB,EAAS7wB,EAAQ,QAAU4wB,EAAc,QAAU,MACnDM,EAAMN,EAAc,IAAI,YAAW,EACnCE,EAAY,GAAGD,CAAM,IAAI7wB,EAAQ,KAAOkxB,CAAG,GAC3CH,EAAgBC,EAAQF,CAAS,EAEnCC,IACFH,EAAgBG,EAAc,UAAUH,EAAe5wB,CAAO,GAGhE,MAAMmxB,EAAgBP,EAChBQ,EAAMR,EAAc,IAC1B,OAAAO,EAAc,KAAO,GAAGD,GAAOlxB,EAAQ,GAAG,IAAIoxB,CAAG,GAEjDpxB,EAAQ,WAAa,GACdmxB,CACT,CAEA,SAASE,EAAcT,EAAe5wB,EAAS,CAC7C,MAAMsxB,EAAiBV,EACvB,OAAAU,EAAe,KAAOA,EAAe,IACrCA,EAAe,IAAM,OAEjB,CAACtxB,EAAQ,WAAa,CAACsxB,EAAe,MAAQ,CAACtB,EAAS,KAAKsB,EAAe,IAAI,KAClFA,EAAe,MAAQA,EAAe,OAAS,sBAG1CA,CACT,CAEA,SAASC,EAAkBD,EAAgB,CACzC,MAAMV,EAAgBU,EAEtB,OAAAV,EAAc,KAAOU,EAAe,MAAQ,IAAI,YAAW,EACpDV,CACT,CAEA,MAAMY,EAAO,CACX,OAAQ,OACR,WAAY,GACZ,MAAOpB,EACP,UAAWC,CACb,EAEMoB,EAAQ,CACZ,OAAQ,QACR,WAAYD,EAAK,WACjB,MAAOpB,EACP,UAAWC,CACb,EAEMqB,EAAK,CACT,OAAQ,KACR,WAAY,GACZ,MAAOnB,EACP,UAAWC,CACb,EAEMmB,EAAM,CACV,OAAQ,MACR,WAAYD,EAAG,WACf,MAAOA,EAAG,MACV,UAAWA,EAAG,SAChB,EAgBMV,EAAU,CACd,KAAAQ,EACA,MAAAC,EACA,GAAAC,EACA,IAAAC,EACA,IAnBU,CACV,OAAQ,MACR,MAAOhB,EACP,UAAWM,EACX,cAAe,EACjB,EAeE,WAbc,CACd,OAAQ,WACR,MAAOI,EACP,UAAWE,EACX,cAAe,EACjB,CASA,EAEA,OAAAK,GAAiBZ,uDCzLjB,KAAM,CAAE,cAAAvC,EAAe,cAAApB,EAAe,kBAAAiC,EAAmB,mBAAAK,EAAoB,2BAAAH,CAA0B,EAAK3hB,GAAA,EACtGmjB,EAAUthB,GAAA,EAEhB,SAAS6U,EAAWsN,EAAK7xB,EAAS,CAChC,OAAI,OAAO6xB,GAAQ,SACjBA,EAAMC,EAAUC,EAAMF,EAAK7xB,CAAO,EAAGA,CAAO,EACnC,OAAO6xB,GAAQ,WACxBA,EAAME,EAAMD,EAAUD,EAAK7xB,CAAO,EAAGA,CAAO,GAEvC6xB,CACT,CAEA,SAASjO,EAASoO,EAASC,EAAajyB,EAAS,CAC/C,MAAMkyB,EAAoB,OAAO,OAAO,CAAE,OAAQ,MAAM,EAAIlyB,CAAO,EAC7DmyB,EAAWC,EAAkBL,EAAMC,EAASE,CAAiB,EAAGH,EAAME,EAAaC,CAAiB,EAAGA,EAAmB,EAAI,EACpI,OAAOJ,EAAUK,EAAU,CAAE,GAAGD,EAAmB,WAAY,EAAM,CAAA,CACvE,CAEA,SAASE,EAAmBl4B,EAAMm4B,EAAUryB,EAASsyB,EAAmB,CACtE,MAAMC,EAAS,CAAA,EACf,OAAKD,IACHp4B,EAAO63B,EAAMD,EAAU53B,EAAM8F,CAAO,EAAGA,CAAO,EAC9CqyB,EAAWN,EAAMD,EAAUO,EAAUryB,CAAO,EAAGA,CAAO,GAExDA,EAAUA,GAAW,CAAA,EAEjB,CAACA,EAAQ,UAAYqyB,EAAS,QAChCE,EAAO,OAASF,EAAS,OAEzBE,EAAO,SAAWF,EAAS,SAC3BE,EAAO,KAAOF,EAAS,KACvBE,EAAO,KAAOF,EAAS,KACvBE,EAAO,KAAOjD,EAAkB+C,EAAS,MAAQ,EAAE,EACnDE,EAAO,MAAQF,EAAS,QAEpBA,EAAS,WAAa,QAAaA,EAAS,OAAS,QAAaA,EAAS,OAAS,QAEtFE,EAAO,SAAWF,EAAS,SAC3BE,EAAO,KAAOF,EAAS,KACvBE,EAAO,KAAOF,EAAS,KACvBE,EAAO,KAAOjD,EAAkB+C,EAAS,MAAQ,EAAE,EACnDE,EAAO,MAAQF,EAAS,QAEnBA,EAAS,MAQRA,EAAS,KAAK,OAAO,CAAC,IAAM,IAC9BE,EAAO,KAAOjD,EAAkB+C,EAAS,IAAI,IAExCn4B,EAAK,WAAa,QAAaA,EAAK,OAAS,QAAaA,EAAK,OAAS,SAAc,CAACA,EAAK,KAC/Fq4B,EAAO,KAAO,IAAMF,EAAS,KACnBn4B,EAAK,KAGfq4B,EAAO,KAAOr4B,EAAK,KAAK,MAAM,EAAGA,EAAK,KAAK,YAAY,GAAG,EAAI,CAAC,EAAIm4B,EAAS,KAF5EE,EAAO,KAAOF,EAAS,KAIzBE,EAAO,KAAOjD,EAAkBiD,EAAO,IAAI,GAE7CA,EAAO,MAAQF,EAAS,QAnBxBE,EAAO,KAAOr4B,EAAK,KACfm4B,EAAS,QAAU,OACrBE,EAAO,MAAQF,EAAS,MAExBE,EAAO,MAAQr4B,EAAK,OAkBxBq4B,EAAO,SAAWr4B,EAAK,SACvBq4B,EAAO,KAAOr4B,EAAK,KACnBq4B,EAAO,KAAOr4B,EAAK,MAErBq4B,EAAO,OAASr4B,EAAK,QAGvBq4B,EAAO,SAAWF,EAAS,SAEpBE,CACT,CAEA,SAAS3P,EAAO4P,EAAMC,EAAMzyB,EAAS,CACnC,OAAI,OAAOwyB,GAAS,UAClBA,EAAO,SAASA,CAAI,EACpBA,EAAOV,EAAUtC,EAA2BuC,EAAMS,EAAMxyB,CAAO,EAAG,EAAI,EAAG,CAAE,GAAGA,EAAS,WAAY,EAAM,CAAA,GAChG,OAAOwyB,GAAS,WACzBA,EAAOV,EAAUtC,EAA2BgD,EAAM,EAAI,EAAG,CAAE,GAAGxyB,EAAS,WAAY,EAAM,CAAA,GAGvF,OAAOyyB,GAAS,UAClBA,EAAO,SAASA,CAAI,EACpBA,EAAOX,EAAUtC,EAA2BuC,EAAMU,EAAMzyB,CAAO,EAAG,EAAI,EAAG,CAAE,GAAGA,EAAS,WAAY,EAAM,CAAA,GAChG,OAAOyyB,GAAS,WACzBA,EAAOX,EAAUtC,EAA2BiD,EAAM,EAAI,EAAG,CAAE,GAAGzyB,EAAS,WAAY,EAAM,CAAA,GAGpFwyB,EAAK,gBAAkBC,EAAK,YAAW,CAChD,CAEA,SAASX,EAAWY,EAAO7jB,EAAM,CAC/B,MAAM4gB,EAAa,CACjB,KAAMiD,EAAM,KACZ,OAAQA,EAAM,OACd,SAAUA,EAAM,SAChB,KAAMA,EAAM,KACZ,KAAMA,EAAM,KACZ,MAAOA,EAAM,MACb,IAAKA,EAAM,IACX,IAAKA,EAAM,IACX,KAAMA,EAAM,KACZ,SAAUA,EAAM,SAChB,UAAWA,EAAM,UACjB,aAAcA,EAAM,aACpB,OAAQA,EAAM,OACd,MAAO,EACX,EACQ1yB,EAAU,OAAO,OAAO,CAAE,EAAE6O,CAAI,EAChC+gB,EAAY,CAAA,EAGZmB,EAAgBC,GAAShxB,EAAQ,QAAUyvB,EAAW,QAAU,IAAI,YAAa,CAAA,EAGnFsB,GAAiBA,EAAc,WAAWA,EAAc,UAAUtB,EAAYzvB,CAAO,EAErFyvB,EAAW,OAAS,SACjBzvB,EAAQ,WAOXyvB,EAAW,KAAO,SAASA,EAAW,IAAI,GAN1CA,EAAW,KAAO,OAAOA,EAAW,IAAI,EAEpCA,EAAW,SAAW,SACxBA,EAAW,KAAOA,EAAW,KAAK,MAAM,KAAK,EAAE,KAAK,GAAG,KAOzDzvB,EAAQ,YAAc,UAAYyvB,EAAW,QAC/CG,EAAU,KAAKH,EAAW,OAAQ,GAAG,EAGvC,MAAMkD,EAAYhD,EAAmBF,CAAU,EAY/C,GAXIkD,IAAc,SACZ3yB,EAAQ,YAAc,UACxB4vB,EAAU,KAAK,IAAI,EAGrBA,EAAU,KAAK+C,CAAS,EAEpBlD,EAAW,MAAQA,EAAW,KAAK,OAAO,CAAC,IAAM,KACnDG,EAAU,KAAK,GAAG,GAGlBH,EAAW,OAAS,OAAW,CACjC,IAAIzjB,EAAIyjB,EAAW,KAEf,CAACzvB,EAAQ,eAAiB,CAAC+wB,GAAiB,CAACA,EAAc,gBAC7D/kB,EAAIsjB,EAAkBtjB,CAAC,GAGrB2mB,IAAc,SAChB3mB,EAAIA,EAAE,QAAQ,SAAU,MAAM,GAGhC4jB,EAAU,KAAK5jB,CAAC,CACpB,CAEE,OAAIyjB,EAAW,QAAU,QACvBG,EAAU,KAAK,IAAKH,EAAW,KAAK,EAGlCA,EAAW,WAAa,QAC1BG,EAAU,KAAK,IAAKH,EAAW,QAAQ,EAElCG,EAAU,KAAK,EAAE,CAC1B,CAEA,MAAMgD,EAAY,MAAM,KAAK,CAAE,OAAQ,GAAG,EAAI,CAACC,EAAIC,IAAM,8BAA8B,KAAK,OAAO,aAAaA,CAAC,CAAC,CAAC,EAEnH,SAASC,EAAiB/4B,EAAO,CAC/B,IAAImI,EAAO,EACX,QAASoK,EAAI,EAAGyH,EAAMha,EAAM,OAAQuS,EAAIyH,EAAK,EAAEzH,EAE7C,GADApK,EAAOnI,EAAM,WAAWuS,CAAC,EACrBpK,EAAO,KAAOywB,EAAUzwB,CAAI,EAC9B,MAAO,GAGX,MAAO,EACT,CAEA,MAAM6wB,EAAY,8HAElB,SAASjB,EAAOF,EAAKhjB,EAAM,CACzB,MAAM7O,EAAU,OAAO,OAAO,CAAE,EAAE6O,CAAI,EAChCokB,EAAS,CACb,OAAQ,OACR,SAAU,OACV,KAAM,GACN,KAAM,OACN,KAAM,GACN,MAAO,OACP,SAAU,MACd,EACQC,EAAcrB,EAAI,QAAQ,GAAG,IAAM,GACzC,IAAIsB,EAAO,GACPnzB,EAAQ,YAAc,WAAU6xB,GAAO7xB,EAAQ,OAASA,EAAQ,OAAS,IAAM,IAAM,KAAO6xB,GAEhG,MAAMhH,EAAUgH,EAAI,MAAMmB,CAAS,EAEnC,GAAInI,EAAS,CAcX,GAZAoI,EAAO,OAASpI,EAAQ,CAAC,EACzBoI,EAAO,SAAWpI,EAAQ,CAAC,EAC3BoI,EAAO,KAAOpI,EAAQ,CAAC,EACvBoI,EAAO,KAAO,SAASpI,EAAQ,CAAC,EAAG,EAAE,EACrCoI,EAAO,KAAOpI,EAAQ,CAAC,GAAK,GAC5BoI,EAAO,MAAQpI,EAAQ,CAAC,EACxBoI,EAAO,SAAWpI,EAAQ,CAAC,EAGvB,MAAMoI,EAAO,IAAI,IACnBA,EAAO,KAAOpI,EAAQ,CAAC,GAErBoI,EAAO,KAAM,CACf,MAAMG,EAAa/F,EAAc4F,EAAO,IAAI,EAC5C,GAAIG,EAAW,SAAW,GAAO,CAC/B,MAAMC,EAAa5E,EAAc2E,EAAW,IAAI,EAChDH,EAAO,KAAOI,EAAW,KAAK,YAAW,EACzCF,EAAOE,EAAW,MAC1B,MACQJ,EAAO,KAAOG,EAAW,KACzBD,EAAO,EAEf,CACQF,EAAO,SAAW,QAAaA,EAAO,WAAa,QAAaA,EAAO,OAAS,QAAaA,EAAO,OAAS,QAAaA,EAAO,QAAU,QAAa,CAACA,EAAO,KAClKA,EAAO,UAAY,gBACVA,EAAO,SAAW,OAC3BA,EAAO,UAAY,WACVA,EAAO,WAAa,OAC7BA,EAAO,UAAY,WAEnBA,EAAO,UAAY,MAIjBjzB,EAAQ,WAAaA,EAAQ,YAAc,UAAYA,EAAQ,YAAcizB,EAAO,YACtFA,EAAO,MAAQA,EAAO,OAAS,gBAAkBjzB,EAAQ,UAAY,eAIvE,MAAM+wB,EAAgBC,GAAShxB,EAAQ,QAAUizB,EAAO,QAAU,IAAI,YAAa,CAAA,EAGnF,GAAI,CAACjzB,EAAQ,iBAAmB,CAAC+wB,GAAiB,CAACA,EAAc,iBAE3DkC,EAAO,OAASjzB,EAAQ,YAAe+wB,GAAiBA,EAAc,aAAgBoC,IAAS,IAASJ,EAAgBE,EAAO,IAAI,EAErI,GAAI,CACFA,EAAO,KAAO,IAAI,cAAcA,EAAO,KAAK,YAAa,CAAA,CAC1D,OAAQphB,EAAG,CACVohB,EAAO,MAAQA,EAAO,OAAS,qDAAuDphB,CAChG,EAKQ,CAACkf,GAAkBA,GAAiB,CAACA,EAAc,iBACjDmC,GAAeD,EAAO,SAAW,SACnCA,EAAO,OAAS,SAASA,EAAO,MAAM,GAEpCC,GAAeD,EAAO,OAAS,SACjCA,EAAO,KAAO,SAASA,EAAO,IAAI,GAEhCA,EAAO,OACTA,EAAO,KAAO,OAAO,SAASA,EAAO,IAAI,CAAC,GAExCA,EAAO,WACTA,EAAO,SAAW,UAAU,mBAAmBA,EAAO,QAAQ,CAAC,IAK/DlC,GAAiBA,EAAc,OACjCA,EAAc,MAAMkC,EAAQjzB,CAAO,CAEzC,MACIizB,EAAO,MAAQA,EAAO,OAAS,yBAEjC,OAAOA,CACT,CAEA,MAAMK,EAAU,CACd,QAAAtC,EACA,UAAAzM,EACA,QAAAX,EACA,kBAAAwO,EACA,MAAAxP,EACA,UAAAkP,EACA,MAAAC,CACF,EAEAwB,OAAAA,GAAA,QAAiBD,EACjBC,GAAA,QAAA,QAAyBD,EACzBC,GAAA,QAAA,QAAyBD,uDC7SzB,OAAO,eAAeE,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAM3B,EAAMhkB,GAAmB,EAC/BgkB,OAAAA,EAAI,KAAO,0CACX2B,GAAA,QAAkB3B,uDCHlB,OAAO,eAAchmB,EAAU,aAAc,CAAE,MAAO,GAAM,EAC5DA,EAAA,QAAkBA,OAAeA,EAAc,IAAAA,EAAA,UAAoBA,MAAcA,EAAY,EAAAA,EAAA,WAAqB,OAClH,IAAI2f,EAAa3d,GAA6B,EAC9C,OAAO,eAAehC,EAAS,aAAc,CAAE,WAAY,GAAM,IAAK,UAAY,CAAE,OAAO2f,EAAW,UAAa,CAAA,CAAE,EACrH,IAAIxW,EAAYtF,EAA4B,EAC5C,OAAO,eAAe7D,EAAS,IAAK,CAAE,WAAY,GAAM,IAAK,UAAY,CAAE,OAAOmJ,EAAU,CAAI,CAAA,CAAE,EAClG,OAAO,eAAenJ,EAAS,MAAO,CAAE,WAAY,GAAM,IAAK,UAAY,CAAE,OAAOmJ,EAAU,GAAM,CAAA,CAAE,EACtG,OAAO,eAAenJ,EAAS,YAAa,CAAE,WAAY,GAAM,IAAK,UAAY,CAAE,OAAOmJ,EAAU,SAAY,CAAA,CAAE,EAClH,OAAO,eAAenJ,EAAS,MAAO,CAAE,WAAY,GAAM,IAAK,UAAY,CAAE,OAAOmJ,EAAU,GAAM,CAAA,CAAE,EACtG,OAAO,eAAenJ,EAAS,OAAQ,CAAE,WAAY,GAAM,IAAK,UAAY,CAAE,OAAOmJ,EAAU,IAAO,CAAA,CAAE,EACxG,OAAO,eAAenJ,EAAS,UAAW,CAAE,WAAY,GAAM,IAAK,UAAY,CAAE,OAAOmJ,EAAU,OAAU,CAAA,CAAE,EAC9G,MAAMuW,EAAqBtT,GAAqC,EAC1Dwb,EAAc7X,GAA8B,EAC5CF,EAAUG,GAA0B,EACpC6X,EAAYlN,GAAoB,EAChCmN,EAAYjkB,EAA4B,EACxCiX,EAAYF,GAA4B,EACxCN,EAAaO,GAAsC,EACnD1O,EAAS4O,EAAyB,EAClCgN,EAAiB/M,GACjB2M,EAAQ1M,GAAwB,EAChC+M,EAAgB,CAACnnB,EAAKonB,IAAU,IAAI,OAAOpnB,EAAKonB,CAAK,EAC3DD,EAAc,KAAO,aACrB,MAAME,EAAsB,CAAC,mBAAoB,cAAe,aAAa,EACvEC,EAAkB,IAAI,IAAI,CAC5B,WACA,YACA,QACA,UACA,OACA,SACA,UACA,UACA,UACA,gBACA,OACA,MACA,OACJ,CAAC,EACKC,EAAiB,CACnB,cAAe,GACf,OAAQ,gDACR,SAAU,8CACV,aAAc,mDACd,WAAY,wDACZ,YAAa,sEACb,YAAa,oEACb,WAAY,oCACZ,eAAgB,0CAChB,eAAgB,0CAChB,YAAa,6CACb,eAAgB,+EAChB,MAAO,8CACP,UAAW,8CACX,UAAW,oBACd,EACKC,EAAoB,CACtB,sBAAuB,GACvB,iBAAkB,GAClB,QAAS,oEACZ,EACKC,EAAiB,IAEvB,SAASC,EAAgBC,EAAG,CACxB,IAAIztB,EAAI0H,EAAIgmB,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GAAIC,GAAIC,GAAIzC,GAAI0C,GAAIC,GAAIC,GAAIC,GAAIC,GACpG,MAAM3pB,GAAIqoB,EAAE,OACNuB,IAAShvB,EAAKytB,EAAE,QAAU,MAAQztB,IAAO,OAAS,OAASA,EAAG,SAC9DiG,GAAW+oB,KAAU,IAAQA,KAAU,OAAY,EAAIA,IAAS,EAChE9V,IAAUwU,GAAMhmB,EAAK+lB,EAAE,QAAU,MAAQ/lB,IAAO,OAAS,OAASA,EAAG,UAAY,MAAQgmB,IAAO,OAASA,EAAKT,EAC9G7O,IAAeuP,EAAKF,EAAE,eAAiB,MAAQE,IAAO,OAASA,EAAKf,EAAM,QAChF,MAAO,CACH,cAAeiB,GAAMD,EAAKH,EAAE,gBAAkB,MAAQG,IAAO,OAASA,EAAKxoB,MAAO,MAAQyoB,IAAO,OAASA,EAAK,GAC/G,eAAgBE,GAAMD,EAAKL,EAAE,iBAAmB,MAAQK,IAAO,OAASA,EAAK1oB,MAAO,MAAQ2oB,IAAO,OAASA,EAAK,GACjH,aAAcE,GAAMD,EAAKP,EAAE,eAAiB,MAAQO,IAAO,OAASA,EAAK5oB,MAAO,MAAQ6oB,IAAO,OAASA,EAAK,MAC7G,cAAeE,GAAMD,EAAKT,EAAE,gBAAkB,MAAQS,IAAO,OAASA,EAAK9oB,MAAO,MAAQ+oB,IAAO,OAASA,EAAK,MAC/G,gBAAiBE,GAAMD,EAAKX,EAAE,kBAAoB,MAAQW,IAAO,OAASA,EAAKhpB,MAAO,MAAQipB,IAAO,OAASA,EAAK,GACnH,KAAMZ,EAAE,KAAO,CAAE,GAAGA,EAAE,KAAM,SAAAxnB,GAAU,OAAAiT,EAAM,EAAK,CAAE,SAAAjT,GAAU,OAAAiT,EAAQ,EACrE,cAAeoV,EAAKb,EAAE,gBAAkB,MAAQa,IAAO,OAASA,EAAKf,EACrE,UAAWgB,EAAKd,EAAE,YAAc,MAAQc,IAAO,OAASA,EAAKhB,EAC7D,MAAOiB,GAAKf,EAAE,QAAU,MAAQe,KAAO,OAASA,GAAK,GACrD,UAAWC,GAAKhB,EAAE,YAAc,MAAQgB,KAAO,OAASA,GAAK,GAC7D,YAAaC,GAAKjB,EAAE,cAAgB,MAAQiB,KAAO,OAASA,GAAK,GACjE,UAAWzC,GAAKwB,EAAE,YAAc,MAAQxB,KAAO,OAASA,GAAK,MAC7D,eAAgB0C,GAAKlB,EAAE,iBAAmB,MAAQkB,KAAO,OAASA,GAAK,GACvE,gBAAiBC,GAAKnB,EAAE,kBAAoB,MAAQmB,KAAO,OAASA,GAAK,GACzE,iBAAkBC,GAAKpB,EAAE,mBAAqB,MAAQoB,KAAO,OAASA,GAAK,GAC3E,eAAgBC,GAAKrB,EAAE,iBAAmB,MAAQqB,KAAO,OAASA,GAAK,GACvE,YAAaC,GAAKtB,EAAE,cAAgB,MAAQsB,KAAO,OAASA,GAAK,GACjE,YAAa3Q,EAChB,CACL,CACA,MAAM6Q,CAAI,CACN,YAAYhnB,EAAO,GAAI,CACnB,KAAK,QAAU,CAAE,EACjB,KAAK,KAAO,CAAE,EACd,KAAK,QAAU,CAAE,EACjB,KAAK,cAAgB,IAAI,IACzB,KAAK,SAAW,CAAE,EAClB,KAAK,OAAS,IAAI,IAClBA,EAAO,KAAK,KAAO,CAAE,GAAGA,EAAM,GAAGulB,EAAgBvlB,CAAI,CAAG,EACxD,KAAM,CAAE,IAAAsB,EAAK,MAAA2b,CAAO,EAAG,KAAK,KAAK,KACjC,KAAK,MAAQ,IAAI6H,EAAU,WAAW,CAAE,MAAO,CAAE,EAAE,SAAUK,EAAiB,IAAA7jB,EAAK,MAAA2b,CAAK,CAAE,EAC1F,KAAK,OAASgK,EAAUjnB,EAAK,MAAM,EACnC,MAAMknB,EAAYlnB,EAAK,gBACvBA,EAAK,gBAAkB,GACvB,KAAK,SAAY6M,EAAQ,UAAW,EACpCsa,EAAa,KAAK,KAAM/B,EAAgBplB,EAAM,eAAe,EAC7DmnB,EAAa,KAAK,KAAM9B,EAAmBrlB,EAAM,aAAc,MAAM,EACrE,KAAK,UAAYonB,EAAqB,KAAK,IAAI,EAC3CpnB,EAAK,SACLqnB,EAAkB,KAAK,IAAI,EAC/B,KAAK,iBAAkB,EACvB,KAAK,sBAAuB,EACxBrnB,EAAK,UACLsnB,EAAmB,KAAK,KAAMtnB,EAAK,QAAQ,EAC3C,OAAOA,EAAK,MAAQ,UACpB,KAAK,cAAcA,EAAK,IAAI,EAChCunB,EAAkB,KAAK,IAAI,EAC3BvnB,EAAK,gBAAkBknB,CAC/B,CACI,kBAAmB,CACf,KAAK,WAAW,QAAQ,CAChC,CACI,uBAAwB,CACpB,KAAM,CAAE,MAAA9f,EAAO,KAAAogB,EAAM,SAAAtR,CAAU,EAAG,KAAK,KACvC,IAAIuR,EAAiB1C,EACjB7O,IAAa,OACbuR,EAAiB,CAAE,GAAG1C,CAAgB,EACtC0C,EAAe,GAAKA,EAAe,IACnC,OAAOA,EAAe,KAEtBD,GAAQpgB,GACR,KAAK,cAAcqgB,EAAgBA,EAAevR,CAAQ,EAAG,EAAK,CAC9E,CACI,aAAc,CACV,KAAM,CAAE,KAAAsR,EAAM,SAAAtR,CAAU,EAAG,KAAK,KAChC,OAAQ,KAAK,KAAK,YAAc,OAAOsR,GAAQ,SAAWA,EAAKtR,CAAQ,GAAKsR,EAAO,MAC3F,CACI,SAASE,EAET7wB,EACE,CACE,IAAI8wB,EACJ,GAAI,OAAOD,GAAgB,UAEvB,GADAC,EAAI,KAAK,UAAUD,CAAY,EAC3B,CAACC,EACD,MAAM,IAAI,MAAM,8BAA8BD,CAAY,GAAG,OAGjEC,EAAI,KAAK,QAAQD,CAAY,EAEjC,MAAM5b,EAAQ6b,EAAE9wB,CAAI,EACpB,MAAM,WAAY8wB,IACd,KAAK,OAASA,EAAE,QACb7b,CACf,CACI,QAAQtF,EAAQohB,EAAO,CACnB,MAAMtY,EAAM,KAAK,WAAW9I,EAAQohB,CAAK,EACzC,OAAQtY,EAAI,UAAY,KAAK,kBAAkBA,CAAG,CAC1D,CACI,aAAa9I,EAAQghB,EAAM,CACvB,GAAI,OAAO,KAAK,KAAK,YAAc,WAC/B,MAAM,IAAI,MAAM,yCAAyC,EAE7D,KAAM,CAAE,WAAAK,GAAe,KAAK,KAC5B,OAAOC,EAAgB,KAAK,KAAMthB,EAAQghB,CAAI,EAC9C,eAAeM,EAAgBC,EAASH,EAAO,CAC3C,MAAMI,EAAe,KAAK,KAAMD,EAAQ,OAAO,EAC/C,MAAMzY,EAAM,KAAK,WAAWyY,EAASH,CAAK,EAC1C,OAAOtY,EAAI,UAAY2Y,EAAc,KAAK,KAAM3Y,CAAG,CAC/D,CACQ,eAAe0Y,EAAe5J,EAAM,CAC5BA,GAAQ,CAAC,KAAK,UAAUA,CAAI,GAC5B,MAAM0J,EAAgB,KAAK,KAAM,CAAE,KAAA1J,CAAI,EAAI,EAAI,CAE/D,CACQ,eAAe6J,EAAc3Y,EAAK,CAC9B,GAAI,CACA,OAAO,KAAK,kBAAkBA,CAAG,CACjD,OACmBtM,EAAG,CACN,GAAI,EAAEA,aAAa4hB,EAAY,SAC3B,MAAM5hB,EACV,OAAAklB,EAAY,KAAK,KAAMllB,CAAC,EACxB,MAAMmlB,EAAkB,KAAK,KAAMnlB,EAAE,aAAa,EAC3CilB,EAAc,KAAK,KAAM3Y,CAAG,CACnD,CACA,CACQ,SAAS4Y,EAAY,CAAE,cAAerR,EAAK,WAAAuR,CAAU,EAAI,CACrD,GAAI,KAAK,KAAKvR,CAAG,EACb,MAAM,IAAI,MAAM,aAAaA,CAAG,kBAAkBuR,CAAU,qBAAqB,CAEjG,CACQ,eAAeD,EAAkBtR,EAAK,CAClC,MAAMkR,EAAU,MAAMM,EAAY,KAAK,KAAMxR,CAAG,EAC3C,KAAK,KAAKA,CAAG,GACd,MAAMmR,EAAe,KAAK,KAAMD,EAAQ,OAAO,EAC9C,KAAK,KAAKlR,CAAG,GACd,KAAK,UAAUkR,EAASlR,EAAK2Q,CAAI,CACjD,CACQ,eAAea,EAAYxR,EAAK,CAC5B,MAAMtO,EAAI,KAAK,SAASsO,CAAG,EAC3B,GAAItO,EACA,OAAOA,EACX,GAAI,CACA,OAAO,MAAO,KAAK,SAASsO,CAAG,EAAIgR,EAAWhR,CAAG,EACjE,QACoB,CACJ,OAAO,KAAK,SAASA,CAAG,CACxC,CACA,CACA,CAEI,UAAUrQ,EACVtb,EACA08B,EACAU,EAAkB,KAAK,KAAK,eAC1B,CACE,GAAI,MAAM,QAAQ9hB,CAAM,EAAG,CACvB,UAAW8I,KAAO9I,EACd,KAAK,UAAU8I,EAAK,OAAWsY,EAAOU,CAAe,EACzD,OAAO,IACnB,CACQ,IAAI7S,EACJ,GAAI,OAAOjP,GAAW,SAAU,CAC5B,KAAM,CAAE,SAAA0P,GAAa,KAAK,KAE1B,GADAT,EAAKjP,EAAO0P,CAAQ,EAChBT,IAAO,QAAa,OAAOA,GAAM,SACjC,MAAM,IAAI,MAAM,UAAUS,CAAQ,iBAAiB,CAEnE,CACQ,OAAAhrB,KAAU4sB,EAAU,aAAa5sB,GAAOuqB,CAAE,EAC1C,KAAK,aAAavqB,CAAG,EACrB,KAAK,QAAQA,CAAG,EAAI,KAAK,WAAWsb,EAAQohB,EAAO18B,EAAKo9B,EAAiB,EAAI,EACtE,IACf,CAGI,cAAc9hB,EAAQtb,EACtBo9B,EAAkB,KAAK,KAAK,eAC1B,CACE,YAAK,UAAU9hB,EAAQtb,EAAK,GAAMo9B,CAAe,EAC1C,IACf,CAEI,eAAe9hB,EAAQ+hB,EAAiB,CACpC,GAAI,OAAO/hB,GAAU,UACjB,MAAO,GACX,IAAIgiB,EAEJ,GADAA,EAAUhiB,EAAO,QACbgiB,IAAY,QAAa,OAAOA,GAAW,SAC3C,MAAM,IAAI,MAAM,0BAA0B,EAG9C,GADAA,EAAUA,GAAW,KAAK,KAAK,aAAe,KAAK,YAAa,EAC5D,CAACA,EACD,YAAK,OAAO,KAAK,2BAA2B,EAC5C,KAAK,OAAS,KACP,GAEX,MAAM1c,EAAQ,KAAK,SAAS0c,EAAShiB,CAAM,EAC3C,GAAI,CAACsF,GAASyc,EAAiB,CAC3B,MAAMjd,EAAU,sBAAwB,KAAK,WAAY,EACzD,GAAI,KAAK,KAAK,iBAAmB,MAC7B,KAAK,OAAO,MAAMA,CAAO,MAEzB,OAAM,IAAI,MAAMA,CAAO,CACvC,CACQ,OAAOQ,CACf,CAGI,UAAU2c,EAAQ,CACd,IAAInZ,EACJ,KAAO,OAAQA,EAAMoZ,EAAU,KAAK,KAAMD,CAAM,IAAM,UAClDA,EAASnZ,EACb,GAAIA,IAAQ,OAAW,CACnB,KAAM,CAAE,SAAA4G,GAAa,KAAK,KACpBoH,EAAO,IAAIuH,EAAU,UAAU,CAAE,OAAQ,CAAA,EAAI,SAAA3O,EAAU,EAE7D,GADA5G,EAAMuV,EAAU,cAAc,KAAK,KAAMvH,EAAMmL,CAAM,EACjD,CAACnZ,EACD,OACJ,KAAK,KAAKmZ,CAAM,EAAInZ,CAChC,CACQ,OAAQA,EAAI,UAAY,KAAK,kBAAkBA,CAAG,CAC1D,CAKI,aAAaoY,EAAc,CACvB,GAAIA,aAAwB,OACxB,YAAK,kBAAkB,KAAK,QAASA,CAAY,EACjD,KAAK,kBAAkB,KAAK,KAAMA,CAAY,EACvC,KAEX,OAAQ,OAAOA,EAAY,CACvB,IAAK,YACD,YAAK,kBAAkB,KAAK,OAAO,EACnC,KAAK,kBAAkB,KAAK,IAAI,EAChC,KAAK,OAAO,MAAO,EACZ,KACX,IAAK,SAAU,CACX,MAAMpY,EAAMoZ,EAAU,KAAK,KAAMhB,CAAY,EAC7C,OAAI,OAAOpY,GAAO,UACd,KAAK,OAAO,OAAOA,EAAI,MAAM,EACjC,OAAO,KAAK,QAAQoY,CAAY,EAChC,OAAO,KAAK,KAAKA,CAAY,EACtB,IACvB,CACY,IAAK,SAAU,CACX,MAAMiB,EAAWjB,EACjB,KAAK,OAAO,OAAOiB,CAAQ,EAC3B,IAAIlT,EAAKiS,EAAa,KAAK,KAAK,QAAQ,EACxC,OAAIjS,IACAA,KAASqC,EAAU,aAAarC,CAAE,EAClC,OAAO,KAAK,QAAQA,CAAE,EACtB,OAAO,KAAK,KAAKA,CAAE,GAEhB,IACvB,CACY,QACI,MAAM,IAAI,MAAM,qCAAqC,CACrE,CACA,CAEI,cAAcmT,EAAa,CACvB,UAAWjoB,KAAOioB,EACd,KAAK,WAAWjoB,CAAG,EACvB,OAAO,IACf,CACI,WAAWkoB,EAAUloB,EACnB,CACE,IAAIwG,EACJ,GAAI,OAAO0hB,GAAY,SACnB1hB,EAAU0hB,EACN,OAAOloB,GAAO,WACd,KAAK,OAAO,KAAK,0DAA0D,EAC3EA,EAAI,QAAUwG,WAGb,OAAO0hB,GAAY,UAAYloB,IAAQ,QAG5C,GAFAA,EAAMkoB,EACN1hB,EAAUxG,EAAI,QACV,MAAM,QAAQwG,CAAO,GAAK,CAACA,EAAQ,OACnC,MAAM,IAAI,MAAM,wDAAwD,MAI5E,OAAM,IAAI,MAAM,gCAAgC,EAGpD,GADA2hB,EAAa,KAAK,KAAM3hB,EAASxG,CAAG,EAChC,CAACA,EACD,SAAIwI,EAAO,UAAUhC,EAAUwF,GAAQoc,GAAQ,KAAK,KAAMpc,CAAG,CAAC,EACvD,KAEXqc,GAAkB,KAAK,KAAMroB,CAAG,EAChC,MAAMsoB,EAAa,CACf,GAAGtoB,EACH,QAAU2W,EAAW,cAAc3W,EAAI,IAAI,EAC3C,cAAgB2W,EAAW,cAAc3W,EAAI,UAAU,CAC1D,EACD,SAAIwI,EAAO,UAAUhC,EAAS8hB,EAAW,KAAK,SAAW,EAClDhF,GAAM8E,GAAQ,KAAK,KAAM9E,EAAGgF,CAAU,EACtChF,GAAMgF,EAAW,KAAK,QAASjb,GAAM+a,GAAQ,KAAK,KAAM9E,EAAGgF,EAAYjb,CAAC,CAAC,CAAC,EAC1E,IACf,CACI,WAAW7G,EAAS,CAChB,MAAMsF,EAAO,KAAK,MAAM,IAAItF,CAAO,EACnC,OAAO,OAAOsF,GAAQ,SAAWA,EAAK,WAAa,CAAC,CAACA,CAC7D,CAEI,cAActF,EAAS,CAEnB,KAAM,CAAE,MAAAJ,CAAK,EAAK,KAClB,OAAOA,EAAM,SAASI,CAAO,EAC7B,OAAOJ,EAAM,IAAII,CAAO,EACxB,UAAWoF,KAASxF,EAAM,MAAO,CAC7B,MAAM,EAAIwF,EAAM,MAAM,UAAWE,GAASA,EAAK,UAAYtF,CAAO,EAC9D,GAAK,GACLoF,EAAM,MAAM,OAAO,EAAG,CAAC,CACvC,CACQ,OAAO,IACf,CAEI,UAAU1gB,EAAM0H,EAAQ,CACpB,OAAI,OAAOA,GAAU,WACjBA,EAAS,IAAI,OAAOA,CAAM,GAC9B,KAAK,QAAQ1H,CAAI,EAAI0H,EACd,IACf,CACI,WAAWqf,EAAS,KAAK,OACzB,CAAE,UAAAsW,EAAY,KAAM,QAAAC,EAAU,MAAQ,EAAG,CAAE,EACzC,CACE,MAAI,CAACvW,GAAUA,EAAO,SAAW,EACtB,YACJA,EACF,IAAK5P,GAAM,GAAGmmB,CAAO,GAAGnmB,EAAE,YAAY,IAAIA,EAAE,OAAO,EAAE,EACrD,OAAO,CAACrP,EAAMqV,IAAQrV,EAAOu1B,EAAYlgB,CAAG,CACzD,CACI,gBAAgBogB,EAAYC,EAAsB,CAC9C,MAAMziB,EAAQ,KAAK,MAAM,IACzBwiB,EAAa,KAAK,MAAM,KAAK,UAAUA,CAAU,CAAC,EAClD,UAAWrN,KAAesN,EAAsB,CAC5C,MAAMlN,EAAWJ,EAAY,MAAM,GAAG,EAAE,MAAM,CAAC,EAC/C,IAAIuN,EAAWF,EACf,UAAWG,KAAOpN,EACdmN,EAAWA,EAASC,CAAG,EAC3B,UAAWr+B,KAAO0b,EAAO,CACrB,MAAM6F,EAAO7F,EAAM1b,CAAG,EACtB,GAAI,OAAOuhB,GAAQ,SACf,SACJ,KAAM,CAAE,MAAArF,GAAUqF,EAAK,WACjBjG,EAAS8iB,EAASp+B,CAAG,EACvBkc,GAASZ,IACT8iB,EAASp+B,CAAG,EAAIs+B,GAAahjB,CAAM,EACvD,CACA,CACQ,OAAO4iB,CACf,CACI,kBAAkBK,EAASC,EAAO,CAC9B,UAAWjB,KAAUgB,EAAS,CAC1B,MAAMna,EAAMma,EAAQhB,CAAM,GACtB,CAACiB,GAASA,EAAM,KAAKjB,CAAM,KACvB,OAAOnZ,GAAO,SACd,OAAOma,EAAQhB,CAAM,EAEhBnZ,GAAO,CAACA,EAAI,OACjB,KAAK,OAAO,OAAOA,EAAI,MAAM,EAC7B,OAAOma,EAAQhB,CAAM,GAGzC,CACA,CACI,WAAWjiB,EAAQghB,EAAMzR,EAAQ4T,EAAiB,KAAK,KAAK,eAAgBC,EAAY,KAAK,KAAK,cAAe,CAC7G,IAAInU,EACJ,KAAM,CAAE,SAAAS,GAAa,KAAK,KAC1B,GAAI,OAAO1P,GAAU,SACjBiP,EAAKjP,EAAO0P,CAAQ,MAEnB,CACD,GAAI,KAAK,KAAK,IACV,MAAM,IAAI,MAAM,uBAAuB,EACtC,GAAI,OAAO1P,GAAU,UACtB,MAAM,IAAI,MAAM,kCAAkC,CAClE,CACQ,IAAI8I,EAAM,KAAK,OAAO,IAAI9I,CAAM,EAChC,GAAI8I,IAAQ,OACR,OAAOA,EACXyG,KAAa+B,EAAU,aAAarC,GAAMM,CAAM,EAChD,MAAMQ,EAAYuB,EAAU,cAAc,KAAK,KAAMtR,EAAQuP,CAAM,EACnE,OAAAzG,EAAM,IAAIuV,EAAU,UAAU,CAAE,OAAAre,EAAQ,SAAA0P,EAAU,KAAAsR,EAAM,OAAAzR,EAAQ,UAAAQ,EAAW,EAC3E,KAAK,OAAO,IAAIjH,EAAI,OAAQA,CAAG,EAC3Bsa,GAAa,CAAC7T,EAAO,WAAW,GAAG,IAE/BA,GACA,KAAK,aAAaA,CAAM,EAC5B,KAAK,KAAKA,CAAM,EAAIzG,GAEpBqa,GACA,KAAK,eAAenjB,EAAQ,EAAI,EAC7B8I,CACf,CACI,aAAamG,EAAI,CACb,GAAI,KAAK,QAAQA,CAAE,GAAK,KAAK,KAAKA,CAAE,EAChC,MAAM,IAAI,MAAM,0BAA0BA,CAAE,kBAAkB,CAE1E,CACI,kBAAkBnG,EAAK,CAMnB,GALIA,EAAI,KACJ,KAAK,mBAAmBA,CAAG,EAE3BuV,EAAU,cAAc,KAAK,KAAMvV,CAAG,EAEtC,CAACA,EAAI,SACL,MAAM,IAAI,MAAM,0BAA0B,EAC9C,OAAOA,EAAI,QACnB,CACI,mBAAmBA,EAAK,CACpB,MAAMua,EAAc,KAAK,KACzB,KAAK,KAAO,KAAK,UACjB,GAAI,CACAhF,EAAU,cAAc,KAAK,KAAMvV,CAAG,CAClD,QACgB,CACJ,KAAK,KAAOua,CACxB,CACA,CACA,CACA7C,EAAI,gBAAkBtK,EAAmB,QACzCsK,EAAI,gBAAkBpC,EAAY,QAClC5nB,EAAA,QAAkBgqB,EAClB,SAASG,EAAa2C,EAAW34B,EAAS6X,EAAK+gB,EAAM,QAAS,CAC1D,UAAW7+B,KAAO4+B,EAAW,CACzB,MAAME,EAAM9+B,EACR8+B,KAAO74B,GACP,KAAK,OAAO44B,CAAG,EAAE,GAAG/gB,CAAG,YAAY9d,CAAG,KAAK4+B,EAAUE,CAAG,CAAC,EAAE,CACvE,CACA,CACA,SAAStB,EAAUD,EAAQ,CACvB,OAAAA,KAAa3Q,EAAU,aAAa2Q,CAAM,EACnC,KAAK,QAAQA,CAAM,GAAK,KAAK,KAAKA,CAAM,CACnD,CACA,SAASlB,GAAoB,CACzB,MAAM0C,EAAc,KAAK,KAAK,QAC9B,GAAKA,EAEL,GAAI,MAAM,QAAQA,CAAW,EACzB,KAAK,UAAUA,CAAW,MAE1B,WAAW/+B,KAAO++B,EACd,KAAK,UAAUA,EAAY/+B,CAAG,EAAGA,CAAG,CAChD,CACA,SAASm8B,GAAoB,CACzB,UAAWx7B,KAAQ,KAAK,KAAK,QAAS,CAClC,MAAM0H,EAAS,KAAK,KAAK,QAAQ1H,CAAI,EACjC0H,GACA,KAAK,UAAU1H,EAAM0H,CAAM,CACvC,CACA,CACA,SAAS+zB,EAAmB4C,EAAM,CAC9B,GAAI,MAAM,QAAQA,CAAI,EAAG,CACrB,KAAK,cAAcA,CAAI,EACvB,MACR,CACI,KAAK,OAAO,KAAK,kDAAkD,EACnE,UAAW/iB,KAAW+iB,EAAM,CACxB,MAAMvpB,EAAMupB,EAAK/iB,CAAO,EACnBxG,EAAI,UACLA,EAAI,QAAUwG,GAClB,KAAK,WAAWxG,CAAG,CAC3B,CACA,CACA,SAASymB,GAAuB,CAC5B,MAAM+C,EAAW,CAAE,GAAG,KAAK,IAAM,EACjC,UAAWH,KAAO9E,EACd,OAAOiF,EAASH,CAAG,EACvB,OAAOG,CACX,CACA,MAAMC,EAAS,CAAE,KAAM,CAAA,EAAK,MAAO,CAAG,EAAE,OAAQ,EAAK,EACrD,SAASnD,EAAUoD,EAAQ,CACvB,GAAIA,IAAW,GACX,OAAOD,EACX,GAAIC,IAAW,OACX,OAAO,QACX,GAAIA,EAAO,KAAOA,EAAO,MAAQA,EAAO,MACpC,OAAOA,EACX,MAAM,IAAI,MAAM,mDAAmD,CACvE,CACA,MAAMC,EAAe,0BACrB,SAASxB,EAAa3hB,EAASxG,EAAK,CAChC,KAAM,CAAE,MAAAoG,CAAK,EAAK,KAOlB,MANIoC,EAAO,UAAUhC,EAAUwF,GAAQ,CACnC,GAAI5F,EAAM,SAAS4F,CAAG,EAClB,MAAM,IAAI,MAAM,WAAWA,CAAG,qBAAqB,EACvD,GAAI,CAAC2d,EAAa,KAAK3d,CAAG,EACtB,MAAM,IAAI,MAAM,WAAWA,CAAG,mBAAmB,CAC7D,CAAK,EACG,EAAChM,GAEDA,EAAI,OAAS,EAAE,SAAUA,GAAO,aAAcA,GAC9C,MAAM,IAAI,MAAM,uDAAuD,CAE/E,CACA,SAASooB,GAAQ5hB,EAAS8hB,EAAYrc,EAAU,CAC5C,IAAI7U,EACJ,MAAMwc,EAAO0U,GAAe,KAAgC,OAASA,EAAW,KAChF,GAAIrc,GAAY2H,EACZ,MAAM,IAAI,MAAM,6CAA6C,EACjE,KAAM,CAAE,MAAAxN,CAAK,EAAK,KAClB,IAAIwjB,EAAYhW,EAAOxN,EAAM,KAAOA,EAAM,MAAM,KAAK,CAAC,CAAE,KAAMiH,CAAC,IAAOA,IAAMpB,CAAQ,EAMpF,GALK2d,IACDA,EAAY,CAAE,KAAM3d,EAAU,MAAO,CAAA,CAAI,EACzC7F,EAAM,MAAM,KAAKwjB,CAAS,GAE9BxjB,EAAM,SAASI,CAAO,EAAI,GACtB,CAAC8hB,EACD,OACJ,MAAMxc,EAAO,CACT,QAAAtF,EACA,WAAY,CACR,GAAG8hB,EACH,QAAU3R,EAAW,cAAc2R,EAAW,IAAI,EAClD,cAAgB3R,EAAW,cAAc2R,EAAW,UAAU,CACjE,CACJ,EACGA,EAAW,OACXuB,GAAc,KAAK,KAAMD,EAAW9d,EAAMwc,EAAW,MAAM,EAE3DsB,EAAU,MAAM,KAAK9d,CAAI,EAC7B1F,EAAM,IAAII,CAAO,EAAIsF,GACpB1U,EAAKkxB,EAAW,cAAgB,MAAQlxB,IAAO,QAAkBA,EAAG,QAAS4U,GAAQ,KAAK,WAAWA,CAAG,CAAC,CAC9G,CACA,SAAS6d,GAAcD,EAAW9d,EAAMge,EAAQ,CAC5C,MAAM/sB,EAAI6sB,EAAU,MAAM,UAAWG,GAAUA,EAAM,UAAYD,CAAM,EACnE/sB,GAAK,EACL6sB,EAAU,MAAM,OAAO7sB,EAAG,EAAG+O,CAAI,GAGjC8d,EAAU,MAAM,KAAK9d,CAAI,EACzB,KAAK,OAAO,KAAK,QAAQge,CAAM,iBAAiB,EAExD,CACA,SAASzB,GAAkBroB,EAAK,CAC5B,GAAI,CAAE,WAAAyoB,CAAU,EAAKzoB,EACjByoB,IAAe,SAEfzoB,EAAI,OAAS,KAAK,KAAK,QACvByoB,EAAaI,GAAaJ,CAAU,GACxCzoB,EAAI,eAAiB,KAAK,QAAQyoB,EAAY,EAAI,EACtD,CACA,MAAMuB,EAAW,CACb,KAAM,gFACT,EACD,SAASnB,GAAahjB,EAAQ,CAC1B,MAAO,CAAE,MAAO,CAACA,EAAQmkB,CAAQ,CAAG,CACxC,uECvmBA,OAAO,eAAelV,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAM9U,EAAM,CACR,QAAS,KACT,MAAO,CACH,MAAM,IAAI,MAAM,sDAAsD,CACzE,CACJ,EACD,OAAA8U,GAAA,QAAkB9U,qDCPlB,OAAO,eAAekW,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5DA,GAAA,QAAkBA,GAAA,YAAsB,OACxC,MAAM+N,EAAc5lB,GAAkC,EAChDD,EAAS8B,GAAkB,EAC3BsF,EAAYiD,EAAgC,EAC5CF,EAAU6D,GAA8B,EACxC8X,EAAY7X,GAAwB,EACpC7D,EAASwO,EAA6B,EACtChX,EAAM,CACR,QAAS,OACT,WAAY,SACZ,KAAK4I,EAAK,CACN,KAAM,CAAE,IAAAtB,EAAK,OAAQmW,EAAM,GAAA7X,CAAI,EAAGgD,EAC5B,CAAE,OAAAwM,EAAQ,UAAW8G,EAAK,aAAAtS,EAAc,KAAAvK,EAAM,KAAA2G,CAAI,EAAKJ,EACvD,CAAE,KAAA+W,CAAI,EAAKT,EACjB,IAAKuB,IAAS,KAAOA,IAAS,OAASrI,IAAWuH,EAAK,OACnD,OAAOsN,EAAa,EACxB,MAAMC,EAAWhG,EAAU,WAAW,KAAKle,EAAM2W,EAAMvH,EAAQqI,CAAI,EACnE,GAAIyM,IAAa,OACb,MAAM,IAAIjG,EAAY,QAAQre,EAAG,KAAK,YAAawP,EAAQqI,CAAI,EACnE,GAAIyM,aAAoBhG,EAAU,UAC9B,OAAOiG,EAAaD,CAAQ,EAChC,OAAOE,EAAgBF,CAAQ,EAC/B,SAASD,GAAc,CACnB,GAAI/N,IAAQS,EACR,OAAO0N,EAAQzhB,EAAKgB,EAAcsS,EAAKA,EAAI,MAAM,EACrD,MAAMtD,EAAWtR,EAAI,WAAW,OAAQ,CAAE,IAAKqV,EAAM,EACrD,OAAO0N,EAAQzhB,KAASpD,EAAU,KAAMoT,CAAQ,YAAa+D,EAAMA,EAAK,MAAM,CAC1F,CACQ,SAASwN,EAAaxb,EAAK,CACvB,MAAMqY,EAAIsD,EAAY1hB,EAAK+F,CAAG,EAC9B0b,EAAQzhB,EAAKoe,EAAGrY,EAAKA,EAAI,MAAM,CAC3C,CACQ,SAASyb,EAAgBzb,EAAK,CAC1B,MAAM4b,EAAUjjB,EAAI,WAAW,SAAUjI,EAAK,KAAK,SAAW,GAAO,CAAE,IAAKsP,EAAK,QAAUnJ,EAAU,WAAWmJ,CAAG,GAAM,CAAE,IAAKA,EAAK,EAC/HxD,EAAQ7D,EAAI,KAAK,OAAO,EACxBwJ,EAASlI,EAAI,UAAU,CACzB,OAAQ+F,EACR,UAAW,CAAE,EACb,WAAYnJ,EAAU,IACtB,aAAc+kB,EACd,cAAe9M,CAClB,EAAEtS,CAAK,EACRvC,EAAI,eAAekI,CAAM,EACzBlI,EAAI,GAAGuC,CAAK,CACxB,CACK,CACJ,EACD,SAASmf,EAAY1hB,EAAK+F,EAAK,CAC3B,KAAM,CAAE,IAAArH,CAAG,EAAKsB,EAChB,OAAO+F,EAAI,SACLrH,EAAI,WAAW,WAAY,CAAE,IAAKqH,EAAI,QAAU,CAAA,KAC5CnJ,EAAU,KAAM8B,EAAI,WAAW,UAAW,CAAE,IAAKqH,CAAK,CAAA,CAAC,WACrE,CACAuH,GAAA,YAAsBoU,EACtB,SAASD,EAAQzhB,EAAKoe,EAAGrY,EAAK6b,EAAQ,CAClC,KAAM,CAAE,IAAAljB,EAAK,GAAA1B,CAAE,EAAKgD,EACd,CAAE,UAAAI,EAAW,UAAWkT,EAAK,KAAA7c,CAAM,EAAGuG,EACtCoM,EAAU3S,EAAK,YAAckJ,EAAQ,QAAQ,KAAO/C,EAAU,IAChEglB,EACAC,EAAc,EAEdC,EAAa,EACjB,SAASD,GAAe,CACpB,GAAI,CAACvO,EAAI,OACL,MAAM,IAAI,MAAM,wCAAwC,EAC5D,MAAM/Q,EAAQ7D,EAAI,IAAI,OAAO,EAC7BA,EAAI,IAAI,IAAM,CACVA,EAAI,QAAS9B,EAAU,cAAgBpH,EAAO,kBAAkBwK,EAAKoe,EAAGhV,CAAO,CAAC,EAAE,EAClF2Y,EAAiB3D,CAAC,EACbhe,GACD1B,EAAI,OAAO6D,EAAO,EAAI,CAC7B,EAAG9I,GAAM,CACNiF,EAAI,MAAO9B,EAAU,OAAQnD,CAAC,eAAeuD,EAAG,eAAe,IAAK,IAAM0B,EAAI,MAAMjF,CAAC,CAAC,EACtFuoB,EAAcvoB,CAAC,EACV2G,GACD1B,EAAI,OAAO6D,EAAO,EAAK,CACvC,CAAS,EACDvC,EAAI,GAAGuC,CAAK,CACpB,CACI,SAASuf,GAAc,CACnB9hB,EAAI,UAAWxK,EAAO,kBAAkBwK,EAAKoe,EAAGhV,CAAO,EAAG,IAAM2Y,EAAiB3D,CAAC,EAAG,IAAM4D,EAAc5D,CAAC,CAAC,CACnH,CACI,SAAS4D,EAAcrxB,EAAQ,CAC3B,MAAMoQ,KAAWnE,EAAU,KAAMjM,CAAM,UACvC+N,EAAI,OAAOiB,EAAQ,QAAQ,WAAa/C,EAAU,KAAM+C,EAAQ,QAAQ,OAAO,eAAeoB,CAAI,MAAMpB,EAAQ,QAAQ,OAAO,WAAWoB,CAAI,GAAG,EACjJrC,EAAI,OAAOiB,EAAQ,QAAQ,UAAY/C,EAAU,KAAM+C,EAAQ,QAAQ,OAAO,SAAS,CAC/F,CACI,SAASoiB,EAAiBpxB,EAAQ,CAC9B,IAAInC,EACJ,GAAI,CAACwO,EAAG,KAAK,YACT,OACJ,MAAMilB,GAAgBzzB,EAAKuX,GAAQ,KAAyB,OAASA,EAAI,YAAc,MAAQvX,IAAO,OAAS,OAASA,EAAG,UAE3H,GAAIwO,EAAG,QAAU,GACb,GAAIilB,GAAgB,CAACA,EAAa,aAC1BA,EAAa,QAAU,SACvBjlB,EAAG,MAAQ4C,EAAO,eAAe,MAAMlB,EAAKujB,EAAa,MAAOjlB,EAAG,KAAK,OAG3E,CACD,MAAM+B,EAAQL,EAAI,IAAI,WAAa9B,EAAU,KAAMjM,CAAM,kBAAkB,EAC3EqM,EAAG,MAAQ4C,EAAO,eAAe,MAAMlB,EAAKK,EAAO/B,EAAG,MAAOJ,EAAU,IAAI,CAC3F,CAEQ,GAAII,EAAG,QAAU,GACb,GAAIilB,GAAgB,CAACA,EAAa,aAC1BA,EAAa,QAAU,SACvBjlB,EAAG,MAAQ4C,EAAO,eAAe,MAAMlB,EAAKujB,EAAa,MAAOjlB,EAAG,KAAK,OAG3E,CACD,MAAMb,EAAQuC,EAAI,IAAI,WAAa9B,EAAU,KAAMjM,CAAM,kBAAkB,EAC3EqM,EAAG,MAAQ4C,EAAO,eAAe,MAAMlB,EAAKvC,EAAOa,EAAG,MAAOJ,EAAU,IAAI,CAC3F,CAEA,CACA,CACA,OAAA0Q,GAAA,QAAkBmU,EAClBnU,GAAA,QAAkBlW,+CCvHlB,OAAO,eAAe8qB,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAMC,EAAO1sB,GAAe,EACtB2sB,EAAQ9qB,GAAgB,EACxB+qB,EAAO,CACT,UACA,MACA,QACA,cACA,CAAE,QAAS,UAAY,EACvB,cACAF,EAAK,QACLC,EAAM,OACT,EACDF,OAAAA,GAAA,QAAkBG,2DCblB,OAAO,eAAeC,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAM1lB,EAAYnH,EAAgC,EAC5C8sB,EAAM3lB,EAAU,UAChB4lB,EAAO,CACT,QAAS,CAAE,MAAO,KAAM,GAAID,EAAI,IAAK,KAAMA,EAAI,EAAI,EACnD,QAAS,CAAE,MAAO,KAAM,GAAIA,EAAI,IAAK,KAAMA,EAAI,EAAI,EACnD,iBAAkB,CAAE,MAAO,IAAK,GAAIA,EAAI,GAAI,KAAMA,EAAI,GAAK,EAC3D,iBAAkB,CAAE,MAAO,IAAK,GAAIA,EAAI,GAAI,KAAMA,EAAI,GAAK,CAC9D,EACK3pB,EAAQ,CACV,QAAS,CAAC,CAAE,QAAAgF,EAAS,WAAA6H,CAAU,OAAW7I,EAAU,eAAgB4lB,EAAK5kB,CAAO,EAAE,KAAK,IAAI6H,CAAU,GACrG,OAAQ,CAAC,CAAE,QAAA7H,EAAS,WAAA6H,CAAU,OAAW7I,EAAU,kBAAmB4lB,EAAK5kB,CAAO,EAAE,KAAK,YAAY6H,CAAU,GAClH,EACKrO,EAAM,CACR,QAAS,OAAO,KAAKorB,CAAI,EACzB,KAAM,SACN,WAAY,SACZ,MAAO,GACP,MAAA5pB,EACA,KAAKoH,EAAK,CACN,KAAM,CAAE,QAAApC,EAAS,KAAAtQ,EAAM,WAAAmY,CAAY,EAAGzF,EACtCA,EAAI,aAAcpD,EAAU,KAAMtP,CAAI,IAAIk1B,EAAK5kB,CAAO,EAAE,IAAI,IAAI6H,CAAU,aAAanY,CAAI,GAAG,CACjG,CACJ,EACD,OAAAg1B,GAAA,QAAkBlrB,qDCxBlB,OAAO,eAAeqrB,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAM7lB,EAAYnH,EAAgC,EAK5C2B,EAAM,CACR,QAAS,aACT,KAAM,SACN,WAAY,SACZ,MAAO,GACP,MATU,CACV,QAAS,CAAC,CAAE,WAAAqO,QAAqB7I,EAAU,2BAA4B6I,CAAU,GACjF,OAAQ,CAAC,CAAE,WAAAA,CAAU,OAAW7I,EAAU,kBAAmB6I,CAAU,GAC1E,EAOG,KAAKzF,EAAK,CACN,KAAM,CAAE,IAAAtB,EAAK,KAAApR,EAAM,WAAAmY,EAAY,GAAAzI,CAAI,EAAGgD,EAEhC0iB,EAAO1lB,EAAG,KAAK,oBACfpI,EAAM8J,EAAI,IAAI,KAAK,EACnBikB,EAAUD,KACN9lB,EAAU,yBAA0BhI,CAAG,OAAOA,CAAG,UAAU8tB,CAAI,MAC/D9lB,EAAU,KAAMhI,CAAG,iBAAiBA,CAAG,IACjDoL,EAAI,aAAcpD,EAAU,MAAO6I,CAAU,cAAc7Q,CAAG,MAAMtH,CAAI,IAAImY,CAAU,KAAKkd,CAAO,IAAI,CACzG,CACJ,EACD,OAAAF,GAAA,QAAkBrrB,2DCvBlB,OAAO,eAAewrB,GAAS,aAAc,CAAE,MAAO,GAAM,EAG5D,SAASC,EAAWvuB,EAAK,CACrB,MAAMsH,EAAMtH,EAAI,OAChB,IAAIoW,EAAS,EACToY,EAAM,EACNlhC,EACJ,KAAOkhC,EAAMlnB,GACT8O,IACA9oB,EAAQ0S,EAAI,WAAWwuB,GAAK,EACxBlhC,GAAS,OAAUA,GAAS,OAAUkhC,EAAMlnB,IAE5Cha,EAAQ0S,EAAI,WAAWwuB,CAAG,GACrBlhC,EAAQ,SAAY,OACrBkhC,KAGZ,OAAOpY,CACX,CACAkY,OAAAA,GAAA,QAAkBC,EAClBA,EAAW,KAAO,8FCrBlB,OAAO,eAAeE,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAMnmB,EAAYnH,EAAgC,EAC5CmK,EAAStI,EAA6B,EACtCsrB,EAAe/iB,GAAmC,EAQlDzI,EAAM,CACR,QAAS,CAAC,YAAa,WAAW,EAClC,KAAM,SACN,WAAY,SACZ,MAAO,GACP,MAZU,CACV,QAAQ,CAAE,QAAAwG,EAAS,WAAA6H,GAAc,CAC7B,MAAMud,EAAOplB,IAAY,YAAc,OAAS,QAChD,SAAWhB,EAAU,qBAAsBomB,CAAI,SAASvd,CAAU,aACrE,EACD,OAAQ,CAAC,CAAE,WAAAA,CAAU,OAAW7I,EAAU,aAAc6I,CAAU,GACrE,EAOG,KAAKzF,EAAK,CACN,KAAM,CAAE,QAAApC,EAAS,KAAAtQ,EAAM,WAAAmY,EAAY,GAAAzI,CAAI,EAAGgD,EACpCxH,EAAKoF,IAAY,YAAchB,EAAU,UAAU,GAAKA,EAAU,UAAU,GAC5EhB,EAAMoB,EAAG,KAAK,UAAY,MAAYJ,EAAU,KAAMtP,CAAI,aAAgBsP,EAAU,QAAUgD,EAAO,SAASI,EAAI,IAAK4iB,EAAa,OAAO,CAAC,IAAIt1B,CAAI,IAC1J0S,EAAI,aAAcpD,EAAU,KAAMhB,CAAG,IAAIpD,CAAE,IAAIiN,CAAU,EAAE,CAC9D,CACJ,EACD,OAAAsd,GAAA,QAAkB3rB,qDCxBlB,OAAO,eAAeoQ,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAMhS,EAASC,GAAkB,EAC3BmH,EAAYtF,EAAgC,EAK5CF,EAAM,CACR,QAAS,UACT,KAAM,SACN,WAAY,SACZ,MAAO,GACP,MATU,CACV,QAAS,CAAC,CAAE,WAAAqO,CAAU,OAAW7I,EAAU,2BAA4B6I,CAAU,IACjF,OAAQ,CAAC,CAAE,WAAAA,CAAU,OAAW7I,EAAU,eAAgB6I,CAAU,GACvE,EAOG,KAAKzF,EAAK,CACN,KAAM,CAAE,KAAA1S,EAAM,MAAAuQ,EAAO,OAAAZ,EAAQ,WAAAwI,EAAY,GAAAzI,CAAE,EAAKgD,EAE1CyH,EAAIzK,EAAG,KAAK,cAAgB,IAAM,GAClC0K,EAAS7J,KAAYjB,EAAU,iBAAkB6I,CAAU,KAAKgC,CAAC,QAAWjS,EAAO,YAAYwK,EAAK/C,CAAM,EAChH+C,EAAI,aAAcpD,EAAU,MAAO8K,CAAM,SAASpa,CAAI,GAAG,CAC5D,CACJ,EACD,OAAAka,GAAA,QAAkBpQ,qDCrBlB,OAAO,eAAe6rB,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAMrmB,EAAYnH,EAAgC,EAQ5C2B,EAAM,CACR,QAAS,CAAC,gBAAiB,eAAe,EAC1C,KAAM,SACN,WAAY,SACZ,MAAO,GACP,MAZU,CACV,QAAQ,CAAE,QAAAwG,EAAS,WAAA6H,GAAc,CAC7B,MAAMud,EAAOplB,IAAY,gBAAkB,OAAS,QACpD,SAAWhB,EAAU,qBAAsBomB,CAAI,SAASvd,CAAU,aACrE,EACD,OAAQ,CAAC,CAAE,WAAAA,CAAU,OAAW7I,EAAU,aAAc6I,CAAU,GACrE,EAOG,KAAKzF,EAAK,CACN,KAAM,CAAE,QAAApC,EAAS,KAAAtQ,EAAM,WAAAmY,CAAY,EAAGzF,EAChCxH,EAAKoF,IAAY,gBAAkBhB,EAAU,UAAU,GAAKA,EAAU,UAAU,GACtFoD,EAAI,aAAcpD,EAAU,iBAAkBtP,CAAI,YAAYkL,CAAE,IAAIiN,CAAU,EAAE,CACnF,CACJ,EACD,OAAAwd,GAAA,QAAkB7rB,qDCrBlB,OAAO,eAAe8rB,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAM1tB,EAASC,GAAkB,EAC3BmH,EAAYtF,EAAgC,EAC5CsI,EAASC,EAA6B,EAKtCzI,EAAM,CACR,QAAS,WACT,KAAM,SACN,WAAY,QACZ,MAAO,GACP,MATU,CACV,QAAS,CAAC,CAAE,OAAQ,CAAE,gBAAA+rB,CAAe,CAAI,OAASvmB,EAAU,oCAAqCumB,CAAe,IAChH,OAAQ,CAAC,CAAE,OAAQ,CAAE,gBAAAA,CAAe,CAAI,OAASvmB,EAAU,uBAAwBumB,CAAe,GACrG,EAOG,KAAKnjB,EAAK,CACN,KAAM,CAAE,IAAAtB,EAAK,OAAAzB,EAAQ,WAAAwI,EAAY,KAAAnY,EAAM,MAAAuQ,EAAO,GAAAb,CAAE,EAAKgD,EAC/C,CAAE,KAAAvJ,CAAI,EAAKuG,EACjB,GAAI,CAACa,GAASZ,EAAO,SAAW,EAC5B,OACJ,MAAMmmB,EAAUnmB,EAAO,QAAUxG,EAAK,aAKtC,GAJIuG,EAAG,UACHqmB,EAAe,EAEfC,EAAiB,EACjB7sB,EAAK,eAAgB,CACrB,MAAMsI,EAAQiB,EAAI,aAAa,WACzB,CAAE,kBAAAujB,GAAsBvjB,EAAI,GAClC,UAAWwjB,KAAevmB,EACtB,IAAK8B,GAAU,KAA2B,OAASA,EAAMykB,CAAW,KAAO,QAAa,CAACD,EAAkB,IAAIC,CAAW,EAAG,CACzH,MAAM7lB,EAAaX,EAAG,UAAU,OAASA,EAAG,cACtCyC,EAAM,sBAAsB+jB,CAAW,wBAAwB7lB,CAAU,wBAC3EiC,EAAO,iBAAiB5C,EAAIyC,EAAKzC,EAAG,KAAK,cAAc,CAC/E,CAEA,CACQ,SAASqmB,GAAgB,CACrB,GAAID,GAAWvlB,EACXmC,EAAI,WAAWpD,EAAU,IAAK6mB,CAAe,MAG7C,WAAWzd,KAAQ/I,KACXzH,EAAO,wBAAwBwK,EAAKgG,CAAI,CAGhE,CACQ,SAASsd,GAAkB,CACvB,MAAM/c,EAAU7H,EAAI,IAAI,SAAS,EACjC,GAAI0kB,GAAWvlB,EAAO,CAClB,MAAM0E,EAAQ7D,EAAI,IAAI,QAAS,EAAI,EACnCsB,EAAI,WAAWuC,EAAO,IAAMmhB,EAAiBnd,EAAShE,CAAK,CAAC,EAC5DvC,EAAI,GAAGuC,CAAK,CAC5B,MAEgB7D,EAAI,MAAOlJ,EAAO,kBAAkBwK,EAAK/C,EAAQsJ,CAAO,CAAC,KACrD/Q,EAAO,mBAAmBwK,EAAKuG,CAAO,EAC1C7H,EAAI,KAAM,CAE1B,CACQ,SAAS+kB,GAAkB,CACvB/kB,EAAI,MAAM,OAAQ+G,EAAaO,GAAS,CACpChG,EAAI,UAAU,CAAE,gBAAiBgG,CAAI,CAAE,EACvCtH,EAAI,MAAOlJ,EAAO,kBAAkBkJ,EAAKpR,EAAM0Y,EAAMvP,EAAK,aAAa,EAAG,IAAMuJ,EAAI,MAAK,CAAE,CAC3G,CAAa,CACb,CACQ,SAAS0jB,EAAiBnd,EAAShE,EAAO,CACtCvC,EAAI,UAAU,CAAE,gBAAiBuG,CAAO,CAAE,EAC1C7H,EAAI,MAAM6H,EAASd,EAAY,IAAM,CACjC/G,EAAI,OAAO6D,KAAW/M,EAAO,gBAAgBkJ,EAAKpR,EAAMiZ,EAAS9P,EAAK,aAAa,CAAC,EACpFiI,EAAI,MAAO9B,EAAU,KAAK2F,CAAK,EAAG,IAAM,CACpCvC,EAAI,MAAO,EACXtB,EAAI,MAAO,CAC/B,CAAiB,CACjB,EAAe9B,EAAU,GAAG,CAC5B,CACK,CACJ,EACD,OAAAsmB,GAAA,QAAkB9rB,qDC5ElB,OAAO,eAAeusB,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAM/mB,EAAYnH,EAAgC,EAQ5C2B,EAAM,CACR,QAAS,CAAC,WAAY,UAAU,EAChC,KAAM,QACN,WAAY,SACZ,MAAO,GACP,MAZU,CACV,QAAQ,CAAE,QAAAwG,EAAS,WAAA6H,GAAc,CAC7B,MAAMud,EAAOplB,IAAY,WAAa,OAAS,QAC/C,SAAWhB,EAAU,qBAAsBomB,CAAI,SAASvd,CAAU,QACrE,EACD,OAAQ,CAAC,CAAE,WAAAA,CAAU,OAAW7I,EAAU,aAAc6I,CAAU,GACrE,EAOG,KAAKzF,EAAK,CACN,KAAM,CAAE,QAAApC,EAAS,KAAAtQ,EAAM,WAAAmY,CAAY,EAAGzF,EAChCxH,EAAKoF,IAAY,WAAahB,EAAU,UAAU,GAAKA,EAAU,UAAU,GACjFoD,EAAI,aAAcpD,EAAU,KAAMtP,CAAI,WAAWkL,CAAE,IAAIiN,CAAU,EAAE,CACtE,CACJ,EACD,OAAAke,GAAA,QAAkBvsB,2DCrBlB,OAAO,eAAewsB,GAAS,aAAc,CAAE,MAAO,GAAM,EAE5D,MAAMpZ,EAAQ/U,GAA0B,EACxC+U,OAAAA,EAAM,KAAO,4CACboZ,GAAA,QAAkBpZ,+CCJlB,OAAO,eAAeqZ,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAM9V,EAAatY,GAA0C,EACvDmH,EAAYtF,EAAgC,EAC5CsI,EAASC,EAA6B,EACtC+jB,EAAUpgB,GAA8B,EAKxCpM,EAAM,CACR,QAAS,cACT,KAAM,QACN,WAAY,UACZ,MAAO,GACP,MATU,CACV,QAAS,CAAC,CAAE,OAAQ,CAAE,EAAAjD,EAAG,EAAA2vB,CAAG,CAAA,OAAWlnB,EAAU,+CAAgDknB,CAAC,QAAQ3vB,CAAC,kBAC3G,OAAQ,CAAC,CAAE,OAAQ,CAAE,EAAAA,EAAG,EAAA2vB,CAAG,CAAA,OAAWlnB,EAAU,SAAUzI,CAAC,QAAQ2vB,CAAC,GACvE,EAOG,KAAK9jB,EAAK,CACN,KAAM,CAAE,IAAAtB,EAAK,KAAApR,EAAM,MAAAuQ,EAAO,OAAAZ,EAAQ,aAAA2E,EAAc,WAAA6D,EAAY,GAAAzI,CAAE,EAAKgD,EACnE,GAAI,CAACnC,GAAS,CAACZ,EACX,OACJ,MAAMsF,EAAQ7D,EAAI,IAAI,OAAO,EACvBqlB,EAAYniB,EAAa,SAAYmM,EAAW,gBAAgBnM,EAAa,KAAK,EAAI,CAAE,EAC9F5B,EAAI,WAAWuC,EAAOyhB,KAAyBpnB,EAAU,KAAM6I,CAAU,YAAY,EACrFzF,EAAI,GAAGuC,CAAK,EACZ,SAASyhB,GAAsB,CAC3B,MAAM7vB,EAAIuK,EAAI,IAAI,OAAS9B,EAAU,KAAMtP,CAAI,SAAS,EAClDw2B,EAAIplB,EAAI,IAAI,GAAG,EACrBsB,EAAI,UAAU,CAAE,EAAA7L,EAAG,EAAA2vB,CAAC,CAAE,EACtBplB,EAAI,OAAO6D,EAAO,EAAI,EACtB7D,EAAI,MAAO9B,EAAU,KAAMzI,CAAC,OAAQ,KAAO+H,EAAW,EAAK+nB,EAAQC,GAAQ/vB,EAAG2vB,CAAC,CAAC,CAC5F,CACQ,SAAS5nB,GAAc,CACnB,OAAO6nB,EAAU,OAAS,GAAK,CAACA,EAAU,KAAMtf,GAAMA,IAAM,UAAYA,IAAM,OAAO,CACjG,CACQ,SAASwf,EAAM9vB,EAAG2vB,EAAG,CACjB,MAAMn1B,EAAO+P,EAAI,KAAK,MAAM,EACtByF,KAAgB4J,EAAW,gBAAgBgW,EAAWp1B,EAAMqO,EAAG,KAAK,cAAe+Q,EAAW,SAAS,KAAK,EAC5GoW,EAAUzlB,EAAI,MAAM,aAAe9B,EAAU,MAAO,EAC1D8B,EAAI,OAAQ9B,EAAU,MAAOzI,CAAC,MAAO,IAAM,CACvCuK,EAAI,IAAI/P,KAAUiO,EAAU,KAAMtP,CAAI,IAAI6G,CAAC,GAAG,EAC9CuK,EAAI,GAAGyF,KAAevH,EAAU,YAAa,EACzCmnB,EAAU,OAAS,GACnBrlB,EAAI,MAAO9B,EAAU,YAAajO,CAAI,kBAAoBiO,EAAU,KAAMjO,CAAI,SAAS,EAC3F+P,EACK,MAAO9B,EAAU,YAAaunB,CAAO,IAAIx1B,CAAI,gBAAiB,IAAM,CACrE+P,EAAI,OAAOolB,KAAOlnB,EAAU,KAAMunB,CAAO,IAAIx1B,CAAI,GAAG,EACpDqR,EAAI,MAAO,EACXtB,EAAI,OAAO6D,EAAO,EAAK,EAAE,MAAO,CACnC,CAAA,EACI,QAAS3F,EAAU,KAAMunB,CAAO,IAAIx1B,CAAI,OAAOwF,CAAC,EAAE,CACvE,CAAa,CACb,CACQ,SAAS+vB,EAAO/vB,EAAG2vB,EAAG,CAClB,MAAMM,KAAUxkB,EAAO,SAASlB,EAAKklB,EAAQ,OAAO,EAC9CS,EAAQ3lB,EAAI,KAAK,OAAO,EAC9BA,EAAI,MAAM2lB,CAAK,EAAE,OAAQznB,EAAU,MAAOzI,CAAC,MAAO,IAAMuK,EAAI,OAAQ9B,EAAU,KAAMknB,CAAC,MAAM3vB,CAAC,KAAK2vB,CAAC,MAAO,IAAMplB,EAAI,MAAO9B,EAAU,KAAMwnB,CAAG,IAAI92B,CAAI,IAAI6G,CAAC,MAAM7G,CAAI,IAAIw2B,CAAC,KAAM,IAAM,CACjL9jB,EAAI,MAAO,EACXtB,EAAI,OAAO6D,EAAO,EAAK,EAAE,MAAM8hB,CAAK,CACvC,CAAA,CAAC,CAAC,CACf,CACK,CACJ,EACD,OAAAR,GAAA,QAAkBzsB,qDC7DlB,OAAO,eAAektB,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAM1nB,EAAYnH,EAAgC,EAC5CmK,EAAStI,EAA6B,EACtCssB,EAAU/jB,GAA8B,EAKxCzI,EAAM,CACR,QAAS,QACT,MAAO,GACP,MAPU,CACV,QAAS,4BACT,OAAQ,CAAC,CAAE,WAAAqO,CAAU,OAAW7I,EAAU,oBAAqB6I,CAAU,GAC5E,EAKG,KAAKzF,EAAK,CACN,KAAM,CAAE,IAAAtB,EAAK,KAAApR,EAAM,MAAAuQ,EAAO,WAAA4H,EAAY,OAAAxI,CAAM,EAAK+C,EAC7CnC,GAAUZ,GAAU,OAAOA,GAAU,SACrC+C,EAAI,aAAcpD,EAAU,SAAWgD,EAAO,SAASlB,EAAKklB,EAAQ,OAAO,CAAC,IAAIt2B,CAAI,KAAKmY,CAAU,GAAG,EAGtGzF,EAAI,QAASpD,EAAU,KAAMK,CAAM,QAAQ3P,CAAI,EAAE,CAExD,CACJ,EACD,OAAAg3B,GAAA,QAAkBltB,qDCtBlB,OAAO,eAAemtB,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAM3nB,EAAYnH,EAAgC,EAC5CmK,EAAStI,EAA6B,EACtCssB,EAAU/jB,GAA8B,EAKxCzI,EAAM,CACR,QAAS,OACT,WAAY,QACZ,MAAO,GACP,MARU,CACV,QAAS,6CACT,OAAQ,CAAC,CAAE,WAAAqO,CAAU,OAAW7I,EAAU,qBAAsB6I,CAAU,GAC7E,EAMG,KAAKzF,EAAK,CACN,KAAM,CAAE,IAAAtB,EAAK,KAAApR,EAAM,MAAAuQ,EAAO,OAAAZ,EAAQ,WAAAwI,EAAY,GAAAzI,CAAE,EAAKgD,EACrD,GAAI,CAACnC,GAASZ,EAAO,SAAW,EAC5B,MAAM,IAAI,MAAM,gCAAgC,EACpD,MAAMmmB,EAAUnmB,EAAO,QAAUD,EAAG,KAAK,SACzC,IAAIonB,EACJ,MAAMI,EAAS,IAAOJ,IAAwCA,KAAUxkB,EAAO,SAASlB,EAAKklB,EAAQ,OAAO,GAC5G,IAAIrhB,EACJ,GAAI6gB,GAAWvlB,EACX0E,EAAQ7D,EAAI,IAAI,OAAO,EACvBsB,EAAI,WAAWuC,EAAOkiB,CAAQ,MAE7B,CAED,GAAI,CAAC,MAAM,QAAQxnB,CAAM,EACrB,MAAM,IAAI,MAAM,0BAA0B,EAC9C,MAAMynB,EAAUhmB,EAAI,MAAM,UAAW+G,CAAU,EAC/ClD,KAAY3F,EAAU,IAAI,GAAGK,EAAO,IAAI,CAACmgB,EAAIjpB,IAAMwwB,EAAUD,EAASvwB,CAAC,CAAC,CAAC,CACrF,CACQ6L,EAAI,KAAKuC,CAAK,EACd,SAASkiB,GAAW,CAChB/lB,EAAI,OAAO6D,EAAO,EAAK,EACvB7D,EAAI,MAAM,IAAK+G,EAAa2Y,GAAM1f,EAAI,MAAO9B,EAAU,KAAM4nB,EAAM,CAAE,IAAIl3B,CAAI,KAAK8wB,CAAC,IAAK,IAAM1f,EAAI,OAAO6D,EAAO,EAAI,EAAE,MAAO,CAAA,CAAC,CAC1I,CACQ,SAASoiB,EAAUD,EAASvwB,EAAG,CAC3B,MAAM4R,EAAM9I,EAAO9I,CAAC,EACpB,OAAO,OAAO4R,GAAQ,UAAYA,IAAQ,QAChCnJ,EAAU,KAAM4nB,EAAM,CAAE,IAAIl3B,CAAI,KAAKo3B,CAAO,IAAIvwB,CAAC,QACjDyI,EAAU,KAAMtP,CAAI,QAAQyY,CAAG,EACrD,CACK,CACJ,EACD,OAAAwe,GAAA,QAAkBntB,+CC7ClB,OAAO,eAAewtB,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAMC,EAAgBpvB,GAAwB,EACxCqvB,EAAextB,GAAuB,EACtCytB,EAAgBllB,GAAwB,EACxCmlB,EAAYxhB,GAAoB,EAChCyhB,EAAoBxhB,GAA4B,EAChDyhB,EAAa9W,GAAqB,EAClC+W,EAAe9W,GAAuB,EACtC+W,EAAgB9W,GAAwB,EACxC+W,EAAU7W,GAAkB,EAC5B8W,EAAS7W,GAAiB,EAC1B8W,EAAa,CAEfV,EAAc,QACdC,EAAa,QAEbC,EAAc,QACdC,EAAU,QAEVC,EAAkB,QAClBC,EAAW,QAEXC,EAAa,QACbC,EAAc,QAEd,CAAE,QAAS,OAAQ,WAAY,CAAC,SAAU,OAAO,CAAG,EACpD,CAAE,QAAS,WAAY,WAAY,SAAW,EAC9CC,EAAQ,QACRC,EAAO,OACV,EACDV,OAAAA,GAAA,QAAkBW,2DC9BlB,OAAO,eAAeC,GAAS,aAAc,CAAE,MAAO,GAAM,EAC7BA,GAAA,wBAAG,OAClC,MAAM5oB,EAAYnH,EAAgC,EAC5CmK,EAAStI,EAA6B,EAKtCF,EAAM,CACR,QAAS,kBACT,KAAM,QACN,WAAY,CAAC,UAAW,QAAQ,EAChC,OAAQ,cACR,MATU,CACV,QAAS,CAAC,CAAE,OAAQ,CAAE,IAAAwE,CAAG,CAAI,OAASgB,EAAU,+BAAgChB,CAAG,SACnF,OAAQ,CAAC,CAAE,OAAQ,CAAE,IAAAA,CAAG,CAAI,OAASgB,EAAU,aAAchB,CAAG,GACnE,EAOG,KAAKoE,EAAK,CACN,KAAM,CAAE,aAAA4B,EAAc,GAAA5E,CAAE,EAAKgD,EACvB,CAAE,MAAA7D,CAAK,EAAKyF,EAClB,GAAI,CAAC,MAAM,QAAQzF,CAAK,EAAG,IACnByD,EAAO,iBAAiB5C,EAAI,sEAAsE,EACtG,MACZ,CACQyoB,EAAwBzlB,EAAK7D,CAAK,CACrC,CACJ,EACD,SAASspB,EAAwBzlB,EAAK7D,EAAO,CACzC,KAAM,CAAE,IAAAuC,EAAK,OAAAzB,EAAQ,KAAA3P,EAAM,QAAAsQ,EAAS,GAAAZ,CAAE,EAAKgD,EAC3ChD,EAAG,MAAQ,GACX,MAAMpB,EAAM8C,EAAI,MAAM,SAAW9B,EAAU,KAAMtP,CAAI,SAAS,EAC9D,GAAI2P,IAAW,GACX+C,EAAI,UAAU,CAAE,IAAK7D,EAAM,MAAM,CAAE,EACnC6D,EAAI,QAASpD,EAAU,KAAMhB,CAAG,OAAOO,EAAM,MAAM,EAAE,UAEhD,OAAOc,GAAU,UAAY,IAAK2C,EAAO,mBAAmB5C,EAAIC,CAAM,EAAG,CAC9E,MAAMsF,EAAQ7D,EAAI,IAAI,WAAa9B,EAAU,KAAMhB,CAAG,OAAOO,EAAM,MAAM,EAAE,EAC3EuC,EAAI,MAAO9B,EAAU,KAAK2F,CAAK,EAAG,IAAMsF,EAActF,CAAK,CAAC,EAC5DvC,EAAI,GAAGuC,CAAK,CACpB,CACI,SAASsF,EAActF,EAAO,CAC1B7D,EAAI,SAAS,IAAKvC,EAAM,OAAQP,EAAMzH,GAAM,CACxC6L,EAAI,UAAU,CAAE,QAAApC,EAAS,SAAUzJ,EAAG,aAAcyL,EAAO,KAAK,GAAG,EAAI2C,CAAK,EACvEvF,EAAG,WACJ0B,EAAI,MAAO9B,EAAU,KAAK2F,CAAK,EAAG,IAAM7D,EAAI,OAAO,CACnE,CAAS,CACT,CACA,CACA,OAAA8mB,GAAA,wBAAkCC,EAClCD,GAAA,QAAkBpuB,2DC9ClB,OAAO,eAAe+E,GAAS,aAAc,CAAE,MAAO,GAAM,EACvCA,GAAA,cAAG,OACxB,MAAMS,EAAYnH,EAAgC,EAC5CmK,EAAStI,EAA6B,EACtC9B,EAASqK,GAAkB,EAC3BzI,EAAM,CACR,QAAS,QACT,KAAM,QACN,WAAY,CAAC,SAAU,QAAS,SAAS,EACzC,OAAQ,cACR,KAAK4I,EAAK,CACN,KAAM,CAAE,OAAA/C,EAAQ,GAAAD,CAAE,EAAKgD,EACvB,GAAI,MAAM,QAAQ/C,CAAM,EACpB,OAAOyoB,EAAc1lB,EAAK,kBAAmB/C,CAAM,EACvDD,EAAG,MAAQ,OACH4C,EAAO,mBAAmB5C,EAAIC,CAAM,GAE5C+C,EAAI,MAAOxK,EAAO,eAAewK,CAAG,CAAC,CACxC,CACJ,EACD,SAAS0lB,EAAc1lB,EAAK2lB,EAAYC,EAAS5lB,EAAI,OAAQ,CACzD,KAAM,CAAE,IAAAtB,EAAK,aAAAkD,EAAc,KAAAtU,EAAM,QAAAsQ,EAAS,GAAAZ,CAAE,EAAKgD,EACjD6lB,EAAiBjkB,CAAY,EACzB5E,EAAG,KAAK,aAAe4oB,EAAO,QAAU5oB,EAAG,QAAU,KACrDA,EAAG,MAAQ4C,EAAO,eAAe,MAAMlB,EAAKknB,EAAO,OAAQ5oB,EAAG,KAAK,GAEvE,MAAMuF,EAAQ7D,EAAI,KAAK,OAAO,EACxB9C,EAAM8C,EAAI,MAAM,SAAW9B,EAAU,KAAMtP,CAAI,SAAS,EAC9Ds4B,EAAO,QAAQ,CAAC7f,EAAK5R,IAAM,IACfyL,EAAO,mBAAmB5C,EAAI+I,CAAG,IAEzCrH,EAAI,MAAO9B,EAAU,KAAMhB,CAAG,MAAMzH,CAAC,GAAI,IAAM6L,EAAI,UAAU,CACzD,QAAApC,EACA,WAAYzJ,EACZ,SAAUA,CACb,EAAEoO,CAAK,CAAC,EACTvC,EAAI,GAAGuC,CAAK,EACpB,CAAK,EACD,SAASsjB,EAAiB9f,EAAK,CAC3B,KAAM,CAAE,KAAAtP,EAAM,cAAAkL,CAAa,EAAK3E,EAC1B4Z,EAAIgP,EAAO,OACXE,EAAYlP,IAAM7Q,EAAI,WAAa6Q,IAAM7Q,EAAI,UAAYA,EAAI4f,CAAU,IAAM,IACnF,GAAIlvB,EAAK,cAAgB,CAACqvB,EAAW,CACjC,MAAMrmB,EAAM,IAAI7B,CAAO,QAAQgZ,CAAC,oCAAoC+O,CAAU,4CAA4ChkB,CAAa,OACnI/B,EAAO,iBAAiB5C,EAAIyC,EAAKhJ,EAAK,YAAY,CAClE,CACA,CACA,CACA,OAAA0F,GAAA,cAAwBupB,EACxBvpB,GAAA,QAAkB/E,+CCjDlB,OAAO,eAAe2uB,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAMC,EAAUvwB,GAAkB,EAC5B2B,EAAM,CACR,QAAS,cACT,KAAM,QACN,WAAY,CAAC,OAAO,EACpB,OAAQ,cACR,KAAO4I,MAAYgmB,EAAQ,eAAehmB,EAAK,OAAO,CACzD,EACD,OAAA+lB,GAAA,QAAkB3uB,qDCTlB,OAAO,eAAe6uB,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAMrpB,EAAYnH,EAAgC,EAC5CmK,EAAStI,EAA6B,EACtC9B,EAASqK,GAAkB,EAC3BqmB,EAAoB1iB,GAA4B,EAKhDpM,EAAM,CACR,QAAS,QACT,KAAM,QACN,WAAY,CAAC,SAAU,SAAS,EAChC,OAAQ,cACR,MATU,CACV,QAAS,CAAC,CAAE,OAAQ,CAAE,IAAAwE,CAAG,CAAI,OAASgB,EAAU,+BAAgChB,CAAG,SACnF,OAAQ,CAAC,CAAE,OAAQ,CAAE,IAAAA,CAAG,CAAI,OAASgB,EAAU,aAAchB,CAAG,GACnE,EAOG,KAAKoE,EAAK,CACN,KAAM,CAAE,OAAA/C,EAAQ,aAAA2E,EAAc,GAAA5E,CAAI,EAAGgD,EAC/B,CAAE,YAAA+lB,CAAW,EAAKnkB,EACxB5E,EAAG,MAAQ,OACH4C,EAAO,mBAAmB5C,EAAIC,CAAM,IAExC8oB,KACIG,EAAkB,yBAAyBlmB,EAAK+lB,CAAW,EAE/D/lB,EAAI,MAAOxK,EAAO,eAAewK,CAAG,CAAC,EAC5C,CACJ,EACD,OAAAimB,GAAA,QAAkB7uB,qDC3BlB,OAAO,eAAe+uB,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAMvpB,EAAYnH,EAAgC,EAC5CmK,EAAStI,EAA6B,EAOtCF,EAAM,CACR,QAAS,WACT,KAAM,QACN,WAAY,CAAC,SAAU,SAAS,EAChC,OAAQ,cACR,YAAa,GACb,MAZU,CACV,QAAS,CAAC,CAAE,OAAQ,CAAE,IAAAgvB,EAAK,IAAAC,CAAG,CAAI,IAAKA,IAAQ,UACrCzpB,EAAU,6BAA8BwpB,CAAG,oBAC3CxpB,EAAU,6BAA8BwpB,CAAG,qBAAqBC,CAAG,iBAC7E,OAAQ,CAAC,CAAE,OAAQ,CAAE,IAAAD,EAAK,IAAAC,EAAO,IAAKA,IAAQ,UAAgBzpB,EAAU,mBAAoBwpB,CAAG,OAAUxpB,EAAU,mBAAoBwpB,CAAG,kBAAkBC,CAAG,GAClK,EAQG,KAAKrmB,EAAK,CACN,KAAM,CAAE,IAAAtB,EAAK,OAAAzB,EAAQ,aAAA2E,EAAc,KAAAtU,EAAM,GAAA0P,CAAE,EAAKgD,EAChD,IAAIomB,EACAC,EACJ,KAAM,CAAE,YAAAC,EAAa,YAAAC,CAAW,EAAK3kB,EACjC5E,EAAG,KAAK,MACRopB,EAAME,IAAgB,OAAY,EAAIA,EACtCD,EAAME,GAGNH,EAAM,EAEV,MAAMxqB,EAAM8C,EAAI,MAAM,SAAW9B,EAAU,KAAMtP,CAAI,SAAS,EAE9D,GADA0S,EAAI,UAAU,CAAE,IAAAomB,EAAK,IAAAC,CAAG,CAAE,EACtBA,IAAQ,QAAaD,IAAQ,EAAG,IAC5BxmB,EAAO,iBAAiB5C,EAAI,sEAAsE,EACtG,MACZ,CACQ,GAAIqpB,IAAQ,QAAaD,EAAMC,EAAK,IAC5BzmB,EAAO,iBAAiB5C,EAAI,iDAAiD,EACjFgD,EAAI,KAAM,EACV,MACZ,CACQ,MAAQJ,EAAO,mBAAmB5C,EAAIC,CAAM,EAAG,CAC3C,IAAIzD,KAAWoD,EAAU,KAAMhB,CAAG,OAAOwqB,CAAG,GACxCC,IAAQ,SACR7sB,KAAWoD,EAAU,KAAMpD,CAAI,OAAOoC,CAAG,OAAOyqB,CAAG,IACvDrmB,EAAI,KAAKxG,CAAI,EACb,MACZ,CACQwD,EAAG,MAAQ,GACX,MAAMuF,EAAQ7D,EAAI,KAAK,OAAO,EAC1B2nB,IAAQ,QAAaD,IAAQ,EAC7Bve,EAActF,EAAO,IAAM7D,EAAI,GAAG6D,EAAO,IAAM7D,EAAI,MAAK,CAAE,CAAC,EAEtD0nB,IAAQ,GACb1nB,EAAI,IAAI6D,EAAO,EAAI,EACf8jB,IAAQ,QACR3nB,EAAI,MAAO9B,EAAU,KAAMtP,CAAI,cAAek5B,CAAsB,IAGxE9nB,EAAI,IAAI6D,EAAO,EAAK,EACpBikB,EAAwB,GAE5BxmB,EAAI,OAAOuC,EAAO,IAAMvC,EAAI,MAAK,CAAE,EACnC,SAASwmB,GAAyB,CAC9B,MAAMxe,EAAWtJ,EAAI,KAAK,QAAQ,EAC5BqN,EAAQrN,EAAI,IAAI,QAAS,CAAC,EAChCmJ,EAAcG,EAAU,IAAMtJ,EAAI,GAAGsJ,EAAU,IAAMye,EAAY1a,CAAK,CAAC,CAAC,CACpF,CACQ,SAASlE,EAAc6e,EAAQC,EAAO,CAClCjoB,EAAI,SAAS,IAAK,EAAG9C,EAAMzH,GAAM,CAC7B6L,EAAI,UAAU,CACV,QAAS,WACT,SAAU7L,EACV,aAAcyL,EAAO,KAAK,IAC1B,cAAe,EAClB,EAAE8mB,CAAM,EACTC,EAAO,CACvB,CAAa,CACb,CACQ,SAASF,EAAY1a,EAAO,CACxBrN,EAAI,QAAS9B,EAAU,KAAMmP,CAAK,IAAI,EAClCsa,IAAQ,OACR3nB,EAAI,MAAO9B,EAAU,KAAMmP,CAAK,OAAOqa,CAAG,GAAI,IAAM1nB,EAAI,OAAO6D,EAAO,EAAI,EAAE,OAAO,GAGnF7D,EAAI,MAAO9B,EAAU,KAAMmP,CAAK,MAAMsa,CAAG,GAAI,IAAM3nB,EAAI,OAAO6D,EAAO,EAAK,EAAE,OAAO,EAC/E6jB,IAAQ,EACR1nB,EAAI,OAAO6D,EAAO,EAAI,EAEtB7D,EAAI,MAAO9B,EAAU,KAAMmP,CAAK,OAAOqa,CAAG,GAAI,IAAM1nB,EAAI,OAAO6D,EAAO,EAAI,CAAC,EAE/F,CACK,CACJ,EACD,OAAA4jB,GAAA,QAAkB/uB,6DC5FlB,OAAO,eAAc3D,EAAU,aAAc,CAAE,MAAO,GAAM,EAC5DA,EAA6B,mBAAAA,EAAA,qBAA+BA,EAAgB,MAAA,OAC5E,MAAMmJ,EAAYnH,EAAgC,EAC5CmK,EAAStI,EAA6B,EACtC9B,EAASqK,GAAkB,EACjCpM,EAAgB,MAAA,CACZ,QAAS,CAAC,CAAE,OAAQ,CAAE,SAAA4C,EAAU,UAAAuwB,EAAW,KAAAld,CAAI,KAAS,CACpD,MAAMmd,EAAeD,IAAc,EAAI,WAAa,aACpD,SAAWhqB,EAAU,iBAAkBiqB,CAAY,IAAInd,CAAI,kBAAkBrT,CAAQ,aACxF,EACD,OAAQ,CAAC,CAAE,OAAQ,CAAE,SAAAA,EAAU,UAAAuwB,EAAW,KAAAld,EAAM,gBAAAyZ,CAAiB,CAAA,OAAWvmB,EAAU,gBAAiBvG,CAAQ;AAAA,uBAC5F8sB,CAAe;AAAA,iBACrByD,CAAS;AAAA,YACdld,CAAI,GACf,EACD,MAAMtS,EAAM,CACR,QAAS,eACT,KAAM,SACN,WAAY,SACZ,MAAO3D,EAAQ,MACf,KAAKuM,EAAK,CACN,KAAM,CAAC8mB,EAAUC,CAAO,EAAIC,EAAkBhnB,CAAG,EACjDinB,EAAqBjnB,EAAK8mB,CAAQ,EAClCI,EAAmBlnB,EAAK+mB,CAAO,CAClC,CACJ,EACD,SAASC,EAAkB,CAAE,OAAA/pB,GAAU,CACnC,MAAMkqB,EAAe,CAAE,EACjBC,EAAa,CAAE,EACrB,UAAWzlC,KAAOsb,EAAQ,CACtB,GAAItb,IAAQ,YACR,SACJ,MAAM+nB,EAAO,MAAM,QAAQzM,EAAOtb,CAAG,CAAC,EAAIwlC,EAAeC,EACzD1d,EAAK/nB,CAAG,EAAIsb,EAAOtb,CAAG,CAC9B,CACI,MAAO,CAACwlC,EAAcC,CAAU,CACpC,CACA,SAASH,EAAqBjnB,EAAKmnB,EAAennB,EAAI,OAAQ,CAC1D,KAAM,CAAE,IAAAtB,EAAK,KAAApR,EAAM,GAAA0P,CAAI,EAAGgD,EAC1B,GAAI,OAAO,KAAKmnB,CAAY,EAAE,SAAW,EACrC,OACJ,MAAM5gB,EAAU7H,EAAI,IAAI,SAAS,EACjC,UAAWsH,KAAQmhB,EAAc,CAC7B,MAAMzd,EAAOyd,EAAanhB,CAAI,EAC9B,GAAI0D,EAAK,SAAW,EAChB,SACJ,MAAM2d,KAAkB7xB,EAAO,gBAAgBkJ,EAAKpR,EAAM0Y,EAAMhJ,EAAG,KAAK,aAAa,EACrFgD,EAAI,UAAU,CACV,SAAUgG,EACV,UAAW0D,EAAK,OAChB,KAAMA,EAAK,KAAK,IAAI,CAChC,CAAS,EACG1M,EAAG,UACH0B,EAAI,GAAG2oB,EAAa,IAAM,CACtB,UAAWC,KAAW5d,KACdlU,EAAO,wBAAwBwK,EAAKsnB,CAAO,CAEnE,CAAa,GAGD5oB,EAAI,MAAO9B,EAAU,KAAMyqB,CAAW,WAAY7xB,EAAO,kBAAkBwK,EAAK0J,EAAMnD,CAAO,CAAC,GAAG,KAC7F/Q,EAAO,mBAAmBwK,EAAKuG,CAAO,EAC1C7H,EAAI,KAAM,EAEtB,CACA,CACAjL,EAAA,qBAA+BwzB,EAC/B,SAASC,EAAmBlnB,EAAKonB,EAAapnB,EAAI,OAAQ,CACtD,KAAM,CAAE,IAAAtB,EAAK,KAAApR,EAAM,QAAAsQ,EAAS,GAAAZ,CAAI,EAAGgD,EAC7BuC,EAAQ7D,EAAI,KAAK,OAAO,EAC9B,UAAWsH,KAAQohB,KACPxnB,EAAO,mBAAmB5C,EAAIoqB,EAAWphB,CAAI,CAAC,IAEtDtH,EAAI,MAAOlJ,EAAO,gBAAgBkJ,EAAKpR,EAAM0Y,EAAMhJ,EAAG,KAAK,aAAa,EAAG,IAAM,CAC7E,MAAMkL,EAASlI,EAAI,UAAU,CAAE,QAAApC,EAAS,WAAYoI,CAAM,EAAEzD,CAAK,EACjEvC,EAAI,oBAAoBkI,EAAQ3F,CAAK,CACxC,EAAE,IAAM7D,EAAI,IAAI6D,EAAO,EAAI,CAC3B,EACDvC,EAAI,GAAGuC,CAAK,EAEpB,CACA9O,EAAA,mBAA6ByzB,EAC7BzzB,EAAA,QAAkB2D,2DClFlB,OAAO,eAAemwB,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAM3qB,EAAYnH,EAAgC,EAC5CmK,EAAStI,EAA6B,EAKtCF,EAAM,CACR,QAAS,gBACT,KAAM,SACN,WAAY,CAAC,SAAU,SAAS,EAChC,MARU,CACV,QAAS,8BACT,OAAQ,CAAC,CAAE,OAAA0K,CAAQ,OAASlF,EAAU,oBAAqBkF,EAAO,YAAY,GACjF,EAMG,KAAK9B,EAAK,CACN,KAAM,CAAE,IAAAtB,EAAK,OAAAzB,EAAQ,KAAA3P,EAAM,GAAA0P,CAAI,EAAGgD,EAClC,MAAQJ,EAAO,mBAAmB5C,EAAIC,CAAM,EACxC,OACJ,MAAMsF,EAAQ7D,EAAI,KAAK,OAAO,EAC9BA,EAAI,MAAM,MAAOpR,EAAO3L,GAAQ,CAC5Bqe,EAAI,UAAU,CAAE,aAAcre,CAAG,CAAE,EACnCqe,EAAI,UAAU,CACV,QAAS,gBACT,KAAMre,EACN,UAAW,CAAC,QAAQ,EACpB,aAAcA,EACd,cAAe,EAClB,EAAE4gB,CAAK,EACR7D,EAAI,MAAO9B,EAAU,KAAK2F,CAAK,EAAG,IAAM,CACpCvC,EAAI,MAAM,EAAI,EACThD,EAAG,WACJ0B,EAAI,MAAO,CAC/B,CAAa,CACb,CAAS,EACDsB,EAAI,GAAGuC,CAAK,CACf,CACJ,EACD,OAAAglB,GAAA,QAAkBnwB,qDCnClB,OAAO,eAAeowB,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAMhyB,EAASC,GAAkB,EAC3BmH,EAAYtF,EAAgC,EAC5CqI,EAAUE,GAA8B,EACxCD,EAAS4D,EAA6B,EAKtCpM,EAAM,CACR,QAAS,uBACT,KAAM,CAAC,QAAQ,EACf,WAAY,CAAC,UAAW,QAAQ,EAChC,eAAgB,GAChB,YAAa,GACb,MAVU,CACV,QAAS,sCACT,OAAQ,CAAC,CAAE,OAAA0K,CAAQ,OAASlF,EAAU,0BAA2BkF,EAAO,kBAAkB,GAC7F,EAQG,KAAK9B,EAAK,CACN,KAAM,CAAE,IAAAtB,EAAK,OAAAzB,EAAQ,aAAA2E,EAAc,KAAAtU,EAAM,UAAAqT,EAAW,GAAA3D,CAAE,EAAKgD,EAE3D,GAAI,CAACW,EACD,MAAM,IAAI,MAAM,0BAA0B,EAC9C,KAAM,CAAE,UAAAP,EAAW,KAAA3J,CAAI,EAAKuG,EAE5B,GADAA,EAAG,MAAQ,GACPvG,EAAK,mBAAqB,UAAamJ,EAAO,mBAAmB5C,EAAIC,CAAM,EAC3E,OACJ,MAAM8B,KAAYvJ,EAAO,qBAAqBoM,EAAa,UAAU,EAC/D6lB,KAAejyB,EAAO,qBAAqBoM,EAAa,iBAAiB,EAC/E8lB,EAA2B,EAC3B1nB,EAAI,MAAOpD,EAAU,KAAM+D,CAAS,QAAQhB,EAAQ,QAAQ,MAAM,EAAE,EACpE,SAAS+nB,GAA4B,CACjChpB,EAAI,MAAM,MAAOpR,EAAO3L,GAAQ,CACxB,CAACod,EAAM,QAAU,CAAC0oB,EAAS,OAC3BE,EAAuBhmC,CAAG,EAE1B+c,EAAI,GAAGkpB,EAAajmC,CAAG,EAAG,IAAMgmC,EAAuBhmC,CAAG,CAAC,CAC/E,CAAa,CACb,CACQ,SAASimC,EAAajmC,EAAK,CACvB,IAAIkmC,EACJ,GAAI9oB,EAAM,OAAS,EAAG,CAElB,MAAM+oB,KAAkBloB,EAAO,gBAAgB5C,EAAI4E,EAAa,WAAY,YAAY,EACxFimB,KAAkBryB,EAAO,eAAekJ,EAAKopB,EAAanmC,CAAG,CAC7E,MACqBod,EAAM,OACX8oB,KAAkBjrB,EAAU,IAAI,GAAGmC,EAAM,IAAKC,MAAUpC,EAAU,KAAMjb,CAAG,QAAQqd,CAAC,EAAE,CAAC,EAGvF6oB,EAAcjrB,EAAU,IAE5B,OAAI6qB,EAAS,SACTI,KAAkBjrB,EAAU,IAAIirB,EAAa,GAAGJ,EAAS,IAAKzoB,MAAUpC,EAAU,QAAUpH,EAAO,YAAYwK,EAAKhB,CAAC,CAAC,SAASrd,CAAG,GAAG,CAAC,MAE/Hib,EAAU,KAAKirB,CAAW,CACjD,CACQ,SAASE,EAAiBpmC,EAAK,CAC3B+c,EAAI,QAAS9B,EAAU,YAAatP,CAAI,IAAI3L,CAAG,GAAG,CAC9D,CACQ,SAASgmC,EAAuBhmC,EAAK,CACjC,GAAI8U,EAAK,mBAAqB,OAAUA,EAAK,kBAAoBwG,IAAW,GAAQ,CAChF8qB,EAAiBpmC,CAAG,EACpB,MAChB,CACY,GAAIsb,IAAW,GAAO,CAClB+C,EAAI,UAAU,CAAE,mBAAoBre,CAAG,CAAE,EACzCqe,EAAI,MAAO,EACNI,GACD1B,EAAI,MAAO,EACf,MAChB,CACY,GAAI,OAAOzB,GAAU,UAAY,IAAK2C,EAAO,mBAAmB5C,EAAIC,CAAM,EAAG,CACzE,MAAMsF,EAAQ7D,EAAI,KAAK,OAAO,EAC1BjI,EAAK,mBAAqB,WAC1BuxB,EAAsBrmC,EAAK4gB,EAAO,EAAK,EACvC7D,EAAI,MAAO9B,EAAU,KAAK2F,CAAK,EAAG,IAAM,CACpCvC,EAAI,MAAO,EACX+nB,EAAiBpmC,CAAG,CAC5C,CAAqB,IAGDqmC,EAAsBrmC,EAAK4gB,CAAK,EAC3BnC,GACD1B,EAAI,MAAO9B,EAAU,KAAK2F,CAAK,EAAG,IAAM7D,EAAI,OAAO,EAE3E,CACA,CACQ,SAASspB,EAAsBrmC,EAAK4gB,EAAO8G,EAAQ,CAC/C,MAAMM,EAAY,CACd,QAAS,uBACT,SAAUhoB,EACV,aAAcie,EAAO,KAAK,GAC7B,EACGyJ,IAAW,IACX,OAAO,OAAOM,EAAW,CACrB,cAAe,GACf,aAAc,GACd,UAAW,EAC/B,CAAiB,EAEL3J,EAAI,UAAU2J,EAAWpH,CAAK,CAC1C,CACK,CACJ,EACD,OAAAilB,GAAA,QAAkBpwB,qDCvGlB,OAAO,eAAeyO,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAMuN,EAAa3d,GAAiC,EAC9CD,EAAS8B,GAAkB,EAC3BsI,EAASC,EAA6B,EACtCooB,EAAyBzkB,GAAiC,EAC1DpM,EAAM,CACR,QAAS,aACT,KAAM,SACN,WAAY,SACZ,KAAK4I,EAAK,CACN,KAAM,CAAE,IAAAtB,EAAK,OAAAzB,EAAQ,aAAA2E,EAAc,KAAAtU,EAAM,GAAA0P,CAAE,EAAKgD,EAC5ChD,EAAG,KAAK,mBAAqB,OAAS4E,EAAa,uBAAyB,QAC5EqmB,EAAuB,QAAQ,KAAK,IAAI7U,EAAW,WAAWpW,EAAIirB,EAAuB,QAAS,sBAAsB,CAAC,EAE7H,MAAMC,KAAe1yB,EAAO,qBAAqByH,CAAM,EACvD,UAAW+I,KAAQkiB,EACflrB,EAAG,kBAAkB,IAAIgJ,CAAI,EAE7BhJ,EAAG,KAAK,aAAekrB,EAAS,QAAUlrB,EAAG,QAAU,KACvDA,EAAG,MAAQ4C,EAAO,eAAe,MAAMlB,KAASkB,EAAO,QAAQsoB,CAAQ,EAAGlrB,EAAG,KAAK,GAEtF,MAAM6I,EAAaqiB,EAAS,OAAQlpB,GAAM,IAAKY,EAAO,mBAAmB5C,EAAIC,EAAO+B,CAAC,CAAC,CAAC,EACvF,GAAI6G,EAAW,SAAW,EACtB,OACJ,MAAMtD,EAAQ7D,EAAI,KAAK,OAAO,EAC9B,UAAWsH,KAAQH,EACXsiB,EAAWniB,CAAI,EACfoiB,EAAoBpiB,CAAI,GAGxBtH,EAAI,MAAOlJ,EAAO,gBAAgBkJ,EAAKpR,EAAM0Y,EAAMhJ,EAAG,KAAK,aAAa,CAAC,EACzEorB,EAAoBpiB,CAAI,EACnBhJ,EAAG,WACJ0B,EAAI,KAAM,EAAC,IAAI6D,EAAO,EAAI,EAC9B7D,EAAI,MAAO,GAEfsB,EAAI,GAAG,kBAAkB,IAAIgG,CAAI,EACjChG,EAAI,GAAGuC,CAAK,EAEhB,SAAS4lB,EAAWniB,EAAM,CACtB,OAAOhJ,EAAG,KAAK,aAAe,CAACA,EAAG,eAAiBC,EAAO+I,CAAI,EAAE,UAAY,MACxF,CACQ,SAASoiB,EAAoBpiB,EAAM,CAC/BhG,EAAI,UAAU,CACV,QAAS,aACT,WAAYgG,EACZ,SAAUA,CACb,EAAEzD,CAAK,CACpB,CACK,CACJ,EACDsD,OAAAA,GAAA,QAAkBzO,qDCnDlB,OAAO,eAAeixB,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAM7yB,EAASC,GAAkB,EAC3BmH,EAAYtF,EAAgC,EAC5CsI,EAASC,EAA6B,EACtCsG,EAAStG,EAA6B,EACtCzI,EAAM,CACR,QAAS,oBACT,KAAM,SACN,WAAY,SACZ,KAAK4I,EAAK,CACN,KAAM,CAAE,IAAAtB,EAAK,OAAAzB,EAAQ,KAAA3P,EAAM,aAAAsU,EAAc,GAAA5E,CAAE,EAAKgD,EAC1C,CAAE,KAAAvJ,CAAI,EAAKuG,EACXsrB,KAAe9yB,EAAO,qBAAqByH,CAAM,EACjDsrB,EAAsBD,EAAS,OAAQtpB,MAAUY,EAAO,mBAAmB5C,EAAIC,EAAO+B,CAAC,CAAC,CAAC,EAC/F,GAAIspB,EAAS,SAAW,GACnBC,EAAoB,SAAWD,EAAS,SACpC,CAACtrB,EAAG,KAAK,aAAeA,EAAG,QAAU,IAC1C,OAEJ,MAAMwrB,EAAkB/xB,EAAK,cAAgB,CAACA,EAAK,yBAA2BmL,EAAa,WACrFW,EAAQ7D,EAAI,KAAK,OAAO,EAC1B1B,EAAG,QAAU,IAAQ,EAAEA,EAAG,iBAAiBJ,EAAU,QACrDI,EAAG,SAAYmJ,EAAO,sBAAsBzH,EAAK1B,EAAG,KAAK,GAE7D,KAAM,CAAE,MAAA+B,CAAK,EAAK/B,EAClByrB,EAA2B,EAC3B,SAASA,GAA4B,CACjC,UAAWC,KAAOJ,EACVE,GACAG,EAAwBD,CAAG,EAC3B1rB,EAAG,UACH4rB,EAAmBF,CAAG,GAGtBhqB,EAAI,IAAI6D,EAAO,EAAI,EACnBqmB,EAAmBF,CAAG,EACtBhqB,EAAI,GAAG6D,CAAK,EAGhC,CACQ,SAASomB,EAAwBD,EAAK,CAClC,UAAW1iB,KAAQwiB,EACX,IAAI,OAAOE,CAAG,EAAE,KAAK1iB,CAAI,MACrBpG,EAAO,iBAAiB5C,EAAI,YAAYgJ,CAAI,oBAAoB0iB,CAAG,gCAAgC,CAG3H,CACQ,SAASE,EAAmBF,EAAK,CAC7BhqB,EAAI,MAAM,MAAOpR,EAAO3L,GAAQ,CAC5B+c,EAAI,MAAO9B,EAAU,QAAUpH,EAAO,YAAYwK,EAAK0oB,CAAG,CAAC,SAAS/mC,CAAG,IAAK,IAAM,CAC9E,MAAMknC,EAAcN,EAAoB,SAASG,CAAG,EAC/CG,GACD7oB,EAAI,UAAU,CACV,QAAS,oBACT,WAAY0oB,EACZ,SAAU/mC,EACV,aAAcwkB,EAAO,KAAK,GAC7B,EAAE5D,CAAK,EAERvF,EAAG,KAAK,aAAe+B,IAAU,GACjCL,EAAI,UAAW9B,EAAU,KAAMmC,CAAK,IAAIpd,CAAG,IAAK,EAAI,EAE/C,CAACknC,GAAe,CAAC7rB,EAAG,WAGzB0B,EAAI,MAAO9B,EAAU,KAAK2F,CAAK,EAAG,IAAM7D,EAAI,OAAO,CAE3E,CAAiB,CACjB,CAAa,CACb,CACK,CACJ,EACD,OAAA2pB,GAAA,QAAkBjxB,qDCxElB,OAAO,eAAeuC,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAMiG,EAASnK,EAA6B,EACtC2B,EAAM,CACR,QAAS,MACT,WAAY,CAAC,SAAU,SAAS,EAChC,YAAa,GACb,KAAK4I,EAAK,CACN,KAAM,CAAE,IAAAtB,EAAK,OAAAzB,EAAQ,GAAAD,CAAI,EAAGgD,EAC5B,MAAQJ,EAAO,mBAAmB5C,EAAIC,CAAM,EAAG,CAC3C+C,EAAI,KAAM,EACV,MACZ,CACQ,MAAMuC,EAAQ7D,EAAI,KAAK,OAAO,EAC9BsB,EAAI,UAAU,CACV,QAAS,MACT,cAAe,GACf,aAAc,GACd,UAAW,EACd,EAAEuC,CAAK,EACRvC,EAAI,WAAWuC,EAAO,IAAMvC,EAAI,QAAS,IAAMA,EAAI,OAAO,CAC7D,EACD,MAAO,CAAE,QAAS,mBAAqB,CAC1C,EACD,OAAArG,GAAA,QAAkBvC,qDCvBlB,OAAO,eAAe0xB,GAAS,aAAc,CAAE,MAAO,GAAM,EAE5D,MAAM1xB,EAAM,CACR,QAAS,QACT,WAAY,QACZ,YAAa,GACb,KALW3B,GAAkB,EAKhB,cACb,MAAO,CAAE,QAAS,8BAAgC,CACrD,EACD,OAAAqzB,GAAA,QAAkB1xB,qDCTlB,OAAO,eAAe2xB,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAMnsB,EAAYnH,EAAgC,EAC5CmK,EAAStI,EAA6B,EAKtCF,EAAM,CACR,QAAS,QACT,WAAY,QACZ,YAAa,GACb,MARU,CACV,QAAS,yCACT,OAAQ,CAAC,CAAE,OAAA0K,CAAQ,OAASlF,EAAU,sBAAuBkF,EAAO,OAAO,GAC9E,EAMG,KAAK9B,EAAK,CACN,KAAM,CAAE,IAAAtB,EAAK,OAAAzB,EAAQ,aAAA2E,EAAc,GAAA5E,CAAI,EAAGgD,EAE1C,GAAI,CAAC,MAAM,QAAQ/C,CAAM,EACrB,MAAM,IAAI,MAAM,0BAA0B,EAC9C,GAAID,EAAG,KAAK,eAAiB4E,EAAa,cACtC,OACJ,MAAMgkB,EAAS3oB,EACTsF,EAAQ7D,EAAI,IAAI,QAAS,EAAK,EAC9BsqB,EAAUtqB,EAAI,IAAI,UAAW,IAAI,EACjCsJ,EAAWtJ,EAAI,KAAK,QAAQ,EAClCsB,EAAI,UAAU,CAAE,QAAAgpB,EAAS,EAEzBtqB,EAAI,MAAMuqB,CAAa,EACvBjpB,EAAI,OAAOuC,EAAO,IAAMvC,EAAI,MAAO,EAAE,IAAMA,EAAI,MAAM,EAAI,CAAC,EAC1D,SAASipB,GAAgB,CACrBrD,EAAO,QAAQ,CAAC7f,EAAK5R,IAAM,CACvB,IAAI+T,KACItI,EAAO,mBAAmB5C,EAAI+I,CAAG,EACrCrH,EAAI,IAAIsJ,EAAU,EAAI,EAGtBE,EAASlI,EAAI,UAAU,CACnB,QAAS,QACT,WAAY7L,EACZ,cAAe,EAClB,EAAE6T,CAAQ,EAEX7T,EAAI,GACJuK,EACK,MAAO9B,EAAU,KAAMoL,CAAQ,OAAOzF,CAAK,EAAE,EAC7C,OAAOA,EAAO,EAAK,EACnB,OAAOymB,KAAapsB,EAAU,MAAOosB,CAAO,KAAK70B,CAAC,GAAG,EACrD,KAAM,EAEfuK,EAAI,GAAGsJ,EAAU,IAAM,CACnBtJ,EAAI,OAAO6D,EAAO,EAAI,EACtB7D,EAAI,OAAOsqB,EAAS70B,CAAC,EACjB+T,GACAlI,EAAI,eAAekI,EAAQtL,EAAU,IAAI,CACjE,CAAiB,CACjB,CAAa,CACb,CACK,CACJ,EACD,OAAAmsB,GAAA,QAAkB3xB,qDCzDlB,OAAO,eAAe8xB,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAMtpB,EAASnK,EAA6B,EACtC2B,EAAM,CACR,QAAS,QACT,WAAY,QACZ,KAAK4I,EAAK,CACN,KAAM,CAAE,IAAAtB,EAAK,OAAAzB,EAAQ,GAAAD,CAAI,EAAGgD,EAE5B,GAAI,CAAC,MAAM,QAAQ/C,CAAM,EACrB,MAAM,IAAI,MAAM,0BAA0B,EAC9C,MAAMsF,EAAQ7D,EAAI,KAAK,OAAO,EAC9BzB,EAAO,QAAQ,CAAC8I,EAAK5R,IAAM,CACvB,MAAQyL,EAAO,mBAAmB5C,EAAI+I,CAAG,EACrC,OACJ,MAAMmC,EAASlI,EAAI,UAAU,CAAE,QAAS,QAAS,WAAY7L,CAAG,EAAEoO,CAAK,EACvEvC,EAAI,GAAGuC,CAAK,EACZvC,EAAI,eAAekI,CAAM,CACrC,CAAS,CACJ,CACJ,EACD,OAAAghB,GAAA,QAAkB9xB,qDCpBlB,OAAO,eAAe+xB,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAMvsB,EAAYnH,EAAgC,EAC5CmK,EAAStI,EAA6B,EAKtCF,EAAM,CACR,QAAS,KACT,WAAY,CAAC,SAAU,SAAS,EAChC,YAAa,GACb,MARU,CACV,QAAS,CAAC,CAAE,OAAA0K,CAAQ,OAASlF,EAAU,mBAAoBkF,EAAO,QAAQ,WAC1E,OAAQ,CAAC,CAAE,OAAAA,CAAQ,OAASlF,EAAU,sBAAuBkF,EAAO,QAAQ,GAC/E,EAMG,KAAK9B,EAAK,CACN,KAAM,CAAE,IAAAtB,EAAK,aAAAkD,EAAc,GAAA5E,CAAI,EAAGgD,EAC9B4B,EAAa,OAAS,QAAaA,EAAa,OAAS,WACrDhC,EAAO,iBAAiB5C,EAAI,2CAA2C,EAE/E,MAAMosB,EAAUC,EAAUrsB,EAAI,MAAM,EAC9BssB,EAAUD,EAAUrsB,EAAI,MAAM,EACpC,GAAI,CAACosB,GAAW,CAACE,EACb,OACJ,MAAM/mB,EAAQ7D,EAAI,IAAI,QAAS,EAAI,EAC7BsJ,EAAWtJ,EAAI,KAAK,QAAQ,EAGlC,GAFA6qB,EAAY,EACZvpB,EAAI,MAAO,EACPopB,GAAWE,EAAS,CACpB,MAAME,EAAW9qB,EAAI,IAAI,UAAU,EACnCsB,EAAI,UAAU,CAAE,SAAAwpB,EAAU,EAC1B9qB,EAAI,GAAGsJ,EAAUyhB,EAAe,OAAQD,CAAQ,EAAGC,EAAe,OAAQD,CAAQ,CAAC,CAC/F,MACiBJ,EACL1qB,EAAI,GAAGsJ,EAAUyhB,EAAe,MAAM,CAAC,EAGvC/qB,EAAI,MAAO9B,EAAU,KAAKoL,CAAQ,EAAGyhB,EAAe,MAAM,CAAC,EAE/DzpB,EAAI,KAAKuC,EAAO,IAAMvC,EAAI,MAAM,EAAI,CAAC,EACrC,SAASupB,GAAa,CAClB,MAAMrhB,EAASlI,EAAI,UAAU,CACzB,QAAS,KACT,cAAe,GACf,aAAc,GACd,UAAW,EACd,EAAEgI,CAAQ,EACXhI,EAAI,eAAekI,CAAM,CACrC,CACQ,SAASuhB,EAAe7rB,EAAS4rB,EAAU,CACvC,MAAO,IAAM,CACT,MAAMthB,EAASlI,EAAI,UAAU,CAAE,QAAApC,CAAO,EAAIoK,CAAQ,EAClDtJ,EAAI,OAAO6D,EAAOyF,CAAQ,EAC1BhI,EAAI,oBAAoBkI,EAAQ3F,CAAK,EACjCinB,EACA9qB,EAAI,OAAO8qB,KAAc5sB,EAAU,KAAMgB,CAAO,EAAE,EAElDoC,EAAI,UAAU,CAAE,SAAUpC,CAAO,CAAE,CAC1C,CACb,CACK,CACJ,EACD,SAASyrB,EAAUrsB,EAAIY,EAAS,CAC5B,MAAMX,EAASD,EAAG,OAAOY,CAAO,EAChC,OAAOX,IAAW,QAAa,IAAK2C,EAAO,mBAAmB5C,EAAIC,CAAM,CAC5E,CACA,OAAAksB,GAAA,QAAkB/xB,qDC/DlB,OAAO,eAAesyB,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAM9pB,EAASnK,EAA6B,EACtC2B,EAAM,CACR,QAAS,CAAC,OAAQ,MAAM,EACxB,WAAY,CAAC,SAAU,SAAS,EAChC,KAAK,CAAE,QAAAwG,EAAS,aAAAgE,EAAc,GAAA5E,CAAE,EAAI,CAC5B4E,EAAa,KAAO,WAChBhC,EAAO,iBAAiB5C,EAAI,IAAIY,CAAO,2BAA2B,CAC7E,CACJ,EACD,OAAA8rB,GAAA,QAAkBtyB,+CCVlB,OAAO,eAAeuyB,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAMzD,EAAoBzwB,GAA4B,EAChDm0B,EAAgBtyB,GAAwB,EACxC0uB,EAAUnmB,GAAkB,EAC5BgqB,EAAcrmB,GAAsB,EACpCsmB,EAAarmB,GAAqB,EAClCsmB,EAAiB3b,GAAyB,EAC1C4b,EAAkB3b,GAA0B,EAC5C4Z,EAAyB3Z,GAAiC,EAC1D2b,EAAezb,GAAuB,EACtC0b,EAAsBzb,GAA8B,EACpD0b,EAAQzb,GAAgB,EACxB0b,EAAUC,GAAkB,EAC5BC,EAAUC,GAAkB,EAC5BC,EAAUC,GAAkB,EAC5BC,EAAOC,GAAe,EACtBC,EAAaC,GAAqB,EACxC,SAASC,EAAcC,EAAY,GAAO,CACtC,MAAMpB,EAAa,CAEfQ,EAAM,QACNC,EAAQ,QACRE,EAAQ,QACRE,EAAQ,QACRE,EAAK,QACLE,EAAW,QAEXZ,EAAgB,QAChB/B,EAAuB,QACvB8B,EAAe,QACfE,EAAa,QACbC,EAAoB,OACvB,EAED,OAAIa,EACApB,EAAW,KAAKC,EAAc,QAASC,EAAY,OAAO,EAE1DF,EAAW,KAAKzD,EAAkB,QAASF,EAAQ,OAAO,EAC9D2D,EAAW,KAAKG,EAAW,OAAO,EAC3BH,CACX,CACA,OAAAA,GAAA,QAAkBmB,2DCzClB,OAAO,eAAe9gC,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAM4S,EAAYnH,EAAgC,EAK5C2B,EAAM,CACR,QAAS,SACT,KAAM,CAAC,SAAU,QAAQ,EACzB,WAAY,SACZ,MAAO,GACP,MATU,CACV,QAAS,CAAC,CAAE,WAAAqO,CAAU,OAAW7I,EAAU,0BAA2B6I,CAAU,IAChF,OAAQ,CAAC,CAAE,WAAAA,CAAU,OAAW7I,EAAU,cAAe6I,CAAU,GACtE,EAOG,KAAKzF,EAAKmS,EAAU,CAChB,KAAM,CAAE,IAAAzT,EAAK,KAAApR,EAAM,MAAAuQ,EAAO,OAAAZ,EAAQ,WAAAwI,EAAY,GAAAzI,CAAE,EAAKgD,EAC/C,CAAE,KAAAvJ,EAAM,cAAAkL,EAAe,UAAAV,EAAW,KAAA7D,CAAM,EAAGJ,EACjD,GAAI,CAACvG,EAAK,gBACN,OACAoH,EACAmtB,EAAqB,EAErBC,EAAgB,EACpB,SAASD,GAAsB,CAC3B,MAAME,EAAOxsB,EAAI,WAAW,UAAW,CACnC,IAAKtB,EAAK,QACV,KAAM3G,EAAK,KAAK,OAChC,CAAa,EACK00B,EAAOzsB,EAAI,MAAM,UAAY9B,EAAU,KAAMsuB,CAAI,IAAIzlB,CAAU,GAAG,EAClE2lB,EAAQ1sB,EAAI,IAAI,OAAO,EACvB1U,EAAS0U,EAAI,IAAI,QAAQ,EAE/BA,EAAI,MAAO9B,EAAU,YAAauuB,CAAI,qBAAqBA,CAAI,sBAAuB,IAAMzsB,EAAI,OAAO0sB,KAAWxuB,EAAU,KAAMuuB,CAAI,mBAAmB,EAAE,OAAOnhC,KAAY4S,EAAU,KAAMuuB,CAAI,WAAW,EAAG,IAAMzsB,EAAI,OAAO0sB,KAAWxuB,EAAU,YAAa,EAAE,OAAO5S,EAAQmhC,CAAI,CAAC,EACzRnrB,EAAI,aAAcpD,EAAU,IAAIyuB,EAAY,EAAEC,EAAU,CAAE,CAAC,EAC3D,SAASD,GAAa,CAClB,OAAI50B,EAAK,eAAiB,GACfmG,EAAU,OACVA,EAAU,KAAM6I,CAAU,QAAQzb,CAAM,EACnE,CACY,SAASshC,GAAa,CAClB,MAAMC,EAAatqB,EAAU,UACnBrE,EAAU,MAAOuuB,CAAI,kBAAkBnhC,CAAM,IAAIsD,CAAI,OAAOtD,CAAM,IAAIsD,CAAI,QAC1EsP,EAAU,KAAM5S,CAAM,IAAIsD,CAAI,IAClCk+B,KAAgB5uB,EAAU,aAAc5S,CAAM,oBAAoBuhC,CAAU,MAAMvhC,CAAM,SAASsD,CAAI,KAC3G,SAAWsP,EAAU,KAAM5S,CAAM,OAAOA,CAAM,gBAAgBohC,CAAK,QAAQjZ,CAAQ,QAAQqZ,CAAS,EACpH,CACA,CACQ,SAASP,GAAiB,CACtB,MAAMQ,EAAYruB,EAAK,QAAQH,CAAM,EACrC,GAAI,CAACwuB,EAAW,CACZC,EAAe,EACf,MAChB,CACY,GAAID,IAAc,GACd,OACJ,KAAM,CAACE,EAAS3hC,EAAQ4hC,CAAM,EAAIC,EAAUJ,CAAS,EACjDE,IAAYxZ,GACZnS,EAAI,KAAK8rB,GAAgB,EAC7B,SAASJ,GAAgB,CACrB,GAAIj1B,EAAK,eAAiB,GAAO,CAC7B2G,EAAK,OAAO,KAAK2uB,GAAY,EAC7B,MACpB,CACgB,MAAM,IAAI,MAAMA,GAAY,EAC5B,SAASA,GAAa,CAClB,MAAO,mBAAmB9uB,CAAM,gCAAgC0E,CAAa,GACjG,CACA,CACY,SAASkqB,EAAUG,EAAQ,CACvB,MAAMjiC,EAAOiiC,aAAkB,UACrBpvB,EAAU,YAAYovB,CAAM,EAChCv1B,EAAK,KAAK,WACFmG,EAAU,KAAMnG,EAAK,KAAK,OAAO,MAAOmG,EAAU,aAAaK,CAAM,CAAC,GAC1E,OACJgvB,EAAMvtB,EAAI,WAAW,UAAW,CAAE,IAAKzB,EAAQ,IAAK+uB,EAAQ,KAAAjiC,EAAM,EACxE,OAAI,OAAOiiC,GAAU,UAAY,EAAEA,aAAkB,QAC1C,CAACA,EAAO,MAAQ,SAAUA,EAAO,YAAcpvB,EAAU,KAAMqvB,CAAG,WAAW,EAEjF,CAAC,SAAUD,EAAQC,CAAG,CAC7C,CACY,SAASH,GAAiB,CACtB,GAAI,OAAOL,GAAa,UAAY,EAAEA,aAAqB,SAAWA,EAAU,MAAO,CACnF,GAAI,CAACxqB,EAAU,OACX,MAAM,IAAI,MAAM,6BAA6B,EACjD,SAAWrE,EAAU,WAAYgvB,CAAM,IAAIt+B,CAAI,GACnE,CACgB,OAAO,OAAOtD,GAAU,cAAiB4S,EAAU,KAAMgvB,CAAM,IAAIt+B,CAAI,OAAUsP,EAAU,KAAMgvB,CAAM,SAASt+B,CAAI,GACpI,CACA,CACK,CACJ,EACD,OAAAtD,GAAA,QAAkBoN,+CCzFlB,OAAO,eAAe80B,GAAS,aAAc,CAAE,MAAO,GAAM,EAE5D,MAAMliC,EAAS,CADEyL,GAAmB,EACX,OAAO,EAChCy2B,OAAAA,GAAA,QAAkBliC,iDCHlB,OAAO,eAAemiC,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5DA,GAAA,kBAA4BA,GAAA,mBAA6B,OACzDA,GAAA,mBAA6B,CACzB,QACA,cACA,UACA,aACA,WACA,YACA,UACH,EACDA,GAAA,kBAA4B,CACxB,mBACA,kBACA,eACH,gDCfD,OAAO,eAAeC,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAMlK,EAASzsB,GAAiB,EAC1BmvB,EAAettB,GAAuB,EACtC+0B,EAAexsB,GAAuB,EACtCysB,EAAW9oB,GAAmB,EAC9B+oB,EAAa9oB,GAAqB,EAClC+oB,EAAqB,CACvBtK,EAAO,QACP0C,EAAa,WACTyH,EAAa,SAAU,EAC3BC,EAAS,QACTC,EAAW,mBACXA,EAAW,iBACd,EACD,OAAAH,GAAA,QAAkBI,2DCdlB,OAAO,eAAe5oB,GAAS,aAAc,CAAE,MAAO,GAAM,EAC1CA,GAAA,WAAG,OACrB,IAAI6oB,EACJ,OAAC,SAAUA,EAAY,CACnBA,EAAW,IAAS,MACpBA,EAAW,QAAa,SAC3B,EAAEA,IAAe7oB,GAAA,WAAqB6oB,EAAa,CAAE,EAAC,+CCNvD,OAAO,eAAeC,GAAS,aAAc,CAAE,MAAO,GAAM,EAC5D,MAAM9vB,EAAYnH,EAAgC,EAC5Ck3B,EAAUr1B,GAAiC,EAC3CgkB,EAAYzb,GAAwB,EACpCwb,EAAc7X,GAAkC,EAChD5D,EAAS6D,EAA6B,EAOtCrM,EAAM,CACR,QAAS,gBACT,KAAM,SACN,WAAY,SACZ,MAVU,CACV,QAAS,CAAC,CAAE,OAAQ,CAAE,WAAAw1B,EAAY,QAAAC,CAAO,KAASD,IAAeD,EAAQ,WAAW,IAC9E,QAAQE,CAAO,mBACf,iBAAiBA,CAAO,qBAC9B,OAAQ,CAAC,CAAE,OAAQ,CAAE,WAAAD,EAAY,IAAAE,EAAK,QAAAD,CAAS,CAAA,OAAWjwB,EAAU,aAAcgwB,CAAU,UAAUC,CAAO,eAAeC,CAAG,GAClI,EAMG,KAAK9sB,EAAK,CACN,KAAM,CAAE,IAAAtB,EAAK,KAAApR,EAAM,OAAA2P,EAAQ,aAAA2E,EAAc,GAAA5E,CAAE,EAAKgD,EAC1C,CAAE,MAAA+oB,CAAK,EAAKnnB,EAClB,GAAI,CAAC5E,EAAG,KAAK,cACT,MAAM,IAAI,MAAM,8CAA8C,EAElE,MAAM6vB,EAAU5vB,EAAO,aACvB,GAAI,OAAO4vB,GAAW,SAClB,MAAM,IAAI,MAAM,sCAAsC,EAC1D,GAAI5vB,EAAO,QACP,MAAM,IAAI,MAAM,yCAAyC,EAC7D,GAAI,CAAC8rB,EACD,MAAM,IAAI,MAAM,uCAAuC,EAC3D,MAAMxmB,EAAQ7D,EAAI,IAAI,QAAS,EAAK,EAC9BouB,EAAMpuB,EAAI,MAAM,SAAW9B,EAAU,KAAMtP,CAAI,MAAOsP,EAAU,aAAaiwB,CAAO,CAAC,EAAE,EAC7FnuB,EAAI,MAAO9B,EAAU,YAAakwB,CAAG,eAAgB,IAAMC,EAAiB,EAAE,IAAM/sB,EAAI,MAAM,GAAO,CAAE,WAAY2sB,EAAQ,WAAW,IAAK,IAAAG,EAAK,QAAAD,CAAO,CAAE,CAAC,EAC1J7sB,EAAI,GAAGuC,CAAK,EACZ,SAASwqB,GAAkB,CACvB,MAAMC,EAAUC,EAAY,EAC5BvuB,EAAI,GAAG,EAAK,EACZ,UAAWwuB,KAAYF,EACnBtuB,EAAI,UAAW9B,EAAU,KAAMkwB,CAAG,QAAQI,CAAQ,EAAE,EACpDxuB,EAAI,OAAO6D,EAAO4qB,EAAeH,EAAQE,CAAQ,CAAC,CAAC,EAEvDxuB,EAAI,KAAM,EACVsB,EAAI,MAAM,GAAO,CAAE,WAAY2sB,EAAQ,WAAW,QAAS,IAAAG,EAAK,QAAAD,EAAS,EACzEnuB,EAAI,MAAO,CACvB,CACQ,SAASyuB,EAAetjB,EAAY,CAChC,MAAM6c,EAAShoB,EAAI,KAAK,OAAO,EACzBwJ,EAASlI,EAAI,UAAU,CAAE,QAAS,QAAS,WAAA6J,CAAY,EAAE6c,CAAM,EACrE,OAAA1mB,EAAI,eAAekI,EAAQtL,EAAU,IAAI,EAClC8pB,CACnB,CACQ,SAASuG,GAAa,CAClB,IAAIz+B,EACJ,MAAM4+B,EAAe,CAAE,EACjBC,EAAcC,EAAY1rB,CAAY,EAC5C,IAAI2rB,EAAc,GAClB,QAASp5B,EAAI,EAAGA,EAAI40B,EAAM,OAAQ50B,IAAK,CACnC,IAAI4R,EAAMgjB,EAAM50B,CAAC,EACjB,GAAK4R,GAAQ,MAAkCA,EAAI,MAAS,IAAKnG,EAAO,sBAAsBmG,EAAK/I,EAAG,KAAK,KAAK,EAAG,CAC/G,MAAMsQ,EAAMvH,EAAI,KAIhB,GAHAA,EAAMuV,EAAU,WAAW,KAAKte,EAAG,KAAMA,EAAG,UAAU,KAAMA,EAAG,OAAQsQ,CAAG,EACtEvH,aAAeuV,EAAU,YACzBvV,EAAMA,EAAI,QACVA,IAAQ,OACR,MAAM,IAAIsV,EAAY,QAAQre,EAAG,KAAK,YAAaA,EAAG,OAAQsQ,CAAG,CACzF,CACgB,MAAMkgB,GAAWh/B,EAAKuX,GAAQ,KAAyB,OAASA,EAAI,cAAgB,MAAQvX,IAAO,OAAS,OAASA,EAAGq+B,CAAO,EAC/H,GAAI,OAAOW,GAAW,SAClB,MAAM,IAAI,MAAM,iFAAiFX,CAAO,GAAG,EAE/GU,EAAcA,IAAgBF,GAAeC,EAAYvnB,CAAG,GAC5D0nB,EAAYD,EAASr5B,CAAC,CACtC,CACY,GAAI,CAACo5B,EACD,MAAM,IAAI,MAAM,mBAAmBV,CAAO,oBAAoB,EAClE,OAAOO,EACP,SAASE,EAAY,CAAE,SAAApK,GAAY,CAC/B,OAAO,MAAM,QAAQA,CAAQ,GAAKA,EAAS,SAAS2J,CAAO,CAC3E,CACY,SAASY,EAAY1nB,EAAK5R,EAAG,CACzB,GAAI4R,EAAI,MACJ2nB,EAAW3nB,EAAI,MAAO5R,CAAC,UAElB4R,EAAI,KACT,UAAWmnB,KAAYnnB,EAAI,KACvB2nB,EAAWR,EAAU/4B,CAAC,MAI1B,OAAM,IAAI,MAAM,8BAA8B04B,CAAO,+BAA+B,CAExG,CACY,SAASa,EAAWR,EAAU/4B,EAAG,CAC7B,GAAI,OAAO+4B,GAAY,UAAYA,KAAYE,EAC3C,MAAM,IAAI,MAAM,mBAAmBP,CAAO,iCAAiC,EAE/EO,EAAaF,CAAQ,EAAI/4B,CACzC,CACA,CACK,CACJ,EACD,OAAAu4B,GAAA,QAAkBt1B,u/ECrGlB,OAAO,eAAc3D,EAAU,aAAc,CAAE,MAAO,GAAM,EAC5DA,EAA0B,gBAAAA,EAAA,gBAA0BA,EAAkB,QAAAA,EAAA,KAAeA,EAAc,IAAAA,EAAA,UAAoBA,MAAcA,EAAY,EAAAA,EAAA,WAAqBA,EAAc,IAAA,OACpL,MAAMyuB,EAASzsB,GAAiB,EAC1Bk4B,EAAWr2B,GAAgC,EAC3Cs2B,EAAkB/tB,GAAuC,EACzDguB,EAAmBrqB,GACnBsqB,EAAoB,CAAC,aAAa,EAClCC,EAAiB,yCACvB,MAAMtQ,UAAYyE,EAAO,OAAQ,CAC7B,kBAAmB,CACf,MAAM,iBAAkB,EACxByL,EAAS,QAAQ,QAASvP,GAAM,KAAK,cAAcA,CAAC,CAAC,EACjD,KAAK,KAAK,eACV,KAAK,WAAWwP,EAAgB,OAAO,CACnD,CACI,uBAAwB,CAEpB,GADA,MAAM,sBAAuB,EACzB,CAAC,KAAK,KAAK,KACX,OACJ,MAAM/N,EAAa,KAAK,KAAK,MACvB,KAAK,gBAAgBgO,EAAkBC,CAAiB,EACxDD,EACN,KAAK,cAAchO,EAAYkO,EAAgB,EAAK,EACpD,KAAK,KAAK,+BAA+B,EAAIA,CACrD,CACI,aAAc,CACV,OAAQ,KAAK,KAAK,YACd,MAAM,YAAW,IAAO,KAAK,UAAUA,CAAc,EAAIA,EAAiB,OACtF,CACA,CACAt6B,EAAA,IAAcgqB,EACduQ,EAAiB,QAAAv6B,EAAUgqB,EAC3BuQ,EAAA,QAAA,IAAqBvQ,EACrB,OAAO,eAAchqB,EAAU,aAAc,CAAE,MAAO,GAAM,EAC5DA,EAAA,QAAkBgqB,EAClB,IAAIrK,EAAa3P,GAA6B,EAC9C,OAAO,eAAehQ,EAAS,aAAc,CAAE,WAAY,GAAM,IAAK,UAAY,CAAE,OAAO2f,EAAW,UAAa,CAAA,CAAE,EACrH,IAAIxW,EAAYwR,EAA4B,EAC5C,OAAO,eAAe3a,EAAS,IAAK,CAAE,WAAY,GAAM,IAAK,UAAY,CAAE,OAAOmJ,EAAU,CAAI,CAAA,CAAE,EAClG,OAAO,eAAenJ,EAAS,MAAO,CAAE,WAAY,GAAM,IAAK,UAAY,CAAE,OAAOmJ,EAAU,GAAM,CAAA,CAAE,EACtG,OAAO,eAAenJ,EAAS,YAAa,CAAE,WAAY,GAAM,IAAK,UAAY,CAAE,OAAOmJ,EAAU,SAAY,CAAA,CAAE,EAClH,OAAO,eAAenJ,EAAS,MAAO,CAAE,WAAY,GAAM,IAAK,UAAY,CAAE,OAAOmJ,EAAU,GAAM,CAAA,CAAE,EACtG,OAAO,eAAenJ,EAAS,OAAQ,CAAE,WAAY,GAAM,IAAK,UAAY,CAAE,OAAOmJ,EAAU,IAAO,CAAA,CAAE,EACxG,OAAO,eAAenJ,EAAS,UAAW,CAAE,WAAY,GAAM,IAAK,UAAY,CAAE,OAAOmJ,EAAU,OAAU,CAAA,CAAE,EAC9G,IAAIuW,EAAqB9E,GAAqC,EAC9D,OAAO,eAAe5a,EAAS,kBAAmB,CAAE,WAAY,GAAM,IAAK,UAAY,CAAE,OAAO0f,EAAmB,OAAU,CAAA,CAAE,EAC/H,IAAIkI,EAAc/M,GAA8B,EAChD,OAAO,eAAe7a,EAAS,kBAAmB,CAAE,WAAY,GAAM,IAAK,UAAY,CAAE,OAAO4nB,EAAY,OAAU,CAAA,CAAE,0DC7BlH4S,GAAM,IAAIxQ,GACV9uB,GAAOs/B,GAAI,QAAQl/B,EAAgB,EACnCF,GAAQo/B,GAAI,QAAQn/B,EAAiB,EACrC3B,GAAQ8gC,GAAI,QAAQ7gC,EAAiB,EACrCI,GAAQygC,GAAI,QAAQxgC,EAAkB,EACtCO,GAASigC,GAAI,QAAQ//B,EAAkB,EACvCggC,GAAQD,GAAI,QAAQx/B,EAAiB,EACrC0/B,GAAQF,GAAI,QAAQpgC,EAAiB,EACrCugC,GAASH,GAAI,QAAQtgC,EAAiB,EAE/B0gC,GAAc/gC,GAClBqB,GAAKrB,CAAI,EAGLghC,GAAehhC,GACnBuB,GAAMvB,CAAI,EAGNihC,GAAejhC,GACnBH,GAAMG,CAAI,EAGNkhC,GAAelhC,GACnBE,GAAMF,CAAI,EAGNmhC,GAAgBnhC,GACpBU,GAAOV,CAAI,EAGPohC,GAAephC,GACnB4gC,GAAM5gC,CAAI,EAENqhC,GAAerhC,GACnB6gC,GAAM7gC,CAAI,EAENshC,GAAethC,GACnB8gC,GAAO9gC,CAAI,ECxDPuhC,GAAe,EACfC,GAAe,IACfC,GAAoB,IACpBC,GAAe,IACfC,GAAoB,IACpBC,GAAe,IACfC,GAAc,IACdC,GAAsB,IACtBC,GAA2B,IAC3BC,GAAU,IACVC,GAAe,IACfC,GAAO,IACPC,GAAqB,IACrBC,GAA0B,IAC1BC,GAAO,IACPC,GAAa,IACbC,GAAwB,IACxBC,GAAe,IACfC,GAAQ,IACRC,GAAa,IACbC,GAAmB,IACnBC,GAAoB,IACpBC,GAAsB,IACtBC,GAAgB,IAChBC,GAAc,IACdC,GAAe,IACfC,GAAiB,IACjBC,GAAgB,IAChBC,GAAsB,IACtBC,GAAoB,IACpBC,GAAoB,IACpBC,GAAqB,IACrBC,GAAqB,IACrBC,GAAmB,IACnBC,GAA0B,IAC1BC,GAAsB,IAEtBC,GAAmB,IACnBC,GAAqB,IAErBC,GAAkB,IAClBC,GAAuB,IACvBC,GAAqB,IACrBC,GAAa,IACbC,GAAqB,IACrBC,GAAoB,IACpBC,GAAsB,IACtBC,GAAiB,IACjBC,GAAoB,IACpBC,GAAc,IACdC,GAA0B,IAC1BC,GAAmB,IACnBC,GAAiB,IACjBC,GAAgB,IAChBC,GAAc,IACdC,GAAe,IACfC,GAAe,IAEfC,GAAO,IACPC,GAAe,IACfC,GAAe,IACfC,GAAiB,IACjBC,GAAe,IACfC,GAAgB,IAChBC,GAAqB,IAErBC,GAAW,IACXC,GAAc,IACdC,GAAW,IACXC,GAAa,IAEbC,GAAW,IACXC,GAAc,IACdC,GAAU,IACVC,GAAU,IACVC,GAAU,IAEVC,GAAa,IAEbC,GAAiB,IACjBC,GAA2B,IAC3BC,GAAkB,IAClBC,GAAoB,IAEpBC,GAAoB,IAEpBC,GAAkB,IAClBC,GAAuB,IACvBC,GAAwB,IACxBC,GAAY,IACZC,GAAY,IACZC,GAAY,IACZC,GAAc,IACdC,GAAa,IAEbC,GAAc,IACdC,GAAe,IACfC,GAAsB,IACtBC,GAAuB,IACvBC,GAAkB,IAClBC,GAAiB,IAEjBC,GAAkB,IAClBC,GAAkB,IAElBC,GAAqB,IACrBC,GAAoB,IACpBC,GAAe,IACfC,GAAkB,IAClBC,GAAwB,IACxBC,GAAe,IACfC,GAAe,IACfC,GAAmB,IAEnBC,GAAkB,IAElBC,GAAmB,IACnBC,GAAY,IACZC,GAAyB,IACzBC,GAAc,IACdC,GAAmB,IACnBC,GAAoB,IACpBC,GAAoB,IC1HpBC,GAAY,EACZC,GAAkB,EAClBC,GAAkB,EAClBC,GAAmB,EACnBC,GAAgB,EAChBC,GAAqB,EACrBC,GAAqB,EACrBC,GAAqB,EACrBC,GAAqB,EACrBC,GAAoB,EACpBC,GAAoB,GACpBC,GAAkB,GAClBC,GAAqB,GACrBC,GAAsB,GACtBC,GAAa,GACbC,GAAa,GACbC,GAAkB,GAClBC,GAAkB,GAClBC,GAAmB,GACnBC,GAAgB,GAChBC,GAAmB,GACnBC,GAAmB,GACnBC,GAAkB,GAClBC,GAAqB,GACrBC,GAAoB,GACpBC,GAAoB,GACpBC,GAAkB,GAClBC,GAAkB,GAClBC,GAAmB,GACnBC,GAAqB,GACrBC,GAAoB,GACpBC,GAAsB,GACtBC,GAAuB,GACvBC,GAAsB,GACtBC,GAAuB,GACvBC,GAAmB,GACnBC,GAAoB,GACpBC,GAAmB,GACnBC,GAAoB,GACpBC,GAAuB,GACvBC,GAAwB,GACxBC,GAAqB,GACrBC,GAAuB,GACvBC,GAA0B,GAC1BC,GAAgB,GAChBC,GAAe,GC1CfC,GAAuB,CAClC,KAAM,SACN,SAAU,CACR,OACA,KACA,WACA,QACA,WACA,UACA,SACF,EACA,WAAY,CACV,KAAM,CAAE,KAAM,QAAS,EACvB,GAAI,CAAE,KAAM,UAAW,QAAS,CAAE,EAClC,SAAU,CAAE,KAAM,SAAU,EAC5B,MAAO,CAAE,KAAM,SAAU,EACzB,SAAU,CAAE,KAAM,SAAU,EAC5B,QAAS,CAAE,KAAM,SAAU,EAC3B,QAAS,CAAE,KAAM,SAAU,CAAA,CAE/B,ECrBaC,GAAc,CAACC,EAAyB,MAC5C,CACL,YAAaA,EAAI,aAAe,GAChC,YAAaA,EAAI,aAAe,GAChC,gBAAiBA,EAAI,iBAAmB,GACxC,gBAAiBA,EAAI,iBAAmB,GACxC,IAAKA,EAAI,KAAO,CAAE,KAAM,GAAI,IAAK,EAAG,MAAO,IAAK,OAAQ,GAAI,EAC5D,IAAKA,EAAI,KAAO,CAAE,KAAM,GAAI,IAAK,EAAG,MAAO,IAAK,OAAQ,GAAI,EAC5D,eAAgBA,EAAI,gBAAkB,GACtC,YAAaA,EAAI,aAAe,GAChC,cAAeA,EAAI,eAAiB,CAAC,EACrC,OAAQA,EAAI,QAAU,CAAC,EACvB,OAAQA,EAAI,QAAU,EACtB,KAAMA,EAAI,MAAQ,GAClB,cAAeA,EAAI,eAAiB,GACpC,cAAeA,EAAI,eAAiB,GACpC,aAAcA,EAAI,cAAgB,GAClC,aAAcA,EAAI,cAAgB,GAClC,WAAYA,EAAI,YAAc,EAC9B,WAAYA,EAAI,YAAc,EAC9B,MAAOA,EAAI,OAAS,EACpB,EAAGA,EAAI,GAAK,EACZ,EAAGA,EAAI,GAAK,EACZ,KAAMA,EAAI,MAAQ,CAAA,CACpB,GCtBWC,GAAsB,CACjCrrC,EAAkC,MACZ,CACtB,GAAIA,EAAK,IAAM,EACf,KAAMA,EAAK,MAAQ,GACnB,QAASA,EAAK,SAAW,EACzB,KAAMA,EAAK,MAAQ,CAAC,EACpB,SAAUA,EAAK,UAAY,CAC7B,GAEasrC,GAAgB,CAACtrC,EAA4B,MAAoB,CAC5E,GAAIA,EAAK,IAAM,EACf,KAAMA,EAAK,MAAQ,GACnB,QAASA,EAAK,SAAW,CAAC,EAC1B,MAAOA,EAAK,OAAS,CAAA,CACvB,GAEaurC,GAAkB,CAC7BvrC,EAA8B,MACZ,CAClB,QAASA,EAAK,SAAW,EACzB,EAAGA,EAAK,GAAK,EACb,EAAGA,EAAK,GAAK,EACb,OAAQA,EAAK,QAAU,EACzB,GAEawrC,GAA2B,CACtCxrC,EAAuC,MACZ,CAC3B,QAASA,EAAK,SAAW,EACzB,QAASA,EAAK,SAAW,EACzB,WAAYA,EAAK,YAAc,EAC/B,YAAaA,EAAK,aAAe,CACnC,GCpBayrC,GAAgC,CAC3C,WAAY,QACZ,QAAS,CACP,aAAc,aACd,aAAc,cACd,cAAe,aACf,aAAc,gBACd,YAAa,aACb,YAAa,gBACb,aAAc,OACd,YAAa,eACb,kBAAmB,cACnB,eAAgB,UAChB,eAAgB,gBAChB,gBAAiB,aAAA,CAErB,EAEaC,GAA2B,CACtC,WAAY,MACZ,QAAS,CACP,WAAY,QACZ,SAAU,KACV,WAAY,QACZ,WAAY,SACZ,YAAa,QACb,SAAU,OACV,UAAW,IAAA,CAEf,EC5CaC,GAAwB,CACnC,GAAI,MACJ,KAAM,KACN,KAAM,KACN,YAAa,KACb,UAAW,aACX,SAAU,UACV,OAAQ,QACR,QAAS,SACT,MAAO,KACP,MAAO,OACP,YAAa,MACb,YAAa,YACb,YAAa,QACb,eAAgB,eAChB,cAAe,UACf,WAAY,MACZ,UAAW,gBACX,SAAU,WACV,aAAc,aACd,KAAM,MACN,YAAa,WACb,QAAS,SACT,QAAS,SACT,QAAS,SACT,SAAU,MACV,YAAa,KACb,SAAU,KACV,MAAO,OACP,aAAc,YACd,cAAe,UACf,KAAM,MACN,SAAU,MACV,YAAa,SACb,QAAS,KACT,MAAO,KACP,KAAM,MACN,YAAa,UACb,OAAQ,KACR,UAAW,MACX,YAAa,OACb,eAAgB,OAChB,YAAa,OACb,OAAQ,IACV,ECrCaC,GAAoB,CAC/B,IAAK,CACH,OAAQ5lC,GACR,KAAMD,GACN,OAAQ1J,EACR,WAAY4F,EACd,EACA,OAAQ0pC,EACV,ECfaE,GACXC,IAEO,CACL,KAAMA,EAAgB,MAAQ,GAC9B,OAAQA,EAAgB,QAAU,IAClC,MAAOA,EAAgB,OAAS,IAChC,IAAKA,EAAgB,KAAO,CAC9B","x_google_ignoreList":[51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117]}
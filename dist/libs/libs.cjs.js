"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const m=require("../shared/make.cjs2.js"),u=require("../shared/mergeItemsSource.cjs.js"),p=(e,r,a,t)=>{const o=Array.from(e.matchAll(/\{([.a-zA-Z0-9]+)\}/g)),n=m.getPlaceHolderKeys(r);return o.reduce((s,i)=>{const l=i[1];return l.length===0?s:l.length>t?(s.push({message:a.longPlaceHolder,reason:l.slice(0,t)}),s):(n.has(l)||s.push({message:a.extraPlaceHolder,reason:l}),s)},[])},g=(e,r,a)=>m.getItemMappersFromRule(r).reduce((t,o)=>{const n=d(e,o,a);return n&&t.push(n),t},[]),d=(e,r,a)=>{const t=e.pattern.includes(r.placeHolder),o=!!e.dataSource;return!t&&o?{message:a.missingName,reason:r.placeHolder}:t&&!o?{message:a.missingSourceId,reason:r.placeHolder}:void 0},c=(e,r,a)=>r.map(t=>a(t,e[t],e));exports.applyFormatRule=m.applyFormatRule,exports.compileFormatRule=m.compileFormatRule,exports.makeAudioFileParams=m.makeAudioFileParams,exports.mergeItemsSource=u.mergeItemsSource,exports.AUTHOR_RMMZ="rmmz",exports.SRC_COLOR="colors",exports.detectFormatErrors=(e,r,a,t={placeHolderMaxLength:50,formatMaxLength:200})=>e.pattern.length>=t.formatMaxLength?{formatLabel:e.label,syntaxErrors:[{message:a.formatVeryLong,reason:e.pattern.slice(0,t.formatMaxLength)}],semanticErrors:[]}:{formatLabel:e.label,semanticErrors:g(e,r,a),syntaxErrors:p(e.pattern,r,a,t.placeHolderMaxLength)},exports.domainNames=e=>Object.entries(e).map(([,r])=>r.title),exports.isValidNumber=e=>typeof e=="number"&&!Number.isNaN(e),exports.pickPropertys=c,exports.pickString=(e,r,a)=>c(e,r,a);

"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const m=require("../shared/make.cjs.js"),u=require("../shared/mergeItemsSource.cjs.js"),i=(e,r,t,a)=>{const o=Array.from(e.matchAll(/\{([.a-zA-Z0-9]+)\}/g)),n=m.getPlaceHolderKeys(r);return o.reduce((s,c)=>{const l=c[1];return l.length===0?s:l.length>a?(s.push({message:t.longPlaceHolder,reason:l.slice(0,a)}),s):(n.has(l)||s.push({message:t.extraPlaceHolder,reason:l}),s)},[])},g=(e,r,t)=>m.getItemMappersFromRule(r).reduce((a,o)=>{const n=p(e,o,t);return n&&a.push(n),a},[]),p=(e,r,t)=>{const a=e.pattern.includes(r.placeHolder),o=!!e.dataSource;return!a&&o?{message:t.missingName,reason:r.placeHolder}:a&&!o?{message:t.missingSourceId,reason:r.placeHolder}:void 0};exports.applyFormatRule=m.applyFormatRule,exports.compileFormatRule=m.compileFormatRule,exports.makeAudioFileParams=m.makeAudioFileParams,exports.mergeItemsSource=u.mergeItemsSource,exports.AUTHOR_RMMZ="rmmz",exports.SRC_COLOR="colors",exports.detectFormatErrors=(e,r,t,a={placeHolderMaxLength:50,formatMaxLength:200})=>e.pattern.length>=a.formatMaxLength?{formatLabel:e.label,syntaxErrors:[{message:t.formatVeryLong,reason:e.pattern.slice(0,a.formatMaxLength)}],semanticErrors:[]}:{formatLabel:e.label,semanticErrors:g(e,r,t),syntaxErrors:i(e.pattern,r,t,a.placeHolderMaxLength)},exports.domainNames=e=>Object.entries(e).map(([,r])=>r.title),exports.isValidNumber=e=>typeof e=="number"&&!Number.isNaN(e);

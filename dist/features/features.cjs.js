"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const n=require("../shared/make.cjs2.js"),H=require("../shared/mergeItemsSource.cjs.js"),_=(e,a,t)=>e.reduce((s,o)=>(o.code!==n.CHANGE_ARMORS&&o.code!==n.CHANGE_ITEMS&&o.code!==n.CHANGE_WEAPONS||s.push(B(o,a,t)),s),[]),re={[n.CHANGE_WEAPONS]:"weapon",[n.CHANGE_ARMORS]:"armor",[n.CHANGE_ITEMS]:"item"},B=(e,a,t)=>{const s=e.parameters[3]===n.OPERAND_DIRECT?{direct:!0,value:e.parameters[2]}:{direct:!1,variableId:e.parameters[2]},o=e.parameters[0]===n.OPERATION_GAIN?a.gain:e.parameters[0]===n.OPERATION_LOSE?a.lose:a.unknown,m=typeof e.parameters[4]=="boolean"?{includesEquip:e.parameters[4]}:{};return{itemKind:re[e.code],dataId:e.parameters[1],code:e.code,commandNameMZ:t(e.code),operation:o,...m,...s}},se=e=>!!e,C=(e,a)=>e.pages.map((t,s)=>a(t,s,e)),R=(e,a)=>e.events.filter(se).flatMap(t=>C(t,a)),ne=e=>e.conditions.itemId>0&&e.conditions.itemValid?{pageCondition:{itemId:e.conditions.itemId}}:{},r=(e,a)=>{const t=e.trimEnd(),s=a.get(t);return s?s.trimEnd():t},g=(e,a,t=`
`)=>n.replaceNote(e.note,s=>r(s.value,a),t),I=(e,a)=>{const t=g(e,a),s=r(e.name,a),o=r(e.description,a);return{...e,name:s,description:o,note:t}},b=(e,a)=>e.map(t=>{switch(t.code){case n.SHOW_MESSAGE:return L(t,a);case n.SHOW_CHOICES:return q(t,a);case n.SHOW_MESSAGE_BODY:case n.COMMENT_HEAD:case n.COMMENT_BODY:case n.SHOW_SCROLLING_TEXT_BODY:return F(t,a);case n.CHANGE_NAME:case n.CHANGE_NICKNAME:case n.CHANGE_PROFILE:return j(t,a);default:return t}}),F=(e,a)=>{const t=r(e.parameters[0],a);return{code:e.code,indent:e.indent,parameters:[t]}},L=(e,a)=>{const t=e.parameters[4]?r(e.parameters[4],a):"";return n.makeCommandShowMessage({facename:e.parameters[0],faceIndex:e.parameters[1],background:e.parameters[2],positionType:e.parameters[3],speakerName:t},e.indent)},j=(e,a)=>{const t=r(e.parameters[1],a);return{code:e.code,indent:e.indent,parameters:[e.parameters[0],t]}},q=(e,a)=>{const t=e.parameters[0].map(s=>r(s,a));return{code:n.SHOW_CHOICES,indent:e.indent,parameters:[t,e.parameters[1],e.parameters[2],e.parameters[3],e.parameters[4]]}},w=(e,a)=>({params:me(e.params,a),messages:ce(e.messages,a),commands:ie(e.commands,a),basic:oe(e.basic,a)}),oe=(e,a)=>[r(e[0],a),r(e[1],a),r(e[2],a),r(e[3],a),r(e[4],a),r(e[5],a),r(e[6],a),r(e[7],a),r(e[8],a),r(e[9],a)],ie=(e,a)=>[r(e[0],a),r(e[1],a),r(e[2],a),r(e[3],a),r(e[4],a),r(e[5],a),r(e[6],a),r(e[7],a),r(e[8],a),r(e[9],a),r(e[10],a),r(e[11],a),r(e[12],a),r(e[13],a),r(e[14],a),r(e[15],a),r(e[16],a),r(e[17],a),r(e[18],a),r(e[19],a),"",r(e[21],a),r(e[22],a),"",r(e[24],a),r(e[25],a)],me=(e,a)=>[r(e[0],a),r(e[1],a),r(e[2],a),r(e[3],a),r(e[4],a),r(e[5],a),r(e[6],a),r(e[7],a),r(e[8],a),r(e[9],a)],ce=(e,a)=>({actionFailure:r(e.actionFailure,a),actorDamage:r(e.actorDamage,a),actorDrain:r(e.actorDrain,a),actorGain:r(e.actorGain,a),actorLoss:r(e.actorLoss,a),actorNoDamage:r(e.actorNoDamage,a),actorNoHit:r(e.actorNoHit,a),actorRecovery:r(e.actorRecovery,a),alwaysDash:r(e.alwaysDash,a),autosave:r(e.autosave,a),bgmVolume:r(e.bgmVolume,a),bgsVolume:r(e.bgsVolume,a),buffAdd:r(e.buffAdd,a),buffRemove:r(e.buffRemove,a),commandRemember:r(e.commandRemember,a),counterAttack:r(e.counterAttack,a),criticalToActor:r(e.criticalToActor,a),criticalToEnemy:r(e.criticalToEnemy,a),defeat:r(e.defeat,a),debuffAdd:r(e.debuffAdd,a),emerge:r(e.emerge,a),enemyDamage:r(e.enemyDamage,a),enemyDrain:r(e.enemyDrain,a),enemyGain:r(e.enemyGain,a),enemyLoss:r(e.enemyLoss,a),enemyNoDamage:r(e.enemyNoDamage,a),enemyNoHit:r(e.enemyNoHit,a),enemyRecovery:r(e.enemyRecovery,a),escapeFailure:r(e.escapeFailure,a),escapeStart:r(e.escapeStart,a),evasion:r(e.evasion,a),expNext:r(e.expNext,a),expTotal:r(e.expTotal,a),file:r(e.file,a),loadMessage:r(e.loadMessage,a),levelUp:r(e.levelUp,a),magicEvasion:r(e.magicEvasion,a),magicReflection:r(e.magicReflection,a),meVolume:r(e.meVolume,a),obtainExp:r(e.obtainExp,a),obtainGold:r(e.obtainGold,a),obtainItem:r(e.obtainItem,a),obtainSkill:r(e.obtainSkill,a),partyName:r(e.partyName,a),possession:r(e.possession,a),preemptive:r(e.preemptive,a),saveMessage:r(e.saveMessage,a),seVolume:r(e.seVolume,a),substitute:r(e.substitute,a),surprise:r(e.surprise,a),touchUI:r(e.touchUI,a),useItem:r(e.useItem,a),victory:r(e.victory,a)}),T=(e,a)=>e.map(t=>r(t,a)),W=e=>e.map(a=>a.parameters[0].trimEnd()).join(`
`).trimEnd();class V{constructor(a,t){this.header=a,this.bodies=t}getBodyText(){return W(this.joinCommandBodies())}mergedBody(){return{code:this.header.code,indent:this.header.indent,parameters:[this.getBodyText()]}}joinCommandBodies(){return[this.header,...this.bodies]}normalizedCommands(){return[this.mergedBody()]}}class A{constructor(a,t,s){this.bodyCode=a,this.header=t,this.bodies=s}normalizedCommands(){const a={...this.header,code:this.header.code,indent:this.header.indent,parameters:[...this.header.parameters]};return this.bodies.length===0?[a]:[a,this.mergedBody()]}getBodyText(){return W(this.bodies)}joinCommandBodies(){return this.bodies}mergedBody(){return{code:this.bodyCode,indent:this.header.indent,parameters:[this.getBodyText()]}}}const k=(e,a,t,s)=>{const o=e[a];if(!t(o))throw new Error(`Invalid head at index ${a}: ${JSON.stringify(o)}`);const m=[];for(let c=a+1;c<e.length;c++){const y=e[c];if(!s(y))break;m.push(y)}return{header:o,bodies:m}},de=(e,a)=>{const{bodies:t,header:s}=((o,m)=>k(o,m,c=>c.code===n.COMMENT_HEAD,c=>c.code===n.COMMENT_BODY))(e,a);return pe(s)?new A(n.COMMENT_BODY,s,t):new V(s,t)},pe=e=>e.parameters[0]==="選択肢ヘルプ",le=(e,a)=>{const{bodies:t,header:s}=((o,m)=>k(o,m,c=>c.code===n.SHOW_MESSAGE,c=>c.code===n.SHOW_MESSAGE_BODY))(e,a);return new A(n.SHOW_MESSAGE_BODY,s,t)},ue=(e,a)=>{const{bodies:t,header:s}=((o,m)=>k(o,m,c=>c.code===n.SCRIPT_EVAL,c=>c.code===n.SCRIPT_EVAL_BODY))(e,a);return new V(s,t)},ye=(e,a)=>{const{bodies:t,header:s}=((o,m)=>k(o,m,c=>c.code===n.SHOW_SCROLLING_TEXT,c=>c.code===n.SHOW_SCROLLING_TEXT_BODY))(e,a);return new A(n.SHOW_SCROLLING_TEXT_BODY,s,t)},ge={[n.SHOW_MESSAGE]:(e,a,t)=>t.showMessage(le(e,a),a,e),[n.SCRIPT_EVAL]:(e,a,t)=>t.script(ue(e,a),a,e),[n.COMMENT_HEAD]:(e,a,t)=>t.comment(de(e,a),a,e),[n.SHOW_SCROLLING_TEXT]:(e,a,t)=>t.showScrollingText(ye(e,a),a,e)},fe=e=>((a,t)=>({code:a.code,paramIndex:t,value:a.parameters[t]}))(e,1),Te=e=>e.parameters[0].map((a,t)=>({code:102,paramIndex:t,value:a})),E=e=>e.reduce((a,t,s)=>{if(t.code===n.SHOW_CHOICES)return[...a,...Te(t)];const o=(m=t.code,ge[m]);var m;if(o){const c=o(e,s,xe);if(c!==void 0)return[...a,c]}return t.code===n.CHANGE_NICKNAME||t.code===n.CHANGE_NAME||t.code===n.CHANGE_PROFILE?[...a,fe(t)]:a},[]),xe={comment:e=>{return a=e,{code:n.COMMENT_HEAD,paramIndex:0,value:a.getBodyText()};var a},showMessage:e=>{return a=e,{code:n.SHOW_MESSAGE_BODY,paramIndex:0,value:a.getBodyText(),speaker:(t=a.header,t.parameters[4]?t.parameters[4].trimEnd():"")};var a,t},script:e=>(a=>({code:n.SCRIPT_EVAL,paramIndex:0,value:a.getBodyText()}))(e),showScrollingText:e=>(a=>({code:n.SHOW_SCROLLING_TEXT_BODY,paramIndex:0,value:a.getBodyText()}))(e)},be=e=>R(e,(a,t,s)=>({eventId:s.id,pageIndex:t,commands:E(a.list),note:s.note,noteItems:n.readNote(s.note),name:s.name})),O=(e,a,t)=>({folder:t,key:a,image:e[a],id:e.id}),l=(e,a)=>({note:Y(e),main:a.map(t=>({key:t,text:e[t],id:e.id}))}),Y=e=>n.readNoteEx(e.note,(a,t)=>({key:a,text:t,id:e.id})),Ee=e=>(e.data.kind==="struct_def"||e.data.kind==="struct_def[]")&&!!e.data.struct,$=(e,a)=>({type:"array",items:a,...d(e),...p(e.default)}),d=e=>({...typeof e.text=="string"?{title:e.text}:{},...typeof e.desc=="string"?{description:e.desc}:{}}),p=e=>e!==void 0?{default:e}:{},he="x-rpg-param",f=(e,a)=>({[he]:{kind:e.kind,...e.parent?{parent:e.parent}:{},data:a}}),Se=e=>f(e,{...typeof e.on=="string"?{on:e.on}:{},...typeof e.off=="string"?{off:e.off}:{}}),S=e=>e===void 0||e===0,G=e=>f(e,typeof e.decimals=="number"?{decimals:e.decimals}:{}),Ne={variable:1,switch:2,actor:0,item:0,weapon:0,armor:0,skill:0,class:0,state:0,troop:0,enemy:0,common_event:0},ke=["data","system","system"],ve=e=>{const a=Ne[e];return a===void 0?{author:"rmmz",module:"unknown",kind:e}:{author:"rmmz",module:ke[a],kind:[e,"variable","switch"][a]}},U=e=>({$ref:`#/definitions/${e.struct}`,...d(e)}),X=e=>$(e,{type:"string"}),z=e=>$(e,{type:"integer"}),M=e=>{switch(e.kind){case"string":case"multiline_string":return(a=>({type:"string",...d(a),...p(a.default)}))(e);case"file":case"combo":return(a=>({type:"string",...p(a.default),...d(a)}))(e);case"select":return(a=>({type:"string",...p(a.default),...d(a),...a.options?{enum:a.options.map(t=>t.value)}:{}}))(e);case"file[]":case"string[]":case"multiline_string[]":return X(e);case"number[]":return(a=>({type:"array",items:{type:S(a.decimals)?"integer":"number"},...p(a.default),...d(a)}))(e);case"actor[]":case"weapon[]":case"armor[]":case"skill[]":case"item[]":case"enemy[]":case"state[]":case"class[]":case"troop[]":return z(e);case"number":return(a=>({type:S(a.decimals)?"integer":"number",...p(a.default),...d(a)}))(e);case"actor":case"weapon":case"armor":case"skill":case"item":case"enemy":case"state":case"class":case"troop":return(a=>({type:"integer",...p(a.default),...d(a)}))(e);case"boolean":return(a=>({type:"boolean",...p(a.default),...d(a)}))(e);case"struct":return U(e);default:return{}}},K=e=>{switch(e.kind){case"string":case"multiline_string":return(a=>({type:"string",...d(a),...p(a.default),...f(a,{})}))(e);case"file":return(a=>({type:"string",...p(a.default),...d(a),...f(a,{dir:a.dir})}))(e);case"combo":return(a=>({type:"string",...p(a.default),...d(a),...f(a,{options:[...a.options]})}))(e);case"select":return(a=>({type:"string",...p(a.default),...d(a),enum:a.options.map(t=>t.value),...f(a,{options:a.options.map(t=>({value:t.value,option:t.option}))})}))(e);case"file[]":case"string[]":case"multiline_string[]":return X(e);case"number[]":return(a=>({type:"array",items:{type:S(a.decimals)?"integer":"number"},...p(a.default),...d(a),...G(a)}))(e);case"actor[]":case"weapon[]":case"armor[]":case"skill[]":case"item[]":case"enemy[]":case"state[]":case"class[]":case"troop[]":return z(e);case"number":return(a=>({type:S(a.decimals)?"integer":"number",...p(a.default),...d(a),...G(a)}))(e);case"actor":case"weapon":case"armor":case"skill":case"item":case"enemy":case"state":case"class":case"troop":return(a=>({type:"integer",...p(a.default),...d(a),...f(a,ve(a.kind))}))(e);case"boolean":return(a=>({type:"boolean",...p(a.default),...d(a),...Se(a)}))(e);case"struct":return U(e);default:return{}}},P=e=>{const a=Object.entries(e).reduce((t,[s,o])=>{const m=M(o);return{...t,[s]:m}},{});return{type:"object",properties:a,required:Object.keys(a),additionalProperties:!1}},h=(e,a,t,s)=>{const{properties:o,logs:m}=_e(t,e,s);return{schema:{type:"object",title:a,properties:o,required:Object.keys(t),additionalProperties:!1},logs:m}},Z=e=>e.kind==="struct_def",J=e=>e.kind==="struct_def[]",_e=(e,a,t)=>Object.entries(e).reduce((s,o)=>((m,[c,y],ae,te)=>{const D=`${ae}.${c}`,v=Ie(D,y,te);return{properties:{...m.properties,[c]:v.schema},logs:[...m.logs,...v.logs,{structName:(x=y,J(x)||Z(x)?x.struct:""),path:D,data:y,schema:v.schema}]};var x})(s,o,a,t),{properties:{},logs:[]}),Ie=(e,a,t)=>Z(a)?Q(e,a,t):J(a)?Oe(e,a,t):{schema:t.options.kindData?K(a):M(a),logs:[]},Q=(e,a,t)=>h(e,a.struct,a.params,t),Oe=(e,a,t)=>{const s=Q(`${e}[]`,{params:a.params,struct:a.struct},t);return{schema:{type:"array",...s.schema?{items:s.schema}:{},...p(a.default)},logs:s.logs}},i={type:"string",nullable:!0,maxLength:100},u={type:"string",default:"",nullable:!1},N={type:"number",nullable:!0},Ce={additionalProperties:!1,type:"object",required:["kind","default"],properties:{kind:{type:"string",const:"boolean"},default:{type:"boolean",default:!0},on:i,off:i,desc:i,text:i,parent:i}},Ae={type:"object",required:["kind","default"],properties:{decimals:{type:"integer",minimum:0,default:0,nullable:!0},min:N,max:N,default:{type:"number",default:0},kind:{type:"string",const:"number"},desc:i,text:i,parent:i}},Me={additionalProperties:!1,type:"object",required:["kind","default"],properties:{kind:{type:"string",const:"number[]"},default:{type:"array",items:{type:"number",default:0},default:[]},decimals:{type:"integer",minimum:0,default:0,nullable:!0},min:N,max:N,desc:i,text:i,parent:i}},De={additionalProperties:!1,type:"object",required:["kind","default"],properties:{kind:{type:"string",const:"string"},default:u,desc:i,text:i,parent:i}},He={additionalProperties:!1,type:"object",required:["kind","default"],properties:{kind:{type:"string",const:"string[]"},default:{type:"array",items:u,default:[]},desc:i,text:i,parent:i}},we={additionalProperties:!1,type:"object",required:["kind","default"],properties:{kind:{type:"string",enum:["actor","class","skill","item","weapon","armor","enemy","state","common_event"]},default:{type:"integer",default:0},desc:i,text:i,parent:i}},Ge={additionalProperties:!1,type:"object",required:["kind","default","options"],properties:{kind:{type:"string",const:"combo"},default:u,options:{type:"array",items:{type:"string"},default:[]},desc:i,text:i,parent:i}},Pe={additionalProperties:!1,type:"object",required:["kind","default","dir"],properties:{kind:{type:"string",const:"file"},default:u,dir:u,desc:i,text:i,parent:i}},Be={additionalProperties:!1,type:"object",required:["kind","default","dir"],properties:{kind:{type:"string",const:"file[]"},default:{type:"array",items:{type:"string"},default:[]},dir:u,desc:i,text:i,parent:i}},ee={type:"string",pattern:"^[a-zA-Z][a-zA-Z0-9]*$",minLength:1,maxLength:48},Re={additionalProperties:!1,type:"object",required:["kind","struct"],properties:{kind:{type:"string",const:"struct"},default:{type:"object",default:{},nullable:!0},desc:i,text:i,parent:i,struct:ee}},Fe={additionalProperties:!1,type:"object",required:["kind","struct"],properties:{kind:{type:"string",const:"struct[]"},struct:ee,default:{type:"array",items:{type:"object"},default:[],nullable:!0},desc:i,text:i,parent:i}},Le={additionalProperties:!1,type:"object",required:["kind","default","options"],properties:{kind:{type:"string",const:"select"},default:u,options:{type:"array",items:{type:"object",properties:{value:u,option:u},required:["value","option"]},default:[]},desc:i,text:i,parent:i}};exports.buildReferenceItemSources=(e,a,t,s,o,m)=>[...n.defineTraitItems(t,s),...n.defineGameDataSources(e,a),...n.defineSystemItems(o,m)],exports.compileFlatStruct=P,exports.compileItemEffectDisplayData=(e,a,t)=>{const s=n.resolveItemEffectLabels(a);return H.mergeItemsSource(t?[...s,...t]:s,e)},exports.compilePluginCommand=(e,{args:a,command:t},s)=>h(`${e.moduleName}.command.${t}`,t,a,{options:s}),exports.compilePluginStruct=(e,{params:a,struct:t},s)=>h(`${e.moduleName}.${t}`,t,a,{options:s}),exports.compilePrimitiveField=M,exports.compilePrimitiveFieldWithXParam=K,exports.compileStructDetail=h,exports.compileTraitDisplayData=(e,a)=>H.mergeItemsSource(n.resolveTraitLabels(a),e),exports.defineStructs=e=>e.filter(a=>Ee(a)).reduce((a,t)=>({...a,[t.structName]:t.schema}),{}),exports.extractBattleEventTexts=e=>((a,t)=>a.map(s=>C(s,t)))(e,(a,t,{id:s})=>({eventId:s,pageIndex:t,commands:E(a.list)})),exports.extractCommonEventTexts=e=>{return a=(t,s,{id:o})=>({eventId:o,commands:E(t.list)}),e.map(t=>a(t,0,t));var a},exports.extractImageFromActor=e=>[O(e,"faceName","faces"),O(e,"characterName","characters"),O(e,"battlerName","sv_actors")],exports.extractImageFromEnemy=e=>({key:"battlerName",image:e.battlerName,id:e.id}),exports.extractItemChangeData=B,exports.extractItemCommands=_,exports.extractItemFromMap=(e,a,t)=>R(e.map,(s,o,m)=>({...ne(s),commands:_(s.list,a,t),eventName:m.name,pageIndex:o})),exports.extractItemFromTroop=(e,a,t)=>{return s=(o,m,c)=>({commands:_(o.list,a,t),eventName:c.name,troopId:c.id,pageIndex:m}),e.flatMap(o=>C(o,s));var s},exports.extractMapText=e=>({note:e.note,noteItems:n.readNote(e.note),displayedName:e.displayName,events:be(e)}),exports.extractNoteText=Y,exports.extractTextData=l,exports.extractTextFromActor=e=>l(e,["name","nickname","profile"]),exports.extractTextFromArmor=e=>l(e,["name","description"]),exports.extractTextFromClass=e=>l(e,["name"]),exports.extractTextFromEnemy=e=>l(e,["name"]),exports.extractTextFromEventCommands=E,exports.extractTextFromItem=e=>l(e,["name","description"]),exports.extractTextFromSkill=e=>l(e,["name","description","message1","message2"]),exports.extractTextFromState=e=>l(e,["name","message1","message2","message3","message4"]),exports.extractTextFromSystem=e=>({gameTitle:e.gameTitle,currencyUnit:e.currencyUnit,equipTypes:[...e.equipTypes],armorTypes:[...e.armorTypes],weaponTypes:[...e.weaponTypes],terms:{basic:n.makeTermsBasicFromArray(e.terms.basic),commands:n.makeTermsCommandFromArray(e.terms.commands),messages:n.makeTermsMessages(e.terms.messages),params:n.makeParamNamesFromArray(e.terms.params)}}),exports.extractTextFromWeapon=e=>l(e,["name","description"]),exports.makePluginParamSchema=()=>({type:"object",discriminator:{propertyName:"kind"},oneOf:[Ce,Ge,we,Pe,Be,Ae,Me,Le,Re,Fe,De,He]}),exports.replaceActorText=(e,a)=>{const t=g(e,a),s=r(e.name,a),o=r(e.nickname,a),m=r(e.profile,a);return{...e,name:s,nickname:o,profile:m,note:t}},exports.replaceArmorText=I,exports.replaceClassText=(e,a)=>{const t=g(e,a),s=r(e.name,a);return{...e,name:s,note:t}},exports.replaceCommonEventTexts=(e,a)=>({...e,list:b(e.list,a)}),exports.replaceEnemyText=(e,a)=>{const t=g(e,a),s=r(e.name,a);return{...e,name:s,note:t}},exports.replaceEventCommandTexts=b,exports.replaceItemText=I,exports.replaceMapDataTexts=(e,a)=>{const t=r(e.displayName,a),s=g(e,a),o={displayName:t,events:n.repleaceMapEventCommands(e,m=>b(m,a)),note:s};return{...e,...o}},exports.replaceNoteTextByMap=g,exports.replaceSkillText=(e,a)=>{const t=g(e,a),s=r(e.name,a),o=r(e.description,a),m=r(e.message1,a),c=r(e.message2,a);return{...e,name:s,description:o,message1:m,message2:c,note:t}},exports.replaceStateText=(e,a)=>{const t=g(e,a),s=r(e.name,a),o=r(e.message1,a),m=r(e.message2,a),c=r(e.message3,a),y=r(e.message4,a);return{...e,name:s,message1:o,message2:m,message3:c,message4:y,note:t}},exports.replaceSystemTerms=w,exports.replaceSystemText=(e,a)=>({...e,gameTitle:r(e.gameTitle,a),currencyUnit:r(e.currencyUnit,a),elements:T(e.elements,a),skillTypes:T(e.skillTypes,a),weaponTypes:T(e.weaponTypes,a),armorTypes:T(e.armorTypes,a),equipTypes:T(e.equipTypes,a),terms:w(e.terms,a)}),exports.replaceTextByMap=r,exports.replaceTextForCommand=F,exports.replaceTextForCommandActor=j,exports.replaceTextForCommandShowChoices=q,exports.replaceTextForCommandShowMessage=L,exports.replaceTroopTexts=(e,a)=>{const t=e.pages.map(s=>({list:b(s.list,a),conditions:s.conditions,span:s.span}));return{...e,pages:t}},exports.replaceWeaponText=I,exports.structToJSONSchema=e=>P(e);

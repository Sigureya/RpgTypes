{"version":3,"file":"rpgTypes.es.js","sources":["../src/rmmz/rpg/data/controlChars/controlChars.ts","../src/rmmz/rpg/data/controlChars/getContolChars.ts","../src/rmmz/rpg/data/dataToCtrlChar.ts","../src/rmmz/rpg/data/controlChars/constants.ts","../src/rmmz/rpg/data/event/makeEvent.ts","../src/rmmz/rpg/data/event/map/event/condition/make.ts","../src/rmmz/rpg/data/event/map/event/eventCommand/eventCommandCodes.ts","../src/rmmz/rpg/data/event/map/event/eventCommand/make.ts","../src/rmmz/rpg/data/event/map/event/eventCommand/types/domains/moveRoute/constants.ts","../src/rmmz/rpg/data/event/map/event/make.ts","../src/rmmz/rpg/data/event/map/make.ts","../src/rmmz/rpg/data/event/map/mapInfo/make.ts","../src/rmmz/rpg/data/event/map/schema.ts","../src/rmmz/rpg/data/event/map/event/condition/schema.ts","../src/rmmz/rpg/data/event/map/event/eventCommand/moveRoute/schema.ts","../src/rmmz/rpg/data/event/validate.ts","../src/rmmz/rpg/data/event/map/mapInfo/schema.ts","../src/rmmz/rpg/data/gameData.ts","../src/rmmz/rpg/data/main/defaultDataLabels.ts","../src/rmmz/rpg/data/main/members/damage/damageDefault.ts","../src/rmmz/rpg/data/main/members/damage/make.ts","../src/rmmz/rpg/data/main/traitContainers/actor/actor.ts","../src/rmmz/rpg/data/main/traitContainers/armor/armor.ts","../src/rmmz/rpg/data/main/traitContainers/class/class.ts","../src/rmmz/rpg/data/main/traitContainers/enemy/enemy.ts","../src/rmmz/rpg/data/main/traitContainers/state/state.ts","../src/rmmz/rpg/data/main/traitContainers/trait/core/constants/traitCode.ts","../src/rmmz/rpg/data/main/traitContainers/trait/core/items/collaps/constants.ts","../src/rmmz/rpg/data/main/traitContainers/trait/core/items/collaps/collaps.ts","../src/rmmz/rpg/data/main/traitContainers/trait/core/items/paramExtra/constants.ts","../src/rmmz/rpg/data/main/traitContainers/trait/core/items/paramExtra/extraParam.ts","../src/rmmz/rpg/data/main/traitContainers/trait/core/items/paramRegular/constants.ts","../src/rmmz/rpg/data/main/traitContainers/trait/core/items/paramRegular/regularParam.ts","../src/rmmz/rpg/data/main/traitContainers/trait/core/items/paramSpecial/constants.ts","../src/rmmz/rpg/data/main/traitContainers/trait/core/items/paramSpecial/specialParam.ts","../src/rmmz/rpg/data/main/traitContainers/trait/core/items/partyAbility/constants.ts","../src/rmmz/rpg/data/main/traitContainers/trait/core/items/partyAbility/partyAbility.ts","../src/rmmz/rpg/data/main/traitContainers/trait/core/items/specialFlags/constants.ts","../src/rmmz/rpg/data/main/traitContainers/trait/core/items/specialFlags/specialFlags.ts","../src/rmmz/rpg/data/main/traitContainers/trait/core/default.ts","../src/rmmz/rpg/data/main/traitContainers/trait/core/namedItems.ts","../src/rmmz/rpg/data/main/traitContainers/trait/types/schema.ts","../src/libs/namedItemSource/constants.ts","../src/libs/namedItemSource/format/core/rule/core/compile.ts","../src/libs/namedItemSource/format/core/rule/core/sourceIdentifier/sourceId.ts","../src/libs/namedItemSource/format/core/rule/getPlaceHolders.ts","../src/libs/namedItemSource/format/core/rule/rule.ts","../src/libs/namedItemSource/format/core/rule/constants.ts","../src/libs/namedItemSource/format/core/detectErrors.ts","../src/libs/namedItemSource/format/mergeItemsSource.ts","../src/libs/namedItemSource/format/applyFormat.ts","../src/libs/namedItemSource/format/core/namedItem/namedItem.ts","../src/rmmz/rpg/data/main/traitContainers/trait/format.ts","../src/rmmz/rpg/data/main/traitContainers/weapon/make.ts","../src/rmmz/rpg/data/main/traitContainers/weapon/weaponDefault.ts","../src/rmmz/rpg/data/main/usableItems/core/hitType/constants.ts","../src/rmmz/rpg/data/main/usableItems/core/itemEffect/effectCode/constants.ts","../src/rmmz/rpg/data/main/usableItems/core/itemEffect/define.ts","../src/rmmz/rpg/data/main/usableItems/core/itemEffect/labels/defaultLabelSet.ts","../src/rmmz/rpg/data/main/usableItems/core/itemEffect/specialEffect/constants.ts","../src/rmmz/rpg/data/main/usableItems/core/itemEffect/format.ts","../src/rmmz/rpg/data/main/usableItems/core/labels/item/itemDefault.ts","../src/rmmz/rpg/data/main/usableItems/core/labels/skill/skillDefault.ts","../src/rmmz/rpg/data/main/usableItems/core/labels/usableItemDefault.ts","../src/rmmz/rpg/data/main/usableItems/item.ts","../src/rmmz/rpg/data/main/usableItems/skill.ts","../src/rmmz/rpg/data/main/primitiveSchema/primitiveSchema.ts","../src/rmmz/rpg/data/main/schema.usableItem.ts","../src/rmmz/rpg/data/main/validate.ts","../src/rmmz/rpg/data/main/traitContainers/actor/schema.ts","../src/rmmz/rpg/data/main/traitContainers/armor/schema.ts","../src/rmmz/rpg/data/main/traitContainers/weapon/schema.ts","../src/rmmz/rpg/data/main/traitContainers/enemy/schema.ts","../src/rmmz/rpg/data/main/traitContainers/state/schema.ts","../src/rmmz/rpg/data/main/traitContainers/class/schema.ts","../src/rmmz/rpg/data/note/note.ts","../src/rmmz/rpg/data/sourceKindConstants.ts","../src/rmmz/rpg/data/resolveTraitLabels.ts","../src/rmmz/rpg/labels/default.ts","../src/rmmz/rpg/labelRegistryDefault.ts","../src/rmmz/system/core/advanced/advanced.ts","../src/libs/utils/isValidNumber.ts","../src/libs/utils/types/audioFileParams/make.ts","../src/rmmz/system/core/audio/soundArray/soundArray.ts","../src/rmmz/system/core/audio/schema.ts","../src/rmmz/system/core/battle/schema.ts","../src/rmmz/system/core/booleanOptions/gameMenu/gameMenu.ts","../src/rmmz/system/core/booleanOptions/gameMenu/itemCategories/itemCategories.ts","../src/rmmz/system/core/booleanOptions/gameMenu/menuCommands/make.ts","../src/rmmz/system/core/booleanOptions/gameMenu/schema.ts","../src/rmmz/system/core/booleanOptions/gameMenu/itemCategories/schema.ts","../src/rmmz/system/core/booleanOptions/gameMenu/menuCommands/schema.ts","../src/rmmz/system/core/booleanOptions/gameSetting/options.ts","../src/rmmz/system/core/booleanOptions/gameSetting/schema.ts","../src/rmmz/system/core/gameInitial/gameInitial.ts","../src/rmmz/system/core/gameInitial/schema.ts","../src/rmmz/system/core/images/schema.ts","../src/rmmz/system/core/other/schema.ts","../src/rmmz/system/core/rpgDataTypes/getSystemTypeNames.ts","../src/rmmz/system/core/rpgDataTypes/namedItems.ts","../src/rmmz/system/core/rpgDataTypes/kindConstants.ts","../src/rmmz/system/core/rpgDataTypes/schema.ts","../src/rmmz/system/core/rpgDataTypes/dataTypes.ts","../src/rmmz/system/core/terms/basic/make.ts","../src/rmmz/system/core/terms/commands/commands.ts","../src/rmmz/system/core/terms/messages/make.ts","../src/rmmz/system/core/terms/commands/schema.ts","../src/rmmz/system/core/terms/messages/schema.ts","../src/rmmz/system/core/terms/schema.ts","../src/rmmz/system/core/terms/basic/schema.ts","../src/rmmz/system/core/terms/paramArray/schema.ts","../src/rmmz/system/core/terms/terms.ts","../src/rmmz/system/core/titleCommandWindow/titleCommandWindow.ts","../src/rmmz/system/core/titleCommandWindow/schema.ts","../src/rmmz/system/core/vehicle/vehicle.ts","../src/rmmz/system/gameEdit/gameEdit.ts","../src/rmmz/system/gameEdit/testPlay/schema.ts","../src/rmmz/system/gameEdit/schema.ts","../src/rmmz/system/gameEdit/editor/schema.ts","../src/rmmz/system/systemLabels.ts","../src/rmmz/system/core/attackMotion/schema.ts","../src/rmmz/system/core/vehicle/schema.ts","../src/rmmz/system/schemaBundle.ts","../src/rmmz/system/core/advanced/schema.ts","../src/rmmz/system/schemaMerge.ts","../src/rmmz/system/validate.ts","../src/rmmz/system/make.ts","../src/app/format/trait/formatTraits.ts","../src/libs/templates/domainLabel/domainLabel.ts","../src/rmmz/eventCommand/commands/actor/changeText/make.ts","../src/rmmz/eventCommand/commands/audio/play/make.ts","../src/rmmz/eventCommand/commands/flow/callCommonEvent/make.ts","../src/rmmz/eventCommand/commands/flow/controlSwtches/make.ts","../src/rmmz/eventCommand/commands/message/comment/make.ts","../src/rmmz/eventCommand/commands/message/inputNumber/make.ts","../src/rmmz/eventCommand/commands/message/scrollText/make.ts","../src/rmmz/eventCommand/commands/message/setupChoice/make.ts","../src/rmmz/eventCommand/commands/message/showMessage/convert.ts","../src/rmmz/eventCommand/commands/script/make.ts","../src/rmmz/eventCommand/commands/variable/constants.ts","../src/rmmz/eventCommand/commands/variable/types/enemy/dataSource.ts","../src/rmmz/eventCommand/commands/variable/convert.ts","../src/rmmz/eventCommand/commands/variable/getValue.ts","../src/rmmz/eventCommand/utils/clone/clone.ts","../src/rmmz/eventCommand/validate.ts","../src/rmmz/eventCommand/commands/actor/changeText/schema.ts","../src/rmmz/eventCommand/commands/message/scrollText/schema.ts","../src/rmmz/eventCommand/commands/audio/play/schema.ts","../src/rmmz/eventCommand/unionSchema.ts","../src/rmmz/eventCommand/commands/flow/callCommonEvent/schema.ts","../src/rmmz/eventCommand/commands/message/setupChoice/schema.ts","../src/rmmz/eventCommand/commands/message/setupChoice/item/schema.ts","../src/rmmz/eventCommand/commands/message/inputNumber/schema.ts","../src/rmmz/eventCommand/commands/message/showMessage/schema.ts","../src/rmmz/eventCommand/validateAudio.ts","../src/rmmz/eventCommand/validateTextBody.ts","../src/rmmz/folderNames/asset/audio.ts","../src/rmmz/folderNames/asset/images.ts","../src/rmmz/folderNames/data/fileNames.ts","../src/rmmz/folderNames/folderName.ts","../src/rmmz/plugin/schema/compile/kinds/core/paramBase/basicMetaField.ts","../src/rmmz/plugin/schema/compile/kinds/numbers.ts","../src/rmmz/plugin/schema/compile/kinds/compileField.ts","../src/rmmz/plugin/schema/compile/kinds/string.ts","../src/rmmz/plugin/schema/compile/kinds/combo.ts","../src/rmmz/plugin/schema/compile/kinds/select.ts","../src/rmmz/plugin/schema/compile/kinds/rpgDataKind.ts","../src/rmmz/plugin/schema/compile/kinds/boolean.ts","../src/rmmz/plugin/schema/compile/kinds/structDef.ts","../src/rmmz/plugin/schema/compile/kinds/core/mapping/mapping.ts","../src/rmmz/plugin/schema/compile/kinds/core/parse/keyword/constants.ts","../src/rmmz/plugin/schema/compile/kinds/core/rmmzJSON/parseDeepJSON.ts","../src/rmmz/plugin/schema/compile/kinds/core/attributes.ts","../src/rmmz/plugin/schema/compile/kinds/core/parse/block.ts","../src/rmmz/plugin/schema/compile/kinds/core/parse/option.ts","../src/rmmz/plugin/schema/compile/kinds/core/parse/flashState.ts","../src/rmmz/plugin/schema/compile/kinds/core/parse/parse.ts","../src/rmmz/plugin/schema/compile/kinds/core/parse/state.ts","../src/rmmz/plugin/schema/compile/kinds/core/parse/struct.ts","../src/rmmz/plugin/schema/compile/kinds/core/parse/dependencies.ts","../src/rmmz/plugin/schema/compile/kinds/core/parsePlugin.ts","../src/rmmz/plugin/plugin.ts","../src/rmmz/plugin/schema/compile/kinds/compileFlatStruct.ts"],"sourcesContent":["export const createControlCharFormat = <C extends string>(\r\n  char: C,\r\n  id: number\r\n) => {\r\n  return `\\\\${char}[${id}]` as const;\r\n};\r\n\r\nexport const fromStringArray = <C extends string>(\r\n  char: C,\r\n  array: ReadonlyArray<string>\r\n) => {\r\n  return array.map((text, index) => ({\r\n    text,\r\n    controlChar: createControlCharFormat(char, index),\r\n  }));\r\n};\r\n","import type { ControlChar } from \"./types\";\r\n\r\n/**\r\n * 指定されたテキストから制御文字を抽出し、ControlChar配列として返します。\r\n * 制御文字の形式: \\(文字)[数字]\r\n * 文字の大文字小文字を区別しない。\r\n */\r\nexport const getControlChars = (text: string): ControlChar[] => {\r\n  // 正規表現: \\(制御文字)[数字]\r\n  const regex = /\\\\([A-Za-z]+)\\[(\\d+)]/g;\r\n  return Array.from(text.matchAll(regex)).map<ControlChar>(\r\n    (match: RegExpMatchArray) => ({\r\n      char: match[1],\r\n      id: parseInt(match[2], 10),\r\n    })\r\n  );\r\n};\r\n","import type { Data_System } from \"@RpgTypes/system\";\r\nimport type { ControlCharInfo } from \"./controlChars\";\r\nimport { createControlCharFormat } from \"./controlChars\";\r\nimport { CTRL_CHAR_ACTOR, CTRL_CHAR_VARIABLE } from \"./controlChars/constants\";\r\nimport type { Data_Actor } from \"./main\";\r\n\r\nexport const createActorControlChars = (\r\n  actors: ReadonlyArray<Data_Actor>\r\n): ControlCharInfo[] => {\r\n  return actors.map<ControlCharInfo>((actor) => ({\r\n    text: actor.name,\r\n    controlChar: createControlCharFormat(CTRL_CHAR_ACTOR, actor.id),\r\n  }));\r\n};\r\n\r\nexport const createSystemVariableControlChars = (\r\n  system: Pick<Data_System, \"variables\">\r\n): ControlCharInfo[] => {\r\n  return system.variables\r\n    .map<ControlCharInfo>((name, index) => ({\r\n      text: name || \"\",\r\n      controlChar: createControlCharFormat(CTRL_CHAR_VARIABLE, index),\r\n    }))\r\n    .filter((pair) => pair.text !== \"\");\r\n};\r\n","export const CTRL_CHAR_ACTOR = \"N\" as const;\r\nexport const CTRL_CHAR_VARIABLE = \"V\" as const;\r\nexport const CTRL_CHAR_POSTION_X = \"PX\" as const;\r\nexport const CTRL_CHAR_POSTION_Y = \"PY\" as const;\r\nexport const CTRL_CHAR_GOLD = \"G\" as const;\r\nexport const CTRL_CHAR_PARTY = \"P\" as const;\r\nexport const CTRL_CHAR_COLOR = \"C\" as const;\r\nexport const CTRL_CHAR_ICON = \"I\" as const;\r\nexport const CTRL_CHAR_FONT_SIZE = \"FS\" as const;\r\n","import type { Data_CommonEvent } from \"./commonEvent\";\r\nimport type { Data_Troop, Troop_EventConditions, Troop_Member } from \"./troop\";\r\n\r\nexport const makeCommonEventData = (\r\n  data: Partial<Data_CommonEvent> = {}\r\n): Data_CommonEvent => ({\r\n  id: data.id ?? 0,\r\n  name: data.name ?? \"\",\r\n  trigger: data.trigger ?? 0,\r\n  list: data.list ?? [],\r\n  switchId: data.switchId ?? 0,\r\n});\r\n\r\nexport const makeTroopData = (data: Partial<Data_Troop> = {}): Data_Troop => ({\r\n  id: data.id ?? 0,\r\n  name: data.name ?? \"\",\r\n  members: data.members ?? [],\r\n  pages: data.pages ?? [],\r\n});\r\n\r\nexport const makeTroopMember = (\r\n  data: Partial<Troop_Member> = {}\r\n): Troop_Member => ({\r\n  enemyId: data.enemyId ?? 0,\r\n  x: data.x ?? 0,\r\n  y: data.y ?? 0,\r\n  hidden: data.hidden ?? false,\r\n});\r\n\r\nexport const makeTroopEventConditions = (\r\n  data: Partial<Troop_EventConditions> = {}\r\n): Troop_EventConditions => ({\r\n  actorHp: data.actorHp ?? 0,\r\n  actorId: data.actorId ?? 0,\r\n  enemyValid: data.enemyValid ?? 0,\r\n  switchValid: data.switchValid ?? 0,\r\n});\r\n","import type { MapEvent_PageCondition, PageConditionArg } from \"./condition\";\r\n\r\nexport const makeEventPageCondition = (\r\n  arg: Partial<PageConditionArg> = {}\r\n): MapEvent_PageCondition => {\r\n  return {\r\n    switch1Id: arg.switch1Id ?? 0,\r\n    switch1Valid: arg.switch1Id !== undefined,\r\n    switch2Id: arg.switch2Id ?? 0,\r\n    switch2Valid: arg.switch2Id !== undefined,\r\n    variableId: arg.variableId ?? 0,\r\n    variableValid: arg.variableId !== undefined,\r\n    variableValue: arg.variableValue ?? 0,\r\n    selfSwitchCh: arg.selfSwitchCh ?? \"A\",\r\n    selfSwitchValid: arg.selfSwitchCh !== undefined,\r\n    itemId: arg.itemId ?? 0,\r\n    itemValid: arg.itemId !== undefined,\r\n    actorId: arg.actorId ?? 0,\r\n    actorValid: arg.actorId !== undefined,\r\n  };\r\n};\r\n","export const NO_OPERATION = 0 as const;\r\nexport const SHOW_MESSAGE = 101 as const;\r\nexport const SHOW_MESSAGE_BODY = 401 as const;\r\nexport const SHOW_CHOICES = 102 as const;\r\nexport const SHOW_CHOICES_ITEM = 402 as const;\r\nexport const INPUT_NUMBER = 103 as const;\r\nexport const SELECT_ITEM = 104 as const;\r\nexport const SHOW_SCROLLING_TEXT = 105 as const;\r\nexport const SHOW_SCROLLING_TEXT_BODY = 405 as const;\r\nexport const COMMENT_HEAD = 108 as const;\r\nexport const COMMENT_BODY = 408 as const;\r\nexport const SKIP = 109 as const;\r\nexport const CONDITIONAL_BRANCH = 111 as const;\r\nexport const CONDITIONAL_BRANCH_ELSE = 411 as const;\r\nexport const LOOP = 112 as const;\r\nexport const LOOP_BREAK = 113 as const;\r\nexport const EXIT_EVENT_PROCESSING = 115 as const;\r\nexport const COMMON_EVENT = 117 as const;\r\nexport const LABEL = 118 as const;\r\nexport const LABEL_JUMP = 119 as const;\r\nexport const CONTROL_SWITCHES = 121 as const;\r\nexport const CONTROL_VARIABLES = 122 as const;\r\nexport const CONTROL_SELF_SWITCH = 123 as const;\r\nexport const CONTROL_TIMER = 124 as const;\r\nexport const CHANGE_GOLD = 125 as const;\r\nexport const CHANGE_ITEMS = 126 as const;\r\nexport const CHANGE_WEAPONS = 127 as const;\r\nexport const CHANGE_ARMORS = 128 as const;\r\nexport const CHANGE_PARTY_MEMBER = 129 as const;\r\nexport const CHANGE_BATTLE_BGM = 132 as const;\r\nexport const CHANGE_VICTORY_ME = 133 as const;\r\nexport const CHANGE_SAVE_ACCESS = 134 as const;\r\nexport const CHANGE_MENU_ACCESS = 135 as const;\r\nexport const CHANGE_ENCOUNTER = 136 as const;\r\nexport const CHANGE_FORMATION_ACCESS = 137 as const;\r\nexport const CHANGE_WINDOW_COLOR = 138 as const;\r\n\r\nexport const CHANGE_DEFEAT_ME = 139 as const;\r\nexport const CHANGE_VEHICLE_BGM = 140 as const;\r\n\r\nexport const TRANSFER_PLAYER = 201 as const;\r\nexport const SET_VEHICLE_LOCATION = 202 as const;\r\nexport const SET_EVENT_LOCATION = 203 as const;\r\nexport const SCROLL_MAP = 204 as const;\r\nexport const SET_MOVEMENT_ROUTE = 205 as const;\r\nexport const GET_ONOFF_VEHICLE = 206 as const;\r\nexport const CHANGE_TRANSPARENCY = 211 as const;\r\nexport const SHOW_ANIMATION = 212 as const;\r\nexport const SHOW_BALLOON_ICON = 213 as const;\r\nexport const ERASE_EVENT = 214 as const;\r\nexport const CHANGE_PLAYER_FOLLOWERS = 216 as const;\r\nexport const GATHER_FOLLOWERS = 217 as const;\r\nexport const FADEOUT_SCREEN = 221 as const;\r\nexport const FADEIN_SCREEN = 222 as const;\r\nexport const TINT_SCREEN = 223 as const;\r\nexport const FLASH_SCREEN = 224 as const;\r\nexport const SHAKE_SCREEN = 225 as const;\r\n\r\nexport const WAIT = 230 as const;\r\nexport const SHOW_PICTURE = 231 as const;\r\nexport const MOVE_PICTURE = 232 as const;\r\nexport const ROTATE_PICTURE = 233 as const;\r\nexport const TINT_PICTURE = 234 as const;\r\nexport const ERASE_PICTURE = 235 as const;\r\nexport const SET_WEATHER_EFFECT = 236 as const;\r\n\r\nexport const PLAY_BGM = 241 as const;\r\nexport const FADEOUT_BGM = 242 as const;\r\nexport const SAVE_BGM = 243 as const;\r\nexport const RESUME_BGM = 244 as const;\r\n\r\nexport const PLAY_BGS = 245 as const;\r\nexport const FADEOUT_BGS = 246 as const;\r\nexport const PLAY_ME = 249 as const;\r\nexport const PLAY_SE = 250 as const;\r\nexport const STOP_SE = 251 as const;\r\n\r\nexport const PLAY_MOVIE = 261 as const;\r\n\r\nexport const CHANGE_TILESET = 282 as const;\r\nexport const CHANGE_BATTLE_BACKGROUND = 283 as const;\r\nexport const CHANGE_PARALLAX = 284 as const;\r\nexport const GET_LOCATION_INFO = 285 as const;\r\n\r\nexport const BATTLE_PROCESSING = 301 as const;\r\n\r\nexport const SHOP_PROCESSING = 302 as const;\r\nexport const SHOP_PROCESSING_BODY = 605 as const;\r\nexport const NAME_INPUT_PROCESSING = 303 as const;\r\nexport const CHANGE_HP = 311 as const;\r\nexport const CHANGE_MP = 312 as const;\r\nexport const CHANGE_TP = 313 as const;\r\nexport const RECOVER_ALL = 314 as const;\r\nexport const CHANGE_EXP = 315 as const;\r\n\r\nexport const CHANGE_NAME = 320 as const;\r\nexport const CHANGE_CLASS = 321 as const;\r\nexport const CHANGE_ACTOR_IMAGES = 322 as const;\r\nexport const CHANGE_VEHICLE_IMAGE = 323 as const;\r\nexport const CHANGE_NICKNAME = 324 as const;\r\nexport const CHANGE_PROFILE = 325 as const;\r\n\r\nexport const CHANGE_ENEMY_HP = 331 as const;\r\nexport const CHANGE_ENEMY_MP = 332 as const;\r\n\r\nexport const CHANGE_ENEMY_STATE = 333 as const;\r\nexport const ENEMY_RECOVER_ALL = 334 as const;\r\nexport const ENEMY_APPEAR = 335 as const;\r\nexport const ENEMY_TRANSFORM = 336 as const;\r\nexport const SHOW_BATTLE_ANIMATION = 337 as const;\r\nexport const FORCE_ACTION = 339 as const;\r\nexport const ABORT_BATTLE = 340 as const;\r\nexport const OPEN_MENU_SCREEN = 351 as const;\r\n\r\nexport const CHANGE_ENEMY_TP = 342 as const;\r\n\r\nexport const OPEN_SAVE_SCREEN = 352 as const;\r\nexport const GAME_OVER = 353 as const;\r\nexport const RETURN_TO_TITLE_SCREEN = 354 as const;\r\nexport const SCRIPT_EVAL = 355 as const;\r\nexport const SCRIPT_EVAL_BODY = 655 as const;\r\nexport const PLUGIN_COMMAND_MV = 356 as const;\r\nexport const PLUGIN_COMMAND_MZ = 357 as const;\r\n","import type { CommandParamaterType } from \"@RpgTypes/eventCommand\";\r\nimport type { EventCommandLike } from \"./eventComandLike\";\r\nimport type { EventCode } from \"./eventCommand\";\r\n\r\nexport const createEventCommand = <\r\n  Code extends EventCode,\r\n  Param extends CommandParamaterType<Code>\r\n>(\r\n  code: Code,\r\n  param: Param,\r\n  indent: number = 0\r\n): EventCommandLike<Code, Param> => {\r\n  return {\r\n    code,\r\n    indent,\r\n    parameters: param,\r\n  };\r\n};\r\n","export const ROUTE_END = 0 as const;\r\nexport const ROUTE_MOVE_DOWN = 1 as const;\r\nexport const ROUTE_MOVE_LEFT = 2 as const;\r\nexport const ROUTE_MOVE_RIGHT = 3 as const;\r\nexport const ROUTE_MOVE_UP = 4 as const;\r\nexport const ROUTE_MOVE_LOWER_L = 5 as const;\r\nexport const ROUTE_MOVE_LOWER_R = 6 as const;\r\nexport const ROUTE_MOVE_UPPER_L = 7 as const;\r\nexport const ROUTE_MOVE_UPPER_R = 8 as const;\r\nexport const ROUTE_MOVE_RANDOM = 9 as const;\r\nexport const ROUTE_MOVE_TOWARD = 10 as const;\r\nexport const ROUTE_MOVE_AWAY = 11 as const;\r\nexport const ROUTE_MOVE_FORWARD = 12 as const;\r\nexport const ROUTE_MOVE_BACKWARD = 13 as const;\r\nexport const ROUTE_JUMP = 14 as const;\r\nexport const ROUTE_WAIT = 15 as const;\r\nexport const ROUTE_TURN_DOWN = 16 as const;\r\nexport const ROUTE_TURN_LEFT = 17 as const;\r\nexport const ROUTE_TURN_RIGHT = 18 as const;\r\nexport const ROUTE_TURN_UP = 19 as const;\r\nexport const ROUTE_TURN_90D_R = 20 as const;\r\nexport const ROUTE_TURN_90D_L = 21 as const;\r\nexport const ROUTE_TURN_180D = 22 as const;\r\nexport const ROUTE_TURN_90D_R_L = 23 as const;\r\nexport const ROUTE_TURN_RANDOM = 24 as const;\r\nexport const ROUTE_TURN_TOWARD = 25 as const;\r\nexport const ROUTE_TURN_AWAY = 26 as const;\r\nexport const ROUTE_SWITCH_ON = 27 as const;\r\nexport const ROUTE_SWITCH_OFF = 28 as const;\r\nexport const ROUTE_CHANGE_SPEED = 29 as const;\r\nexport const ROUTE_CHANGE_FREQ = 30 as const;\r\nexport const ROUTE_WALK_ANIME_ON = 31 as const;\r\nexport const ROUTE_WALK_ANIME_OFF = 32 as const;\r\nexport const ROUTE_STEP_ANIME_ON = 33 as const;\r\nexport const ROUTE_STEP_ANIME_OFF = 34 as const;\r\nexport const ROUTE_DIR_FIX_ON = 35 as const;\r\nexport const ROUTE_DIR_FIX_OFF = 36 as const;\r\nexport const ROUTE_THROUGH_ON = 37 as const;\r\nexport const ROUTE_THROUGH_OFF = 38 as const;\r\nexport const ROUTE_TRANSPARENT_ON = 39 as const;\r\nexport const ROUTE_TRANSPARENT_OFF = 40 as const;\r\nexport const ROUTE_CHANGE_IMAGE = 41 as const;\r\nexport const ROUTE_CHANGE_OPACITY = 42 as const;\r\nexport const ROUTE_CHANGE_BLEND_MODE = 43 as const;\r\nexport const ROUTE_PLAY_SE = 44 as const;\r\nexport const ROUTE_SCRIPT = 45 as const;\r\n","import { makeEventPageCondition } from \"./condition\";\r\nimport type { MapEvent } from \"./mapEvent\";\r\nimport type { MapEvent_Image, MapEventPage } from \"./page\";\r\n\r\nexport const makeMapEvent = (): MapEvent => {\r\n  return {\r\n    id: 1,\r\n    name: \"\",\r\n    pages: [],\r\n    note: \"\",\r\n    x: 0,\r\n    y: 0,\r\n  };\r\n};\r\n\r\nexport const makeMapEventIamge = (): MapEvent_Image => {\r\n  return {\r\n    characterIndex: 0,\r\n    characterName: \"\",\r\n    direction: 2,\r\n    pattern: 0,\r\n    tileId: 0,\r\n  };\r\n};\r\n\r\nexport const makeMapEventPage = (): MapEventPage => {\r\n  return {\r\n    conditions: makeEventPageCondition(),\r\n    list: [],\r\n    directionFix: false,\r\n    image: makeMapEventIamge(),\r\n    moveFrequency: 5,\r\n    moveRoute: {\r\n      list: [],\r\n      repeat: false,\r\n      skippable: false,\r\n      wait: false,\r\n    },\r\n  };\r\n};\r\n","import type { Data_Map } from \"./map\";\r\n\r\nexport const makeMapData = (map: Partial<Data_Map> = {}): Data_Map => {\r\n  return {\r\n    data: map.data ?? [],\r\n    battleback1Name: map.battleback1Name ?? \"\",\r\n    battleback2Name: map.battleback2Name ?? \"\",\r\n\r\n    autoplayBgm: map.autoplayBgm ?? false,\r\n    autoplayBgs: map.autoplayBgs ?? false,\r\n    parallaxLoopX: map.parallaxLoopX ?? false,\r\n    parallaxLoopY: map.parallaxLoopY ?? false,\r\n    parallaxName: map.parallaxName ?? \"\",\r\n    parallaxShow: map.parallaxShow ?? false,\r\n    parallaxSx: map.parallaxSx ?? 0,\r\n    parallaxSy: map.parallaxSy ?? 0,\r\n\r\n    x: map.x ?? 0,\r\n    y: map.y ?? 0,\r\n    width: map.width ?? 0,\r\n    height: map.height ?? 0,\r\n    note: map.note ?? \"\",\r\n\r\n    bgm: map.bgm ?? { name: \"\", pan: 0, pitch: 100, volume: 100 },\r\n    bgs: map.bgs ?? { name: \"\", pan: 0, pitch: 100, volume: 100 },\r\n    disableDashing: map.disableDashing ?? false,\r\n    displayName: map.displayName ?? \"\",\r\n    encounterList: map.encounterList ?? [],\r\n    events: map.events ?? [],\r\n  };\r\n};\r\n","import type { Data_MapInfo } from \"./mapInfo\";\r\n\r\nconst makeMapName = (mapId: number) => {\r\n  return mapId.toString().padStart(3, \"0\");\r\n};\r\n\r\nexport const makeMapInfoData = (\r\n  info: { id: number } & Partial<Data_MapInfo> = { id: 0 }\r\n): Data_MapInfo => {\r\n  return {\r\n    name: info.name ?? makeMapName(info.id),\r\n    id: info.id,\r\n    expanded: info.expanded ?? false,\r\n    order: info.order ?? 0,\r\n    parentId: info.parentId ?? 0,\r\n    scrollX: info.scrollX ?? 0,\r\n    scrollY: info.scrollY ?? 0,\r\n  };\r\n};\r\n","import type { AudioFileParams } from \"@RpgTypes/utils\";\r\nimport type { JSONSchemaType } from \"ajv\";\r\nimport type {\r\n  MapEvent,\r\n  MapEvent_Image,\r\n  MapEvent_PageCondition,\r\n  MapEventPage,\r\n} from \"./event\";\r\nimport { SCHEMA_MAP_EVENT_PAGE_CONDITION } from \"./event/condition/schema\";\r\nimport type { MoveRouteDataUnkwnown } from \"./event/eventCommand/moveRoute\";\r\nimport { SCHEMA_MOVEROUTE_DATA } from \"./event/eventCommand/moveRoute/schema\";\r\nimport type { Data_Map } from \"./map\";\r\nimport type { Encounter } from \"./members\";\r\n\r\nexport const SCHEMA_MAP_EVENT_IMAGE = {\r\n  type: \"object\",\r\n  required: [\r\n    \"characterIndex\",\r\n    \"characterName\",\r\n    \"direction\",\r\n    \"pattern\",\r\n    \"tileId\",\r\n  ],\r\n  properties: {\r\n    characterIndex: { type: \"integer\", minimum: 0 },\r\n    characterName: { type: \"string\" },\r\n    direction: { type: \"integer\", enum: [2, 4, 6, 8] },\r\n    pattern: { type: \"integer\" },\r\n    tileId: { type: \"integer\" },\r\n  },\r\n} as const satisfies JSONSchemaType<MapEvent_Image>;\r\n\r\nexport const SCHEMA_MAP_EVENT_PAGE = {\r\n  type: \"object\",\r\n  required: [\r\n    \"image\",\r\n    \"moveRoute\",\r\n    \"conditions\",\r\n    \"directionFix\",\r\n    \"moveFrequency\",\r\n  ] satisfies (keyof MapEventPage)[],\r\n  properties: {\r\n    moveFrequency: { type: \"integer\" },\r\n    directionFix: { type: \"boolean\" },\r\n    conditions:\r\n      SCHEMA_MAP_EVENT_PAGE_CONDITION satisfies JSONSchemaType<MapEvent_PageCondition>,\r\n\r\n    image: SCHEMA_MAP_EVENT_IMAGE satisfies JSONSchemaType<MapEvent_Image>,\r\n    moveRoute:\r\n      SCHEMA_MOVEROUTE_DATA satisfies JSONSchemaType<MoveRouteDataUnkwnown>,\r\n  },\r\n} as const satisfies JSONSchemaType<Omit<MapEventPage, \"list\">>;\r\n\r\nexport const SCHEMA_DATA_MAP = {\r\n  type: \"object\",\r\n\r\n  required: [\r\n    \"battleback1Name\",\r\n    \"battleback2Name\",\r\n    \"note\",\r\n    \"width\",\r\n    \"height\",\r\n    \"x\",\r\n    \"y\",\r\n    \"parallaxSy\",\r\n    \"parallaxSx\",\r\n    \"parallaxLoopY\",\r\n    \"parallaxLoopX\",\r\n    \"disableDashing\",\r\n    \"parallaxName\",\r\n    \"parallaxShow\",\r\n    \"displayName\",\r\n    \"data\",\r\n    \"autoplayBgm\",\r\n    \"bgm\",\r\n    \"autoplayBgs\",\r\n    \"bgs\",\r\n  ] satisfies (keyof Data_Map)[],\r\n  properties: {\r\n    data: { type: \"array\", items: { type: \"integer\" } },\r\n    battleback1Name: { type: \"string\" },\r\n    battleback2Name: { type: \"string\" },\r\n\r\n    parallaxLoopY: { type: \"boolean\" },\r\n    parallaxLoopX: { type: \"boolean\" },\r\n    parallaxName: { type: \"string\" },\r\n    parallaxShow: { type: \"boolean\" },\r\n    parallaxSy: { type: \"integer\" },\r\n    parallaxSx: { type: \"integer\" },\r\n\r\n    x: { type: \"integer\", minimum: 0 },\r\n    y: { type: \"integer\", minimum: 0 },\r\n    width: { type: \"integer\", minimum: 0 },\r\n    height: { type: \"integer\", minimum: 0 },\r\n    note: { type: \"string\" },\r\n\r\n    displayName: { type: \"string\" },\r\n    disableDashing: { type: \"boolean\" },\r\n\r\n    autoplayBgm: { type: \"boolean\" },\r\n    bgm: {\r\n      type: \"object\",\r\n      required: [\"name\", \"pan\", \"pitch\", \"volume\"],\r\n      properties: {\r\n        name: { type: \"string\" },\r\n        pan: { type: \"integer\" },\r\n        pitch: { type: \"integer\" },\r\n        volume: { type: \"integer\" },\r\n      },\r\n    } as const satisfies JSONSchemaType<AudioFileParams>,\r\n\r\n    autoplayBgs: { type: \"boolean\" },\r\n    bgs: {\r\n      type: \"object\",\r\n      required: [\"name\", \"pan\", \"pitch\", \"volume\"],\r\n      properties: {\r\n        name: { type: \"string\" },\r\n        pan: { type: \"integer\" },\r\n        pitch: { type: \"integer\" },\r\n        volume: { type: \"integer\" },\r\n      },\r\n    } as const satisfies JSONSchemaType<AudioFileParams>,\r\n\r\n    encounterList: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        required: [\"regionSet\", \"troopId\", \"weight\"],\r\n        properties: {\r\n          regionSet: { type: \"array\", items: { type: \"integer\" } },\r\n          troopId: { type: \"integer\" },\r\n          weight: { type: \"integer\" },\r\n        },\r\n      } satisfies JSONSchemaType<Encounter>,\r\n    } satisfies JSONSchemaType<Encounter[]>,\r\n    events: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        required: [\r\n          \"id\",\r\n          \"name\",\r\n          \"x\",\r\n          \"y\",\r\n          \"pages\",\r\n        ] satisfies (keyof MapEvent)[],\r\n        properties: {\r\n          id: { type: \"integer\" },\r\n          name: { type: \"string\" },\r\n          x: { type: \"integer\" },\r\n          y: { type: \"integer\" },\r\n          note: { type: \"string\" },\r\n          pages: {\r\n            type: \"array\",\r\n            items: SCHEMA_MAP_EVENT_PAGE,\r\n          },\r\n        },\r\n      } as const,\r\n    },\r\n  }, // satisfies Record<keyof Data_Map, unknown>,\r\n} as const satisfies JSONSchemaType<Omit<Data_Map, \"events\">>;\r\n// evetntsはコモンイベントが入ってて複雑。簡略化して対応する\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { MapEvent_PageCondition } from \"./condition\";\r\n\r\nexport const SCHEMA_MAP_EVENT_PAGE_CONDITION = {\r\n  type: \"object\",\r\n  required: [\r\n    \"switch1Id\",\r\n    \"switch1Valid\",\r\n    \"switch2Id\",\r\n    \"switch2Valid\",\r\n    \"variableId\",\r\n    \"variableValid\",\r\n    \"selfSwitchCh\",\r\n    \"selfSwitchValid\",\r\n    \"variableValue\",\r\n    \"itemId\",\r\n    \"itemValid\",\r\n    \"actorId\",\r\n    \"actorValid\",\r\n  ],\r\n  properties: {\r\n    switch1Id: { type: \"integer\", minimum: 0 },\r\n    switch1Valid: { type: \"boolean\" },\r\n    switch2Id: { type: \"integer\", minimum: 0 },\r\n    switch2Valid: { type: \"boolean\" },\r\n    variableId: { type: \"integer\", minimum: 0 },\r\n    variableValid: { type: \"boolean\" },\r\n    selfSwitchCh: { type: \"string\" },\r\n    selfSwitchValid: { type: \"boolean\" },\r\n    variableValue: { type: \"integer\" },\r\n    itemId: { type: \"integer\", minimum: 0 },\r\n    itemValid: { type: \"boolean\" },\r\n    actorId: { type: \"integer\" },\r\n    actorValid: { type: \"boolean\" },\r\n  },\r\n} as const satisfies JSONSchemaType<MapEvent_PageCondition>;\r\n","import type { AudioFileParams } from \"@RpgTypes/utils\";\r\nimport type { JSONSchemaType } from \"ajv\";\r\nimport type { MoveRouteDataUnkwnown } from \"./moveRoute\";\r\n\r\nexport const SCHEMA_MOVEROUTE_DATA = {\r\n  type: \"object\",\r\n  required: [\"wait\", \"repeat\", \"skippable\", \"list\"],\r\n  properties: {\r\n    wait: { type: \"boolean\" },\r\n    repeat: { type: \"boolean\" },\r\n    skippable: { type: \"boolean\" },\r\n    list: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        required: [\"code\", \"parameters\"],\r\n        properties: {\r\n          code: { type: \"integer\" },\r\n          parameters: {\r\n            type: \"array\",\r\n            items: {\r\n              oneOf: [\r\n                { type: \"string\" },\r\n                { type: \"number\" },\r\n                {\r\n                  type: \"object\",\r\n                  required: [\"name\", \"pan\", \"pitch\", \"volume\"],\r\n                  properties: {\r\n                    name: { type: \"string\" },\r\n                    pan: { type: \"integer\" },\r\n                    pitch: { type: \"integer\" },\r\n                    volume: { type: \"integer\" },\r\n                  },\r\n                } satisfies JSONSchemaType<AudioFileParams>,\r\n              ],\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n  },\r\n} as const satisfies JSONSchemaType<MoveRouteDataUnkwnown>;\r\n","import Ajv from \"ajv\";\r\nimport type { Data_MapInfo } from \"./map\";\r\nimport SCHEMA_DATA_MAP_INFO from \"./map/mapInfo/schema\";\r\nimport { SCHEMA_DATA_MAP } from \"./map/schema\";\r\n\r\nconst ajv = new Ajv({\r\n  strict: true,\r\n});\r\n\r\nconst mapInfo = ajv.compile(SCHEMA_DATA_MAP_INFO);\r\n\r\nconst mapData = ajv.compile(SCHEMA_DATA_MAP);\r\n\r\nexport const isDataMapInfo = (data: unknown): data is Data_MapInfo => {\r\n  return mapInfo(data);\r\n};\r\n\r\nexport const isDataMap = (data: unknown): data is Data_MapInfo => {\r\n  return mapData(data);\r\n};\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { Data_MapInfo } from \"./mapInfo\";\r\n\r\nconst SCHEMA_DATA_MAP_INFO = {\r\n  type: \"object\",\r\n  required: [\r\n    \"name\",\r\n    \"id\",\r\n    \"expanded\",\r\n    \"order\",\r\n    \"parentId\",\r\n    \"scrollX\",\r\n    \"scrollY\",\r\n  ],\r\n  properties: {\r\n    name: { type: \"string\" },\r\n    id: { type: \"integer\", minimum: 0 },\r\n    expanded: { type: \"boolean\" },\r\n    order: { type: \"integer\" },\r\n    parentId: { type: \"integer\" },\r\n    scrollX: { type: \"number\" },\r\n    scrollY: { type: \"number\" },\r\n  },\r\n} as const satisfies JSONSchemaType<Data_MapInfo>;\r\n\r\nexport default SCHEMA_DATA_MAP_INFO;\r\n","import type { NamedItemSource } from \"src/namedItemSource\";\r\nimport type { Data_CommonEventLike } from \"./event\";\r\nimport type { GameData } from \"./gameDataTypes\";\r\nimport type {\r\n  DataLabels,\r\n  Data_Skill,\r\n  Data_Actor,\r\n  Data_State,\r\n  Data_Armor,\r\n  Data_Class,\r\n  Data_Enemy,\r\n  Data_Item,\r\n  Data_Weapon,\r\n} from \"./main\";\r\nimport type {\r\n  SourceId_DataSkill,\r\n  SourceId_DataState,\r\n  SourceId_DataActor,\r\n  SourceId_DataArmor,\r\n  SourceId_DataClass,\r\n  SourceId_DataEnemy,\r\n  SourceId_DataItem,\r\n  SourceId_DataWeapon,\r\n  SourceId_DataCommonEvent,\r\n} from \"./main/sourceIdTypes\";\r\n\r\nexport const defineGameDataSources = (\r\n  data: GameData,\r\n  dataLabels: DataLabels\r\n): NamedItemSource[] => {\r\n  return [\r\n    defineSkill(data.skills, dataLabels),\r\n    defineActor(data.actors, dataLabels),\r\n    defineState(data.states, dataLabels),\r\n    defineArmor(data.armors, dataLabels),\r\n    defineClass(data.classes, dataLabels),\r\n    defineEnemy(data.enemies, dataLabels),\r\n    defineItem(data.items, dataLabels),\r\n    defineWeapon(data.weapons, dataLabels),\r\n    defineCommonEvent(data.commonEvents, dataLabels),\r\n  ];\r\n};\r\n\r\nconst defineSkill = (\r\n  skills: Data_Skill[],\r\n  labels: DataLabels\r\n): NamedItemSource => {\r\n  return {\r\n    label: labels.skill.title,\r\n    items: skills,\r\n    source: {\r\n      author: \"rmmz\",\r\n      module: \"data\",\r\n      kind: \"skill\",\r\n    } satisfies SourceId_DataSkill,\r\n  };\r\n};\r\n\r\nconst defineActor = (\r\n  actors: Data_Actor[],\r\n  labels: DataLabels\r\n): NamedItemSource => {\r\n  return {\r\n    items: actors,\r\n    label: labels.actor.title,\r\n    source: {\r\n      author: \"rmmz\",\r\n      module: \"data\",\r\n      kind: \"actor\",\r\n    } satisfies SourceId_DataActor,\r\n  };\r\n};\r\n\r\nconst defineState = (\r\n  states: Data_State[],\r\n  labels: DataLabels\r\n): NamedItemSource => {\r\n  return {\r\n    items: states,\r\n    label: labels.state.title,\r\n    source: {\r\n      author: \"rmmz\",\r\n      module: \"data\",\r\n      kind: \"state\",\r\n    } satisfies SourceId_DataState,\r\n  };\r\n};\r\n\r\nconst defineArmor = (\r\n  armors: Data_Armor[],\r\n  labels: DataLabels\r\n): NamedItemSource => {\r\n  return {\r\n    items: armors,\r\n    label: labels.armor.title,\r\n    source: {\r\n      author: \"rmmz\",\r\n      kind: \"armor\",\r\n      module: \"data\",\r\n    } satisfies SourceId_DataArmor,\r\n  };\r\n};\r\n\r\nconst defineClass = (\r\n  classes: Data_Class[],\r\n  labels: DataLabels\r\n): NamedItemSource => {\r\n  return {\r\n    items: classes,\r\n    label: labels.class.title,\r\n    source: {\r\n      author: \"rmmz\",\r\n      module: \"data\",\r\n      kind: \"class\",\r\n    } satisfies SourceId_DataClass,\r\n  };\r\n};\r\n\r\nconst defineEnemy = (\r\n  enemies: Data_Enemy[],\r\n  labels: DataLabels\r\n): NamedItemSource => {\r\n  return {\r\n    items: enemies,\r\n    label: labels.enemy.title,\r\n    source: {\r\n      author: \"rmmz\",\r\n      module: \"data\",\r\n      kind: \"enemy\",\r\n    } satisfies SourceId_DataEnemy,\r\n  };\r\n};\r\n\r\nconst defineItem = (\r\n  items: Data_Item[],\r\n  labels: DataLabels\r\n): NamedItemSource => ({\r\n  items: items,\r\n  label: labels.item.title,\r\n  source: {\r\n    author: \"rmmz\",\r\n    module: \"data\",\r\n    kind: \"item\",\r\n  } satisfies SourceId_DataItem,\r\n});\r\nconst defineWeapon = (\r\n  weapons: Data_Weapon[],\r\n  labels: DataLabels\r\n): NamedItemSource => ({\r\n  items: weapons,\r\n  label: labels.weapon.title,\r\n  source: {\r\n    author: \"rmmz\",\r\n    module: \"data\",\r\n    kind: \"weapon\",\r\n  } satisfies SourceId_DataWeapon,\r\n});\r\n\r\nconst defineCommonEvent = (\r\n  commonEvents: Data_CommonEventLike[],\r\n  labels: DataLabels\r\n): NamedItemSource => ({\r\n  items: commonEvents,\r\n  label: labels.commonEvent.title,\r\n  source: {\r\n    author: \"rmmz\",\r\n    module: \"data\",\r\n    kind: \"common_event\",\r\n  } satisfies SourceId_DataCommonEvent,\r\n});\r\n","import type { DomainLabel } from \"src/templates\";\r\nimport type { DataLabels } from \"./dataLabels\";\r\nimport type {\r\n  ActorLabels,\r\n  ArmorLabels,\r\n  ClassLabels,\r\n  EnemyLabels,\r\n  StateLabels,\r\n  WeaponLabels,\r\n} from \"./traitContainers\";\r\nimport type { ItemLabels, SkillLabels, UsableItemLabels } from \"./usableItems\";\r\n\r\nexport const LABEL_SET_DATA = {\r\n  actor: {\r\n    title: \"アクター\",\r\n    options: {\r\n      initialEquipments: \"初期装備\",\r\n      faceImage: \"顔画像\",\r\n      characterImage: \"キャラクター画像\",\r\n      svBattlerImage: \"SVバトラー画像\",\r\n      nickname: \"ニックネーム\",\r\n      profile: \"プロフィール\",\r\n      classId: \"職業ID\",\r\n      initialLevel: \"初期レベル\",\r\n      maxLevel: \"最大レベル\",\r\n    },\r\n  } as const satisfies DomainLabel<ActorLabels>,\r\n  class: {\r\n    title: \"職業\",\r\n    options: {\r\n      params: \"パラメータ\",\r\n      learnings: \"習得スキル\",\r\n      expParams: \"経験値パラメータ\",\r\n    },\r\n  } as const satisfies DomainLabel<ClassLabels>,\r\n  armor: {\r\n    title: \"防具\",\r\n    options: {\r\n      armorTypeId: \"防具タイプID\",\r\n      slotTypeId: \"スロットタイプID\",\r\n    },\r\n  } as const satisfies DomainLabel<ArmorLabels>,\r\n  enemy: {\r\n    title: \"敵キャラ\",\r\n    options: {\r\n      dropItems: \"ドロップアイテム\",\r\n      battlerHue: \"バトラーヒュー\",\r\n      battlerName: \"バトラー名\",\r\n      gold: \"ゴールド\",\r\n    },\r\n  } as const satisfies DomainLabel<EnemyLabels>,\r\n  item: {\r\n    title: \"アイテム\",\r\n    options: {\r\n      consumable: \"消耗品\",\r\n    },\r\n  } as const satisfies DomainLabel<ItemLabels>,\r\n  skill: {\r\n    title: \"スキル\",\r\n    options: {\r\n      requiredWeaponTypeId1: \"必要武器タイプ1\",\r\n      requiredWeaponTypeId2: \"必要武器タイプ2\",\r\n      mpCost: \"MP消費\",\r\n      tpCost: \"TP消費\",\r\n    },\r\n  } as const satisfies DomainLabel<SkillLabels>,\r\n  state: {\r\n    title: \"ステート\",\r\n    options: {\r\n      restriction: \"制約\",\r\n      priority: \"優先度\",\r\n      motion: \"モーション\",\r\n      overlay: \"オーバーレイ\",\r\n      removeAtBattleEnd: \"戦闘終了時解除\",\r\n      removeByRestriction: \"制約による解除\",\r\n      autoRemovalTiming: \"自動解除タイミング\",\r\n      minTurns: \"最小ターン数\",\r\n      maxTurns: \"最大ターン数\",\r\n      removeByDamage: \"ダメージによる解除\",\r\n      chanceByDamage: \"ダメージによる解除確率\",\r\n      removeByWalking: \"歩行による解除\",\r\n      stepsToRemove: \"解除までの歩数\",\r\n    },\r\n  } as const satisfies DomainLabel<StateLabels>,\r\n  weapon: {\r\n    title: \"武器\",\r\n    options: {\r\n      weaponTypeId: \"武器タイプID\",\r\n    },\r\n  } as const satisfies DomainLabel<WeaponLabels>,\r\n  usableItem: {\r\n    title: \"\",\r\n    options: {\r\n      scope: \"範囲\",\r\n      speed: \"速度補正\",\r\n      successRate: \"成功率\",\r\n    },\r\n  } as const satisfies DomainLabel<UsableItemLabels>,\r\n  commonEvent: {\r\n    title: \"コモンイベント\",\r\n    options: {\r\n      trigger: \"トリガー\",\r\n      switchId: \"スイッチID\",\r\n      name: \"名前\",\r\n      id: \"ID\",\r\n      list: \"コマンドリスト\",\r\n    },\r\n  },\r\n} as const satisfies DataLabels;\r\n","import type { DomainLabel } from \"@RpgTypes/templates\";\r\nimport type { DamageLabels } from \"./damageLabels\";\r\n\r\nexport const DEFAULT_DAMAGE_LABELS = {\r\n  title: \"ダメージ\",\r\n  options: {},\r\n} as const satisfies DomainLabel<DamageLabels>;\r\n","import type { Damage } from \"./damage\";\r\n\r\nexport const makeDamage = (damage: Partial<Damage> = {}): Damage => ({\r\n  type: damage.type ?? 0,\r\n  elementId: damage.elementId ?? 0,\r\n  formula: damage.formula ?? \"\",\r\n  variance: damage.variance ?? 0,\r\n  critical: damage.critical ?? false,\r\n});\r\n","import type { Data_Actor } from \"./types\";\r\n\r\nexport const makeActorData = (actor: Partial<Data_Actor> = {}): Data_Actor => ({\r\n  name: actor.name ?? \"\",\r\n  id: actor.id ?? 0,\r\n  battlerName: actor.battlerName ?? \"\",\r\n  characterName: actor.characterName ?? \"\",\r\n  characterIndex: actor.characterIndex ?? 0,\r\n  faceName: actor.faceName ?? \"\",\r\n  faceIndex: actor.faceIndex ?? 0,\r\n  traits: [],\r\n  note: actor.note ?? \"\",\r\n  classId: actor.classId ?? 0,\r\n  nickname: actor.nickname ?? \"\",\r\n  profile: actor.profile ?? \"\",\r\n  equips: [],\r\n  initialLevel: actor.initialLevel ?? 0,\r\n  maxLevel: actor.maxLevel ?? 0,\r\n});\r\n\r\nexport const normalizeDataActor = (data: Partial<Data_Actor>): Data_Actor => {\r\n  return {\r\n    name: data.name ?? \"\",\r\n    id: data.id ?? 0,\r\n    battlerName: data.battlerName ?? \"\",\r\n    characterName: data.characterName ?? \"\",\r\n    characterIndex: data.characterIndex ?? 0,\r\n    faceName: data.faceName ?? \"\",\r\n    faceIndex: data.faceIndex ?? 0,\r\n    traits: [],\r\n    note: data.note ?? \"\",\r\n    classId: data.classId ?? 0,\r\n    nickname: data.nickname ?? \"\",\r\n    profile: data.profile ?? \"\",\r\n    equips: [],\r\n    initialLevel: data.initialLevel ?? 0,\r\n    maxLevel: data.maxLevel ?? 0,\r\n  };\r\n};\r\n","import type { Data_Armor } from \"./types\";\r\n\r\nexport const makeArmorData = (armor: Partial<Data_Armor> = {}): Data_Armor => ({\r\n  id: armor.id ?? 0,\r\n  name: armor.name ?? \"\",\r\n  iconIndex: armor.iconIndex ?? 0,\r\n  description: armor.description ?? \"\",\r\n  traits: armor.traits ?? [],\r\n  note: armor.note ?? \"\",\r\n  atypeId: armor.atypeId ?? 0,\r\n  params: armor.params ?? [\r\n    0, // maxhp\r\n    0, // maxmp\r\n    0, // atk\r\n    0, // def\r\n    0, // mat\r\n    0, // mdf\r\n    0, // agi\r\n    0, // luk\r\n  ],\r\n  etypeId: armor.etypeId ?? 0,\r\n  price: armor.price ?? 0,\r\n});\r\n","import type { Data_Class } from \"./types\";\r\n\r\nexport const makeClassData = (data: Partial<Data_Class> = {}): Data_Class => ({\r\n  name: data.name ?? \"\",\r\n  id: data.id ?? 0,\r\n  traits: [],\r\n  note: data.note ?? \"\",\r\n  params: [\r\n    0, // maxhp\r\n    0, // maxmp\r\n    0, // atk\r\n    0, // def\r\n    0, // mat\r\n    0, // mdf\r\n    0, // agi\r\n    0, // luk\r\n  ],\r\n  learnings: data.learnings ?? [],\r\n  expParams: data.expParams ?? [],\r\n});\r\n","import type { Data_Enemy, DropItem, Enemy_Action } from \"./types\";\r\n\r\nexport const makeDropItem = (dropItem: Partial<DropItem> = {}): DropItem => ({\r\n  dataId: dropItem.dataId ?? 0,\r\n  denominator: dropItem.denominator ?? 0,\r\n  kind: dropItem.kind ?? 0,\r\n});\r\n\r\nexport const makeEnemyAction = (\r\n  action: Partial<Enemy_Action> = {}\r\n): Enemy_Action => ({\r\n  conditionParam1: action.conditionParam1 ?? 0,\r\n  conditionParam2: action.conditionParam2 ?? 0,\r\n  conditionType: action.conditionType ?? 0,\r\n  rating: action.rating ?? 0,\r\n\r\n  skillId: action.skillId ?? 0,\r\n});\r\n\r\nexport const makeEnemyData = (data: Partial<Data_Enemy> = {}): Data_Enemy => ({\r\n  name: data.name ?? \"\",\r\n  id: data.id ?? 0,\r\n  battlerName: data.battlerName ?? \"\",\r\n  battlerHue: data.battlerHue ?? 0,\r\n  dropItems: data.dropItems?.map(() => makeDropItem()) ?? [],\r\n  exp: data.exp ?? 0,\r\n  gold: data.gold ?? 0,\r\n  traits: [],\r\n  note: data.note ?? \"\",\r\n  params: [\r\n    0, // maxhp\r\n    0, // maxmp\r\n    0, // atk\r\n    0, // def\r\n    0, // mat\r\n    0, // mdf\r\n    0, // agi\r\n    0, // luk\r\n  ],\r\n  actions: [],\r\n});\r\n","import type { Data_State } from \"./types\";\r\n\r\nexport const makeStateData = (data: Partial<Data_State> = {}): Data_State => ({\r\n  name: data.name ?? \"\",\r\n  id: data.id ?? 0,\r\n  iconIndex: data.iconIndex ?? 0,\r\n  message1: data.message1 ?? \"\",\r\n  message2: data.message2 ?? \"\",\r\n  message3: data.message3 ?? \"\",\r\n  message4: data.message4 ?? \"\",\r\n  traits: [],\r\n  note: data.note ?? \"\",\r\n\r\n  messageType: data.messageType ?? 0,\r\n  releaseByDamage: data.releaseByDamage ?? false,\r\n  restriction: data.restriction ?? 0,\r\n  priority: data.priority ?? 0,\r\n  motion: data.motion ?? 0,\r\n  overlay: data.overlay ?? 0,\r\n  removeAtBattleEnd: data.removeAtBattleEnd ?? false,\r\n  removeByRestriction: data.removeByRestriction ?? false,\r\n  autoRemovalTiming: data.autoRemovalTiming ?? 0,\r\n  minTurns: data.minTurns ?? 0,\r\n  maxTurns: data.maxTurns ?? 0,\r\n  removeByDamage: data.removeByDamage ?? false,\r\n  chanceByDamage: data.chanceByDamage ?? 0,\r\n  removeByWalking: data.removeByWalking ?? false,\r\n  stepsToRemove: data.stepsToRemove ?? 0,\r\n});\r\n","export const TRAIT_ELEMENT_RATE = 11 as const;\r\nexport const TRAIT_DEBUFF_RATE = 12 as const;\r\nexport const TRAIT_STATE_RATE = 13 as const;\r\nexport const TRAIT_STATE_RESIST = 14 as const;\r\nexport const TRAIT_PARAM = 21 as const;\r\nexport const TRAIT_XPARAM = 22 as const;\r\nexport const TRAIT_SPARAM = 23 as const;\r\nexport const TRAIT_ATTACK_ELEMENT = 31 as const;\r\nexport const TRAIT_ATTACK_STATE = 32 as const;\r\nexport const TRAIT_ATTACK_SPEED = 33 as const;\r\nexport const TRAIT_ATTACK_TIMES = 34 as const;\r\nexport const TRAIT_ATTACK_SKILL = 35 as const;\r\nexport const TRAIT_SKILL_TYPE_ADD = 41 as const;\r\nexport const TRAIT_SKILL_TYPE_SEAL = 42 as const;\r\nexport const TRAIT_SKILL_ADD = 43 as const;\r\nexport const TRAIT_SKILL_SEAL = 44 as const;\r\nexport const TRAIT_EQUIP_WEAPON_TYPE = 51 as const;\r\nexport const TRAIT_EQUIP_ARMOR_TYPE = 52 as const;\r\nexport const TRAIT_EQUIP_LOCK = 53 as const;\r\nexport const TRAIT_EQUIP_SEAL = 54 as const;\r\nexport const TRAIT_SLOT_TYPE = 55 as const;\r\nexport const TRAIT_ACTION_PLUS = 61 as const;\r\nexport const TRAIT_SPECIAL_FLAG = 62 as const;\r\nexport const TRAIT_COLLAPSE_TYPE = 63 as const;\r\nexport const TRAIT_PARTY_ABILITY = 64 as const;\r\n","export const COLLAPS_NORMAL = 0 as const;\r\nexport const COLLAPS_BOSS = 1 as const;\r\nexport const COLLAPS_INSTANT = 2 as const;\r\nexport const COLLAPS_NONE = 3 as const;\r\n","import type { SourceId_TraitCollaps } from \"@RpgTypes/rpg\";\r\nimport type { DomainLabel } from \"@RpgTypes/templates\";\r\nimport type { Data_NamedItem, NamedItemSource } from \"src/namedItemSource\";\r\nimport {\r\n  COLLAPS_NORMAL,\r\n  COLLAPS_BOSS,\r\n  COLLAPS_INSTANT,\r\n  COLLAPS_NONE,\r\n} from \"./constants\";\r\nimport type { CollapsOptionLabels, NormalLabel } from \"./labels\";\r\n\r\nexport const defineTraitCollapseType = (\r\n  labels: DomainLabel<CollapsOptionLabels>,\r\n  global: NormalLabel\r\n): NamedItemSource => ({\r\n  items: collapsOptionsToArray(labels.options, global),\r\n  label: labels.title,\r\n  source: {\r\n    author: \"rmmz\",\r\n    module: \"trait\",\r\n    kind: \"collaps\",\r\n  } satisfies SourceId_TraitCollaps,\r\n});\r\n\r\nexport const collapsOptionsToArray = (\r\n  options: CollapsOptionLabels,\r\n  global: NormalLabel\r\n): Data_NamedItem[] => {\r\n  return [\r\n    {\r\n      id: COLLAPS_NORMAL,\r\n      name: global.normal,\r\n    },\r\n    {\r\n      id: COLLAPS_BOSS,\r\n      name: options.bossCollaps,\r\n    },\r\n    {\r\n      id: COLLAPS_INSTANT,\r\n      name: options.instantCollaps,\r\n    },\r\n    {\r\n      id: COLLAPS_NONE,\r\n      name: options.noneCollaps,\r\n    },\r\n  ];\r\n};\r\n","/**\r\n * * Hit Rate\r\n */\r\nexport const EXTRA_PARAM_HIT = 0 as const;\r\n\r\n/**\r\n * * Evasion Rate\r\n */\r\nexport const EXTRA_PARAM_EVA = 1 as const;\r\n\r\n/**\r\n * * Critical Hit Rate\r\n */\r\nexport const EXTRA_PARAM_CRI = 2 as const;\r\n\r\n/**\r\n * * Critical Evasion Rate\r\n */\r\nexport const EXTRA_PARAM_CEV = 3 as const;\r\n\r\n/**\r\n * * Magic Evasion Rate\r\n */\r\nexport const EXTRA_PARAM_MEV = 4 as const;\r\n/**\r\n * * Magic Reflection Rate\r\n */\r\n\r\nexport const EXTRA_PARAM_MRF = 5 as const;\r\n/**\r\n * * Counter Attack Rate\r\n */\r\n\r\nexport const EXTRA_PARAM_CNT = 6 as const;\r\n/**\r\n * * HP Regeneration Rate\r\n */\r\n\r\nexport const EXTRA_PARAM_HRG = 7 as const;\r\n/**\r\n * * MP Regeneration Rate\r\n */\r\n\r\nexport const EXTRA_PARAM_MRG = 8 as const;\r\n/**\r\n * * TP Regeneration Rate\r\n * */\r\n\r\nexport const EXTRA_PARAM_TRG = 9 as const;\r\n","import type { Data_NamedItem, NamedItemSource } from \"src/namedItemSource\";\r\nimport type { SourceId_TraitExtraParam } from \"../sourceIdTypes\";\r\nimport type { TraitLabelWithOption } from \"../traitLabel\";\r\nimport {\r\n  EXTRA_PARAM_HIT,\r\n  EXTRA_PARAM_EVA,\r\n  EXTRA_PARAM_CRI,\r\n  EXTRA_PARAM_CEV,\r\n  EXTRA_PARAM_MEV,\r\n  EXTRA_PARAM_MRF,\r\n  EXTRA_PARAM_CNT,\r\n  EXTRA_PARAM_HRG,\r\n  EXTRA_PARAM_MRG,\r\n  EXTRA_PARAM_TRG,\r\n} from \"./constants\";\r\nimport type { ExtraParamLabels } from \"./labels\";\r\n\r\nexport const defineTraitExtraParam = (\r\n  xparam: TraitLabelWithOption<ExtraParamLabels>\r\n): NamedItemSource => ({\r\n  items: extraParamsToArray(xparam.options),\r\n  label: xparam.title,\r\n  source: {\r\n    author: \"rmmz\",\r\n    module: \"trait\",\r\n    kind: \"xparams\",\r\n  } satisfies SourceId_TraitExtraParam,\r\n});\r\n\r\nexport const extraParamsToArray = (\r\n  xparam: ExtraParamLabels\r\n): Data_NamedItem[] => {\r\n  return [\r\n    {\r\n      id: EXTRA_PARAM_HIT,\r\n      name: xparam.hitRate,\r\n    },\r\n    {\r\n      id: EXTRA_PARAM_EVA,\r\n      name: xparam.evasionRate,\r\n    },\r\n    {\r\n      id: EXTRA_PARAM_CRI,\r\n      name: xparam.criticalRate,\r\n    },\r\n    {\r\n      id: EXTRA_PARAM_CEV,\r\n      name: xparam.criticalEvasionRate,\r\n    },\r\n    {\r\n      id: EXTRA_PARAM_MEV,\r\n      name: xparam.magicEvasionRate,\r\n    },\r\n    {\r\n      id: EXTRA_PARAM_MRF,\r\n      name: xparam.magicReflectionRate,\r\n    },\r\n    {\r\n      id: EXTRA_PARAM_CNT,\r\n      name: xparam.counterAttackRate,\r\n    },\r\n    {\r\n      id: EXTRA_PARAM_HRG,\r\n      name: xparam.hpRegenerationRate,\r\n    },\r\n    {\r\n      id: EXTRA_PARAM_MRG,\r\n      name: xparam.mpRegenerationRate,\r\n    },\r\n    {\r\n      id: EXTRA_PARAM_TRG,\r\n      name: xparam.tpRegenerationRate,\r\n    },\r\n  ];\r\n};\r\n\r\nexport const extraParamName = (\r\n  paramIndex: number,\r\n  labels: ExtraParamLabels\r\n): string => {\r\n  switch (paramIndex) {\r\n    case EXTRA_PARAM_CEV:\r\n      return labels.criticalEvasionRate;\r\n    case EXTRA_PARAM_EVA:\r\n      return labels.evasionRate;\r\n    case EXTRA_PARAM_CNT:\r\n      return labels.counterAttackRate;\r\n    case EXTRA_PARAM_CRI:\r\n      return labels.criticalRate;\r\n    case EXTRA_PARAM_HIT:\r\n      return labels.hitRate;\r\n    case EXTRA_PARAM_HRG:\r\n      return labels.hpRegenerationRate;\r\n    case EXTRA_PARAM_MEV:\r\n      return labels.magicEvasionRate;\r\n    case EXTRA_PARAM_MRF:\r\n      return labels.magicReflectionRate;\r\n    case EXTRA_PARAM_MRG:\r\n      return labels.mpRegenerationRate;\r\n    case EXTRA_PARAM_TRG:\r\n      return labels.tpRegenerationRate;\r\n  }\r\n  return `?xparams[${paramIndex}]`;\r\n};\r\n","/**\r\n * * Maximum HP\r\n */\r\nexport const REGULAR_PARAM_MAX_HP = 0 as const;\r\n\r\n/**\r\n * * Maximum MP\r\n */\r\nexport const REGULAR_PARAM_MAX_MP = 1 as const;\r\n/**\r\n * * Attack Power\r\n */\r\nexport const REGULAR_PARAM_ATK = 2 as const;\r\n/**\r\n * * Defense Power\r\n */\r\nexport const REGULAR_PARAM_DEF = 3 as const;\r\n/**\r\n * * Magic Attack Power\r\n */\r\nexport const REGULAR_PARAM_MATK = 4 as const;\r\n\r\n/**\r\n * * Magic Defense Power\r\n */\r\nexport const REGULAR_PARAM_MDEF = 5 as const;\r\n\r\n/**\r\n * * Agility\r\n */\r\nexport const REGULAR_PARAM_AGI = 6 as const;\r\n/**\r\n * * Luck\r\n */\r\nexport const REGULAR_PARAM_LUK = 7 as const;\r\n","import type { Data_NamedItem, NamedItemSource } from \"src/namedItemSource\";\r\nimport type { SourceId_TraitRegularParam } from \"../sourceIdTypes\";\r\nimport type { TraitLabelWithOption } from \"../traitLabel\";\r\nimport {\r\n  REGULAR_PARAM_MAX_HP,\r\n  REGULAR_PARAM_MAX_MP,\r\n  REGULAR_PARAM_ATK,\r\n  REGULAR_PARAM_DEF,\r\n  REGULAR_PARAM_MATK,\r\n  REGULAR_PARAM_MDEF,\r\n  REGULAR_PARAM_AGI,\r\n  REGULAR_PARAM_LUK,\r\n} from \"./constants\";\r\nimport type { RegularParamLabels } from \"./labels\";\r\n\r\nexport const defineTraitRegularParam = (\r\n  param: TraitLabelWithOption<RegularParamLabels>\r\n): NamedItemSource => ({\r\n  items: regularParamsToArray(param.options),\r\n  label: param.title,\r\n  source: {\r\n    author: \"rmmz\",\r\n    module: \"trait\",\r\n    kind: \"params\",\r\n  } satisfies SourceId_TraitRegularParam,\r\n});\r\n\r\nexport const regularParamsToArray = (\r\n  param: RegularParamLabels\r\n): Data_NamedItem[] => {\r\n  return [\r\n    { id: REGULAR_PARAM_MAX_HP, name: param.maxHp },\r\n    { id: REGULAR_PARAM_MAX_MP, name: param.maxMp },\r\n    { id: REGULAR_PARAM_ATK, name: param.atk },\r\n    { id: REGULAR_PARAM_DEF, name: param.def },\r\n    { id: REGULAR_PARAM_MATK, name: param.matk },\r\n    { id: REGULAR_PARAM_MDEF, name: param.mdef },\r\n    { id: REGULAR_PARAM_AGI, name: param.agi },\r\n    { id: REGULAR_PARAM_LUK, name: param.luk },\r\n  ];\r\n};\r\n\r\nexport const regularParamName = (\r\n  paramIndex: number,\r\n  labels: RegularParamLabels\r\n): string => {\r\n  switch (paramIndex) {\r\n    case REGULAR_PARAM_MAX_HP:\r\n      return labels.maxHp;\r\n    case REGULAR_PARAM_MAX_MP:\r\n      return labels.maxMp;\r\n    case REGULAR_PARAM_ATK:\r\n      return labels.atk;\r\n    case REGULAR_PARAM_DEF:\r\n      return labels.def;\r\n    case REGULAR_PARAM_MATK:\r\n      return labels.matk;\r\n    case REGULAR_PARAM_MDEF:\r\n      return labels.mdef;\r\n    case REGULAR_PARAM_AGI:\r\n      return labels.agi;\r\n    case REGULAR_PARAM_LUK:\r\n      return labels.luk;\r\n    default:\r\n      return `?rparams[${paramIndex}]`;\r\n  }\r\n};\r\n","/**\r\n * * Target Rate\r\n */\r\nexport const SPECIAL_PARAM_TGR = 0 as const;\r\n\r\n/**\r\n * * Guard Effect Rate\r\n */\r\nexport const SPECIAL_PARAM_GRD = 1 as const;\r\n\r\n/**\r\n * * Recovery Effect Rate\r\n */\r\nexport const SPECIAL_PARAM_REC = 2 as const;\r\n\r\n/**\r\n * * Pharmacology\r\n */\r\nexport const SPECIAL_PARAM_PHA = 3 as const;\r\n\r\n/**\r\n * * MP Cost Rate\r\n */\r\nexport const SPECIAL_PARAM_MCR = 4 as const;\r\n\r\n/**\r\n * * TP Cost Rate\r\n */\r\nexport const SPECIAL_PARAM_TCR = 5 as const;\r\n\r\n/**\r\n * * Physical Damage Rate\r\n */\r\nexport const SPECIAL_PARAM_PDR = 6 as const;\r\n\r\n/**\r\n * * Magic Damage Rate\r\n */\r\nexport const SPECIAL_PARAM_MDR = 7 as const;\r\n\r\n/**\r\n * * Floor Damage Rate\r\n */\r\nexport const SPECIAL_PARAM_FDR = 8 as const;\r\n\r\n/**\r\n * * Experience Rate\r\n */\r\nexport const SPECIAL_PARAM_EXR = 9 as const;\r\n","import type { Data_NamedItem, NamedItemSource } from \"src/namedItemSource\";\r\nimport type { SourceId_TraitSpecialParam } from \"../sourceIdTypes\";\r\nimport type { TraitLabelWithOption } from \"../traitLabel\";\r\nimport {\r\n  SPECIAL_PARAM_TGR,\r\n  SPECIAL_PARAM_GRD,\r\n  SPECIAL_PARAM_REC,\r\n  SPECIAL_PARAM_PHA,\r\n  SPECIAL_PARAM_MCR,\r\n  SPECIAL_PARAM_TCR,\r\n  SPECIAL_PARAM_PDR,\r\n  SPECIAL_PARAM_MDR,\r\n  SPECIAL_PARAM_FDR,\r\n  SPECIAL_PARAM_EXR,\r\n} from \"./constants\";\r\nimport type { SpecialParamLabels } from \"./labels\";\r\n\r\nexport const defineTraitSpecialParam = (\r\n  specialParam: TraitLabelWithOption<SpecialParamLabels>\r\n): NamedItemSource => ({\r\n  items: specialParamsToArray(specialParam.options),\r\n  label: specialParam.title,\r\n  source: {\r\n    author: \"rmmz\",\r\n    module: \"trait\",\r\n    kind: \"sparams\",\r\n  } satisfies SourceId_TraitSpecialParam,\r\n});\r\n\r\nexport const specialParamsToArray = (\r\n  specialParams: SpecialParamLabels\r\n): Data_NamedItem[] => {\r\n  return [\r\n    {\r\n      id: SPECIAL_PARAM_TGR,\r\n      name: specialParams.targetRate,\r\n    },\r\n    {\r\n      id: SPECIAL_PARAM_GRD,\r\n      name: specialParams.guardEffectRate,\r\n    },\r\n    {\r\n      id: SPECIAL_PARAM_REC,\r\n      name: specialParams.recoveryEffectRate,\r\n    },\r\n    {\r\n      id: SPECIAL_PARAM_PHA,\r\n      name: specialParams.pharmacology,\r\n    },\r\n    {\r\n      id: SPECIAL_PARAM_MCR,\r\n      name: specialParams.mpCostRate,\r\n    },\r\n    {\r\n      id: SPECIAL_PARAM_TCR,\r\n      name: specialParams.tpChargeRate,\r\n    },\r\n    {\r\n      id: SPECIAL_PARAM_PDR,\r\n      name: specialParams.physicalDamageRate,\r\n    },\r\n    {\r\n      id: SPECIAL_PARAM_MDR,\r\n      name: specialParams.magicDamageRate,\r\n    },\r\n    {\r\n      id: SPECIAL_PARAM_FDR,\r\n      name: specialParams.floorDamageRate,\r\n    },\r\n    {\r\n      id: SPECIAL_PARAM_EXR,\r\n      name: specialParams.experienceRate,\r\n    },\r\n  ];\r\n};\r\n\r\nexport const specialParamName = (\r\n  paramIndex: number,\r\n  labels: SpecialParamLabels\r\n): string => {\r\n  switch (paramIndex) {\r\n    case SPECIAL_PARAM_EXR:\r\n      return labels.experienceRate;\r\n    case SPECIAL_PARAM_TGR:\r\n      return labels.targetRate;\r\n    case SPECIAL_PARAM_FDR:\r\n      return labels.floorDamageRate;\r\n    case SPECIAL_PARAM_GRD:\r\n      return labels.guardEffectRate;\r\n    case SPECIAL_PARAM_MCR:\r\n      return labels.mpCostRate;\r\n    case SPECIAL_PARAM_TCR:\r\n      return labels.tpChargeRate;\r\n    case SPECIAL_PARAM_PDR:\r\n      return labels.physicalDamageRate;\r\n    case SPECIAL_PARAM_MDR:\r\n      return labels.magicDamageRate;\r\n    case SPECIAL_PARAM_PHA:\r\n      return labels.pharmacology;\r\n    case SPECIAL_PARAM_REC:\r\n      return labels.recoveryEffectRate;\r\n  }\r\n  return `?sparams[${paramIndex}]`;\r\n};\r\n","export const PARTY_ABILITY_ENCOUNTER_HALF = 0 as const;\r\nexport const PARTY_ABILITY_ENCOUNTER_NONE = 1 as const;\r\nexport const PARTY_ABILITY_CANCEL_SURPRISE = 2 as const;\r\nexport const PARTY_ABILITY_RAISE_PREEMPTIVE = 3 as const;\r\nexport const PARTY_ABILITY_GOLD_DOUBLE = 4 as const;\r\nexport const PARTY_ABILITY_DROP_ITEM_DOUBLE = 5 as const;\r\n","import type { DomainLabel } from \"@RpgTypes/templates\";\r\nimport type { Data_NamedItem, NamedItemSource } from \"src/namedItemSource\";\r\nimport type { SourceId_TraitPartyAbility } from \"../sourceIdTypes\";\r\nimport {\r\n  PARTY_ABILITY_ENCOUNTER_HALF,\r\n  PARTY_ABILITY_ENCOUNTER_NONE,\r\n  PARTY_ABILITY_CANCEL_SURPRISE,\r\n  PARTY_ABILITY_RAISE_PREEMPTIVE,\r\n  PARTY_ABILITY_GOLD_DOUBLE,\r\n  PARTY_ABILITY_DROP_ITEM_DOUBLE,\r\n} from \"./constants\";\r\nimport type { PartyAbilityOptionLabels } from \"./labels\";\r\n\r\nexport const defineTraitPartyAbility = (\r\n  options: DomainLabel<PartyAbilityOptionLabels>\r\n): NamedItemSource => ({\r\n  items: partyAbilityToArray(options.options),\r\n  label: options.title,\r\n  source: {\r\n    author: \"rmmz\",\r\n    module: \"trait\",\r\n    kind: \"partyAbility\",\r\n  } satisfies SourceId_TraitPartyAbility,\r\n});\r\n\r\nexport const partyAbilityToArray = (\r\n  options: PartyAbilityOptionLabels\r\n): Data_NamedItem[] => {\r\n  return [\r\n    {\r\n      id: PARTY_ABILITY_ENCOUNTER_HALF,\r\n      name: options.encounterHalf,\r\n    },\r\n    {\r\n      id: PARTY_ABILITY_ENCOUNTER_NONE,\r\n      name: options.encounterNone,\r\n    },\r\n    {\r\n      id: PARTY_ABILITY_CANCEL_SURPRISE,\r\n      name: options.cancelSurprise,\r\n    },\r\n    {\r\n      id: PARTY_ABILITY_RAISE_PREEMPTIVE,\r\n      name: options.raisePreemptive,\r\n    },\r\n    {\r\n      id: PARTY_ABILITY_GOLD_DOUBLE,\r\n      name: options.goldDouble,\r\n    },\r\n    {\r\n      id: PARTY_ABILITY_DROP_ITEM_DOUBLE,\r\n      name: options.dropItemDouble,\r\n    },\r\n  ];\r\n};\r\n","export const FLAG_ID_AUTO_BATTLE = 0 as const;\r\nexport const FLAG_ID_GUARD = 1 as const;\r\nexport const FLAG_ID_SUBSTITUTE = 2 as const;\r\nexport const FLAG_ID_PRESERVE_TP = 3 as const;\r\n","import type { Data_NamedItem, NamedItemSource } from \"src/namedItemSource\";\r\nimport type { DomainLabel } from \"src/templates\";\r\nimport type { SourceId_TraitSpecialFlag } from \"../sourceIdTypes\";\r\nimport {\r\n  FLAG_ID_AUTO_BATTLE,\r\n  FLAG_ID_GUARD,\r\n  FLAG_ID_PRESERVE_TP,\r\n  FLAG_ID_SUBSTITUTE,\r\n} from \"./constants\";\r\nimport type { SpecialFlagOptions } from \"./labels\";\r\n\r\nexport const defineTraitSpecialFlag = (\r\n  label: DomainLabel<SpecialFlagOptions>\r\n): NamedItemSource => ({\r\n  items: specialFlagToArray(label.options),\r\n  label: label.title,\r\n  source: {\r\n    author: \"rmmz\",\r\n    module: \"trait\",\r\n    kind: \"sflag\",\r\n  } satisfies SourceId_TraitSpecialFlag,\r\n});\r\n\r\nexport const specialFlagToArray = (\r\n  label: SpecialFlagOptions\r\n): Data_NamedItem[] => {\r\n  return [\r\n    {\r\n      id: FLAG_ID_AUTO_BATTLE,\r\n      name: label.autoBattle,\r\n    },\r\n    {\r\n      id: FLAG_ID_GUARD,\r\n      name: label.guard,\r\n    },\r\n    {\r\n      id: FLAG_ID_SUBSTITUTE,\r\n      name: label.substitute,\r\n    },\r\n    {\r\n      id: FLAG_ID_PRESERVE_TP,\r\n      name: label.preventEscape,\r\n    },\r\n  ];\r\n};\r\n","import type { DomainLabel } from \"@RpgTypes/templates\";\r\nimport type {\r\n  CollapsOptionLabels,\r\n  ExtraParamLabels,\r\n  PartyAbilityOptionLabels,\r\n  RegularParamLabels,\r\n  SpecialFlagOptions,\r\n  SpecialParamLabels,\r\n  RawTraitLabel,\r\n  TraitLabelWithOption,\r\n} from \"./items\";\r\nimport type { TraitLabelSet } from \"./labelSet\";\r\n\r\nconst FORMAT_NAME = \"{name}\" as const;\r\nconst FORMAT_PARAM_RATE_MUL = \"{name} * {value}%\" as const;\r\nconst FORMAT_PARAM_RATE_PLUS = \"{name} + {value}%\" as const;\r\nconst FORMAT_PARAM_VALUE = \"{value}\" as const;\r\n\r\nexport const LABEL_SET_TRAIT = {\r\n  title: \"特徴\",\r\n  options: {\r\n    regularParam: {\r\n      title: \"基本能力値\",\r\n      format: FORMAT_PARAM_RATE_MUL,\r\n      options: {\r\n        maxHp: \"最大HP\",\r\n        maxMp: \"最大MP\",\r\n        atk: \"攻撃力\",\r\n        def: \"防御力\",\r\n        matk: \"魔法攻撃力\",\r\n        mdef: \"魔法防御力\",\r\n        agi: \"敏捷性\",\r\n        luk: \"運\",\r\n      },\r\n    } as const satisfies TraitLabelWithOption<RegularParamLabels>,\r\n    extraParam: {\r\n      title: \"追加能力値\",\r\n      format: FORMAT_PARAM_RATE_PLUS,\r\n      options: {\r\n        hitRate: \"命中率\",\r\n        evasionRate: \"回避率\",\r\n        criticalRate: \"クリティカル率\",\r\n        criticalEvasionRate: \"クリティカル回避率\",\r\n        magicEvasionRate: \"魔法回避率\",\r\n        magicReflectionRate: \"魔法反射率\",\r\n        counterAttackRate: \"反撃率\",\r\n        hpRegenerationRate: \"HP再生率\",\r\n        mpRegenerationRate: \"MP再生率\",\r\n        tpRegenerationRate: \"TP再生率\",\r\n      },\r\n    } as const satisfies TraitLabelWithOption<ExtraParamLabels>,\r\n    specialParam: {\r\n      title: \"特殊能力値\",\r\n      format: FORMAT_PARAM_RATE_MUL,\r\n      options: {\r\n        targetRate: \"狙われ率\",\r\n        guardEffectRate: \"防御効果率\",\r\n        recoveryEffectRate: \"回復効果率\",\r\n        pharmacology: \"薬の知識\",\r\n        mpCostRate: \"MP消費率\",\r\n        tpChargeRate: \"TPチャージ率\",\r\n        physicalDamageRate: \"物理ダメージ率\",\r\n        magicDamageRate: \"魔法ダメージ率\",\r\n        floorDamageRate: \"床ダメージ率\",\r\n        experienceRate: \"経験値率\",\r\n      },\r\n    } as const satisfies TraitLabelWithOption<SpecialParamLabels>,\r\n    specialFlag: {\r\n      title: \"特殊フラグ\",\r\n      format: FORMAT_NAME,\r\n      options: {\r\n        autoBattle: \"自動戦闘\",\r\n        guard: \"防御\",\r\n        substitute: \"身代わり\",\r\n        preventEscape: \"逃走防止\",\r\n      },\r\n    } as const satisfies TraitLabelWithOption<SpecialFlagOptions>,\r\n    collaps: {\r\n      title: \"消滅エフェクト\",\r\n      format: FORMAT_NAME,\r\n      options: {\r\n        bossCollaps: \"ボス崩壊\",\r\n        instantCollaps: \"即時崩壊\",\r\n        noneCollaps: \"崩壊なし\",\r\n      },\r\n    } as const satisfies TraitLabelWithOption<CollapsOptionLabels>,\r\n    partyAbility: {\r\n      title: \"パーティ能力\",\r\n      format: FORMAT_NAME,\r\n      options: {\r\n        cancelSurprise: \"不意打ち無効\",\r\n        dropItemDouble: \"アイテムドロップ2倍\",\r\n        encounterHalf: \"エンカウント半減\",\r\n        encounterNone: \"エンカウントなし\",\r\n        goldDouble: \"ゴールド2倍\",\r\n        raisePreemptive: \"先制攻撃率アップ\",\r\n      },\r\n    } as const satisfies TraitLabelWithOption<PartyAbilityOptionLabels>,\r\n    elementRate: {\r\n      title: \"属性有効度\",\r\n      format: FORMAT_PARAM_RATE_MUL,\r\n    } as const satisfies RawTraitLabel,\r\n    debuffRate: {\r\n      title: \"弱体有効度\",\r\n      format: FORMAT_PARAM_RATE_MUL,\r\n    } as const satisfies RawTraitLabel,\r\n    stateRate: {\r\n      title: \"ステート有効度\",\r\n      format: FORMAT_PARAM_RATE_MUL,\r\n    } as const satisfies RawTraitLabel,\r\n    stateResist: {\r\n      title: \"ステート無効\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies RawTraitLabel,\r\n    attackElement: {\r\n      title: \"攻撃属性\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies RawTraitLabel,\r\n    attackState: {\r\n      title: \"攻撃ステート\",\r\n      format: FORMAT_PARAM_RATE_PLUS,\r\n    } as const satisfies RawTraitLabel,\r\n    attackSpeed: {\r\n      title: \"攻撃速度補正\",\r\n      format: FORMAT_PARAM_VALUE,\r\n    } as const satisfies RawTraitLabel,\r\n    attackTimes: {\r\n      title: \"攻撃追加回数\",\r\n      format: FORMAT_PARAM_VALUE,\r\n    } as const satisfies RawTraitLabel,\r\n    actionPlus: {\r\n      title: \"行動追加\",\r\n      format: FORMAT_PARAM_RATE_MUL,\r\n    } as const satisfies RawTraitLabel,\r\n    attackSkill: {\r\n      title: \"攻撃スキル\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies RawTraitLabel,\r\n    equipWeaponType: {\r\n      title: \"装備武器タイプ\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies RawTraitLabel,\r\n    equipArmorType: {\r\n      title: \"装備防具タイプ\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies RawTraitLabel,\r\n    equipLock: {\r\n      title: \"装備固定\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies RawTraitLabel,\r\n    equipSeal: {\r\n      title: \"装備封印\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies RawTraitLabel,\r\n    slotType: {\r\n      title: \"スロットタイプ\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies RawTraitLabel,\r\n    skillAdd: {\r\n      title: \"スキル追加\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies RawTraitLabel,\r\n    skillSeal: {\r\n      title: \"スキルタイプ封印\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies RawTraitLabel,\r\n    skillTypeAdd: {\r\n      title: \"スキルタイプ追加\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies RawTraitLabel,\r\n    skillTypeSeal: {\r\n      title: \"スキルタイプ封印\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies RawTraitLabel,\r\n  },\r\n} as const satisfies DomainLabel<TraitLabelSet>;\r\n","import type { GlobalLabel, TraitLabelSet } from \"@RpgTypes/rpg\";\r\nimport type { NamedItemSource } from \"src/namedItemSource\";\r\nimport {\r\n  defineTraitRegularParam,\r\n  defineTraitExtraParam,\r\n  defineTraitSpecialParam,\r\n  defineTraitCollapseType,\r\n  defineTraitSpecialFlag,\r\n  defineTraitPartyAbility,\r\n} from \"./items\";\r\n\r\nexport const defineTraitItems = (\r\n  set: TraitLabelSet,\r\n  global: Pick<GlobalLabel, \"normal\">\r\n): NamedItemSource[] => {\r\n  return [\r\n    defineTraitRegularParam(set.regularParam),\r\n    defineTraitExtraParam(set.extraParam),\r\n    defineTraitSpecialParam(set.specialParam),\r\n    defineTraitCollapseType(set.collaps, global),\r\n    defineTraitSpecialFlag(set.specialFlag),\r\n    defineTraitPartyAbility(set.partyAbility),\r\n  ];\r\n};\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { Trait } from \"./trait\";\r\n\r\nexport const TYPENAME_TRAIT = \"Trait\" as const;\r\n\r\nexport const SCHEMA_TRAIT = {\r\n  type: \"object\",\r\n  required: [\"code\", \"dataId\", \"value\"],\r\n  properties: {\r\n    code: { type: \"integer\" },\r\n    dataId: { type: \"integer\" },\r\n    value: { type: \"integer\" },\r\n  },\r\n} as const satisfies JSONSchemaType<Trait>;\r\n","export const AUTHOR_RMMZ = \"rmmz\" as const;\r\nexport const SRC_COLOR = \"colors\" as const;\r\n","import type { PickByTypeKeys } from \"@RpgTypes/templates\";\r\nimport type { FormatArrayIndexCompiled } from \"./array\";\r\nimport type {\r\n  FormatArrayInput,\r\n  FormatPlaceholder,\r\n  FormatProperties,\r\n  FormatPropertiesCompiled,\r\n} from \"./direct\";\r\nimport type { SourceIdentifier } from \"./sourceIdentifier\";\r\n\r\nexport const compileFormatPropeties = <T>(\r\n  props: FormatProperties<T>\r\n): FormatPropertiesCompiled<T> => ({\r\n  numbers: props.numbers ? compilePlaceholders(props.numbers) : [],\r\n  strings: props.strings ? compilePlaceholders(props.strings) : [],\r\n});\r\n\r\nconst compilePlaceholders = <T, V extends number | string>(\r\n  keys: ReadonlyArray<PickByTypeKeys<T, V>>\r\n): FormatPlaceholder<T, V>[] => {\r\n  return keys.map((key) => ({\r\n    dataKey: key,\r\n    placeHolder: `{${key}}`,\r\n  }));\r\n};\r\n\r\nexport const compileArrayPlaceholder = <T, Source extends string | number>(\r\n  input: FormatArrayInput<T, Source>\r\n): FormatArrayIndexCompiled<T, Source> => {\r\n  return {\r\n    dataKey: input.dataIdKey,\r\n    placeHolder: `{${input.dataIdKey}}`,\r\n    sourceId: input.sourceId,\r\n  };\r\n};\r\n\r\nexport const compileArrayPlaceholderEX = <T>(\r\n  input: FormatArrayInput<T, SourceIdentifier>\r\n): FormatArrayIndexCompiled<T, SourceIdentifier> => {\r\n  return {\r\n    dataKey: input.dataIdKey,\r\n    placeHolder: `{${input.dataIdKey}}`,\r\n    sourceId: {\r\n      author: input.sourceId.author,\r\n      kind: input.sourceId.kind,\r\n      module: input.sourceId.module,\r\n    },\r\n  };\r\n};\r\n","import type { SourceIdentifier } from \"./types\";\r\n\r\nexport const joinSoruceId = (source: SourceIdentifier): string => {\r\n  return `${source.author}.${source.module}.${source.kind}`;\r\n};\r\n","import type { FormatItemMapper, FormatRule } from \"./core\";\r\n\r\nexport const getDataKeysFromFormatRule = <T>(\r\n  rule: FormatRule<T>\r\n): Set<string & keyof T> => {\r\n  return new Set<string & keyof T>([\r\n    ...(rule.placeHolder?.numbers ?? []),\r\n    ...(rule.placeHolder?.strings ?? []),\r\n    ...(rule.arrayIndex?.map((a) => a.dataIdKey) ?? []),\r\n  ]);\r\n};\r\n\r\nexport const getPlaceHolderKeys = <T>(rule: FormatRule<T>): Set<string> => {\r\n  return new Set<string>([\r\n    ...(rule.placeHolder?.numbers ?? []),\r\n    ...(rule.itemMapper ? [rule.itemMapper.placeHolder] : []),\r\n    ...(rule.itemMappers?.map((mapper) => mapper.placeHolder) ?? []),\r\n    ...(rule.placeHolder?.strings ?? []),\r\n    ...(rule.arrayIndex?.map((a) => a.dataIdKey) ?? []),\r\n  ]);\r\n};\r\n\r\nexport const getItemMappersFromRule = <T>(\r\n  rule: FormatRule<T>\r\n): ReadonlyArray<FormatItemMapper<T>> => {\r\n  const list = rule.itemMappers ?? [];\r\n  return rule.itemMapper ? [...list, rule.itemMapper] : [...list];\r\n};\r\n","import {\r\n  FORMAT_PLACEHOLDER_KEY,\r\n  DEFAULT_LABEL,\r\n  DEFAULT_TEXT,\r\n} from \"./constants\";\r\nimport type {\r\n  FormatItemMapper,\r\n  FormatItemMapperCompiled,\r\n  FormatPlaceholder,\r\n  FormatRule,\r\n  FormatRuleCompiled,\r\n} from \"./core\";\r\nimport { compileArrayPlaceholderEX, compileFormatPropeties } from \"./core\";\r\nimport {\r\n  getDataKeysFromFormatRule,\r\n  getItemMappersFromRule,\r\n} from \"./getPlaceHolders\";\r\n\r\nexport const compileFormatRule = <T>(\r\n  rule: FormatRule<T>,\r\n  extraItems: ReadonlyArray<FormatItemMapper<T>> = []\r\n): FormatRuleCompiled<T> => ({\r\n  itemMappers: [...getItemMappersFromRule(rule), ...extraItems].map(\r\n    compileItemMapper\r\n  ),\r\n  fallbackFormat: {\r\n    text: generateFallbackFormatText(rule),\r\n    label: generateFallbackLabel(rule),\r\n  },\r\n  properties: compileFormatPropeties(rule.placeHolder ?? {}),\r\n  arrayIndex: rule.arrayIndex\r\n    ? rule.arrayIndex.map(compileArrayPlaceholderEX)\r\n    : [],\r\n});\r\n\r\nconst compileItemMapper = <T>(\r\n  itemMappers: FormatItemMapper<T>\r\n): FormatItemMapperCompiled<T> => {\r\n  return {\r\n    placeHolder: `{${itemMappers.placeHolder}}`,\r\n    kindKey: itemMappers.kindKey,\r\n    dataIdKey: itemMappers.dataIdKey,\r\n  };\r\n};\r\n\r\nconst generateFallbackFormatText = <T>(rule: FormatRule<T>): string => {\r\n  if (rule.fallbackFormat) {\r\n    if (rule.fallbackFormat.text !== undefined) {\r\n      return rule.fallbackFormat.text;\r\n    }\r\n  }\r\n  const set: ReadonlySet<string & keyof T> = getDataKeysFromFormatRule(rule);\r\n  if (set.size === 0) {\r\n    return DEFAULT_TEXT;\r\n  }\r\n\r\n  return Array.from(set)\r\n    .map((item) => `${item}:{${item}}`)\r\n    .join(\", \");\r\n};\r\n\r\nconst generateFallbackLabel = <T>(rule: FormatRule<T>): string => {\r\n  if (rule.fallbackFormat?.label !== undefined) {\r\n    return rule.fallbackFormat.label;\r\n  }\r\n  return DEFAULT_LABEL;\r\n};\r\n\r\nexport const resolveUnknownLabel = <T>(\r\n  rule: FormatRuleCompiled<T>,\r\n  key: string\r\n): string => {\r\n  return rule.fallbackFormat.label.replace(FORMAT_PLACEHOLDER_KEY, key);\r\n};\r\n\r\nexport const applyPlaceholdersToText = <Schema, Data extends Schema>(\r\n  baseText: string,\r\n  data: Data,\r\n  rule: FormatRuleCompiled<Schema>\r\n): string => {\r\n  const numText: string = rule.properties.numbers.reduce(\r\n    (text, field) => replacePlaceholder(text, data, field),\r\n    baseText\r\n  );\r\n  return rule.properties.strings.reduce(\r\n    (text, field) => replacePlaceholder(text, data, field),\r\n    numText\r\n  );\r\n};\r\n\r\nconst replacePlaceholder = <\r\n  Schema,\r\n  Data extends Schema,\r\n  Value extends number | string\r\n>(\r\n  baseText: string,\r\n  data: Data,\r\n  field: FormatPlaceholder<Schema, Value>\r\n): string => {\r\n  const value = data[field.dataKey satisfies keyof Data];\r\n  if (value === undefined || value === null) {\r\n    return baseText;\r\n  }\r\n  return baseText.replaceAll(field.placeHolder, String(value));\r\n};\r\n","export const FORMAT_PLACEHOLDER_KEY = \"{key}\";\r\nexport const DEFAULT_LABEL = \"unknown key:{key}\";\r\nexport const DEFAULT_TEXT = \"value not found\";\r\n","import type {\r\n  FormatErrorLabels,\r\n  FormatLimits,\r\n  FormatErrorGroup,\r\n  FormatErrorItem,\r\n} from \"./formatErrorTypes\";\r\nimport type { FormatRule, FormatItemMapper } from \"./rule\";\r\nimport { getItemMappersFromRule, getPlaceHolderKeys } from \"./rule\";\r\nimport type { FormatInput, FormatWithSource } from \"./types\";\r\n\r\nexport const isValidFormatErrorGroup = (\r\n  formatError: FormatErrorGroup\r\n): boolean => {\r\n  return (\r\n    formatError.syntaxErrors.length === 0 &&\r\n    formatError.semanticErrors.length === 0\r\n  );\r\n};\r\n\r\nexport const collectFormatErrors = <T extends object>(\r\n  formatList: ReadonlyArray<FormatInput>,\r\n  formatRule: FormatRule<T>,\r\n  errorTexts: FormatErrorLabels,\r\n  limits: FormatLimits = {\r\n    placeHolderMaxLength: 50,\r\n    formatMaxLength: 200,\r\n  }\r\n): FormatErrorGroup[] => {\r\n  return formatList.reduce<FormatErrorGroup[]>((acc, format) => {\r\n    const errors = detectFormatErrors(format, formatRule, errorTexts, limits);\r\n    if (!isValidFormatErrorGroup(errors)) {\r\n      acc.push(errors);\r\n    }\r\n    return acc;\r\n  }, []);\r\n};\r\n\r\nexport const detectFormatErrors = <T extends object>(\r\n  format: FormatInput,\r\n  formatRule: FormatRule<T>,\r\n  errorTexts: FormatErrorLabels,\r\n  limits: FormatLimits = {\r\n    placeHolderMaxLength: 50,\r\n    formatMaxLength: 200,\r\n  }\r\n): FormatErrorGroup => {\r\n  if (format.pattern.length >= limits.formatMaxLength) {\r\n    return {\r\n      formatLabel: format.label,\r\n      syntaxErrors: [\r\n        {\r\n          message: errorTexts.formatVeryLong,\r\n          reason: format.pattern.slice(0, limits.formatMaxLength),\r\n        },\r\n      ],\r\n      semanticErrors: [],\r\n    };\r\n  }\r\n  return {\r\n    formatLabel: format.label,\r\n    semanticErrors: detectItemMapperErrors(format, formatRule, errorTexts),\r\n    syntaxErrors: detectInvalidPlaceholders(\r\n      format.pattern,\r\n      formatRule,\r\n      errorTexts,\r\n      limits.placeHolderMaxLength\r\n    ),\r\n  };\r\n};\r\n\r\nconst detectInvalidPlaceholders = <T extends object>(\r\n  format: string,\r\n  rule: FormatRule<T>,\r\n  errorTexts: FormatErrorLabels,\r\n  placeHolderMaxLength: number\r\n): FormatErrorItem[] => {\r\n  const matched = Array.from(format.matchAll(/\\{([.a-zA-Z0-9]+)\\}/g));\r\n  const placeHolderKeys: ReadonlySet<string> = getPlaceHolderKeys(rule);\r\n  return matched.reduce<FormatErrorItem[]>((acc, item) => {\r\n    const text: string = item[1];\r\n\r\n    if (text.length === 0) {\r\n      return acc;\r\n    }\r\n    if (text.length > placeHolderMaxLength) {\r\n      acc.push({\r\n        message: errorTexts.longPlaceHolder,\r\n        reason: text.slice(0, placeHolderMaxLength),\r\n      });\r\n      return acc;\r\n    }\r\n    if (!placeHolderKeys.has(text)) {\r\n      acc.push({\r\n        message: errorTexts.extraPlaceHolder,\r\n        reason: text,\r\n      });\r\n    }\r\n    return acc;\r\n  }, []);\r\n};\r\n\r\nconst detectItemMapperErrors = <T extends object>(\r\n  format: FormatWithSource,\r\n  formatRule: FormatRule<T>,\r\n  errorTexts: FormatErrorLabels\r\n): FormatErrorItem[] => {\r\n  return getItemMappersFromRule(formatRule).reduce<FormatErrorItem[]>(\r\n    (rule, item) => {\r\n      const error = checkItemMapperSourceError(format, item, errorTexts);\r\n      if (error) {\r\n        rule.push(error);\r\n      }\r\n      return rule;\r\n    },\r\n    []\r\n  );\r\n};\r\n\r\nconst checkItemMapperSourceError = <T>(\r\n  format: FormatWithSource,\r\n  rule: FormatItemMapper<T>,\r\n  errorTexts: FormatErrorLabels\r\n): FormatErrorItem | undefined => {\r\n  const includedName: boolean = format.pattern.includes(rule.placeHolder);\r\n  const hasSource: boolean = !!format.dataSource;\r\n  if (!includedName && hasSource) {\r\n    return {\r\n      message: errorTexts.missingName,\r\n      reason: rule.placeHolder,\r\n    };\r\n  }\r\n  if (includedName && !hasSource) {\r\n    return {\r\n      message: errorTexts.missingSourceId,\r\n      reason: rule.placeHolder,\r\n    };\r\n  }\r\n  return undefined;\r\n};\r\n","import type {\r\n  Data_NamedItem,\r\n  FormatCompiled,\r\n  FormatLabelResolved,\r\n  NamedItemSource,\r\n  SourceIdentifier,\r\n} from \"./core\";\r\nimport { joinSoruceId } from \"./core\";\r\n\r\nexport const mergeItemsSource = <Key>(\r\n  formatList: ReadonlyArray<FormatLabelResolved<Key>>,\r\n  namedItemSources: ReadonlyArray<NamedItemSource>\r\n): Map<Key, FormatCompiled> => {\r\n  const sourceMap = mappingNamedItems(namedItemSources);\r\n  return formatList.reduce<Map<Key, FormatCompiled>>((acc, label) => {\r\n    const entry = buildFinalFormatEntry(label, sourceMap);\r\n    acc.set(label.kindId, entry);\r\n    return acc;\r\n  }, new Map());\r\n};\r\n\r\nconst buildFinalFormatEntry = <T>(\r\n  format: FormatLabelResolved<T>,\r\n  sourceMap: ReadonlyMap<string, NamedItemSource>\r\n): FormatCompiled => {\r\n  const source = resolveDataSource(format.dataSource, sourceMap);\r\n  return {\r\n    patternCompiled: format.pattern,\r\n    label: format.label,\r\n    data: source ? source.items : undefined,\r\n  };\r\n};\r\n\r\nconst resolveDataSource = (\r\n  source: SourceIdentifier | undefined,\r\n  sourceMap: ReadonlyMap<string, NamedItemSource>\r\n): NamedItemSource | undefined => {\r\n  if (!source) {\r\n    return undefined;\r\n  }\r\n  return sourceMap.get(joinSoruceId(source));\r\n};\r\n\r\nconst mappingNamedItems = (\r\n  list: ReadonlyArray<NamedItemSource>\r\n): Map<string, NamedItemSource> => {\r\n  return list.reduce<Map<string, NamedItemSource>>((map, item) => {\r\n    const newItem: NamedItemSource = {\r\n      items: cloneItems(item.items), // 余計な情報の削除を兼ねてコピー\r\n      source: item.source,\r\n      label: item.label,\r\n    };\r\n    map.set(joinSoruceId(item.source), newItem);\r\n    return map;\r\n  }, new Map());\r\n};\r\n\r\nconst cloneItems = (list: ReadonlyArray<Data_NamedItem>): Data_NamedItem[] => {\r\n  return list.map<Data_NamedItem>((item) => ({ id: item.id, name: item.name }));\r\n};\r\n","import type { CompiledFormatBundle } from \"./bundle\";\r\nimport type {\r\n  Data_NamedItem,\r\n  FormatCompiled,\r\n  FormatErrorLabels,\r\n  FormatLabelResolved,\r\n  FormatResult,\r\n  FormatRule,\r\n  FormatRuleCompiled,\r\n  NamedItemSource,\r\n} from \"./core\";\r\nimport {\r\n  compileFormatRule,\r\n  applyPlaceholdersToText,\r\n  getItemName,\r\n  resolveUnknownLabel,\r\n} from \"./core\";\r\nimport type { FormatLookupKeys } from \"./core/accessor\";\r\nimport { collectFormatErrors } from \"./core/detectErrors\";\r\nimport { mergeItemsSource } from \"./mergeItemsSource\";\r\n\r\nexport const compileFormatBundle = <T extends object, KindKey>(\r\n  rule: FormatRule<T>,\r\n  formatList: ReadonlyArray<FormatLabelResolved<KindKey>>,\r\n  namedItemSources: ReadonlyArray<NamedItemSource>,\r\n  errorTexts: FormatErrorLabels\r\n): CompiledFormatBundle<T, KindKey> => {\r\n  return {\r\n    soruceMap: mergeItemsSource(formatList, namedItemSources),\r\n    errors: collectFormatErrors(formatList, rule, errorTexts),\r\n    compiledRule: compileFormatRule(rule),\r\n  };\r\n};\r\n\r\nexport const isValidFormatBundle = <T extends object, KindKey>(\r\n  bundle: CompiledFormatBundle<T, KindKey>\r\n): boolean => {\r\n  return bundle.errors.length === 0;\r\n};\r\n\r\nexport const formatWithCompiledBundle = <T extends object, KindKey>(\r\n  data: T,\r\n  bundle: CompiledFormatBundle<T, KindKey>,\r\n  lookup: FormatLookupKeys<T, KindKey>\r\n): FormatResult => {\r\n  const key: KindKey = lookup.extractMapKey(data);\r\n  const entry = bundle.soruceMap.get(key);\r\n  return entry\r\n    ? formatTextForMatchedEntry(data, bundle.compiledRule, entry, (d) =>\r\n        lookup.extractDataId(d)\r\n      )\r\n    : formatTextForFallback(data, bundle.compiledRule, key, lookup);\r\n};\r\n\r\nconst formatTextForMatchedEntry = <T extends object>(\r\n  data: T,\r\n  rule: FormatRuleCompiled<T>,\r\n  format: FormatCompiled,\r\n  getDataId: (data: T) => number\r\n): FormatResult => {\r\n  return {\r\n    label: format.label,\r\n    text: applyFormatRule(\r\n      data,\r\n      format.data,\r\n      rule,\r\n      format.patternCompiled,\r\n      getDataId\r\n    ),\r\n  };\r\n};\r\n\r\nconst formatTextForFallback = <T extends object, KindKey>(\r\n  data: T,\r\n  rule: FormatRuleCompiled<T>,\r\n  key: KindKey,\r\n  lookup: FormatLookupKeys<T, KindKey>\r\n): FormatResult => {\r\n  return {\r\n    label: resolveUnknownLabel(rule, lookup.unknownKey(key)),\r\n    text: applyFormatRule(\r\n      data,\r\n      undefined,\r\n      rule,\r\n      rule.fallbackFormat.text,\r\n      (d) => lookup.extractDataId(d)\r\n    ),\r\n  };\r\n};\r\n\r\nexport const applyFormatRule = <Schema, Data extends Schema>(\r\n  data: Data,\r\n  list: ReadonlyArray<Data_NamedItem> | undefined,\r\n  rule: FormatRuleCompiled<Schema>,\r\n  format: string,\r\n  getDataId: (data: Data) => number\r\n): string => {\r\n  const text: string = applyPlaceholdersToText(format, data, rule);\r\n  return list ? formatWithItemName(text, data, rule, list, getDataId) : text;\r\n};\r\n\r\nconst formatWithItemName = <Schema, Data extends Schema>(\r\n  text: string,\r\n  data: Data,\r\n  rule: FormatRuleCompiled<Schema>,\r\n  list: ReadonlyArray<Data_NamedItem>,\r\n  getDataId: (data: Data) => number\r\n): string => {\r\n  const itemName: string = getItemName(list, getDataId(data));\r\n  return rule.itemMappers.reduce((currentText, itemMapper) => {\r\n    return currentText.replaceAll(itemMapper.placeHolder, itemName);\r\n  }, text);\r\n};\r\n","import type { Data_NamedItem } from \"./types\";\r\n\r\nexport const findItemById = <T extends Data_NamedItem>(\r\n  dataId: number,\r\n  list: ReadonlyArray<T>\r\n): T | undefined => {\r\n  const item: T = list[dataId];\r\n  if (item) {\r\n    if (item.id === dataId) {\r\n      return item;\r\n    }\r\n  }\r\n\r\n  return list.find((i) => i.id === dataId);\r\n};\r\n\r\nexport const getItemName = (\r\n  list: ReadonlyArray<Data_NamedItem>,\r\n  dataId: number\r\n): string => {\r\n  const item = findItemById(dataId, list);\r\n  return item ? item.name : `?data[${dataId}]`;\r\n};\r\n","import type {\r\n  FormatErrorLabels,\r\n  FormatRule,\r\n  FormatWithSource,\r\n  Data_NamedItem,\r\n  FormatErrorGroup,\r\n  FormatInput,\r\n} from \"src/namedItemSource\";\r\nimport {\r\n  detectFormatErrors,\r\n  applyFormatRule,\r\n  compileFormatRule,\r\n} from \"src/namedItemSource\";\r\nimport type { Trait } from \"./types\";\r\n\r\nconst RULE_TRAIT = {\r\n  itemMapper: {\r\n    placeHolder: \"name\",\r\n    dataIdKey: \"dataId\",\r\n    kindKey: \"code\",\r\n  },\r\n  placeHolder: {\r\n    numbers: [\"value\"],\r\n  },\r\n} as const satisfies FormatRule<Trait>;\r\n\r\nexport const formatTraitText = (\r\n  descriptor: FormatWithSource,\r\n  trait: Trait,\r\n  items: ReadonlyArray<Data_NamedItem>\r\n): string => {\r\n  const rule = compileFormatRule(RULE_TRAIT);\r\n  return applyFormatRule(\r\n    trait,\r\n    items,\r\n    rule,\r\n    descriptor.pattern,\r\n    (t) => t.dataId\r\n  );\r\n};\r\n\r\nexport const detectTraitFormatErrors = (\r\n  format: FormatInput,\r\n  errorTexts: FormatErrorLabels\r\n): FormatErrorGroup => {\r\n  return detectFormatErrors(format, RULE_TRAIT, errorTexts);\r\n};\r\n","import { makeDamage } from \"../../members\";\r\nimport type { Data_Weapon } from \"./weapon\";\r\n\r\nexport const makeWeaponData = (\r\n  weapon: Partial<Data_Weapon> = {}\r\n): Data_Weapon => ({\r\n  id: weapon.id ?? 0,\r\n  name: weapon.name ?? \"\",\r\n  iconIndex: weapon.iconIndex ?? 0,\r\n  description: weapon.description ?? \"\",\r\n  traits: weapon.traits ?? [],\r\n  note: weapon.note ?? \"\",\r\n  animationId: weapon.animationId ?? 0,\r\n  params: weapon.params ?? [\r\n    0, // maxhp\r\n    0, // maxmp\r\n    0, // atk\r\n    0, // def\r\n    0, // mat\r\n    0, // mdf\r\n    0, // agi\r\n    0, // luk\r\n  ],\r\n  etypeId: weapon.etypeId ?? 0,\r\n  price: weapon.price ?? 0,\r\n  damage: makeDamage(weapon.damage ?? {}),\r\n  wtypeId: weapon.wtypeId ?? 0,\r\n});\r\n","import type { DomainLabel } from \"@RpgTypes/templates\";\r\nimport type { WeaponLabels } from \"./weaponLabels\";\r\n\r\nexport const LABELS_DATA_WEAPON = {\r\n  title: \"武器\",\r\n  options: {\r\n    weaponTypeId: \"武器タイプID\",\r\n  },\r\n} as const satisfies DomainLabel<WeaponLabels>;\r\n","export const HITTYPE_CERTAIN = 0 as const;\r\nexport const HITTYPE_PHYSICAL = 1 as const;\r\nexport const HITTYPE_MAGICAL = 2 as const;\r\n","export const EFFECT_RECOVER_HP = 11 as const;\r\nexport const EFFECT_RECOVER_MP = 12 as const;\r\nexport const EFFECT_GAIN_TP = 13 as const;\r\nexport const EFFECT_ADD_STATE = 21 as const;\r\nexport const EFFECT_REMOVE_STATE = 22 as const;\r\nexport const EFFECT_ADD_BUFF = 31 as const;\r\nexport const EFFECT_ADD_DEBUFF = 32 as const;\r\nexport const EFFECT_REMOVE_BUFF = 33 as const;\r\nexport const EFFECT_REMOVE_DEBUFF = 34 as const;\r\nexport const EFFECT_SPECIAL = 41 as const;\r\nexport const EFFECT_GROW = 42 as const;\r\nexport const EFFECT_LEARN_SKILL = 43 as const;\r\nexport const EFFECT_COMMON_EVENT = 44 as const;\r\n","import {\r\n  EFFECT_SPECIAL,\r\n  type SourceId_DataCommonEvent,\r\n  type SourceId_DataSkill,\r\n  type SourceId_DataState,\r\n  type SourceId_TraitRegularParam,\r\n} from \"@RpgTypes/rpg\";\r\nimport type { SourceIdentifier } from \"src/namedItemSource\";\r\nimport {\r\n  EFFECT_ADD_STATE,\r\n  EFFECT_GROW,\r\n  EFFECT_RECOVER_HP,\r\n  EFFECT_ADD_BUFF,\r\n  EFFECT_ADD_DEBUFF,\r\n  EFFECT_REMOVE_BUFF,\r\n  EFFECT_COMMON_EVENT,\r\n  EFFECT_GAIN_TP,\r\n  EFFECT_LEARN_SKILL,\r\n  EFFECT_RECOVER_MP,\r\n  EFFECT_REMOVE_DEBUFF,\r\n  EFFECT_REMOVE_STATE,\r\n} from \"./effectCode\";\r\nimport type {\r\n  EffectDefinitionResolved,\r\n  EffectLabelDefinition,\r\n  ItemEffectLabelSet,\r\n} from \"./labels\";\r\n\r\nexport const resolveItemEffectLabels = (\r\n  labels: ItemEffectLabelSet\r\n): EffectDefinitionResolved[] => {\r\n  return [\r\n    defineEffectRecoverHp(labels),\r\n    defineEffectRecoverMp(labels),\r\n    defineEffectGainTp(labels),\r\n    defineEffectAddState(labels),\r\n    defineEffectRemoveState(labels),\r\n    defineEffectAddBuff(labels),\r\n    defineEffectAddDebuff(labels),\r\n    defineEffectRemoveBuff(labels),\r\n    defineEffectRemoveDebuff(labels),\r\n    defineEffectSpecial(labels),\r\n    defineEffectGrow(labels),\r\n    defineEffectLearnSkill(labels),\r\n    defineEffectCommonEvent(labels),\r\n  ];\r\n};\r\n\r\nconst regularParamSourceId = (): SourceId_TraitRegularParam => ({\r\n  author: \"rmmz\",\r\n  module: \"trait\",\r\n  kind: \"params\",\r\n});\r\n\r\nconst stateSourceId = (): SourceId_DataState => ({\r\n  author: \"rmmz\",\r\n  module: \"data\",\r\n  kind: \"state\",\r\n});\r\n\r\nconst defineEffect = (\r\n  code: number,\r\n  baseLabel: EffectLabelDefinition,\r\n  dataSource?: SourceIdentifier\r\n): EffectDefinitionResolved => ({\r\n  kindId: code,\r\n  label: baseLabel.domainName,\r\n  pattern: baseLabel.format,\r\n  description: baseLabel.desc,\r\n  dataSource: dataSource,\r\n});\r\n\r\nconst defineEffectSpecial = (\r\n  labels: ItemEffectLabelSet\r\n): EffectDefinitionResolved => defineEffect(EFFECT_SPECIAL, labels.special);\r\n\r\nconst defineEffectRecoverHp = (\r\n  labels: ItemEffectLabelSet\r\n): EffectDefinitionResolved =>\r\n  defineEffect(EFFECT_RECOVER_HP, labels.recoverHp);\r\n\r\nconst defineEffectRecoverMp = (\r\n  labels: ItemEffectLabelSet\r\n): EffectDefinitionResolved =>\r\n  defineEffect(EFFECT_RECOVER_MP, labels.recoverMp);\r\n\r\nconst defineEffectGainTp = (\r\n  labels: ItemEffectLabelSet\r\n): EffectDefinitionResolved => defineEffect(EFFECT_GAIN_TP, labels.gainTp);\r\n\r\nconst defineEffectAddState = (\r\n  labels: ItemEffectLabelSet\r\n): EffectDefinitionResolved =>\r\n  defineEffect(EFFECT_ADD_STATE, labels.addState, stateSourceId());\r\n\r\nconst defineEffectRemoveState = (\r\n  labels: ItemEffectLabelSet\r\n): EffectDefinitionResolved =>\r\n  defineEffect(EFFECT_REMOVE_STATE, labels.removeState, stateSourceId());\r\n\r\nconst defineEffectAddBuff = (\r\n  labels: ItemEffectLabelSet\r\n): EffectDefinitionResolved =>\r\n  defineEffect(EFFECT_ADD_BUFF, labels.addBuff, regularParamSourceId());\r\n\r\nconst defineEffectAddDebuff = (\r\n  labels: ItemEffectLabelSet\r\n): EffectDefinitionResolved =>\r\n  defineEffect(EFFECT_ADD_DEBUFF, labels.addDebuff, regularParamSourceId());\r\n\r\nconst defineEffectRemoveBuff = (\r\n  labels: ItemEffectLabelSet\r\n): EffectDefinitionResolved =>\r\n  defineEffect(EFFECT_REMOVE_BUFF, labels.removeBuff, regularParamSourceId());\r\n\r\nconst defineEffectRemoveDebuff = (\r\n  labels: ItemEffectLabelSet\r\n): EffectDefinitionResolved =>\r\n  defineEffect(\r\n    EFFECT_REMOVE_DEBUFF,\r\n    labels.removeDebuff,\r\n    regularParamSourceId()\r\n  );\r\n\r\nconst defineEffectGrow = (\r\n  labels: ItemEffectLabelSet\r\n): EffectDefinitionResolved =>\r\n  defineEffect(EFFECT_GROW, labels.grow, regularParamSourceId());\r\n\r\nconst defineEffectLearnSkill = (\r\n  labels: ItemEffectLabelSet\r\n): EffectDefinitionResolved =>\r\n  defineEffect(EFFECT_LEARN_SKILL, labels.learnSkill, {\r\n    author: \"rmmz\",\r\n    module: \"data\",\r\n    kind: \"skill\",\r\n  } satisfies SourceId_DataSkill);\r\n\r\nconst defineEffectCommonEvent = (\r\n  labels: ItemEffectLabelSet\r\n): EffectDefinitionResolved =>\r\n  defineEffect(EFFECT_COMMON_EVENT, labels.commonEvent, {\r\n    author: \"rmmz\",\r\n    module: \"data\",\r\n    kind: \"common_event\",\r\n  } satisfies SourceId_DataCommonEvent);\r\n","import type { DomainLabel } from \"@RpgTypes/templates\";\r\nimport type { EffectLabelDefinition, ItemEffectLabelSet } from \"./types\";\r\n\r\nconst FORMAT_GROW = \"{name} + {value1}\" as const;\r\nconst FORMAT_STATE = \"{name} {value1}%\" as const;\r\nconst FORMAT_RECOVER = \"{value1}% + {value2}\" as const;\r\nconst FORMAT_ADD_BUFF = \"{name} {value1}ターン\" as const;\r\nconst FORMAT_NAME = \"{name}\" as const;\r\n\r\nexport const LABEL_SET_ITEM_EFFECT = {\r\n  title: \"使用効果\",\r\n  options: {\r\n    addBuff: {\r\n      desc: \"バフを付与する\",\r\n      domainName: \"バフ付与\",\r\n      format: FORMAT_ADD_BUFF,\r\n    } as const satisfies EffectLabelDefinition,\r\n    addDebuff: {\r\n      desc: \"デバフを付与する\",\r\n      domainName: \"デバフ付与\",\r\n      format: FORMAT_ADD_BUFF,\r\n    } as const satisfies EffectLabelDefinition,\r\n    gainTp: {\r\n      desc: \"TPを指定した量だけ増加させます。\",\r\n      domainName: \"TP増加\",\r\n      format: FORMAT_RECOVER,\r\n    } as const satisfies EffectLabelDefinition,\r\n    grow: {\r\n      desc: \"成長効果\",\r\n      domainName: \"成長効果\",\r\n      format: FORMAT_GROW,\r\n    } as const satisfies EffectLabelDefinition,\r\n    learnSkill: {\r\n      desc: \"スキルを習得する\",\r\n      domainName: \"スキル習得\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies EffectLabelDefinition,\r\n    recoverHp: {\r\n      desc: \"HPを回復します。最大HPに対する割合と一定値のいずれか一方または両方を指定します。アイテムの場合は、特殊能力値[薬の知識]の倍率が適用されます。\",\r\n      domainName: \"HP回復\",\r\n      format: FORMAT_RECOVER,\r\n    } as const satisfies EffectLabelDefinition,\r\n    recoverMp: {\r\n      desc: \"MPを回復します。最大MPに対する割合と一定値のいずれか一方または両方を指定します。アイテムの場合は、特殊能力値[薬の知識]の倍率が適用されます。\",\r\n      domainName: \"MP回復\",\r\n      format: FORMAT_RECOVER,\r\n    } as const satisfies EffectLabelDefinition,\r\n    removeBuff: {\r\n      desc: \"バフを解除する\",\r\n      domainName: \"バフ解除\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies EffectLabelDefinition,\r\n    removeDebuff: {\r\n      desc: \"デバフを解除する\",\r\n      domainName: \"デバフ解除\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies EffectLabelDefinition,\r\n    removeState: {\r\n      desc: \"指定したステートを付加します。\",\r\n      domainName: \"ステート付加\",\r\n      format: FORMAT_STATE,\r\n    } as const satisfies EffectLabelDefinition,\r\n    special: {\r\n      desc: \"特殊効果\",\r\n      domainName: \"特殊効果\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies EffectLabelDefinition,\r\n    addState: {\r\n      desc: \"状態異常を解除する\",\r\n      domainName: \"ステート解除\",\r\n      format: FORMAT_STATE,\r\n    } as const satisfies EffectLabelDefinition,\r\n    commonEvent: {\r\n      desc: \"コモンイベントを実行する\",\r\n      domainName: \"コモンイベント\",\r\n      format: FORMAT_NAME,\r\n    } as const satisfies EffectLabelDefinition,\r\n  },\r\n} as const satisfies DomainLabel<ItemEffectLabelSet>;\r\n","export const SPECIAL_EFFECT_ESCAPE = 0 as const;\r\n","import type { Data_NamedItem } from \"src/namedItemSource\";\r\nimport type { ItemEffect } from \"./itemEffect\";\r\nimport type { EffectDefinitionResolved } from \"./labels\";\r\nconst FORMAT_NAME = \"{name}\" as const;\r\nconst FORMAT_VALUE1 = \"{value1}\" as const;\r\nconst FORMAT_VALUE2 = \"{value2}\" as const;\r\n\r\nexport const formatItemEffectText = (\r\n  effectDefine: EffectDefinitionResolved,\r\n  effect: ItemEffect,\r\n  items: Data_NamedItem[]\r\n): string => {\r\n  const item = items.find((item) => item.id === effect.dataId);\r\n  const name: string = item ? item.name : \"Unknown Item\";\r\n  return effectDefine.pattern\r\n    .replaceAll(FORMAT_VALUE1, effect.value1.toString())\r\n    .replaceAll(FORMAT_VALUE2, effect.value2.toString())\r\n    .replaceAll(FORMAT_NAME, name);\r\n};\r\n","import type { DomainLabel } from \"@RpgTypes/templates\";\r\nimport type { ItemLabels } from \"./itemLabels\";\r\n\r\nexport const DEFAULT_ITEM_LABELS = {\r\n  title: \"アイテム\",\r\n  options: {\r\n    consumable: \"消耗品\",\r\n  },\r\n} as const satisfies DomainLabel<ItemLabels>;\r\n","import type { DomainLabel } from \"@RpgTypes/templates\";\r\nimport type { SkillLabels } from \"./skillLabels\";\r\n\r\nexport const DEFAULT_SKILL_LABELS = {\r\n  title: \"スキル\",\r\n  options: {\r\n    requiredWeaponTypeId1: \"必要武器タイプ1\",\r\n    requiredWeaponTypeId2: \"必要武器タイプ2\",\r\n    mpCost: \"MP消費\",\r\n    tpCost: \"TP消費\",\r\n  },\r\n} as const satisfies DomainLabel<SkillLabels>;\r\n","import type { DomainLabel } from \"@RpgTypes/templates\";\r\nimport type { UsableItemLabels } from \"./usableItemLabels\";\r\n\r\nexport const DEFAULT_USABLE_ITEM_LABELS = {\r\n  title: \"\",\r\n  options: {\r\n    scope: \"範囲\",\r\n    speed: \"速度補正\",\r\n    successRate: \"成功率\",\r\n  },\r\n} as const satisfies DomainLabel<UsableItemLabels>;\r\n","import { makeDamage } from \"../members\";\r\nimport type { Data_Item } from \"./core\";\r\n\r\nexport const makeItemData = (item: Partial<Data_Item> = {}): Data_Item => ({\r\n  animationId: item.animationId ?? 0,\r\n  id: item.id ?? 0,\r\n  name: item.name ?? \"\",\r\n  iconIndex: item.iconIndex ?? 0,\r\n  description: item.description ?? \"\",\r\n  itypeId: item.itypeId ?? 0,\r\n\r\n  note: item.note ?? \"\",\r\n  consumable: item.consumable ?? false,\r\n  scope: item.scope ?? 0,\r\n  occasion: item.occasion ?? 0,\r\n  speed: item.speed ?? 0,\r\n  successRate: item.successRate ?? 0,\r\n  repeats: item.repeats ?? 0,\r\n  tpGain: item.tpGain ?? 0,\r\n  hitType: item.hitType ?? 0,\r\n  damage: makeDamage(item.damage ?? {}),\r\n  effects: [],\r\n  price: 0,\r\n});\r\n","import { makeDamage } from \"../members\";\r\nimport type { Data_Skill } from \"./core\";\r\n\r\nexport const makeSkillData = (skill: Partial<Data_Skill> = {}): Data_Skill => ({\r\n  stypeId: skill.stypeId ?? 0,\r\n  requiredWtypeId1: skill.requiredWtypeId1 ?? 0,\r\n  requiredWtypeId2: skill.requiredWtypeId2 ?? 0,\r\n  animationId: skill.animationId ?? 0,\r\n  damage: makeDamage(skill.damage ?? {}),\r\n  description: skill.description ?? \"\",\r\n  effects: [],\r\n  hitType: skill.hitType ?? 0,\r\n  iconIndex: skill.iconIndex ?? 0,\r\n  id: skill.id ?? 0,\r\n  message1: skill.message1 ?? \"\",\r\n  message2: skill.message2 ?? \"\",\r\n  messageType: skill.messageType ?? 0,\r\n  name: skill.name ?? \"\",\r\n  note: skill.note ?? \"\",\r\n  mpCost: skill.mpCost ?? 0,\r\n  occasion: skill.occasion ?? 0,\r\n  repeats: skill.repeats ?? 0,\r\n  scope: skill.scope ?? 0,\r\n  speed: skill.speed ?? 0,\r\n  successRate: skill.successRate ?? 0,\r\n  tpCost: skill.tpCost ?? 0,\r\n  tpGain: skill.tpGain ?? 0,\r\n});\r\n","import type { JSONSchemaType } from \"ajv\";\r\n\r\nexport const SCHEMA_STRING = {\r\n  type: \"string\",\r\n} as const satisfies JSONSchemaType<string>;\r\n\r\nexport const SCHEMA_INTEGER = {\r\n  type: \"integer\",\r\n} as const satisfies JSONSchemaType<number>;\r\n\r\nexport const SCHEMA_POSITIVE_INTEGER = {\r\n  type: \"integer\",\r\n  minimum: 0,\r\n} as const satisfies JSONSchemaType<number>;\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { Damage } from \"./members\";\r\nimport {\r\n  SCHEMA_POSITIVE_INTEGER,\r\n  SCHEMA_STRING,\r\n  SCHEMA_INTEGER,\r\n} from \"./primitiveSchema/primitiveSchema\";\r\nimport type { Data_Item, Data_Skill, ItemEffect } from \"./usableItems\";\r\n\r\nconst SCHEMA_DAMATE = {\r\n  type: \"object\",\r\n  properties: {\r\n    type: { type: \"integer\" },\r\n    elementId: SCHEMA_POSITIVE_INTEGER,\r\n    formula: SCHEMA_STRING,\r\n    variance: SCHEMA_INTEGER,\r\n    critical: { type: \"boolean\" },\r\n  },\r\n  required: [\"type\", \"elementId\", \"formula\", \"variance\", \"critical\"],\r\n  additionalProperties: false,\r\n} as const satisfies JSONSchemaType<Damage>;\r\n\r\nconst SCHEMA_EFFECT = {\r\n  type: \"object\",\r\n  properties: {\r\n    code: SCHEMA_INTEGER,\r\n    dataId: SCHEMA_POSITIVE_INTEGER,\r\n    value1: SCHEMA_INTEGER,\r\n    value2: SCHEMA_INTEGER,\r\n  },\r\n  required: [\"code\", \"dataId\", \"value1\", \"value2\"],\r\n  additionalProperties: false,\r\n} as const satisfies JSONSchemaType<ItemEffect>;\r\n\r\nconst SCHEMA_DATA_SKILL = {\r\n  type: \"object\",\r\n  required: [\r\n    \"name\",\r\n    \"id\",\r\n    \"description\",\r\n    \"iconIndex\",\r\n    \"message1\",\r\n    \"message2\",\r\n    \"messageType\",\r\n    \"mpCost\",\r\n    \"requiredWtypeId1\",\r\n    \"requiredWtypeId2\",\r\n    \"stypeId\",\r\n    \"tpCost\",\r\n    \"animationId\",\r\n    \"hitType\",\r\n    \"occasion\",\r\n    \"repeats\",\r\n    \"scope\",\r\n    \"speed\",\r\n    \"successRate\",\r\n    \"tpGain\",\r\n    \"note\",\r\n    \"effects\",\r\n  ],\r\n\r\n  properties: {\r\n    name: SCHEMA_STRING,\r\n    id: SCHEMA_POSITIVE_INTEGER,\r\n    description: SCHEMA_STRING,\r\n    iconIndex: SCHEMA_POSITIVE_INTEGER,\r\n    message1: SCHEMA_STRING,\r\n    message2: SCHEMA_STRING,\r\n\r\n    messageType: SCHEMA_POSITIVE_INTEGER,\r\n    mpCost: SCHEMA_INTEGER,\r\n    requiredWtypeId1: SCHEMA_POSITIVE_INTEGER,\r\n    requiredWtypeId2: SCHEMA_POSITIVE_INTEGER,\r\n    stypeId: SCHEMA_POSITIVE_INTEGER,\r\n    tpCost: SCHEMA_INTEGER,\r\n\r\n    animationId: SCHEMA_POSITIVE_INTEGER,\r\n    hitType: SCHEMA_POSITIVE_INTEGER,\r\n    occasion: { type: \"integer\" },\r\n    repeats: SCHEMA_POSITIVE_INTEGER,\r\n    scope: SCHEMA_INTEGER,\r\n    speed: SCHEMA_INTEGER,\r\n    successRate: SCHEMA_INTEGER,\r\n    tpGain: SCHEMA_INTEGER,\r\n\r\n    note: SCHEMA_STRING,\r\n\r\n    effects: {\r\n      type: \"array\",\r\n      items: SCHEMA_EFFECT,\r\n    } satisfies JSONSchemaType<Data_Item[\"effects\"]>,\r\n    damage: SCHEMA_DAMATE,\r\n  },\r\n\r\n  additionalProperties: false,\r\n} as const satisfies JSONSchemaType<Data_Skill>;\r\n\r\nconst SCHEMA_DATA_ITEM = {\r\n  type: \"object\",\r\n  required: [\r\n    \"name\",\r\n    \"id\",\r\n    \"description\",\r\n    \"iconIndex\",\r\n    \"note\",\r\n    \"animationId\",\r\n    \"hitType\",\r\n    \"occasion\",\r\n    \"repeats\",\r\n    \"scope\",\r\n    \"speed\",\r\n    \"successRate\",\r\n    \"tpGain\",\r\n    \"consumable\",\r\n    \"price\",\r\n    \"effects\",\r\n  ],\r\n\r\n  properties: {\r\n    name: SCHEMA_STRING,\r\n    id: SCHEMA_POSITIVE_INTEGER,\r\n    description: SCHEMA_STRING,\r\n    iconIndex: SCHEMA_POSITIVE_INTEGER,\r\n    note: SCHEMA_STRING,\r\n    animationId: SCHEMA_POSITIVE_INTEGER,\r\n    hitType: SCHEMA_INTEGER,\r\n    occasion: SCHEMA_INTEGER,\r\n    repeats: SCHEMA_INTEGER,\r\n    scope: SCHEMA_INTEGER,\r\n    speed: SCHEMA_INTEGER,\r\n    successRate: SCHEMA_INTEGER,\r\n    tpGain: SCHEMA_INTEGER,\r\n    consumable: { type: \"boolean\" },\r\n    price: SCHEMA_POSITIVE_INTEGER,\r\n    itypeId: SCHEMA_POSITIVE_INTEGER,\r\n    effects: {\r\n      type: \"array\",\r\n      items: SCHEMA_EFFECT,\r\n    } satisfies JSONSchemaType<Data_Item[\"effects\"]>,\r\n    damage: SCHEMA_DAMATE,\r\n  },\r\n} as const satisfies JSONSchemaType<Data_Item>;\r\n\r\nexport { SCHEMA_DATA_ITEM, SCHEMA_DATA_SKILL, SCHEMA_EFFECT, SCHEMA_DAMATE };\r\n","import Ajv from \"ajv\";\r\nimport { SCHEMA_DATA_ITEM, SCHEMA_DATA_SKILL } from \"./schema.usableItem\";\r\nimport type {\r\n  Data_Actor,\r\n  Data_Armor,\r\n  Data_Class,\r\n  Data_Enemy,\r\n  Data_State,\r\n  Data_Weapon,\r\n} from \"./traitContainers\";\r\nimport SCHEMA_DATA_ACTOR from \"./traitContainers/actor/schema\";\r\nimport SCHEMA_DATA_ARMMOR from \"./traitContainers/armor/schema\";\r\nimport SCHEMA_DATA_CLASS from \"./traitContainers/class/schema\";\r\nimport SCHEMA_DATA_ENEMY from \"./traitContainers/enemy/schema\";\r\nimport SCHEMA_DATA_STATE from \"./traitContainers/state/schema\";\r\nimport SCHEMA_DATA_WEAPON from \"./traitContainers/weapon/schema\";\r\nimport type { Data_Item, Data_Skill } from \"./usableItems\";\r\n\r\nconst ajv = new Ajv({\r\n  strict: true,\r\n});\r\nconst item = ajv.compile(SCHEMA_DATA_ITEM);\r\n\r\nexport const isDataItem = (data: unknown): data is Data_Item => {\r\n  return item(data);\r\n};\r\n\r\nconst skill = ajv.compile(SCHEMA_DATA_SKILL);\r\nexport const isDataSkill = (data: unknown): data is Data_Skill => {\r\n  return skill(data);\r\n};\r\n\r\nconst actor = ajv.compile(SCHEMA_DATA_ACTOR);\r\nexport const isDataActor = (data: unknown): data is Data_Actor => {\r\n  return actor(data);\r\n};\r\n\r\nconst armor = ajv.compile(SCHEMA_DATA_ARMMOR);\r\nexport const isDataArmor = (data: unknown): data is Data_Armor => {\r\n  return armor(data);\r\n};\r\n\r\nconst weapon = ajv.compile(SCHEMA_DATA_WEAPON);\r\nexport const isDataWeapon = (data: unknown): data is Data_Weapon => {\r\n  return weapon(data);\r\n};\r\n\r\nconst enemy = ajv.compile(SCHEMA_DATA_ENEMY);\r\nexport const isDataEnemy = (data: unknown): data is Data_Enemy => {\r\n  return enemy(data);\r\n};\r\n\r\nconst state = ajv.compile(SCHEMA_DATA_STATE);\r\nexport const isDataState = (data: unknown): data is Data_State => {\r\n  return state(data);\r\n};\r\n\r\nconst class_ = ajv.compile(SCHEMA_DATA_CLASS);\r\nexport const isDataClass = (data: unknown): data is Data_Class => {\r\n  return class_(data);\r\n};\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { Data_Actor } from \"./types\";\r\n\r\nconst SCHEMA_DATA_ACTOR = {\r\n  type: \"object\",\r\n  required: [\r\n    \"name\",\r\n    \"id\",\r\n    \"nickname\",\r\n    \"battlerName\",\r\n    \"characterName\",\r\n    \"characterIndex\",\r\n    \"faceName\",\r\n    \"faceIndex\",\r\n    \"classId\",\r\n    \"initialLevel\",\r\n    \"maxLevel\",\r\n  ],\r\n  properties: {\r\n    name: { type: \"string\" },\r\n    battlerName: { type: \"string\" },\r\n    characterName: { type: \"string\" },\r\n    characterIndex: { type: \"integer\" },\r\n    faceName: { type: \"string\" },\r\n    faceIndex: { type: \"integer\", minimum: 0, maximum: 7 },\r\n    id: { type: \"integer\", minimum: 0 },\r\n    nickname: { type: \"string\" },\r\n\r\n    profile: { type: \"string\" },\r\n    initialLevel: { type: \"integer\", minimum: 0 },\r\n    maxLevel: { type: \"integer\" },\r\n    classId: { type: \"integer\", minimum: 0 },\r\n    equips: { type: \"array\", items: { type: \"integer\" } },\r\n    note: { type: \"string\" },\r\n    traits: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        properties: {\r\n          code: { type: \"integer\" },\r\n          dataId: { type: \"integer\" },\r\n          value: { type: \"integer\" },\r\n        },\r\n        required: [\"code\", \"dataId\", \"value\"],\r\n      },\r\n    },\r\n  },\r\n} as const satisfies JSONSchemaType<Data_Actor>;\r\nexport default SCHEMA_DATA_ACTOR;\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { ParamArray } from \"../members\";\r\nimport type { Trait } from \"../trait\";\r\nimport type { Data_Armor } from \"./types\";\r\n\r\nconst SCHEMA_DATA_ARMMOR = {\r\n  type: \"object\",\r\n  required: [\r\n    \"name\",\r\n    \"id\",\r\n    \"description\",\r\n    \"iconIndex\",\r\n    \"price\",\r\n    \"params\",\r\n    \"traits\",\r\n    \"note\",\r\n    \"etypeId\",\r\n    \"atypeId\",\r\n  ],\r\n\r\n  properties: {\r\n    name: { type: \"string\" },\r\n    id: { type: \"integer\", minimum: 0 },\r\n    description: { type: \"string\" },\r\n    iconIndex: { type: \"integer\", minimum: 0 },\r\n    price: { type: \"integer\", minimum: 0 },\r\n    note: { type: \"string\" },\r\n    etypeId: { type: \"integer\", minimum: 0 },\r\n    atypeId: { type: \"integer\", minimum: 0 },\r\n\r\n    params: {\r\n      type: \"array\",\r\n      items: [\r\n        { type: \"integer\" }, // mhp\r\n        { type: \"integer\" }, // mmp\r\n        { type: \"integer\" }, // atk\r\n        { type: \"integer\" }, // def\r\n        { type: \"integer\" }, // mat\r\n        { type: \"integer\" }, // mdf\r\n        { type: \"integer\" }, // agi\r\n        { type: \"integer\" }, // luk\r\n      ],\r\n      minItems: 8,\r\n      maxItems: 8,\r\n    } satisfies JSONSchemaType<ParamArray>,\r\n\r\n    traits: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        properties: {\r\n          code: { type: \"integer\" },\r\n          dataId: { type: \"integer\" },\r\n          value: { type: \"integer\" },\r\n        },\r\n        required: [\"code\", \"dataId\", \"value\"],\r\n      },\r\n    } satisfies JSONSchemaType<Trait[]>,\r\n  },\r\n} as const satisfies JSONSchemaType<Data_Armor>;\r\n\r\nexport default SCHEMA_DATA_ARMMOR;\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { Data_Weapon } from \"./weapon\";\r\n\r\nconst SCHEMA_DATA_WEAPON = {\r\n  type: \"object\",\r\n  required: [\r\n    \"name\",\r\n    \"id\",\r\n    \"description\",\r\n    \"iconIndex\",\r\n    \"price\",\r\n    \"params\",\r\n    \"traits\",\r\n    \"note\",\r\n    \"etypeId\",\r\n    \"animationId\",\r\n  ],\r\n\r\n  properties: {\r\n    name: { type: \"string\" },\r\n    id: { type: \"integer\", minimum: 0 },\r\n    description: { type: \"string\" },\r\n    iconIndex: { type: \"integer\", minimum: 0 },\r\n    price: { type: \"integer\", minimum: 0 },\r\n    note: { type: \"string\" },\r\n    etypeId: { type: \"integer\", minimum: 0 },\r\n    wtypeId: { type: \"integer\", minimum: 0 },\r\n    animationId: { type: \"integer\", minimum: 0 },\r\n    params: {\r\n      type: \"array\",\r\n      items: [\r\n        { type: \"integer\" }, // mhp\r\n        { type: \"integer\" }, // mmp\r\n        { type: \"integer\" }, // atk\r\n        { type: \"integer\" }, // def\r\n        { type: \"integer\" }, // mat\r\n        { type: \"integer\" }, // mdf\r\n        { type: \"integer\" }, // agi\r\n        { type: \"integer\" }, // luk\r\n      ],\r\n      minItems: 8,\r\n      maxItems: 8,\r\n    },\r\n    damage: {\r\n      type: \"object\",\r\n      properties: {\r\n        type: { type: \"integer\", minimum: 0 },\r\n        elementId: { type: \"integer\", minimum: 0 },\r\n        formula: { type: \"string\" },\r\n        variance: { type: \"integer\", minimum: 0, maximum: 100 },\r\n        critical: { type: \"boolean\", default: false },\r\n      },\r\n      required: [\"type\", \"elementId\", \"formula\", \"variance\", \"critical\"],\r\n    },\r\n    traits: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        properties: {\r\n          code: { type: \"integer\" },\r\n          dataId: { type: \"integer\" },\r\n          value: { type: \"integer\" },\r\n        },\r\n        required: [\"code\", \"dataId\", \"value\"],\r\n      },\r\n    },\r\n  },\r\n} as const satisfies JSONSchemaType<Data_Weapon>;\r\nexport default SCHEMA_DATA_WEAPON;\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { ParamArray } from \"../members\";\r\nimport type { Trait } from \"../trait\";\r\nimport type { Data_Enemy, DropItem, Enemy_Action } from \"./types\";\r\n\r\nconst SCHEMA_DATA_ENEMY = {\r\n  type: \"object\",\r\n  required: [\r\n    \"name\",\r\n    \"id\",\r\n    \"battlerName\",\r\n    \"battlerHue\",\r\n    \"exp\",\r\n    \"gold\",\r\n    \"note\",\r\n    \"params\",\r\n    \"dropItems\",\r\n    \"traits\",\r\n    \"actions\",\r\n  ],\r\n\r\n  properties: {\r\n    name: { type: \"string\" },\r\n    id: { type: \"integer\", minimum: 0 },\r\n    battlerHue: { type: \"integer\", minimum: 0 },\r\n    battlerName: { type: \"string\" },\r\n    exp: { type: \"integer\", minimum: 0 },\r\n    gold: { type: \"integer\", minimum: 0 },\r\n    note: { type: \"string\" },\r\n\r\n    params: {\r\n      type: \"array\",\r\n      items: [\r\n        { type: \"integer\" }, // mhp\r\n        { type: \"integer\" }, // mmp\r\n        { type: \"integer\" }, // atk\r\n        { type: \"integer\" }, // def\r\n        { type: \"integer\" }, // mat\r\n        { type: \"integer\" }, // mdf\r\n        { type: \"integer\" }, // agi\r\n        { type: \"integer\" }, // luk\r\n      ],\r\n      minItems: 8,\r\n      maxItems: 8,\r\n    } as const satisfies JSONSchemaType<ParamArray>,\r\n    actions: {\r\n      type: \"array\",\r\n\r\n      items: {\r\n        type: \"object\",\r\n        required: [\r\n          \"conditionParam1\",\r\n          \"conditionParam2\",\r\n          \"conditionType\",\r\n          \"skillId\",\r\n          \"rating\",\r\n        ],\r\n        properties: {\r\n          conditionParam1: { type: \"integer\" },\r\n          conditionParam2: { type: \"integer\" },\r\n          conditionType: { type: \"integer\" },\r\n          skillId: { type: \"integer\" },\r\n          rating: { type: \"integer\" },\r\n        },\r\n      },\r\n    } satisfies JSONSchemaType<Enemy_Action[]>,\r\n\r\n    traits: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        properties: {\r\n          code: { type: \"integer\" },\r\n          dataId: { type: \"integer\" },\r\n          value: { type: \"integer\" },\r\n        },\r\n        required: [\"code\", \"dataId\", \"value\"],\r\n      },\r\n    } satisfies JSONSchemaType<Trait[]>,\r\n\r\n    dropItems: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        properties: {\r\n          kind: { type: \"integer\" },\r\n          dataId: { type: \"integer\" },\r\n          denominator: { type: \"integer\", minimum: 0 },\r\n          rate: { type: \"number\" },\r\n        },\r\n        required: [\"kind\", \"dataId\", \"denominator\"],\r\n      },\r\n    } satisfies JSONSchemaType<DropItem[]>,\r\n  },\r\n} as const satisfies JSONSchemaType<Data_Enemy>;\r\n\r\nexport default SCHEMA_DATA_ENEMY;\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { Data_State } from \"./types\";\r\n\r\nconst SCHEMA_DATA_STATE = {\r\n  type: \"object\",\r\n  required: [\r\n    \"name\",\r\n    \"id\",\r\n    \"iconIndex\",\r\n    \"message1\",\r\n    \"message2\",\r\n    \"message3\",\r\n    \"message4\",\r\n    \"restriction\",\r\n    \"priority\",\r\n    \"motion\",\r\n    \"overlay\",\r\n    \"removeAtBattleEnd\",\r\n    \"removeByDamage\",\r\n    \"removeByWalking\",\r\n    \"removeByRestriction\",\r\n    \"autoRemovalTiming\",\r\n    \"minTurns\",\r\n    \"maxTurns\",\r\n    \"chanceByDamage\",\r\n    \"stepsToRemove\",\r\n    \"note\",\r\n  ],\r\n\r\n  properties: {\r\n    name: { type: \"string\" },\r\n    id: { type: \"integer\", minimum: 0 },\r\n    iconIndex: { type: \"integer\", minimum: 0 },\r\n\r\n    message1: { type: \"string\" },\r\n    message2: { type: \"string\" },\r\n    message3: { type: \"string\" },\r\n    message4: { type: \"string\" },\r\n\r\n    restriction: { type: \"integer\" },\r\n    priority: { type: \"integer\" },\r\n    motion: { type: \"integer\" },\r\n    overlay: { type: \"integer\" },\r\n\r\n    removeAtBattleEnd: { type: \"boolean\" },\r\n    removeByDamage: { type: \"boolean\" },\r\n\r\n    removeByWalking: { type: \"boolean\" },\r\n    removeByRestriction: { type: \"boolean\" },\r\n\r\n    messageType: { type: \"integer\" },\r\n    releaseByDamage: { type: \"boolean\" },\r\n    autoRemovalTiming: { type: \"integer\" },\r\n\r\n    minTurns: { type: \"integer\" },\r\n    maxTurns: { type: \"integer\" },\r\n\r\n    chanceByDamage: { type: \"integer\" },\r\n    stepsToRemove: { type: \"integer\" },\r\n    note: { type: \"string\" },\r\n\r\n    traits: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        properties: {\r\n          code: { type: \"integer\" },\r\n          dataId: { type: \"integer\" },\r\n          value: { type: \"integer\" },\r\n        },\r\n        required: [\"code\", \"dataId\", \"value\"],\r\n      },\r\n    } satisfies JSONSchemaType<Data_State[\"traits\"]>,\r\n  },\r\n} as const satisfies JSONSchemaType<Data_State>;\r\n\r\nexport default SCHEMA_DATA_STATE;\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { Data_Class } from \"./types\";\r\n\r\nconst SCHEMA_DATA_CLASS = {\r\n  type: \"object\",\r\n  required: [\r\n    \"name\",\r\n    \"id\",\r\n    \"note\",\r\n    \"expParams\",\r\n    \"params\",\r\n    \"learnings\",\r\n    \"traits\",\r\n  ],\r\n\r\n  properties: {\r\n    name: { type: \"string\" },\r\n    id: { type: \"integer\", minimum: 0 },\r\n    note: { type: \"string\" },\r\n\r\n    expParams: {\r\n      type: \"array\",\r\n      items: { type: \"integer\" },\r\n    },\r\n    params: {\r\n      type: \"array\",\r\n      items: [\r\n        { type: \"integer\" }, // mhp\r\n        { type: \"integer\" }, // mmp\r\n        { type: \"integer\" }, // atk\r\n        { type: \"integer\" }, // def\r\n        { type: \"integer\" }, // mat\r\n        { type: \"integer\" }, // mdf\r\n        { type: \"integer\" }, // agi\r\n        { type: \"integer\" }, // luk\r\n      ],\r\n      minItems: 8,\r\n      maxItems: 8,\r\n    } satisfies JSONSchemaType<Data_Class[\"params\"]>,\r\n    learnings: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        properties: {\r\n          level: { type: \"integer\" },\r\n          skillId: { type: \"integer\" },\r\n          note: { type: \"string\" },\r\n        },\r\n        required: [\"level\", \"skillId\"],\r\n        additionalProperties: false,\r\n      },\r\n    } satisfies JSONSchemaType<Data_Class[\"learnings\"]>,\r\n    traits: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        properties: {\r\n          code: { type: \"integer\" },\r\n          dataId: { type: \"integer\" },\r\n          value: { type: \"integer\" },\r\n        },\r\n        required: [\"code\", \"dataId\", \"value\"],\r\n        additionalProperties: false,\r\n      },\r\n    } satisfies JSONSchemaType<Data_Class[\"traits\"]>,\r\n  },\r\n\r\n  additionalProperties: false,\r\n} satisfies JSONSchemaType<Data_Class>;\r\nexport default SCHEMA_DATA_CLASS;\r\n","import type { NoteReadResult } from \"./types\";\r\n\r\nexport const createNoteEntity = (key: string, value: string): string => {\r\n  return `<${key}:${value}>`;\r\n};\r\n\r\nexport const makeRegex = () => /<([^<>:]{1,100}):([^>]{1,1000})>/g;\r\n\r\nexport const readNoteObject = <Result, T extends { note: string }>(\r\n  data: T,\r\n  fn: (key: string, value: string, data: T) => Result\r\n): Result[] => readNoteEx(data.note, (key, value) => fn(key, value, data));\r\n\r\nexport const readNote = (note: string): NoteReadResult[] => {\r\n  return readNoteEx(note, (key, value) => [key, value]);\r\n};\r\n/**\r\n * note文字列を解析し、キーと値のペアを取得します。\r\n * タグが閉じられていない場合、その要素は無視されます。\r\n */\r\nconst readNoteEx = <Result>(\r\n  note: string,\r\n  fn: (key: string, value: string) => Result\r\n): Result[] => {\r\n  const regex = makeRegex();\r\n  return Array.from(note.matchAll(regex), (match) => fn(match[1], match[2]));\r\n};\r\n\r\n/**\r\n *\r\n * @param note\r\n * @param transformFunction この関数の戻り値でvalueを置き換える\r\n * @returns\r\n */\r\nexport const replaceNote = (\r\n  note: string,\r\n  transformFunction: (key: string, value: string) => string\r\n): string => {\r\n  if (note.length >= 3000) {\r\n    throw new Error(\"Note text is too long. Please shorten it.\");\r\n  }\r\n\r\n  return note.replaceAll(\r\n    makeRegex(),\r\n    (_subString, key: string, value: string) => {\r\n      const newText = transformFunction(key, value);\r\n      if (newText.length >= 1000) {\r\n        throw new Error(\"Note text is too long. Please shorten it.\");\r\n      }\r\n      return createNoteEntity(key, newText);\r\n    }\r\n  );\r\n};\r\n\r\nexport const getNoteValue = (\r\n  note: string,\r\n  targetKey: string\r\n): string | undefined => {\r\n  const regex = makeRegex();\r\n  const match = Array.from(note.matchAll(regex)).find(\r\n    (m) => m[1] === targetKey\r\n  );\r\n  return match ? match[2] : undefined;\r\n};\r\n\r\nexport const setNoteValue = (\r\n  note: string,\r\n  targetKey: string,\r\n  newValue: string\r\n): string => {\r\n  const regex = makeRegex();\r\n\r\n  return note.replace(regex, (match, key: string) => {\r\n    if (key === targetKey) {\r\n      return createNoteEntity(key, newValue); // 対象キーの場合のみ値を差し替え\r\n    }\r\n    return match; // 対象外はそのまま\r\n  });\r\n};\r\n","export const MODULE_DATA = \"data\" as const;\r\n\r\nexport const SRC_DATA_ACTOR = \"actor\" as const;\r\nexport const SRC_DATA_MAP = \"map\" as const;\r\nexport const SRC_DATA_ENEMY = \"enemy\" as const;\r\nexport const SRC_DATA_STATE = \"state\" as const;\r\nexport const SRC_DATA_SKILL = \"skill\" as const;\r\nexport const SRC_DATA_ITEMS = \"item\" as const;\r\nexport const SRC_DATA_WEAPON = \"weapon\" as const;\r\nexport const SRC_DATA_ARMOR = \"armor\" as const;\r\nexport const SRC_DATA_CLASS = \"class\" as const;\r\nexport const SRC_DATA_COMMON_EVNET = \"common_event\" as const;\r\nexport const SRC_DATA_TROOP = \"troop\" as const;\r\n","import type {\r\n  SourceId_SystemArmorTypes,\r\n  SourceId_SystemElements,\r\n  SourceId_SystemEquipTypes,\r\n  SourceId_SystemSkillTypes,\r\n  SourceId_SystemWeaponTypes,\r\n} from \"@RpgTypes/system\";\r\nimport type { SourceId_DataState, SourceId_DataSkill } from \"./main\";\r\nimport {\r\n  TRAIT_ELEMENT_RATE,\r\n  TRAIT_DEBUFF_RATE,\r\n  TRAIT_STATE_RATE,\r\n  TRAIT_STATE_RESIST,\r\n  TRAIT_PARAM,\r\n  TRAIT_XPARAM,\r\n  TRAIT_SPARAM,\r\n  TRAIT_ATTACK_ELEMENT,\r\n  TRAIT_ATTACK_STATE,\r\n  TRAIT_ATTACK_SPEED,\r\n  TRAIT_ATTACK_TIMES,\r\n  TRAIT_ATTACK_SKILL,\r\n  TRAIT_ACTION_PLUS,\r\n  TRAIT_SPECIAL_FLAG,\r\n  TRAIT_COLLAPSE_TYPE,\r\n  TRAIT_PARTY_ABILITY,\r\n  TRAIT_EQUIP_ARMOR_TYPE,\r\n  TRAIT_EQUIP_LOCK,\r\n  TRAIT_EQUIP_SEAL,\r\n  TRAIT_EQUIP_WEAPON_TYPE,\r\n  TRAIT_SKILL_ADD,\r\n  TRAIT_SKILL_SEAL,\r\n  TRAIT_SLOT_TYPE,\r\n  TRAIT_SKILL_TYPE_ADD,\r\n  TRAIT_SKILL_TYPE_SEAL,\r\n} from \"./main/traitContainers/trait/core/constants\";\r\nimport type {\r\n  CollapsOptionLabels,\r\n  ExtraParamLabels,\r\n  PartyAbilityOptionLabels,\r\n  RawTraitLabel,\r\n  RegularParamLabels,\r\n  SourceId_TraitCollaps,\r\n  SourceId_TraitExtraParam,\r\n  SourceId_TraitPartyAbility,\r\n  SourceId_TraitRegularParam,\r\n  SourceId_TraitSpecialFlag,\r\n  SourceId_TraitSpecialParam,\r\n  SpecialFlagOptions,\r\n  SpecialParamLabels,\r\n  TraitLabelWithOption,\r\n} from \"./main/traitContainers/trait/core/items\";\r\nimport type { TraitLabelSet } from \"./main/traitContainers/trait/core/labelSet\";\r\nimport type { TraitFormat } from \"./main/traitContainers/trait/core/types\";\r\n\r\nexport const resolveTraitLabels = (labels: TraitLabelSet): TraitFormat[] => {\r\n  return [\r\n    elementRate(labels.elementRate),\r\n    debuffRate(labels.debuffRate),\r\n    stateRate(labels.stateRate),\r\n    stateResist(labels.stateResist),\r\n\r\n    regularParam(labels.regularParam),\r\n    extraParam(labels.extraParam),\r\n    specialParam(labels.specialParam),\r\n    attackElement(labels.attackElement),\r\n    atttackState(labels.attackState),\r\n    attackSpeed(labels.attackSpeed),\r\n    attackTimes(labels.attackTimes),\r\n    attackSkill(labels.attackSkill),\r\n\r\n    skillTypeAdd(labels.skillTypeAdd),\r\n    skillTypeSeal(labels.skillTypeSeal),\r\n    skillAdd(labels.skillAdd),\r\n    skillSeal(labels.skillSeal),\r\n\r\n    equipWeaponType(labels.equipWeaponType),\r\n    equipArmorType(labels.equipArmorType),\r\n    equipLock(labels.equipLock),\r\n    equipSeal(labels.equipSeal),\r\n    slotType(labels.slotType),\r\n\r\n    actionPlus(labels.actionPlus),\r\n    specialFlag(labels.specialFlag),\r\n    collaps(labels.collaps),\r\n    partyAbility(labels.partyAbility),\r\n  ];\r\n};\r\n\r\nconst regularParamSourceId = (): SourceId_TraitRegularParam => ({\r\n  author: \"rmmz\",\r\n  module: \"trait\",\r\n  kind: \"params\",\r\n});\r\n\r\nconst elementRate = (label: RawTraitLabel): TraitFormat => ({\r\n  pattern: label.format,\r\n  label: label.title,\r\n  kindId: TRAIT_ELEMENT_RATE,\r\n  dataSource: systemElementsSourceId(),\r\n});\r\n\r\nconst debuffRate = (label: RawTraitLabel): TraitFormat => ({\r\n  pattern: label.format,\r\n  label: label.title,\r\n  kindId: TRAIT_DEBUFF_RATE,\r\n  dataSource: regularParamSourceId(),\r\n});\r\n\r\nconst stateRate = (label: RawTraitLabel): TraitFormat => ({\r\n  pattern: label.format,\r\n  label: label.title,\r\n  kindId: TRAIT_STATE_RATE,\r\n  dataSource: stateSourceId(),\r\n});\r\n\r\nconst stateResist = (label: RawTraitLabel): TraitFormat => ({\r\n  pattern: label.format,\r\n  label: label.title,\r\n  kindId: TRAIT_STATE_RESIST,\r\n  dataSource: stateSourceId(),\r\n});\r\n\r\nconst regularParam = (\r\n  labels: TraitLabelWithOption<RegularParamLabels>\r\n): TraitFormat => ({\r\n  pattern: labels.format,\r\n  label: labels.title,\r\n  kindId: TRAIT_PARAM,\r\n  dataSource: regularParamSourceId(),\r\n});\r\n\r\nconst extraParam = (\r\n  labels: TraitLabelWithOption<ExtraParamLabels>\r\n): TraitFormat => ({\r\n  pattern: labels.format,\r\n  label: labels.title,\r\n  kindId: TRAIT_XPARAM,\r\n  dataSource: {\r\n    author: \"rmmz\",\r\n    module: \"trait\",\r\n    kind: \"xparams\",\r\n  } satisfies SourceId_TraitExtraParam,\r\n});\r\n\r\nconst specialParam = (\r\n  labels: TraitLabelWithOption<SpecialParamLabels>\r\n): TraitFormat => ({\r\n  pattern: labels.format,\r\n  label: labels.title,\r\n  kindId: TRAIT_SPARAM,\r\n  dataSource: {\r\n    author: \"rmmz\",\r\n    module: \"trait\",\r\n    kind: \"sparams\",\r\n  } satisfies SourceId_TraitSpecialParam,\r\n});\r\n\r\nconst attackElement = (label: RawTraitLabel): TraitFormat => ({\r\n  pattern: label.format,\r\n  label: label.title,\r\n  kindId: TRAIT_ATTACK_ELEMENT,\r\n  dataSource: systemElementsSourceId(),\r\n});\r\n\r\nconst atttackState = (label: RawTraitLabel): TraitFormat => ({\r\n  pattern: label.format,\r\n  label: label.title,\r\n  kindId: TRAIT_ATTACK_STATE,\r\n  dataSource: stateSourceId(),\r\n});\r\n\r\nconst attackSpeed = (label: RawTraitLabel): TraitFormat => ({\r\n  pattern: label.format,\r\n  label: label.title,\r\n  kindId: TRAIT_ATTACK_SPEED,\r\n});\r\n\r\nconst attackTimes = (label: RawTraitLabel): TraitFormat => ({\r\n  pattern: label.format,\r\n  label: label.title,\r\n  kindId: TRAIT_ATTACK_TIMES,\r\n});\r\n\r\nconst attackSkill = (label: RawTraitLabel): TraitFormat => ({\r\n  pattern: label.format,\r\n  label: label.title,\r\n  kindId: TRAIT_ATTACK_SKILL,\r\n  dataSource: skillSourceId(),\r\n});\r\n\r\nconst skillTypeAdd = (label: RawTraitLabel): TraitFormat => ({\r\n  pattern: label.format,\r\n  label: label.title,\r\n  kindId: TRAIT_SKILL_TYPE_ADD,\r\n  dataSource: systemSkillTypesSourceId(),\r\n});\r\n\r\nconst skillTypeSeal = (label: RawTraitLabel): TraitFormat => ({\r\n  pattern: label.format,\r\n  label: label.title,\r\n  kindId: TRAIT_SKILL_TYPE_SEAL,\r\n  dataSource: systemSkillTypesSourceId(),\r\n});\r\n\r\nconst skillAdd = (label: RawTraitLabel): TraitFormat => ({\r\n  pattern: label.format,\r\n  label: label.title,\r\n  kindId: TRAIT_SKILL_ADD,\r\n  dataSource: skillSourceId(),\r\n});\r\n\r\nconst skillSeal = (label: RawTraitLabel): TraitFormat => ({\r\n  pattern: label.format,\r\n  label: label.title,\r\n  kindId: TRAIT_SKILL_SEAL,\r\n  dataSource: skillSourceId(),\r\n});\r\n\r\nconst equipWeaponType = (label: RawTraitLabel): TraitFormat => ({\r\n  pattern: label.format,\r\n  label: label.title,\r\n  kindId: TRAIT_EQUIP_WEAPON_TYPE,\r\n  dataSource: systemWeaponTypesSourceId(),\r\n});\r\n\r\nconst equipArmorType = (label: RawTraitLabel): TraitFormat => ({\r\n  pattern: label.format,\r\n  label: label.title,\r\n  kindId: TRAIT_EQUIP_ARMOR_TYPE,\r\n  dataSource: systemArmorTypesSourceId(),\r\n});\r\n\r\nconst equipLock = (label: RawTraitLabel): TraitFormat => ({\r\n  pattern: label.format,\r\n  label: label.title,\r\n  kindId: TRAIT_EQUIP_LOCK,\r\n  dataSource: systemEquipTypesSourceId(),\r\n});\r\n\r\nconst equipSeal = (label: RawTraitLabel): TraitFormat => ({\r\n  pattern: label.format,\r\n  label: label.title,\r\n  kindId: TRAIT_EQUIP_SEAL,\r\n  dataSource: systemEquipTypesSourceId(),\r\n});\r\n\r\nconst slotType = (label: RawTraitLabel): TraitFormat => ({\r\n  pattern: label.format,\r\n  label: label.title,\r\n  kindId: TRAIT_SLOT_TYPE,\r\n  dataSource: systemEquipTypesSourceId(),\r\n});\r\n\r\nconst actionPlus = (label: RawTraitLabel): TraitFormat => ({\r\n  pattern: label.format,\r\n  label: label.title,\r\n  kindId: TRAIT_ACTION_PLUS,\r\n});\r\n\r\nconst specialFlag = (\r\n  labels: TraitLabelWithOption<SpecialFlagOptions>\r\n): TraitFormat => ({\r\n  pattern: labels.format,\r\n  label: labels.title,\r\n  kindId: TRAIT_SPECIAL_FLAG,\r\n  dataSource: {\r\n    author: \"rmmz\",\r\n    module: \"trait\",\r\n    kind: \"sflag\",\r\n  } satisfies SourceId_TraitSpecialFlag,\r\n});\r\n\r\nconst collaps = (\r\n  label: TraitLabelWithOption<CollapsOptionLabels>\r\n): TraitFormat => ({\r\n  pattern: label.format,\r\n  label: label.title,\r\n  kindId: TRAIT_COLLAPSE_TYPE,\r\n  dataSource: {\r\n    author: \"rmmz\",\r\n    module: \"trait\",\r\n    kind: \"collaps\",\r\n  } satisfies SourceId_TraitCollaps,\r\n});\r\n\r\nconst partyAbility = (\r\n  labels: TraitLabelWithOption<PartyAbilityOptionLabels>\r\n): TraitFormat => ({\r\n  pattern: labels.format,\r\n  label: labels.title,\r\n  kindId: TRAIT_PARTY_ABILITY,\r\n  dataSource: {\r\n    author: \"rmmz\",\r\n    module: \"trait\",\r\n    kind: \"partyAbility\",\r\n  } satisfies SourceId_TraitPartyAbility,\r\n});\r\n\r\nconst stateSourceId = (): SourceId_DataState => ({\r\n  author: \"rmmz\",\r\n  module: \"data\",\r\n  kind: \"state\",\r\n});\r\n\r\nconst skillSourceId = (): SourceId_DataSkill => ({\r\n  author: \"rmmz\",\r\n  module: \"data\",\r\n  kind: \"skill\",\r\n});\r\n\r\nconst systemElementsSourceId = (): SourceId_SystemElements => ({\r\n  author: \"rmmz\",\r\n  module: \"system\",\r\n  kind: \"elements\",\r\n});\r\n\r\nconst systemSkillTypesSourceId = (): SourceId_SystemSkillTypes => ({\r\n  author: \"rmmz\",\r\n  module: \"system\",\r\n  kind: \"skillTypes\",\r\n});\r\n\r\nconst systemWeaponTypesSourceId = (): SourceId_SystemWeaponTypes => ({\r\n  author: \"rmmz\",\r\n  module: \"system\",\r\n  kind: \"weaponTypes\",\r\n});\r\n\r\nconst systemArmorTypesSourceId = (): SourceId_SystemArmorTypes => ({\r\n  author: \"rmmz\",\r\n  module: \"system\",\r\n  kind: \"armorTypes\",\r\n});\r\n\r\nconst systemEquipTypesSourceId = (): SourceId_SystemEquipTypes => ({\r\n  author: \"rmmz\",\r\n  module: \"system\",\r\n  kind: \"equipTypes\",\r\n});\r\n","import type { GlobalLabel } from \"./globalLabels\";\r\n\r\nexport const DEFAULT_GLOBAL_LABELS = {\r\n  id: \"識別子\",\r\n  name: \"名前\",\r\n  note: \"メモ\",\r\n  description: \"説明\",\r\n  iconIndex: \"アイコンインデックス\",\r\n  occasion: \"使用タイミング\",\r\n  params: \"パラメータ\",\r\n  repeats: \"繰り返し回数\",\r\n  scope: \"範囲\",\r\n  speed: \"速度補正\",\r\n  successRate: \"成功率\",\r\n  animationId: \"アニメーションID\",\r\n  displayType: \"表示タイプ\",\r\n  characterIndex: \"キャラクターインデックス\",\r\n  characterName: \"キャラクター名\",\r\n  effectName: \"効果名\",\r\n  faceIndex: \"顔グラフィックインデックス\",\r\n  faceName: \"顔グラフィック名\",\r\n  flashTimings: \"フラッシュタイミング\",\r\n  list: \"リスト\",\r\n  messageType: \"メッセージタイプ\",\r\n  offsetX: \"オフセットX\",\r\n  offsetY: \"オフセットY\",\r\n  overlay: \"オーバーレイ\",\r\n  priority: \"優先度\",\r\n  restriction: \"制約\",\r\n  rotation: \"回転\",\r\n  scale: \"スケール\",\r\n  soundTimings: \"サウンドタイミング\",\r\n  stepsToRemove: \"解除までの歩数\",\r\n  type: \"タイプ\",\r\n  variance: \"分散度\",\r\n  unknownCode: \"不明なコード\",\r\n  content: \"内容\",\r\n  apply: \"適用\",\r\n  turn: \"ターン\",\r\n  commonEvent: \"コモンイベント\",\r\n  normal: \"通常\",\r\n  dualWield: \"二刀流\",\r\n  bossCollaps: \"ボス崩壊\",\r\n  instantCollaps: \"即時崩壊\",\r\n  noneCollaps: \"崩壊なし\",\r\n  escape: \"逃走\",\r\n} as const satisfies GlobalLabel;\r\n","import {\r\n  DEFAULT_DAMAGE_LABELS,\r\n  LABEL_SET_DATA,\r\n  LABEL_SET_TRAIT,\r\n  LABEL_SET_ITEM_EFFECT,\r\n} from \"./data\";\r\nimport type { LabelRegistry } from \"./labelRegistry\";\r\nimport { DEFAULT_GLOBAL_LABELS } from \"./labels\";\r\n\r\nexport const labelsRegistry = () => {\r\n  return {\r\n    rpg: {\r\n      damage: DEFAULT_DAMAGE_LABELS,\r\n      data: LABEL_SET_DATA,\r\n      traits: LABEL_SET_TRAIT,\r\n      itemEffect: LABEL_SET_ITEM_EFFECT,\r\n    },\r\n    global: DEFAULT_GLOBAL_LABELS,\r\n  } satisfies LabelRegistry;\r\n};\r\n","export interface System_Advanced {\r\n  gameId: number;\r\n  screenWidth: number;\r\n  screenHeight: number;\r\n  uiAreaWidth: number;\r\n  uiAreaHeight: number;\r\n  windowOpacity: number;\r\n  screenScale: number;\r\n\r\n  numberFontFilename: string;\r\n  mainFontFilename: string;\r\n  fallbackFonts: string;\r\n  fontSize: number;\r\n}\r\n\r\nexport const makeSystemAdvanced = (\r\n  advanced: Partial<System_Advanced> = {}\r\n): System_Advanced => {\r\n  return {\r\n    gameId: advanced.gameId ?? 0,\r\n    screenWidth: advanced.screenWidth ?? 0,\r\n    screenHeight: advanced.screenHeight ?? 0,\r\n    uiAreaWidth: advanced.uiAreaWidth ?? 0,\r\n    uiAreaHeight: advanced.uiAreaHeight ?? 0,\r\n    windowOpacity: advanced.windowOpacity ?? 0,\r\n    screenScale: advanced.screenScale ?? 1,\r\n\r\n    numberFontFilename: advanced.numberFontFilename ?? \"\",\r\n    mainFontFilename: advanced.mainFontFilename ?? \"\",\r\n    fallbackFonts: advanced.fallbackFonts ?? \"\",\r\n    fontSize: advanced.fontSize ?? 28,\r\n  };\r\n};\r\n","export const isValidNumber = (val: unknown): val is number => {\r\n  return typeof val === \"number\" && !Number.isNaN(val);\r\n};\r\n","import type { AudioFileParams } from \"./audioFileParams\";\r\n\r\nexport const makeAudioFileParams = (\r\n  audioFileParams: Partial<AudioFileParams> = {}\r\n): AudioFileParams => {\r\n  return {\r\n    name: audioFileParams.name ?? \"\",\r\n    volume: audioFileParams.volume ?? 100,\r\n    pitch: audioFileParams.pitch ?? 100,\r\n    pan: audioFileParams.pan ?? 0,\r\n  };\r\n};\r\n","import { makeAudioFileParams } from \"@RpgTypes/utils\";\r\nimport type { System_SoundsArray, System_SoundsObject } from \"./types\";\r\n\r\nexport const makeSoundsArray = (\r\n  sounds: Partial<System_SoundsObject> = {}\r\n): System_SoundsArray => {\r\n  return [\r\n    makeAudioFileParams(sounds.cursor),\r\n    makeAudioFileParams(sounds.ok),\r\n    makeAudioFileParams(sounds.cancel),\r\n    makeAudioFileParams(sounds.buzzer),\r\n    makeAudioFileParams(sounds.equip),\r\n    makeAudioFileParams(sounds.save),\r\n    makeAudioFileParams(sounds.load),\r\n    makeAudioFileParams(sounds.battleStart),\r\n    makeAudioFileParams(sounds.escape),\r\n    makeAudioFileParams(sounds.enemyAttack),\r\n    makeAudioFileParams(sounds.enemyDamage),\r\n    makeAudioFileParams(sounds.enemyCollapse),\r\n    makeAudioFileParams(sounds.bossCollapes1),\r\n    makeAudioFileParams(sounds.bossCollapes2),\r\n    makeAudioFileParams(sounds.actorDamage),\r\n    makeAudioFileParams(sounds.actorCollapse),\r\n    makeAudioFileParams(sounds.playRecovery),\r\n    makeAudioFileParams(sounds.playMiss),\r\n    makeAudioFileParams(sounds.playEvasion),\r\n    makeAudioFileParams(sounds.playMagicEvasion),\r\n    makeAudioFileParams(sounds.playReflection),\r\n    makeAudioFileParams(sounds.shop),\r\n    makeAudioFileParams(sounds.useItem),\r\n    makeAudioFileParams(sounds.useSkill),\r\n  ];\r\n};\r\n\r\nexport const makeSoundsObject = (\r\n  sounds: System_SoundsArray\r\n): System_SoundsObject => {\r\n  return {\r\n    cursor: sounds[0],\r\n    ok: sounds[1],\r\n    cancel: sounds[2],\r\n    buzzer: sounds[3],\r\n    equip: sounds[4],\r\n    save: sounds[5],\r\n    load: sounds[6],\r\n    battleStart: sounds[7],\r\n    escape: sounds[8],\r\n    enemyAttack: sounds[9],\r\n    enemyDamage: sounds[10],\r\n    enemyCollapse: sounds[11],\r\n    bossCollapes1: sounds[12],\r\n    bossCollapes2: sounds[13],\r\n    actorDamage: sounds[14],\r\n    actorCollapse: sounds[15],\r\n    playRecovery: sounds[16],\r\n    playMiss: sounds[17],\r\n    playEvasion: sounds[18],\r\n    playMagicEvasion: sounds[19],\r\n    playReflection: sounds[20],\r\n    shop: sounds[21],\r\n    useItem: sounds[22],\r\n    useSkill: sounds[23],\r\n  };\r\n};\r\n","import type { AudioFileParams } from \"@RpgTypes/utils\";\r\nimport type { JSONSchemaType } from \"ajv\";\r\nimport type { System_AudioFiles } from \"./types\";\r\n\r\nconst audioFileParamsSchema = {\r\n  type: \"object\",\r\n  properties: {\r\n    name: { type: \"string\" },\r\n    volume: { type: \"integer\", minimum: 0, maximum: 100 },\r\n    pitch: { type: \"integer\", minimum: 0, maximum: 100 },\r\n    pan: { type: \"integer\", minimum: -100, maximum: 100 },\r\n  },\r\n  required: [\"name\", \"volume\", \"pitch\", \"pan\"],\r\n  additionalProperties: false,\r\n} as const satisfies JSONSchemaType<AudioFileParams>;\r\n\r\nexport const SCHEMA_SYSTEM_AUDIOFILES = {\r\n  additionalProperties: false,\r\n  type: \"object\",\r\n  required: [\r\n    \"battleBgm\",\r\n    \"victoryMe\",\r\n    \"gameoverMe\",\r\n    \"titleBgm\",\r\n    \"defeatMe\",\r\n    \"sounds\",\r\n  ],\r\n  properties: {\r\n    battleBgm: audioFileParamsSchema,\r\n    victoryMe: audioFileParamsSchema,\r\n    gameoverMe: audioFileParamsSchema,\r\n    titleBgm: audioFileParamsSchema,\r\n    defeatMe: audioFileParamsSchema,\r\n    sounds: {\r\n      type: \"array\",\r\n      items: audioFileParamsSchema,\r\n      minItems: 24,\r\n      maxItems: 24,\r\n    },\r\n  },\r\n} as const satisfies JSONSchemaType<System_AudioFiles>;\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { BattleRuleRMMZ } from \"./types\";\r\n\r\nexport const SCHEMA_SYSTEM_BATTLE_RULE_RMMZ = {\r\n  type: \"object\",\r\n  additionalProperties: false,\r\n  required: [\"magicSkills\", \"battleSystem\"],\r\n  properties: {\r\n    magicSkills: {\r\n      type: \"array\",\r\n      items: { type: \"number\" },\r\n      minItems: 0,\r\n      uniqueItems: true,\r\n    },\r\n    battleSystem: { type: \"number\" },\r\n  },\r\n} as const satisfies JSONSchemaType<BattleRuleRMMZ>;\r\n","import type { System_BooleanGameMenuOptions } from \"./types\";\r\n\r\nexport const getItemCommandEnabled = (\r\n  system: System_BooleanGameMenuOptions\r\n): boolean => {\r\n  return system.menuCommands[0];\r\n};\r\n\r\nexport const getSkillCommandEnabled = (\r\n  system: System_BooleanGameMenuOptions\r\n): boolean => {\r\n  return system.menuCommands[1];\r\n};\r\n\r\nexport const getEquipCommandEnabled = (\r\n  system: System_BooleanGameMenuOptions\r\n): boolean => {\r\n  return system.menuCommands[2];\r\n};\r\n\r\nexport const getStatusCommandEnabled = (\r\n  system: System_BooleanGameMenuOptions\r\n): boolean => {\r\n  return system.menuCommands[3];\r\n};\r\n\r\nexport const getFormationCommandEnabled = (\r\n  system: System_BooleanGameMenuOptions\r\n): boolean => {\r\n  return system.menuCommands[4];\r\n};\r\n\r\nexport const getSaveCommandEnabled = (\r\n  system: System_BooleanGameMenuOptions\r\n): boolean => {\r\n  return system.menuCommands[5];\r\n};\r\n\r\nexport const getItemCategoryEnabled = (\r\n  system: System_BooleanGameMenuOptions\r\n): boolean => {\r\n  return system.itemCategories[0];\r\n};\r\n\r\nexport const getWeaponCategoryEnabled = (\r\n  system: System_BooleanGameMenuOptions\r\n): boolean => {\r\n  return system.itemCategories[1];\r\n};\r\n\r\nexport const getArmorCategoryEnabled = (\r\n  system: System_BooleanGameMenuOptions\r\n): boolean => {\r\n  return system.itemCategories[2];\r\n};\r\n\r\nexport const getKeyItemCategoryEnabled = (\r\n  system: System_BooleanGameMenuOptions\r\n): boolean => {\r\n  return system.itemCategories[3];\r\n};\r\n","import type { ItemCategories, ItemCategoriesArray } from \"./types\";\r\n\r\nexport const makeItemCategories = (\r\n  param: Partial<ItemCategories> = {}\r\n): ItemCategoriesArray => {\r\n  return [\r\n    param.item ?? true,\r\n    param.weapon ?? true,\r\n    param.armor ?? true,\r\n    param.keyItem ?? true,\r\n  ];\r\n};\r\nexport const makeItemCategoriesFromArray = (\r\n  param: ItemCategoriesArray\r\n): ItemCategories => {\r\n  return {\r\n    item: param[0],\r\n    weapon: param[1],\r\n    armor: param[2],\r\n    keyItem: param[3],\r\n  };\r\n};\r\n","import type { MenuCommandsEnabledArray } from \"./types\";\r\nimport type { MenuCommandsEnabled } from \"./types\";\r\n\r\nexport const makeMenuCommandsEnabled = (\r\n  param: Partial<MenuCommandsEnabled> = {}\r\n): MenuCommandsEnabledArray => {\r\n  return [\r\n    param.item ?? true,\r\n    param.skill ?? true,\r\n    param.equip ?? true,\r\n    param.status ?? true,\r\n    param.formation ?? true,\r\n    param.save ?? true,\r\n  ];\r\n};\r\n\r\nexport const makeMenuCommandsEnabledFromArray = (\r\n  array: MenuCommandsEnabledArray\r\n): MenuCommandsEnabled => {\r\n  return {\r\n    item: array[0],\r\n    skill: array[1],\r\n    equip: array[2],\r\n    status: array[3],\r\n    formation: array[4],\r\n    save: array[5],\r\n  };\r\n};\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport SCHEMA_SYSTEM_ITEM_CATEGORIES from \"./itemCategories/schema\";\r\nimport SCHEMA_SYSTEM_MENU_COMMANDS_ENABLED from \"./menuCommands/schema\";\r\nimport type { System_BooleanGameMenuOptions } from \"./types\";\r\n\r\nexport const SCHEMA_SYSTEM_BOOLEAN_GAMEMENU_OPTIONS = {\r\n  required: [\"itemCategories\", \"menuCommands\"],\r\n  additionalProperties: false,\r\n  type: \"object\",\r\n  properties: {\r\n    itemCategories: SCHEMA_SYSTEM_ITEM_CATEGORIES,\r\n    menuCommands: SCHEMA_SYSTEM_MENU_COMMANDS_ENABLED,\r\n  },\r\n} as const satisfies JSONSchemaType<\r\n  Record<keyof System_BooleanGameMenuOptions, boolean[]>\r\n>;\r\n","import type { JSONSchemaType } from \"ajv\";\r\n\r\nconst SCHEMA_SYSTEM_ITEM_CATEGORIES = {\r\n  type: \"array\",\r\n  maxItems: 4,\r\n  minItems: 4,\r\n  items: {\r\n    type: \"boolean\",\r\n  },\r\n} as const satisfies JSONSchemaType<boolean[]>;\r\n\r\nexport default SCHEMA_SYSTEM_ITEM_CATEGORIES;\r\n","import type { JSONSchemaType } from \"ajv\";\r\n\r\nconst SCHEMA_SYSTEM_MENU_COMMANDS_ENABLED = {\r\n  type: \"array\",\r\n  maxItems: 6,\r\n  minItems: 6,\r\n  items: {\r\n    type: \"boolean\",\r\n  },\r\n} as const satisfies JSONSchemaType<boolean[]>;\r\n\r\nexport default SCHEMA_SYSTEM_MENU_COMMANDS_ENABLED;\r\n","import type { System_BooleanGameOptions } from \"./types\";\r\n\r\nexport const makeBooleanOptions = (\r\n  options: Partial<System_BooleanGameOptions> = {}\r\n): System_BooleanGameOptions => {\r\n  return {\r\n    optAutosave: options.optAutosave ?? true,\r\n    optDisplayTp: options.optDisplayTp ?? true,\r\n    optDrawTitle: options.optDrawTitle ?? true,\r\n    optExtraExp: options.optExtraExp ?? true,\r\n    optFloorDeath: options.optFloorDeath ?? true,\r\n    optFollowers: options.optFollowers ?? true,\r\n    optKeyItemsNumber: options.optKeyItemsNumber ?? true,\r\n    optSideView: options.optSideView ?? true,\r\n    optSlipDeath: options.optSlipDeath ?? true,\r\n    optTransparent: options.optTransparent ?? true,\r\n    optMessageSkip: options.optMessageSkip ?? true,\r\n    optSplashScreen: options.optSplashScreen ?? true,\r\n  } satisfies Record<keyof System_BooleanGameOptions, boolean>;\r\n};\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { System_BooleanGameOptions } from \"./types\";\r\n\r\nconst SCHEMA_BOOLEAN = {\r\n  type: \"boolean\",\r\n} as const satisfies JSONSchemaType<boolean>;\r\n\r\nexport const SCHEMA_SYSTEM_BOOLEAN_OPTIONS = {\r\n  type: \"object\",\r\n  additionalProperties: false,\r\n  required: [\r\n    \"optAutosave\",\r\n    \"optDisplayTp\",\r\n    \"optDrawTitle\",\r\n    \"optExtraExp\",\r\n    \"optFloorDeath\",\r\n    \"optFollowers\",\r\n    \"optKeyItemsNumber\",\r\n    \"optSideView\",\r\n    \"optSlipDeath\",\r\n    \"optTransparent\",\r\n    \"optMessageSkip\",\r\n    \"optSplashScreen\",\r\n  ] satisfies Array<keyof System_BooleanGameOptions>,\r\n  properties: {\r\n    optAutosave: SCHEMA_BOOLEAN,\r\n    optDisplayTp: SCHEMA_BOOLEAN,\r\n    optDrawTitle: SCHEMA_BOOLEAN,\r\n    optExtraExp: SCHEMA_BOOLEAN,\r\n    optFloorDeath: SCHEMA_BOOLEAN,\r\n    optFollowers: SCHEMA_BOOLEAN,\r\n    optKeyItemsNumber: SCHEMA_BOOLEAN,\r\n    optSideView: SCHEMA_BOOLEAN,\r\n    optSlipDeath: SCHEMA_BOOLEAN,\r\n    optTransparent: SCHEMA_BOOLEAN,\r\n    optMessageSkip: SCHEMA_BOOLEAN,\r\n    optSplashScreen: SCHEMA_BOOLEAN,\r\n  },\r\n} as const satisfies JSONSchemaType<System_BooleanGameOptions>;\r\n","import type { System_GameInitial } from \"./types\";\r\n\r\nexport const makeGameInitial = (\r\n  gameInitial: Partial<System_GameInitial> = {}\r\n): System_GameInitial => ({\r\n  startMapId: gameInitial.startMapId ?? 0,\r\n  startX: gameInitial.startX ?? 0,\r\n  startY: gameInitial.startY ?? 0,\r\n  partyMembersArray: gameInitial.partyMembersArray\r\n    ? Array.from(gameInitial.partyMembersArray)\r\n    : [1],\r\n});\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { System_GameInitial } from \"./types\";\r\n\r\nexport const SCHEMA_SYSTEM_GAME_INITIAL = {\r\n  additionalProperties: false,\r\n  type: \"object\",\r\n  required: [\"startMapId\", \"startX\", \"startY\", \"partyMembersArray\"],\r\n  properties: {\r\n    startMapId: { type: \"integer\", minimum: 0 },\r\n    startX: { type: \"integer\", minimum: 0 },\r\n    startY: { type: \"integer\", minimum: 0 },\r\n    partyMembersArray: {\r\n      type: \"array\",\r\n      items: { type: \"integer\", minimum: 0 },\r\n    },\r\n  },\r\n} as const satisfies JSONSchemaType<System_GameInitial>;\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { System_ImageSize, System_TitleImages } from \"./types\";\r\n\r\nexport const SCHEMA_SYSTEM_IMAGE_SIZE = {\r\n  additionalProperties: false,\r\n  type: \"object\",\r\n  required: [\"tileSize\", \"faceSize\", \"iconSize\"],\r\n  properties: {\r\n    tileSize: { type: \"integer\", minimum: 0 },\r\n    faceSize: { type: \"integer\", minimum: 0 },\r\n    iconSize: { type: \"integer\", minimum: 0 },\r\n  },\r\n} as const satisfies JSONSchemaType<System_ImageSize>;\r\n\r\nexport const SCHEMA_SYSTEM_TITLE_IMAGES = {\r\n  additionalProperties: false,\r\n\r\n  type: \"object\",\r\n  required: [\"title1Name\", \"title2Name\"],\r\n  properties: {\r\n    title1Name: { type: \"string\" },\r\n    title2Name: { type: \"string\" },\r\n  },\r\n} as const satisfies JSONSchemaType<System_TitleImages>;\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { System_OtherData } from \"./types\";\r\n\r\nexport const SCHEMA_SYSTEM_OTHER_DATA = {\r\n  type: \"object\",\r\n  additionalProperties: false,\r\n  required: [\"locale\", \"versionId\", \"windowTone\"],\r\n  properties: {\r\n    locale: { type: \"string\" },\r\n    versionId: { type: \"number\" },\r\n    windowTone: {\r\n      type: \"array\",\r\n      items: { type: \"number\" },\r\n      minItems: 4,\r\n      maxItems: 4,\r\n    },\r\n  },\r\n} as const satisfies JSONSchemaType<System_OtherData>;\r\n","import type { Data_NamedItem } from \"src/namedItemSource\";\r\nimport type { System_RPG_DataNames } from \"./types\";\r\n\r\nconst makeNamedItem = (name: string, index: number): Data_NamedItem => ({\r\n  name: name,\r\n  id: index,\r\n});\r\n\r\nexport const getVariableNames = (\r\n  system: Pick<System_RPG_DataNames, \"variables\">\r\n): Data_NamedItem[] => {\r\n  return system.variables.map(makeNamedItem);\r\n};\r\n\r\nexport const getElementTypes = (\r\n  system: Pick<System_RPG_DataNames, \"elements\">\r\n): Data_NamedItem[] => {\r\n  return system.elements.map(makeNamedItem);\r\n};\r\n\r\nexport const getEquipTypes = (\r\n  system: Pick<System_RPG_DataNames, \"equipTypes\">\r\n): Data_NamedItem[] => {\r\n  return system.equipTypes.map(makeNamedItem);\r\n};\r\n\r\nexport const getSkillTypes = (\r\n  system: Pick<System_RPG_DataNames, \"skillTypes\">\r\n): Data_NamedItem[] => {\r\n  return system.skillTypes.map(makeNamedItem);\r\n};\r\n\r\nexport const getWeaponTypes = (\r\n  system: Pick<System_RPG_DataNames, \"weaponTypes\">\r\n): Data_NamedItem[] => {\r\n  return system.weaponTypes.map(makeNamedItem);\r\n};\r\n\r\nexport const getArmorTypes = (\r\n  system: Pick<System_RPG_DataNames, \"armorTypes\">\r\n): Data_NamedItem[] => {\r\n  return system.armorTypes.map(makeNamedItem);\r\n};\r\n\r\nexport const getSwitches = (\r\n  system: Pick<System_RPG_DataNames, \"switches\">\r\n): Data_NamedItem[] => {\r\n  return system.switches.map(makeNamedItem);\r\n};\r\n","import type { NamedItemSource } from \"src/namedItemSource\";\r\nimport {\r\n  getElementTypes,\r\n  getEquipTypes,\r\n  getWeaponTypes,\r\n  getSkillTypes,\r\n  getArmorTypes,\r\n  getVariableNames,\r\n  getSwitches,\r\n} from \"./getSystemTypeNames\";\r\nimport {\r\n  SRC_SYSTEM_SWITCHES,\r\n  SRC_SYSTEM_WEAPON_TYPES,\r\n  SRC_SYSTEM_ARMOR_TYPES,\r\n  SRC_SYSTEM_ELEMENTS,\r\n  SRC_SYSTEM_EQUIP_TYPES,\r\n  SRC_SYSTEM_SKILL_TYPES,\r\n  SRC_SYSTEM_VARIABLES,\r\n} from \"./kindConstants\";\r\nimport type {\r\n  SourceId_SystemArmorTypes,\r\n  SourceId_SystemElements,\r\n  SourceId_SystemEquipTypes,\r\n  SourceId_SystemSkillTypes,\r\n  SourceId_SystemSwitches,\r\n  SourceId_SystemVariables,\r\n  SourceId_SystemWeaponTypes,\r\n} from \"./sourceIdTypes\";\r\nimport type { System_RPG_DataNames, SystemLabel_DataNames } from \"./types\";\r\n\r\nexport const defineSystemItems = (\r\n  system: System_RPG_DataNames,\r\n  label: SystemLabel_DataNames\r\n): NamedItemSource[] => {\r\n  return [\r\n    buildElementTypesSource(system, label),\r\n    buildEquipTypesSource(system, label),\r\n    buildWeaponTypesSource(system, label),\r\n    buildSkillTypesSource(system, label),\r\n    buildArmorTypesSource(system, label),\r\n    buildVariableNamesSource(system, label),\r\n    buildSwitchesSource(system, label),\r\n  ];\r\n};\r\nconst buildArmorTypesSource = (\r\n  system: Pick<System_RPG_DataNames, \"armorTypes\">,\r\n  label: SystemLabel_DataNames\r\n): NamedItemSource => ({\r\n  items: getArmorTypes(system),\r\n  label: label.options.armorTypes,\r\n  source: {\r\n    author: \"rmmz\",\r\n    module: \"system\",\r\n    kind: SRC_SYSTEM_ARMOR_TYPES,\r\n  } satisfies SourceId_SystemArmorTypes,\r\n});\r\n\r\nconst buildElementTypesSource = (\r\n  system: Pick<System_RPG_DataNames, \"elements\">,\r\n  label: SystemLabel_DataNames\r\n): NamedItemSource => ({\r\n  items: getElementTypes(system),\r\n  label: label.options.elements,\r\n  source: {\r\n    author: \"rmmz\",\r\n    module: \"system\",\r\n    kind: SRC_SYSTEM_ELEMENTS,\r\n  } satisfies SourceId_SystemElements,\r\n});\r\n\r\nconst buildEquipTypesSource = (\r\n  system: Pick<System_RPG_DataNames, \"equipTypes\">,\r\n  label: SystemLabel_DataNames\r\n): NamedItemSource => ({\r\n  items: getEquipTypes(system),\r\n  label: label.options.equipTypes,\r\n  source: {\r\n    author: \"rmmz\",\r\n    module: \"system\",\r\n    kind: SRC_SYSTEM_EQUIP_TYPES,\r\n  } satisfies SourceId_SystemEquipTypes,\r\n});\r\n\r\nconst buildSkillTypesSource = (\r\n  system: Pick<System_RPG_DataNames, \"skillTypes\">,\r\n  label: SystemLabel_DataNames\r\n): NamedItemSource => ({\r\n  items: getSkillTypes(system),\r\n  label: label.options.skillTypes,\r\n  source: {\r\n    author: \"rmmz\",\r\n    module: \"system\",\r\n    kind: SRC_SYSTEM_SKILL_TYPES,\r\n  } satisfies SourceId_SystemSkillTypes,\r\n});\r\n\r\nconst buildVariableNamesSource = (\r\n  system: Pick<System_RPG_DataNames, \"variables\">,\r\n  label: SystemLabel_DataNames\r\n): NamedItemSource => ({\r\n  items: getVariableNames(system),\r\n  label: label.options.variables,\r\n  source: {\r\n    author: \"rmmz\",\r\n    module: \"system\",\r\n    kind: SRC_SYSTEM_VARIABLES,\r\n  } satisfies SourceId_SystemVariables,\r\n});\r\n\r\nconst buildSwitchesSource = (\r\n  system: Pick<System_RPG_DataNames, \"switches\">,\r\n  label: SystemLabel_DataNames\r\n): NamedItemSource => ({\r\n  items: getSwitches(system),\r\n  label: label.options.switches,\r\n  source: {\r\n    author: \"rmmz\",\r\n    module: \"system\",\r\n    kind: SRC_SYSTEM_SWITCHES,\r\n  } satisfies SourceId_SystemSwitches,\r\n});\r\n\r\nconst buildWeaponTypesSource = (\r\n  system: Pick<System_RPG_DataNames, \"weaponTypes\">,\r\n  label: SystemLabel_DataNames\r\n): NamedItemSource => ({\r\n  items: getWeaponTypes(system),\r\n  label: label.options.weaponTypes,\r\n  source: {\r\n    author: \"rmmz\",\r\n    module: \"system\",\r\n    kind: SRC_SYSTEM_WEAPON_TYPES,\r\n  } satisfies SourceId_SystemWeaponTypes,\r\n});\r\n","export const SRC_SYSTEM_ARMOR_TYPES = \"armorTypes\" as const;\r\nexport const SRC_SYSTEM_ELEMENTS = \"elements\" as const;\r\nexport const SRC_SYSTEM_EQUIP_TYPES = \"equipTypes\" as const;\r\nexport const SRC_SYSTEM_SKILL_TYPES = \"skillTypes\" as const;\r\nexport const SRC_SYSTEM_VARIABLES = \"variable\" as const;\r\nexport const SRC_SYSTEM_SWITCHES = \"switch\" as const;\r\nexport const SRC_SYSTEM_WEAPON_TYPES = \"weaponTypes\" as const;\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { System_RPG_DataNames } from \"./types\";\r\n\r\nconst stringArraySchema = {\r\n  type: \"array\",\r\n  items: { type: \"string\" },\r\n} as const satisfies JSONSchemaType<string[]>;\r\n\r\nexport const SCHEMA_SYSTEM_RPG_DATA_NAMES = {\r\n  additionalProperties: false,\r\n  type: \"object\",\r\n  required: [\r\n    \"weaponTypes\",\r\n    \"skillTypes\",\r\n    \"elements\",\r\n    \"variables\",\r\n    \"equipTypes\",\r\n    \"switches\",\r\n    \"armorTypes\",\r\n  ],\r\n  properties: {\r\n    weaponTypes: stringArraySchema,\r\n    skillTypes: stringArraySchema,\r\n    elements: stringArraySchema,\r\n    variables: stringArraySchema,\r\n    equipTypes: stringArraySchema,\r\n    switches: stringArraySchema,\r\n    armorTypes: stringArraySchema,\r\n  },\r\n} as const satisfies JSONSchemaType<System_RPG_DataNames>;\r\n","import type { System_RPG_DataNames } from \"./types\";\r\n\r\nexport const makeDataNames = (\r\n  data: Partial<System_RPG_DataNames>\r\n): System_RPG_DataNames => ({\r\n  armorTypes: cloneStringArray(data.armorTypes),\r\n  elements: cloneStringArray(data.elements),\r\n  equipTypes: cloneStringArray(data.equipTypes),\r\n  weaponTypes: cloneStringArray(data.weaponTypes),\r\n  skillTypes: cloneStringArray(data.skillTypes),\r\n  variables: cloneStringArray(data.variables),\r\n  switches: cloneStringArray(data.switches),\r\n});\r\n\r\nconst cloneStringArray = (array?: ReadonlyArray<string>) => {\r\n  return array ? [...array] : [];\r\n};\r\n","import type { Terms_Basic, Terms_BasicArray } from \"./types\";\r\n\r\nexport const makeTermsBasic = (\r\n  terms: Partial<Terms_Basic>\r\n): Terms_BasicArray => {\r\n  return [\r\n    terms.level ?? \"Level\",\r\n    terms.levelA ?? \"Level\",\r\n    terms.hp ?? \"HP\",\r\n    terms.hpA ?? \"HP\",\r\n    terms.mp ?? \"MP\",\r\n    terms.mpA ?? \"MP\",\r\n    terms.tp ?? \"TP\",\r\n    terms.tpA ?? \"TP\",\r\n    terms.experience ?? \"EXP\",\r\n    terms.exp ?? \"EXP\",\r\n  ];\r\n};\r\n\r\nexport const makeTermsBasicFromArray = (\r\n  array: Terms_BasicArray\r\n): Terms_Basic => {\r\n  return {\r\n    level: array[0],\r\n    levelA: array[1],\r\n    hp: array[2],\r\n    hpA: array[3],\r\n    mp: array[4],\r\n    mpA: array[5],\r\n    tp: array[6],\r\n    tpA: array[7],\r\n    experience: array[8],\r\n    exp: array[9],\r\n  };\r\n};\r\n","import type { Terms_GameCommands } from \"./types\";\r\nimport type { Terms_CommandArray } from \"./types\";\r\n\r\nexport const makeTermsCommandArray = (\r\n  param: Partial<Terms_GameCommands>\r\n): Terms_CommandArray => {\r\n  return makeTermsCommandArrayWithNulls(param, \"\");\r\n};\r\n\r\nexport const makeTermsCommandArrayWithNulls = <T extends \"\" | null>(\r\n  param: Partial<Terms_GameCommands>,\r\n  empty: T\r\n): Terms_CommandArray<T> => {\r\n  return [\r\n    param.fight ?? \"Fight\",\r\n    param.escape ?? \"Escape\",\r\n    param.attack ?? \"Attack\",\r\n    param.guard ?? \"Guard\",\r\n    param.item ?? \"Item\",\r\n    param.skill ?? \"Skill\",\r\n    param.equip ?? \"Equip\",\r\n    param.status ?? \"Status\",\r\n    param.formation ?? \"Formation\",\r\n    param.save ?? \"Save\",\r\n    param.gameEnd ?? \"Game End\",\r\n    param.options ?? \"Options\",\r\n    param.weapon ?? \"Weapon\",\r\n    param.armor ?? \"Armor\",\r\n    param.keyItem ?? \"Key Item\",\r\n    param.equip2 ?? \"Equip2\",\r\n    param.optimize ?? \"Optimize\",\r\n    param.clear ?? \"Clear\",\r\n    param.newGame ?? \"New Game\",\r\n    param.continue_ ?? \"Continue\",\r\n    empty,\r\n    param.toTitle ?? \"To Title\",\r\n    param.cancel ?? \"Cancel\",\r\n    empty,\r\n    param.buy ?? \"Buy\",\r\n    param.sell ?? \"Sell\",\r\n  ];\r\n};\r\n\r\nexport const makeTermsCommandFromArray = <T extends \"\" | null = \"\">(\r\n  param: Terms_CommandArray<T>\r\n): Terms_GameCommands => {\r\n  return {\r\n    fight: param[0],\r\n    escape: param[1],\r\n    attack: param[2],\r\n    guard: param[3],\r\n    item: param[4],\r\n    skill: param[5],\r\n    equip: param[6],\r\n    status: param[7],\r\n    formation: param[8],\r\n    save: param[9],\r\n    gameEnd: param[10],\r\n    options: param[11],\r\n    weapon: param[12],\r\n    armor: param[13],\r\n    keyItem: param[14],\r\n    equip2: param[15],\r\n    optimize: param[16],\r\n    clear: param[17],\r\n    newGame: param[18],\r\n    continue_: param[19],\r\n    toTitle: param[21],\r\n    cancel: param[22],\r\n\r\n    buy: param[24],\r\n    sell: param[25],\r\n  };\r\n};\r\n","import type { Terms_Messages } from \"./types\";\r\n\r\nconst validate = (msg: unknown, fallback: string): string => {\r\n  return typeof msg === \"string\" ? msg : fallback;\r\n};\r\n\r\nexport const makeTermsMessages = (\r\n  msg: Partial<Terms_Messages>\r\n): Terms_Messages => {\r\n  return {\r\n    actionFailure: validate(msg.actionFailure, \"Action failed.\"),\r\n    actorDamage: validate(msg.actorDamage, \"%1 took %2 damage.\"),\r\n    actorRecovery: validate(msg.actorRecovery, \"%1 recovered %2 HP.\"),\r\n    actorGain: validate(msg.actorGain, \"%1 gained %2.\"),\r\n    actorLoss: validate(msg.actorLoss, \"%1 lost %2.\"),\r\n    actorDrain: validate(msg.actorDrain, \"%1 drained %2 HP.\"),\r\n    actorNoDamage: validate(msg.actorNoDamage, \"%1 was not damaged.\"),\r\n    actorNoHit: validate(msg.actorNoHit, \"%1 was not hit.\"),\r\n    alwaysDash: validate(msg.alwaysDash, \"Always dash.\"),\r\n    bgmVolume: validate(msg.bgmVolume, \"BGM volume\"),\r\n    bgsVolume: validate(msg.bgsVolume, \"BGS volume\"),\r\n    commandRemember: validate(msg.commandRemember, \"Command remember.\"),\r\n    criticalToActor: validate(msg.criticalToActor, \"%1 dealt %2 damage to %3.\"),\r\n    criticalToEnemy: validate(msg.criticalToEnemy, \"%1 dealt %2 damage to %3.\"),\r\n    counterAttack: validate(msg.counterAttack, \"%1 countered!\"),\r\n    debuffAdd: validate(msg.debuffAdd, \"%1's %2 was lowered.\"),\r\n    defeat: validate(msg.defeat, \"Defeat.\"),\r\n    enemyDamage: validate(msg.enemyDamage, \"%1 took %2 damage.\"),\r\n    enemyDrain: validate(msg.enemyDrain, \"%1 drained %2 HP.\"),\r\n    enemyGain: validate(msg.enemyGain, \"%1 gained %2.\"),\r\n    enemyLoss: validate(msg.enemyLoss, \"%1 lost %2.\"),\r\n    enemyNoDamage: validate(msg.enemyNoDamage, \"%1 was not damaged.\"),\r\n    enemyNoHit: validate(msg.enemyNoHit, \"%1 was not hit.\"),\r\n    enemyRecovery: validate(msg.enemyRecovery, \"%1 recovered %2 HP.\"),\r\n    evasion: validate(msg.evasion, \"%1 evaded the attack!\"),\r\n    autosave: validate(msg.autosave, \"Autosave\"),\r\n    escapeFailure: validate(msg.escapeFailure, \"Escape failed.\"),\r\n    escapeStart: validate(msg.escapeStart, \"%1 started to escape!\"),\r\n    emerge: validate(msg.emerge, \"%1 appeared!\"),\r\n    expNext: validate(msg.expNext, \"Next level in %1 EXP.\"),\r\n    expTotal: validate(msg.expTotal, \"Total EXP: %1\"),\r\n    file: validate(msg.file, \"File\"),\r\n    buffAdd: validate(msg.buffAdd, \"%1's %2 was raised.\"),\r\n    buffRemove: validate(msg.buffRemove, \"%1's %2 was lowered.\"),\r\n    obtainExp: validate(msg.obtainExp, \"%1 EXP obtained.\"),\r\n    obtainGold: validate(msg.obtainGold, \"%1 gold obtained.\"),\r\n    obtainItem: validate(msg.obtainItem, \"%1 obtained %2.\"),\r\n    obtainSkill: validate(msg.obtainSkill, \"%1 learned %2.\"),\r\n    levelUp: validate(msg.levelUp, \"%1 leveled up!\"),\r\n    partyName: validate(msg.partyName, \"Party\"),\r\n    loadMessage: validate(msg.loadMessage, \"Load %1?\"),\r\n    meVolume: validate(msg.meVolume, \"ME volume\"),\r\n    possession: validate(msg.possession, \"Possession\"),\r\n    preemptive: validate(msg.preemptive, \"%1 attacked first!\"),\r\n    saveMessage: validate(msg.saveMessage, \"Save %1?\"),\r\n    seVolume: validate(msg.seVolume, \"SE volume\"),\r\n    magicEvasion: validate(msg.magicEvasion, \"%1 evaded the magic!\"),\r\n    magicReflection: validate(msg.magicReflection, \"%1 reflected the magic!\"),\r\n    substitute: validate(msg.substitute, \"%1 took the hit!\"),\r\n    surprise: validate(msg.surprise, \"%1 surprised the enemy!\"),\r\n    touchUI: validate(msg.touchUI, \"Touch UI\"),\r\n    useItem: validate(msg.useItem, \"%1 used %2.\"),\r\n    victory: validate(msg.victory, \"Victory!\"),\r\n  };\r\n};\r\n","import type { JSONSchemaType } from \"ajv\";\r\n\r\nconst SCHEMA_STRING = {\r\n  type: \"string\",\r\n} as const satisfies JSONSchemaType<string>;\r\nconst SCHEMA_STRING_NULL = {\r\n  type: \"string\",\r\n  nullable: true,\r\n} as const satisfies JSONSchemaType<string | null>;\r\n\r\nexport const SCHEMA_SYSTEM_MEMBERS_TERMS_COMMANDS_ARRAY = {\r\n  type: \"array\",\r\n  items: [\r\n    SCHEMA_STRING,\r\n    SCHEMA_STRING,\r\n    SCHEMA_STRING,\r\n    SCHEMA_STRING,\r\n    SCHEMA_STRING,\r\n    SCHEMA_STRING,\r\n    SCHEMA_STRING,\r\n    SCHEMA_STRING,\r\n    SCHEMA_STRING,\r\n    SCHEMA_STRING,\r\n    SCHEMA_STRING,\r\n    SCHEMA_STRING,\r\n    SCHEMA_STRING,\r\n    SCHEMA_STRING,\r\n    SCHEMA_STRING,\r\n    SCHEMA_STRING,\r\n    SCHEMA_STRING,\r\n    SCHEMA_STRING,\r\n    SCHEMA_STRING,\r\n    SCHEMA_STRING,\r\n    SCHEMA_STRING_NULL,\r\n    SCHEMA_STRING,\r\n    SCHEMA_STRING,\r\n    SCHEMA_STRING_NULL,\r\n    SCHEMA_STRING,\r\n    SCHEMA_STRING,\r\n  ] as const,\r\n  minItems: 26,\r\n  maxItems: 26,\r\n} as const;\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { Terms_Messages } from \"./types\";\r\n\r\nconst SCHEMA_STRING = {\r\n  type: \"string\",\r\n} as const satisfies JSONSchemaType<string>;\r\n\r\nexport const SCHEMA_SYSTEM_TERMS_MESSAGES = {\r\n  type: \"object\",\r\n  additionalProperties: false,\r\n  required: [\r\n    \"actionFailure\",\r\n    \"actorDamage\",\r\n    \"actorNoDamage\",\r\n    \"actorRecovery\",\r\n    \"actorGain\",\r\n    \"actorLoss\",\r\n    \"actorDrain\",\r\n    \"alwaysDash\",\r\n    \"bgmVolume\",\r\n    \"bgsVolume\",\r\n    \"commandRemember\",\r\n    \"criticalToActor\",\r\n    \"criticalToEnemy\",\r\n    \"counterAttack\",\r\n    \"debuffAdd\",\r\n    \"defeat\",\r\n    \"enemyDamage\",\r\n    \"enemyNoDamage\",\r\n    \"enemyRecovery\",\r\n    \"enemyGain\",\r\n    \"enemyLoss\",\r\n    \"enemyDrain\",\r\n    \"evasion\",\r\n    \"expNext\",\r\n    \"expTotal\",\r\n    \"escapeFailure\",\r\n    \"escapeStart\",\r\n    \"file\",\r\n    \"loadMessage\",\r\n    \"meVolume\",\r\n    \"magicEvasion\",\r\n    \"magicReflection\",\r\n    \"obtainExp\",\r\n    \"obtainGold\",\r\n    \"obtainItem\",\r\n    \"obtainSkill\",\r\n    \"partyName\",\r\n    \"preemptive\",\r\n    \"saveMessage\",\r\n    \"seVolume\",\r\n    \"substitute\",\r\n    \"touchUI\",\r\n    \"victory\",\r\n    \"useItem\",\r\n  ],\r\n  properties: {\r\n    actionFailure: SCHEMA_STRING,\r\n    actorDamage: SCHEMA_STRING,\r\n    actorNoDamage: SCHEMA_STRING,\r\n    actorRecovery: SCHEMA_STRING,\r\n    actorGain: SCHEMA_STRING,\r\n    actorLoss: SCHEMA_STRING,\r\n    actorDrain: SCHEMA_STRING,\r\n    alwaysDash: SCHEMA_STRING,\r\n    bgmVolume: SCHEMA_STRING,\r\n    bgsVolume: SCHEMA_STRING,\r\n    commandRemember: SCHEMA_STRING,\r\n    criticalToActor: SCHEMA_STRING,\r\n    criticalToEnemy: SCHEMA_STRING,\r\n    counterAttack: SCHEMA_STRING,\r\n    debuffAdd: SCHEMA_STRING,\r\n    defeat: SCHEMA_STRING,\r\n    enemyDamage: SCHEMA_STRING,\r\n    enemyNoDamage: SCHEMA_STRING,\r\n    enemyRecovery: SCHEMA_STRING,\r\n    enemyGain: SCHEMA_STRING,\r\n    enemyLoss: SCHEMA_STRING,\r\n    enemyDrain: SCHEMA_STRING,\r\n    evasion: SCHEMA_STRING,\r\n    expNext: SCHEMA_STRING,\r\n    expTotal: SCHEMA_STRING,\r\n    escapeFailure: SCHEMA_STRING,\r\n    escapeStart: SCHEMA_STRING,\r\n    file: SCHEMA_STRING,\r\n    loadMessage: SCHEMA_STRING,\r\n    meVolume: SCHEMA_STRING,\r\n    magicEvasion: SCHEMA_STRING,\r\n    magicReflection: SCHEMA_STRING,\r\n    obtainExp: SCHEMA_STRING,\r\n    obtainGold: SCHEMA_STRING,\r\n    obtainItem: SCHEMA_STRING,\r\n    obtainSkill: SCHEMA_STRING,\r\n    partyName: SCHEMA_STRING,\r\n    preemptive: SCHEMA_STRING,\r\n    saveMessage: SCHEMA_STRING,\r\n    seVolume: SCHEMA_STRING,\r\n    substitute: SCHEMA_STRING,\r\n    touchUI: SCHEMA_STRING,\r\n    victory: SCHEMA_STRING,\r\n    useItem: SCHEMA_STRING,\r\n    buffAdd: SCHEMA_STRING,\r\n    buffRemove: SCHEMA_STRING,\r\n    actorNoHit: SCHEMA_STRING,\r\n    enemyNoHit: SCHEMA_STRING,\r\n    autosave: SCHEMA_STRING,\r\n    emerge: SCHEMA_STRING,\r\n    levelUp: SCHEMA_STRING,\r\n    possession: SCHEMA_STRING,\r\n    surprise: SCHEMA_STRING,\r\n  },\r\n} as const satisfies JSONSchemaType<Terms_Messages>;\r\n","import type { JSONSchemaType, SchemaObject } from \"ajv\";\r\nimport { SCHEMA_SYSTEM_MEMBERS_TERMS_BASIC_ARRAY } from \"./basic/schema\";\r\nimport { SCHEMA_SYSTEM_MEMBERS_TERMS_COMMANDS_ARRAY } from \"./commands/schema\";\r\nimport { SCHEMA_SYSTEM_TERMS_MESSAGES } from \"./messages/schema\";\r\nimport { SCHEMA_SYSTEM_PARAM_NAMS_ARRAY } from \"./paramArray/schema\";\r\nimport type { System_Terms, System_TextBundle } from \"./types\";\r\n\r\nexport const SCHEMA_SYSTEM_TERMS_BUNDLE = {\r\n  required: [\r\n    \"terms\",\r\n    \"currencyUnit\",\r\n    \"gameTitle\",\r\n  ] satisfies (keyof System_TextBundle)[],\r\n  additionalProperties: false,\r\n  type: \"object\",\r\n  properties: {\r\n    currencyUnit: { type: \"string\" } satisfies JSONSchemaType<string>,\r\n    gameTitle: { type: \"string\" } satisfies JSONSchemaType<string>,\r\n    terms: {\r\n      additionalProperties: false,\r\n      type: \"object\",\r\n      required: [\r\n        \"messages\",\r\n        \"commands\",\r\n        \"basic\",\r\n        \"params\",\r\n      ] satisfies (keyof System_Terms)[],\r\n      properties: {\r\n        messages: SCHEMA_SYSTEM_TERMS_MESSAGES,\r\n        commands: SCHEMA_SYSTEM_MEMBERS_TERMS_COMMANDS_ARRAY,\r\n        basic: SCHEMA_SYSTEM_MEMBERS_TERMS_BASIC_ARRAY,\r\n        params: SCHEMA_SYSTEM_PARAM_NAMS_ARRAY,\r\n      } satisfies Record<keyof System_Terms, SchemaObject>,\r\n    },\r\n  },\r\n} as const satisfies SchemaObject;\r\n","import type { JSONSchemaType } from \"ajv\";\r\n\r\nexport const SCHEMA_SYSTEM_MEMBERS_TERMS_BASIC_ARRAY = {\r\n  type: \"array\",\r\n  items: { type: \"string\" },\r\n  minItems: 10,\r\n  maxItems: 10,\r\n} as const satisfies JSONSchemaType<string[]>;\r\n","import type { JSONSchemaType } from \"ajv\";\r\n\r\nexport const SCHEMA_SYSTEM_PARAM_NAMS_ARRAY = {\r\n  type: \"array\",\r\n  items: {\r\n    type: \"string\",\r\n    minLength: 1,\r\n  },\r\n  minItems: 10,\r\n  maxItems: 10,\r\n  uniqueItems: true,\r\n} as const satisfies JSONSchemaType<string[]>;\r\n","import type { Data_NamedItem } from \"src/namedItemSource\";\r\nimport type {\r\n  SystemLabels_TermsParamNames,\r\n  Terms_ParamNamesArray,\r\n} from \"./paramArray\";\r\nimport type { System_Terms_Params } from \"./types\";\r\n\r\nexport const makeParamNamesArray = (\r\n  param: Partial<SystemLabels_TermsParamNames>\r\n): Terms_ParamNamesArray => {\r\n  return [\r\n    param.mhp ?? \"\",\r\n    param.mmp ?? \"\",\r\n    param.atk ?? \"\",\r\n    param.def ?? \"\",\r\n    param.mat ?? \"\",\r\n    param.mdf ?? \"\",\r\n    param.agi ?? \"\",\r\n    param.luk ?? \"\",\r\n    param.hit ?? \"\",\r\n    param.eva ?? \"\",\r\n  ];\r\n};\r\n\r\nexport const getParamNames = (\r\n  system: System_Terms_Params\r\n): Data_NamedItem[] => {\r\n  return system.terms.params.map((name, index) => ({\r\n    name: name,\r\n    id: index,\r\n  }));\r\n};\r\n","import type { TitleCommandWindow } from \"./types\";\r\n\r\nexport const makeTitleCommandWindow = (\r\n  param: Partial<TitleCommandWindow>\r\n): TitleCommandWindow => {\r\n  return {\r\n    background: param.background ?? 0,\r\n    offsetX: param.offsetX ?? 0,\r\n    offsetY: param.offsetY ?? 0,\r\n  };\r\n};\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { TitleCommandWindow } from \"./types\";\r\n\r\nexport const SCHEMA_SYSTEM_TITLE_COMMAND_WINDOW = {\r\n  additionalProperties: false,\r\n  type: \"object\",\r\n  required: [\"background\", \"offsetX\", \"offsetY\"],\r\n  properties: {\r\n    background: { type: \"integer\", minimum: 0, maximum: 1000 },\r\n    offsetX: { type: \"integer\", minimum: -1000, maximum: 1000 },\r\n    offsetY: { type: \"integer\", minimum: -1000, maximum: 1000 },\r\n  },\r\n} as const satisfies JSONSchemaType<TitleCommandWindow>;\r\n","import { makeAudioFileParams } from \"@RpgTypes/utils\";\r\nimport type { Data_Vehicle } from \"./types\";\r\n\r\nexport const makeVehicleData = (\r\n  vehicle: Partial<Data_Vehicle> = {}\r\n): Data_Vehicle => ({\r\n  characterIndex: vehicle.characterIndex ?? 0,\r\n  characterName: vehicle.characterName ?? \"\",\r\n  bgm: makeAudioFileParams(vehicle.bgm ?? {}),\r\n  startMapId: vehicle.startMapId ?? 0,\r\n  startX: vehicle.startX ?? 0,\r\n  startY: vehicle.startY ?? 0,\r\n});\r\n","import type { EditorSettings } from \"./editor/types\";\r\n\r\nexport const makeEditorSetting = (\r\n  param: Partial<EditorSettings> = {}\r\n): EditorSettings => {\r\n  return {\r\n    jsonFormatLevel: param.jsonFormatLevel ?? 0,\r\n    messageWidth1: param.messageWidth1 ?? 816,\r\n    messageWidth2: param.messageWidth2 ?? 816,\r\n  };\r\n};\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { TestBattler, System_TestBattle } from \"./types\";\r\n\r\nexport const SCHEMA_SYSTEM_TEST_BATTLER = {\r\n  additionalProperties: false,\r\n  type: \"object\",\r\n  required: [\"actorId\", \"equips\", \"level\"],\r\n  properties: {\r\n    actorId: { type: \"integer\" },\r\n\r\n    level: { type: \"integer\", minimum: 1 },\r\n    equips: {\r\n      type: \"array\",\r\n      items: { type: \"integer\" },\r\n    },\r\n  },\r\n} as const satisfies JSONSchemaType<TestBattler>;\r\n\r\nexport const SCHEMA_SYSTEM_TEST_PLAY = {\r\n  additionalProperties: false,\r\n  type: \"object\",\r\n  required: [\r\n    \"testBattlers\",\r\n    \"testTroopId\",\r\n    \"battleback1Name\",\r\n    \"battleback2Name\",\r\n  ],\r\n  properties: {\r\n    testBattlers: {\r\n      type: \"array\",\r\n      items: SCHEMA_SYSTEM_TEST_BATTLER,\r\n    },\r\n    testTroopId: { type: \"integer\", minimum: 0 },\r\n    battleback1Name: { type: \"string\" },\r\n    battleback2Name: { type: \"string\" },\r\n  },\r\n} as const satisfies JSONSchemaType<System_TestBattle>;\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport { SCHEMA_SYSTEM_EDITOR_SETTINGS } from \"./editor/schema\";\r\nimport { SCHEMA_SYSTEM_TEST_BATTLER } from \"./testPlay/schema\";\r\nimport type { System_GameEditorBundleRMMZ } from \"./types\";\r\n\r\nexport const SCHEMA_SYSTEM_GAME_EDITOR_BUNDLE = {\r\n  additionalProperties: false,\r\n  type: \"object\",\r\n  required: [\r\n    \"battleback1Name\",\r\n    \"battleback2Name\",\r\n    \"battlerHue\",\r\n    \"battlerName\",\r\n    \"editMapId\",\r\n    \"editor\",\r\n    \"testBattlers\",\r\n    \"testTroopId\",\r\n  ],\r\n  properties: {\r\n    testBattlers: {\r\n      type: \"array\",\r\n      items: SCHEMA_SYSTEM_TEST_BATTLER,\r\n    },\r\n    testTroopId: { type: \"integer\", minimum: 0 },\r\n    battleback1Name: { type: \"string\" },\r\n    battleback2Name: { type: \"string\" },\r\n    editMapId: { type: \"integer\", minimum: 0 },\r\n    battlerHue: { type: \"integer\", minimum: 0 },\r\n    battlerName: { type: \"string\" },\r\n    editor: SCHEMA_SYSTEM_EDITOR_SETTINGS,\r\n  },\r\n} as const satisfies JSONSchemaType<System_GameEditorBundleRMMZ>;\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { EditorSettings, EditorSettingLables } from \"./types\";\r\n\r\nexport const SCHEMA_SYSTEM_EDITOR_SETTINGS: JSONSchemaType<EditorSettings> = {\r\n  additionalProperties: false,\r\n  type: \"object\",\r\n  required: [\"messageWidth1\", \"messageWidth2\", \"jsonFormatLevel\"],\r\n  properties: {\r\n    messageWidth1: { type: \"integer\", minimum: 0, maximum: 1000 },\r\n    messageWidth2: { type: \"integer\", minimum: 0, maximum: 1000 },\r\n    jsonFormatLevel: { type: \"integer\", minimum: 0, maximum: 4 },\r\n  },\r\n} as const satisfies JSONSchemaType<EditorSettings>;\r\n\r\nexport const SCHEMA_SYSTEM_EDITOR_SETTINGS_LABELS: JSONSchemaType<EditorSettingLables> =\r\n  {\r\n    additionalProperties: false,\r\n    type: \"object\",\r\n    required: [\"messageWidth1\", \"messageWidth2\", \"jsonFormatLevel\"],\r\n    properties: {\r\n      messageWidth1: { type: \"string\" },\r\n      messageWidth2: { type: \"string\" },\r\n      jsonFormatLevel: { type: \"string\" },\r\n    },\r\n  } as const satisfies JSONSchemaType<EditorSettingLables>;\r\n","import type { DomainLabel } from \"@RpgTypes/templates\";\r\nimport type {\r\n  System_Bgm,\r\n  System_BooleanGameOptions,\r\n  System_TitleImages,\r\n  SystemLabel_DataNames,\r\n  SystemLabels_GameCommands,\r\n} from \"./core\";\r\nimport type { SystemLabels_TermsParamNames } from \"./core/terms/paramArray\";\r\nimport type { System_Text } from \"./subset\";\r\ntype AsLabel<T> = Record<keyof T, string>;\r\n\r\nexport type SystemLabel_Images = AsLabel<System_TitleImages>;\r\nexport type SystemLabel_Text = AsLabel<System_Text>;\r\nexport type SystemLabel_Bgm = AsLabel<System_Bgm>;\r\nexport type SystemLabel_BoolanOptions = AsLabel<System_BooleanGameOptions>;\r\n\r\nexport const DEFAULT_SYSTEM_LABELS_BOOLEAN = {\r\n  title: \"オプション\",\r\n  options: {\r\n    optDrawTitle: \"ゲームタイトルの描画\",\r\n    optDisplayTp: \"ウィンドウにTPを表示\",\r\n    optFloorDeath: \"床ダメージで戦闘不能\",\r\n    optSlipDeath: \"スリップダメージで戦闘不能\",\r\n    optAutosave: \"オートセーブを有効化\",\r\n    optExtraExp: \"控えメンバーも経験値を獲得\",\r\n    optFollowers: \"隊列歩行\",\r\n    optSideView: \"戦闘をサイドビューにする\",\r\n    optKeyItemsNumber: \"大事なものの個数を表示\",\r\n    optTransparent: \"透明状態で開始\",\r\n    optMessageSkip: \"メッセージスキップを有効化\",\r\n    optSplashScreen: \"スプラッシュ画面を表示\",\r\n  },\r\n} as const satisfies DomainLabel<SystemLabel_BoolanOptions>;\r\n\r\nexport const DEFAULT_SYSTEM_LABELS_DATA_TYPES = {\r\n  title: \"タイプ\",\r\n\r\n  format: \"{name}\",\r\n\r\n  options: {\r\n    elements: \"属性\",\r\n    equipTypes: \"装備タイプ\",\r\n    skillTypes: \"スキルタイプ\",\r\n    weaponTypes: \"武器タイプ\",\r\n    armorTypes: \"防具タイプ\",\r\n    switches: \"スイッチ\",\r\n    variables: \"変数\",\r\n  },\r\n} as const satisfies SystemLabel_DataNames;\r\n\r\nexport const LABELS_SYSTEM_BATTLER_PARAMS = {\r\n  title: \"能力値\",\r\n  options: {\r\n    agi: \"敏捷\",\r\n    atk: \"攻撃力\",\r\n    def: \"防御力\",\r\n    eva: \"回避\",\r\n    hit: \"命中\",\r\n    luk: \"運\",\r\n    mat: \"魔法攻撃力\",\r\n    mdf: \"魔法防御力\",\r\n    mhp: \"最大HP\",\r\n    mmp: \"最大MP\",\r\n  },\r\n} as const satisfies DomainLabel<SystemLabels_TermsParamNames>;\r\n\r\nexport const LABELS_SYSTEM_GAME_COMMANDS = {\r\n  title: \"コマンド\",\r\n  options: {\r\n    item: \"アイテム\",\r\n    skill: \"スキル\",\r\n    equip: \"装備\",\r\n    status: \"ステータス\",\r\n    formation: \"編成\",\r\n    options: \"オプション\",\r\n    save: \"セーブ\",\r\n    gameEnd: \"ゲーム終了\",\r\n    armor: \"防具\",\r\n    weapon: \"武器\",\r\n    newGame: \"ニューゲーム\",\r\n    attack: \"攻撃\",\r\n    guard: \"防御\",\r\n    escape: \"逃げる\",\r\n    fight: \"戦う\",\r\n    buy: \"買う\",\r\n    sell: \"売る\",\r\n    cancel: \"キャンセル\",\r\n    clear: \"クリア\",\r\n    continue_: \"続きから\",\r\n    equip2: \"装備2\",\r\n    keyItem: \"大事なもの\",\r\n    optimize: \"最強装備\",\r\n    toTitle: \"タイトルへ戻る\",\r\n  },\r\n} satisfies DomainLabel<SystemLabels_GameCommands>;\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { AttackMotion } from \"./types\";\r\n\r\nconst SCHEMA_SYSTEM_MEMBERS_ATTACK_MOTION = {\r\n  type: \"object\",\r\n  additionalProperties: false,\r\n  required: [\"type\", \"weaponImageId\"],\r\n  properties: {\r\n    type: { type: \"number\" },\r\n    weaponImageId: { type: \"number\" },\r\n  },\r\n} as const satisfies JSONSchemaType<AttackMotion>;\r\n\r\nexport default SCHEMA_SYSTEM_MEMBERS_ATTACK_MOTION;\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { Data_Vehicle } from \"./types\";\r\n\r\nconst SCHEMA_SYSTEM_VEHICLE = {\r\n  additionalProperties: false,\r\n  type: \"object\",\r\n  required: [\r\n    \"characterIndex\",\r\n    \"characterName\",\r\n    \"bgm\",\r\n    \"startMapId\",\r\n    \"startX\",\r\n    \"startY\",\r\n  ],\r\n  properties: {\r\n    characterIndex: { type: \"integer\", minimum: 0, maximum: 7 },\r\n    characterName: { type: \"string\", minLength: 1 },\r\n    bgm: {\r\n      type: \"object\",\r\n      additionalProperties: false,\r\n      required: [\"name\", \"volume\", \"pitch\", \"pan\"],\r\n      properties: {\r\n        name: { type: \"string\" },\r\n        volume: { type: \"integer\", minimum: 0, maximum: 100 },\r\n        pitch: { type: \"integer\", minimum: 50, maximum: 150 },\r\n        pan: { type: \"integer\", minimum: -100, maximum: 100 },\r\n      },\r\n    },\r\n    startMapId: { type: \"integer\", minimum: 0 },\r\n    startX: { type: \"integer\", minimum: 0, maximum: 5000 },\r\n    startY: { type: \"integer\", minimum: 0, maximum: 5000 },\r\n  },\r\n} as const satisfies JSONSchemaType<Data_Vehicle>;\r\n\r\nexport default SCHEMA_SYSTEM_VEHICLE;\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { AttackMotion, Data_Vehicle, System_Advanced } from \"./core\";\r\nimport SCHEMA_SYSTEM_ADVANCED from \"./core/advanced/schema\";\r\nimport SCHEMA_SYSTEM_MEMBERS_ATTACK_MOTION from \"./core/attackMotion/schema\";\r\nimport SCHEMA_SYSTEM_VEHICLE from \"./core/vehicle/schema\";\r\nimport type { Data_System } from \"./system\";\r\n\r\nexport const SCHEMA_SYSTEM_PARTIAL_BUNDLE = {\r\n  additionalProperties: false,\r\n  required: [\"airship\", \"boat\", \"ship\", \"advanced\", \"attackMotions\"],\r\n  type: \"object\",\r\n  properties: {\r\n    airship: SCHEMA_SYSTEM_VEHICLE satisfies JSONSchemaType<Data_Vehicle>,\r\n    boat: SCHEMA_SYSTEM_VEHICLE satisfies JSONSchemaType<Data_Vehicle>,\r\n    ship: SCHEMA_SYSTEM_VEHICLE satisfies JSONSchemaType<Data_Vehicle>,\r\n    advanced: SCHEMA_SYSTEM_ADVANCED satisfies JSONSchemaType<System_Advanced>,\r\n    attackMotions: {\r\n      type: \"array\",\r\n      items: SCHEMA_SYSTEM_MEMBERS_ATTACK_MOTION,\r\n    } satisfies JSONSchemaType<AttackMotion[]>,\r\n  },\r\n} as const satisfies JSONSchemaType<\r\n  Pick<Data_System, \"airship\" | \"boat\" | \"ship\" | \"advanced\" | \"attackMotions\">\r\n>;\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { System_Advanced } from \"./advanced\";\r\n\r\nconst SCHEMA_SYSTEM_ADVANCED = {\r\n  type: \"object\",\r\n  properties: {\r\n    gameId: { type: \"integer\" },\r\n    screenWidth: { type: \"integer\" },\r\n    screenHeight: { type: \"integer\" },\r\n    uiAreaWidth: { type: \"integer\" },\r\n    uiAreaHeight: { type: \"integer\" },\r\n    windowOpacity: { type: \"integer\" },\r\n    screenScale: { type: \"number\" },\r\n\r\n    numberFontFilename: { type: \"string\" },\r\n    mainFontFilename: { type: \"string\" },\r\n    fallbackFonts: { type: \"string\" },\r\n    fontSize: { type: \"integer\" },\r\n  },\r\n  required: [\r\n    \"gameId\",\r\n    \"screenWidth\",\r\n    \"screenHeight\",\r\n    \"uiAreaWidth\",\r\n    \"uiAreaHeight\",\r\n    \"windowOpacity\",\r\n    \"screenScale\",\r\n    \"numberFontFilename\",\r\n    \"mainFontFilename\",\r\n    \"fallbackFonts\",\r\n    \"fontSize\",\r\n  ],\r\n  additionalProperties: false,\r\n} as const satisfies JSONSchemaType<System_Advanced>;\r\n\r\nexport default SCHEMA_SYSTEM_ADVANCED;\r\n","import {\r\n  SCHEMA_SYSTEM_AUDIOFILES,\r\n  SCHEMA_SYSTEM_BATTLE_RULE_RMMZ,\r\n  SCHEMA_SYSTEM_BOOLEAN_GAMEMENU_OPTIONS,\r\n  SCHEMA_SYSTEM_BOOLEAN_OPTIONS,\r\n  SCHEMA_SYSTEM_GAME_INITIAL,\r\n  SCHEMA_SYSTEM_IMAGE_SIZE,\r\n  SCHEMA_SYSTEM_OTHER_DATA,\r\n  SCHEMA_SYSTEM_RPG_DATA_NAMES,\r\n  SCHEMA_SYSTEM_TERMS_BUNDLE,\r\n  SCHEMA_SYSTEM_TITLE_IMAGES,\r\n} from \"./core\";\r\nimport { SCHEMA_SYSTEM_GAME_EDITOR_BUNDLE } from \"./gameEdit\";\r\nimport { SCHEMA_SYSTEM_PARTIAL_BUNDLE } from \"./schemaBundle\";\r\nimport type { Data_System } from \"./system\";\r\n\r\nexport interface PartialSystemSchema {\r\n  required: ReadonlyArray<keyof Data_System>;\r\n  properties: Record<string, object>;\r\n  additionalProperties: false;\r\n  type: \"object\";\r\n}\r\n\r\nexport const allSystemSchema = () => [\r\n  SCHEMA_SYSTEM_PARTIAL_BUNDLE,\r\n  SCHEMA_SYSTEM_AUDIOFILES,\r\n  SCHEMA_SYSTEM_BATTLE_RULE_RMMZ,\r\n  SCHEMA_SYSTEM_BOOLEAN_GAMEMENU_OPTIONS,\r\n  SCHEMA_SYSTEM_BOOLEAN_OPTIONS,\r\n  SCHEMA_SYSTEM_GAME_INITIAL,\r\n  SCHEMA_SYSTEM_IMAGE_SIZE,\r\n  SCHEMA_SYSTEM_OTHER_DATA,\r\n  SCHEMA_SYSTEM_RPG_DATA_NAMES,\r\n  SCHEMA_SYSTEM_TERMS_BUNDLE,\r\n  SCHEMA_SYSTEM_TITLE_IMAGES,\r\n  SCHEMA_SYSTEM_GAME_EDITOR_BUNDLE,\r\n];\r\n\r\nexport const mergeSystemSchema = (\r\n  list: ReadonlyArray<PartialSystemSchema>\r\n): PartialSystemSchema => {\r\n  const reducedList = reduce(list);\r\n  return {\r\n    additionalProperties: false,\r\n    type: \"object\",\r\n    required: Array.from(new Set(reducedList.required)),\r\n    properties: reducedList.properties,\r\n  };\r\n};\r\n\r\nconst reduce = (list: ReadonlyArray<PartialSystemSchema>) => {\r\n  type Type = Pick<PartialSystemSchema, \"required\" | \"properties\">;\r\n  return list.reduce<Type>(\r\n    (acc, item) => ({\r\n      required: [...acc.required, ...item.required],\r\n      properties: { ...acc.properties, ...item.properties },\r\n    }),\r\n    { required: [], properties: {} }\r\n  );\r\n};\r\n","import Ajv from \"ajv\";\r\nimport type { AttackMotion, System_ImageSize } from \"./core\";\r\nimport { SCHEMA_SYSTEM_IMAGE_SIZE } from \"./core\";\r\nimport SCHEMA_SYSTEM_MEMBERS_ATTACK_MOTION from \"./core/attackMotion/schema\";\r\nimport type { TestBattler } from \"./gameEdit\";\r\nimport { SCHEMA_SYSTEM_TEST_BATTLER } from \"./gameEdit/testPlay/schema\";\r\nimport { mergeSystemSchema, allSystemSchema } from \"./schemaMerge\";\r\nimport type { Data_System } from \"./system\";\r\n\r\nconst ajv = new Ajv({ strict: true });\r\n\r\nconst schema = mergeSystemSchema(allSystemSchema());\r\nconst systemValidate = ajv.compile(schema);\r\n\r\nexport const isDataSystem = (data: unknown): data is Data_System => {\r\n  return systemValidate(data);\r\n};\r\n\r\nconst testBattler = ajv.compile(SCHEMA_SYSTEM_TEST_BATTLER);\r\n\r\nexport const isTestBattler = (data: unknown): data is TestBattler => {\r\n  return testBattler(data);\r\n};\r\n\r\nconst attackMotion = ajv.compile(SCHEMA_SYSTEM_MEMBERS_ATTACK_MOTION);\r\nexport const isAttackMotion = (data: unknown): data is AttackMotion => {\r\n  return attackMotion(data);\r\n};\r\n\r\nconst imageSize = ajv.compile(SCHEMA_SYSTEM_IMAGE_SIZE);\r\nexport const isImageSize = (data: unknown): data is System_ImageSize => {\r\n  return imageSize(data);\r\n};\r\n","import type { AudioFileParams } from \"src/utils\";\r\nimport { makeAudioFileParams } from \"src/utils\";\r\nimport {\r\n  makeBooleanOptions,\r\n  makeDataNames,\r\n  makeItemCategories,\r\n  makeMenuCommandsEnabled,\r\n  makeParamNamesArray,\r\n  makeSoundsArray,\r\n  makeSystemAdvanced,\r\n  makeTermsBasic,\r\n  makeTermsCommand,\r\n  makeTermsMessages,\r\n  makeVehicleData,\r\n} from \"./core\";\r\nimport type {\r\n  System_BooleanGameOptions,\r\n  System_RPG_DataNames,\r\n  System_ImageSize,\r\n  System_Terms,\r\n  System_TermsPartial,\r\n  Terms_Messages,\r\n} from \"./core\";\r\nimport type { EditorSettings, TestBattler } from \"./gameEdit\";\r\nimport { makeEditorSetting } from \"./gameEdit\";\r\nimport type { Data_System } from \"./system\";\r\nimport type { SystemDataFragments } from \"./systemSegments\";\r\nimport { isImageSize, isTestBattler } from \"./validate\";\r\n\r\nexport const makeSystemData = (\r\n  fragments: Partial<SystemDataFragments>\r\n): Data_System => {\r\n  const size = cloneSize(fragments.size);\r\n\r\n  return {\r\n    ...(makeBooleanOptions(fragments.options) satisfies Record<\r\n      string & keyof System_BooleanGameOptions,\r\n      boolean\r\n    >),\r\n    currencyUnit: fragments.texts?.currencyUnit ?? \"\",\r\n    gameTitle: fragments.texts?.gameTitle ?? \"\",\r\n    sounds: makeSoundsArray(fragments.sounds) satisfies AudioFileParams[],\r\n    editor: makeEditorSetting(fragments.editing) satisfies Record<\r\n      keyof EditorSettings,\r\n      number\r\n    >,\r\n    advanced: makeSystemAdvanced(fragments.advanced),\r\n    title1Name: fragments.images?.title1Name ?? \"\",\r\n    title2Name: fragments.images?.title2Name ?? \"\",\r\n    ...(makeDataNames(fragments.dataNames ?? {}) satisfies Record<\r\n      keyof System_RPG_DataNames,\r\n      string[]\r\n    >),\r\n    magicSkills: cloneNumberArray([]),\r\n    airship: makeVehicleData(fragments.vehicles?.airship),\r\n    boat: makeVehicleData(fragments.vehicles?.boat),\r\n    ship: makeVehicleData(fragments.vehicles?.ship),\r\n    defeatMe: makeAudioFileParams(fragments.me?.defeatMe),\r\n    gameoverMe: makeAudioFileParams(fragments.me?.gameoverMe),\r\n    titleBgm: makeAudioFileParams(fragments.bgm?.titleBgm),\r\n\r\n    tileSize: size.tileSize,\r\n    faceSize: size.faceSize,\r\n    iconSize: size.iconSize,\r\n    versionId: 1,\r\n    attackMotions: [],\r\n    battleback1Name: fragments.battleTest?.battleback1Name ?? \"\",\r\n    battleback2Name: fragments.battleTest?.battleback2Name ?? \"\",\r\n    testTroopId: fragments.battleTest?.testTroopId ?? 0,\r\n    testBattlers: cloneObjectArray(\r\n      fragments.battleTest?.testBattlers,\r\n      cloneTestBattler\r\n    ),\r\n    battleBgm: makeAudioFileParams(fragments.bgm?.battleBgm),\r\n    victoryMe: makeAudioFileParams(fragments.me?.victoryMe),\r\n    editMapId: fragments.editorTemporary?.editMapId ?? 0,\r\n    battlerName: fragments.editorTemporary?.battlerName ?? \"\",\r\n    locale: \"\",\r\n    startMapId: fragments.gameInit?.startMapId ?? 0,\r\n    startX: fragments.gameInit?.startX ?? 0,\r\n    startY: fragments.gameInit?.startY ?? 0,\r\n    windowTone: [0, 0, 0, 0],\r\n    terms: makeTerms(fragments.terms ?? {}) satisfies System_Terms,\r\n    itemCategories: makeItemCategories(\r\n      fragments.itemCategories\r\n    ) satisfies boolean[],\r\n    partyMembersArray: cloneNumberArray(fragments.gameInit?.partyMembersArray),\r\n    battleSystem: 0,\r\n    battlerHue: 0,\r\n    menuCommands: makeMenuCommandsEnabled(\r\n      fragments.menuComamnds\r\n    ) satisfies boolean[],\r\n  };\r\n};\r\n\r\nexport default makeSystemData;\r\n\r\nconst makeTerms = (terms: System_TermsPartial): System_Terms => {\r\n  return {\r\n    basic: makeTermsBasic(terms.basic ?? {}) satisfies string[],\r\n    commands: makeTermsCommand(terms.commands ?? {}) satisfies string[],\r\n    params: makeParamNamesArray(terms.params ?? {}) satisfies string[],\r\n    messages: makeTermsMessages(terms.messages ?? {}) satisfies Record<\r\n      keyof Terms_Messages,\r\n      string\r\n    >,\r\n  };\r\n};\r\n\r\nconst cloneNumberArray = (array?: ReadonlyArray<number>) => {\r\n  return array ? [...array] : [];\r\n};\r\n\r\nconst cloneSize = (data: unknown): System_ImageSize => {\r\n  return isImageSize(data)\r\n    ? {\r\n        tileSize: data.tileSize,\r\n        faceSize: data.faceSize,\r\n        iconSize: data.iconSize,\r\n      }\r\n    : {\r\n        tileSize: 48,\r\n        faceSize: 144,\r\n        iconSize: 32,\r\n      };\r\n};\r\n\r\nconst cloneObjectArray = <T>(\r\n  array: ReadonlyArray<unknown> | undefined,\r\n  fn: (data: unknown) => T\r\n) => {\r\n  return array ? array.map(fn) : [];\r\n};\r\n\r\nconst cloneTestBattler = (data: unknown): TestBattler => {\r\n  return isTestBattler(data)\r\n    ? {\r\n        actorId: data.actorId,\r\n        equips: cloneNumberArray(data.equips),\r\n        level: data.level,\r\n      }\r\n    : {\r\n        actorId: 0,\r\n        equips: [],\r\n        level: 1,\r\n      };\r\n};\r\n","import type {\r\n  GameData,\r\n  DataLabels,\r\n  TraitLabelSet,\r\n  NormalLabel,\r\n  ItemEffectLabelSet,\r\n  EffectDefinitionResolved,\r\n} from \"@RpgTypes/rpg\";\r\nimport {\r\n  defineTraitItems,\r\n  defineGameDataSources,\r\n  resolveTraitLabels,\r\n  resolveItemEffectLabels,\r\n} from \"@RpgTypes/rpg\";\r\nimport type {\r\n  System_RPG_DataNames,\r\n  SystemLabel_DataNames,\r\n} from \"@RpgTypes/system\";\r\nimport { defineSystemItems } from \"@RpgTypes/system\";\r\nimport {\r\n  type NamedItemSource,\r\n  type FormatCompiled,\r\n  mergeItemsSource,\r\n} from \"src/namedItemSource\";\r\n\r\nexport const buildReferenceItemSources = (\r\n  gameData: GameData,\r\n  gameDataLabels: DataLabels,\r\n  traitLabels: TraitLabelSet,\r\n  global: NormalLabel,\r\n  system: System_RPG_DataNames,\r\n  label: SystemLabel_DataNames\r\n): NamedItemSource[] => {\r\n  return [\r\n    ...defineTraitItems(traitLabels, global),\r\n    ...defineGameDataSources(gameData, gameDataLabels),\r\n    ...defineSystemItems(system, label),\r\n  ];\r\n};\r\n\r\nexport const compileTraitDisplayData = (\r\n  namedItemSource: ReadonlyArray<NamedItemSource>,\r\n  traitLabels: TraitLabelSet\r\n): Map<number, FormatCompiled> => {\r\n  return mergeItemsSource(resolveTraitLabels(traitLabels), namedItemSource);\r\n};\r\n\r\nexport const compileItemEffectDisplayData = (\r\n  namedItemSource: ReadonlyArray<NamedItemSource>,\r\n  itemEffectLabels: ItemEffectLabelSet,\r\n  additional?: ReadonlyArray<EffectDefinitionResolved>\r\n): Map<number, FormatCompiled> => {\r\n  const list = resolveItemEffectLabels(itemEffectLabels);\r\n  return mergeItemsSource(\r\n    additional ? [...list, ...additional] : list,\r\n    namedItemSource\r\n  );\r\n};\r\n","import type { DomainName } from \"./types\";\r\n\r\nexport const domainNames = <T extends Record<string, DomainName>>(\r\n  record: T\r\n): string[] => {\r\n  return Object.entries<DomainName>(record).map(([, value]) => value.title);\r\n};\r\n","import { CHANGE_NAME, CHANGE_NICKNAME, CHANGE_PROFILE } from \"@RpgTypes/rpg\";\r\nimport type {\r\n  ParamObject_ChangeActorName,\r\n  Command_ChangeActorName as Command_ChangeActorName,\r\n  Command_ChangeActorNickName,\r\n  Command_ChangeActorProfile,\r\n  ParamObject_ChangeActorNickName,\r\n  ParamObject_ChangeActorProfile,\r\n} from \"./types\";\r\n\r\nexport const makeCommandChangeActorName = (\r\n  param: ParamObject_ChangeActorName,\r\n  indent: number = 0\r\n): Command_ChangeActorName => ({\r\n  code: CHANGE_NAME,\r\n  parameters: [param.actorId, param.name],\r\n  indent,\r\n});\r\n\r\nexport const makeCommandChangeActorNickName = (\r\n  param: ParamObject_ChangeActorNickName,\r\n  indent: number = 0\r\n): Command_ChangeActorNickName => ({\r\n  code: CHANGE_NICKNAME,\r\n  parameters: [param.actorId, param.nickname],\r\n  indent,\r\n});\r\n\r\nexport const makeCommandChangeActorProfile = (\r\n  param: ParamObject_ChangeActorProfile,\r\n  indent: number = 0\r\n): Command_ChangeActorProfile => ({\r\n  code: CHANGE_PROFILE,\r\n  parameters: [param.actorId, param.profile],\r\n  indent,\r\n});\r\n","import {\r\n  PLAY_BGM,\r\n  PLAY_BGS,\r\n  PLAY_ME,\r\n  PLAY_SE,\r\n  CHANGE_BATTLE_BGM,\r\n  CHANGE_VICTORY_ME,\r\n  CHANGE_DEFEAT_ME,\r\n} from \"@RpgTypes/rpg\";\r\nimport { makeAudioFileParams, type AudioFileParams } from \"@RpgTypes/utils\";\r\nimport type {\r\n  Command_PlayBGM,\r\n  Command_PlayBGS,\r\n  Command_PlayME,\r\n  Command_PlaySE,\r\n  Command_ChangeDefeatME,\r\n  Command_ChangeVictoryME,\r\n  Command_ChangeBattleBGM,\r\n  CommandUnion_AnyAudio,\r\n} from \"./types\";\r\n\r\nexport const makeAudioCommand = <Code extends CommandUnion_AnyAudio[\"code\"]>(\r\n  code: Code,\r\n  filename: string\r\n) => {\r\n  return makeCommandAudioAny(code, makeAudioFileParams({ name: filename }));\r\n};\r\n\r\nexport const makeCommandAudioAny = <Code extends CommandUnion_AnyAudio[\"code\"]>(\r\n  code: Code,\r\n  audio: AudioFileParams,\r\n  indent: number = 0\r\n) => {\r\n  return {\r\n    code,\r\n    parameters: [makeAudioFileParams(audio)] satisfies [AudioFileParams],\r\n    indent,\r\n  };\r\n};\r\n\r\nexport const makeCommandPlayBGM = (\r\n  audio: AudioFileParams,\r\n  indent: number = 0\r\n): Command_PlayBGM => makeCommandAudioAny(PLAY_BGM, audio, indent);\r\n\r\nexport const makeCommandPlayBGS = (\r\n  audio: AudioFileParams,\r\n  indent: number = 0\r\n): Command_PlayBGS => makeCommandAudioAny(PLAY_BGS, audio, indent);\r\n\r\nexport const makeCommandPlayME = (\r\n  audio: AudioFileParams,\r\n  indent: number = 0\r\n): Command_PlayME => makeCommandAudioAny(PLAY_ME, audio, indent);\r\n\r\nexport const makeCommandPlaySE = (\r\n  audio: AudioFileParams,\r\n  indent: number = 0\r\n): Command_PlaySE => makeCommandAudioAny(PLAY_SE, audio, indent);\r\n\r\nexport const makeCommandChangeBattleBGM = (\r\n  audio: AudioFileParams,\r\n  indent: number = 0\r\n): Command_ChangeBattleBGM =>\r\n  makeCommandAudioAny(CHANGE_BATTLE_BGM, audio, indent);\r\n\r\nexport const makeCommandChangeVictoryME = (\r\n  audio: AudioFileParams,\r\n  indent: number = 0\r\n): Command_ChangeVictoryME =>\r\n  makeCommandAudioAny(CHANGE_VICTORY_ME, audio, indent);\r\n\r\nexport const makeCommandChangeDefeatME = (\r\n  audio: AudioFileParams,\r\n  indent: number = 0\r\n): Command_ChangeDefeatME =>\r\n  makeCommandAudioAny(CHANGE_DEFEAT_ME, audio, indent);\r\n","import { COMMON_EVENT } from \"@RpgTypes/rpg\";\r\nimport type { Command_CommonEvent, ParamObject_CommonEvent } from \"./types\";\r\nimport type { ParamArray_CommonEvent } from \"./types\";\r\n\r\nexport const makeCommandCommonEvent = (\r\n  param: Partial<ParamObject_CommonEvent> | undefined,\r\n  indent: number = 0\r\n): Command_CommonEvent => ({\r\n  code: COMMON_EVENT,\r\n  indent,\r\n  parameters: toArrayCommonEvent(param ?? {}),\r\n});\r\n\r\nexport const fromArrayCommonEvent = (\r\n  array: ParamArray_CommonEvent\r\n): ParamObject_CommonEvent => ({\r\n  eventId: array[0],\r\n});\r\n\r\nexport const toArrayCommonEvent = (\r\n  object: Partial<ParamObject_CommonEvent>\r\n): ParamArray_CommonEvent => [object.eventId ?? 0];\r\n","import { CONTROL_SWITCHES } from \"@RpgTypes/rpg\";\r\nimport type {\r\n  Command_ControlSwitches,\r\n  ParamArray_ControlSwitches,\r\n  Paramobject_ControlSwitches,\r\n} from \"./types\";\r\n\r\nexport const fromArrayControlSwitches = (\r\n  param: ParamArray_ControlSwitches\r\n): Paramobject_ControlSwitches => {\r\n  return {\r\n    min: param[0],\r\n    max: param[1],\r\n    value: param[2],\r\n  };\r\n};\r\n\r\nexport const toArrayControlSwitches = (\r\n  object: Paramobject_ControlSwitches\r\n): ParamArray_ControlSwitches => {\r\n  return [object.min, object.max, object.value];\r\n};\r\n\r\nexport const makeCommandControlSwitches = (\r\n  param: Paramobject_ControlSwitches,\r\n  indent = 0\r\n): Command_ControlSwitches => ({\r\n  code: CONTROL_SWITCHES,\r\n  indent,\r\n  parameters: toArrayControlSwitches(param),\r\n});\r\n","import { COMMENT_BODY, COMMENT_HEAD } from \"@RpgTypes/rpg\";\r\nimport type {\r\n  ParamArray_Comment,\r\n  ParamObject_Comment,\r\n  Command_CommentHeader,\r\n  Command_CommentBody,\r\n} from \"./types\";\r\n\r\nexport const makeCommentArray = (comment: string): ParamArray_Comment => {\r\n  return [comment];\r\n};\r\n\r\nexport const convertCommentArrayToObject = (\r\n  paramArray: ParamArray_Comment\r\n): ParamObject_Comment => ({\r\n  comment: paramArray[0],\r\n});\r\n\r\nexport const makeCommandCommentHeader = (\r\n  comment: string,\r\n  indent: number = 0\r\n): Command_CommentHeader => ({\r\n  code: COMMENT_HEAD,\r\n  indent,\r\n  parameters: makeCommentArray(comment),\r\n});\r\n\r\nexport const makeCommandCommentBody = (\r\n  comment: string,\r\n  indent: number = 0\r\n): Command_CommentBody => ({\r\n  code: COMMENT_BODY,\r\n  indent,\r\n  parameters: makeCommentArray(comment),\r\n});\r\n\r\nexport const makeCommentCommandArray = (\r\n  comments: ReadonlyArray<string>,\r\n  indent: number = 0\r\n) => {\r\n  return comments.map((comment, index) =>\r\n    index === 0\r\n      ? makeCommandCommentHeader(comment, indent)\r\n      : makeCommandCommentBody(comment, indent)\r\n  ) as [Command_CommentHeader, ...Command_CommentBody[]];\r\n};\r\n","import { INPUT_NUMBER } from \"@RpgTypes/rpg\";\r\nimport type {\r\n  Command_InputNumber,\r\n  ParamArray_InputNumber,\r\n  ParamObject_InputNumber,\r\n} from \"./types\";\r\n\r\nexport const toArrayInputNumber = (\r\n  param: Partial<ParamObject_InputNumber>\r\n): ParamArray_InputNumber => [param.variableId ?? 0, param.digits ?? 0];\r\n\r\nexport const fromArrayInputNumber = (\r\n  array: ParamArray_InputNumber\r\n): ParamObject_InputNumber => ({\r\n  variableId: array[0],\r\n  digits: array[1],\r\n});\r\n\r\nexport const makeCommandInputNumber = (\r\n  param: Partial<ParamObject_InputNumber> | undefined,\r\n  indent: number = 0\r\n): Command_InputNumber => ({\r\n  code: INPUT_NUMBER,\r\n  indent,\r\n  parameters: toArrayInputNumber(param ?? {}),\r\n});\r\n","import { SHOW_SCROLLING_TEXT, SHOW_SCROLLING_TEXT_BODY } from \"@RpgTypes/rpg\";\r\nimport type {\r\n  Command_ScrollTextBody,\r\n  Command_ScrollTextHeader,\r\n  ParamArray_ScrollTextHeader,\r\n  ParamObject_ScrollTextHeader,\r\n} from \"./types\";\r\nimport type {\r\n  ParamArray_ScrollTextBody,\r\n  ParamObject_ScrollTextBody,\r\n} from \"./types\";\r\n\r\nexport const toArrayScrollingTextHeader = (\r\n  param: Partial<ParamObject_ScrollTextHeader> = {}\r\n): ParamArray_ScrollTextHeader => {\r\n  return [param?.speed ?? 4, param?.skip ?? false];\r\n};\r\n\r\nexport const fromArrayScrollingTextHeader = (\r\n  array: ParamArray_ScrollTextHeader\r\n): ParamObject_ScrollTextHeader => {\r\n  return {\r\n    speed: array[0],\r\n    skip: array[1],\r\n  };\r\n};\r\n\r\nexport const makeCommandScrollingTextHeader = (\r\n  param: Partial<ParamObject_ScrollTextHeader> = {},\r\n  indent: number = 0\r\n): Command_ScrollTextHeader => {\r\n  return {\r\n    code: SHOW_SCROLLING_TEXT,\r\n    indent,\r\n    parameters: toArrayScrollingTextHeader(param),\r\n  };\r\n};\r\n\r\nexport const toArrayScrollingTextBody = (\r\n  text: string = \"\"\r\n): ParamArray_ScrollTextBody => {\r\n  return [text];\r\n};\r\n\r\nexport const fromArrayScrollingTextBody = (\r\n  array: ParamArray_ScrollTextBody\r\n): ParamObject_ScrollTextBody => {\r\n  return {\r\n    content: array[0],\r\n  };\r\n};\r\nexport const makeCommandScrollingTextBody = (\r\n  text: string = \"\",\r\n  indent: number = 0\r\n): Command_ScrollTextBody => {\r\n  return {\r\n    code: SHOW_SCROLLING_TEXT_BODY,\r\n    indent: indent ?? 0,\r\n    parameters: toArrayScrollingTextBody(text),\r\n  };\r\n};\r\n","import { SHOW_CHOICES, SHOW_CHOICES_ITEM } from \"@RpgTypes/rpg\";\r\nimport type {\r\n  ParamObject_ShowChoiceWhen,\r\n  Command_ShowChoiceWhen,\r\n  ParamArray_ShowChoiceWhen,\r\n} from \"./item/types\";\r\nimport type {\r\n  ParamArray_SetupChoice,\r\n  ParamObject_SetupChoice,\r\n  Command_ShowChoices,\r\n} from \"./types/body\";\r\n\r\nexport const makeCommandShowChoiceItem = (\r\n  param: Partial<ParamObject_ShowChoiceWhen> | undefined,\r\n  indent: number = 0\r\n): Command_ShowChoiceWhen => ({\r\n  code: SHOW_CHOICES_ITEM,\r\n  indent,\r\n  parameters: [param?.index ?? 0, param?.name ?? \"\"],\r\n});\r\n\r\nexport const fromArraySetupChoiceItem = (\r\n  array: ParamArray_ShowChoiceWhen\r\n): ParamObject_ShowChoiceWhen => ({\r\n  index: array[0],\r\n  name: array[1],\r\n});\r\n\r\nexport const toArraySetupChoiceItem = (\r\n  object: Partial<ParamObject_ShowChoiceWhen>\r\n): ParamArray_ShowChoiceWhen => [object.index ?? 0, object.name ?? \"\"];\r\n\r\nexport const fromArraySetupChoice = (\r\n  array: ParamArray_SetupChoice\r\n): ParamObject_SetupChoice => ({\r\n  choices: array[0],\r\n  cancelType: array[1],\r\n  defaultType: array[2],\r\n  positionType: array[3],\r\n  background: array[4],\r\n});\r\n\r\nexport const toArraySetupChoice = (\r\n  object: Partial<ParamObject_SetupChoice>\r\n): ParamArray_SetupChoice => [\r\n  object.choices ?? [],\r\n  object.cancelType ?? 0,\r\n  object.defaultType ?? 0,\r\n  object.positionType ?? 2,\r\n  object.background ?? 0,\r\n];\r\n\r\nexport const makeCommandSetupChoice = (\r\n  param: Partial<ParamObject_SetupChoice> | undefined,\r\n  indent: number = 0\r\n): Command_ShowChoices => ({\r\n  code: SHOW_CHOICES,\r\n  indent,\r\n  parameters: [\r\n    param?.choices ?? [],\r\n    param?.cancelType ?? 0,\r\n    param?.defaultType ?? 0,\r\n    param?.positionType ?? 2,\r\n    param?.background ?? 0,\r\n  ],\r\n});\r\n\r\nexport const cloneChoices = (\r\n  command: Command_ShowChoices\r\n): Command_ShowChoices => {\r\n  return {\r\n    code: command.code,\r\n    indent: command.indent,\r\n    parameters: [\r\n      [...command.parameters[0]],\r\n      command.parameters[1],\r\n      command.parameters[2],\r\n      command.parameters[3],\r\n      command.parameters[4],\r\n    ],\r\n  };\r\n};\r\n","import { SHOW_MESSAGE, SHOW_MESSAGE_BODY } from \"@RpgTypes/rpg\";\r\nimport type {\r\n  Command_ShowMessageBody,\r\n  Command_ShowMessageHeader,\r\n  ParamArray_ShowMessage,\r\n  ParamObject_ShowMessage,\r\n} from \"./types\";\r\n\r\nexport const makeCommandShowMessage = (\r\n  param: Partial<ParamObject_ShowMessage> | undefined,\r\n  indent: number = 0\r\n): Command_ShowMessageHeader => ({\r\n  code: SHOW_MESSAGE,\r\n  indent,\r\n  parameters: [\r\n    param?.facename ?? \"\",\r\n    param?.faceIndex ?? 0,\r\n    param?.background ?? 0,\r\n    param?.positionType ?? 2,\r\n    param?.speakerName ?? \"\",\r\n  ],\r\n});\r\n\r\nexport const fromArrayShowMessageHeader = (\r\n  array: ParamArray_ShowMessage\r\n): ParamObject_ShowMessage => {\r\n  return {\r\n    facename: array[0],\r\n    faceIndex: array[1],\r\n    background: array[2],\r\n    positionType: array[3],\r\n    speakerName: array[4],\r\n  };\r\n};\r\n\r\nexport const toArrayShowMessageHeader = (\r\n  object: ParamObject_ShowMessage\r\n): ParamArray_ShowMessage => {\r\n  return [\r\n    object.facename,\r\n    object.faceIndex,\r\n    object.background,\r\n    object.positionType,\r\n    object.speakerName,\r\n  ];\r\n};\r\n\r\nexport const makeCommandShowMessageBody = (\r\n  text: string,\r\n  indent: number = 0\r\n): Command_ShowMessageBody => ({\r\n  code: SHOW_MESSAGE_BODY,\r\n  indent,\r\n  parameters: [text],\r\n});\r\n","import { SCRIPT_EVAL, SCRIPT_EVAL_BODY } from \"@RpgTypes/rpg\";\r\nimport type { Command_ScriptBody, Command_ScriptHeader } from \"./types\";\r\n\r\nexport const makeCommandScriptHeader = (\r\n  script: string,\r\n  indent: number = 0\r\n): Command_ScriptHeader => {\r\n  return {\r\n    code: SCRIPT_EVAL,\r\n    indent,\r\n    parameters: [script],\r\n  };\r\n};\r\n\r\nexport const makeCommandScriptBody = (\r\n  script: string,\r\n  indent: number = 0\r\n): Command_ScriptBody => {\r\n  return {\r\n    code: SCRIPT_EVAL_BODY,\r\n    indent,\r\n    parameters: [script],\r\n  };\r\n};\r\nexport const makeCommandScriptArray = (\r\n  lines: ReadonlyArray<string>,\r\n  indent: number = 0\r\n) => {\r\n  return lines.map((line, index) =>\r\n    index === 0\r\n      ? makeCommandScriptHeader(line, indent)\r\n      : makeCommandScriptBody(line, indent)\r\n  ) as [Command_ScriptHeader, ...Command_ScriptBody[]];\r\n};\r\n","export const OPERAND_CONSTANT = 0 as const;\r\nexport const OPERAND_VARIABLE = 1 as const;\r\nexport const OPERAND_RANDOM = 2 as const;\r\nexport const OPERAND_GAMEDATA = 3 as const;\r\nexport const OPERAND_SCRIPT = 4 as const;\r\n","export const ENEMY_PARAM_INDEX = {\r\n  HP: 0,\r\n  MP: 1,\r\n  MHP: 2,\r\n  MMP: 3,\r\n  ATK: 4,\r\n  DEF: 5,\r\n  MAT: 6,\r\n  MDF: 7,\r\n  AGI: 8,\r\n  LUK: 9,\r\n  TP: 10,\r\n} as const;\r\n","import {\r\n  OPERAND_CONSTANT,\r\n  OPERAND_RANDOM,\r\n  OPERAND_VARIABLE,\r\n  OPERAND_GAMEDATA,\r\n  OPERAND_SCRIPT,\r\n} from \"./constants\";\r\nimport type * as Type from \"./types\";\r\nimport { ENEMY_PARAM_INDEX } from \"./types/enemy/dataSource\";\r\n\r\nexport const toArrayOperandConstant = (\r\n  target: Type.ParamObject_WritingTarget,\r\n  value: Type.ParamObject_Operand_Constant,\r\n  operation: number = 0\r\n): Type.Operand_Constatant => [\r\n  target.startId,\r\n  target.endId ?? target.startId,\r\n  operation,\r\n  OPERAND_CONSTANT,\r\n  value.value,\r\n];\r\n\r\nexport const toArrayOperandVariable = (\r\n  target: Type.ParamObject_WritingTarget,\r\n  value: Type.ParamObject_Operand_Variable,\r\n  operation: number = 0\r\n): Type.Operand_Variable => [\r\n  target.startId,\r\n  target.endId ?? target.startId,\r\n  operation,\r\n  OPERAND_VARIABLE,\r\n  value.variableId,\r\n];\r\nexport const toArrayOperandRandom = (\r\n  target: Type.ParamObject_WritingTarget,\r\n  value: Type.ParamObject_Operand_Random,\r\n  operation: number = 0\r\n): Type.Operand_Random => [\r\n  target.startId,\r\n  target.endId ?? target.startId,\r\n  operation,\r\n  OPERAND_RANDOM,\r\n  value.min,\r\n  value.max,\r\n];\r\n\r\nexport const toArrayOperandScript = (\r\n  target: Type.ParamObject_WritingTarget,\r\n  value: Type.ParamObject_Operand_Script,\r\n  operation: number = 0\r\n): Type.Operand_Script => [\r\n  target.startId,\r\n  target.endId ?? target.startId,\r\n  operation,\r\n  OPERAND_SCRIPT,\r\n  value.code,\r\n];\r\nexport const toArrayOperandItemData = (\r\n  target: Type.ParamObject_WritingTarget,\r\n  value: Type.ParamObject_Operand_ItemData,\r\n  operation: number = 0\r\n): Type.Operand_ItemData => [\r\n  target.startId,\r\n  target.endId ?? target.startId,\r\n  operation,\r\n  OPERAND_GAMEDATA,\r\n  value.type,\r\n  value.itemId,\r\n];\r\n\r\nexport const toArrayOperandActorStatus = (\r\n  target: Type.ParamObject_WritingTarget,\r\n  value: Type.ParamObject_Operand_ActorStatus,\r\n  operation: number = 0\r\n): Type.Operand_ActorStatus => [\r\n  target.startId,\r\n  target.endId ?? target.startId,\r\n  operation,\r\n  OPERAND_GAMEDATA,\r\n  3,\r\n  value.index,\r\n  value.param,\r\n];\r\n\r\nexport const toArrayOperandEnemyStatus = (\r\n  target: Type.ParamObject_WritingTarget,\r\n  value: Type.ParamObject_Operand_Enemy,\r\n  operation: number = 0\r\n): Type.Operand_EnemyStatus => [\r\n  target.startId,\r\n  target.endId ?? target.startId,\r\n  operation,\r\n  OPERAND_GAMEDATA,\r\n  4,\r\n  value.index,\r\n  ENEMY_PARAM_INDEX[value.param],\r\n];\r\n","import type {\r\n  DataOperand_Enemy,\r\n  Operand_EnemyStatus,\r\n  DataOperand_Actor,\r\n  Operand_ActorStatus,\r\n} from \"./types\";\r\n\r\nexport const getEnemyValue = (\r\n  enemy: DataOperand_Enemy,\r\n  param: Operand_EnemyStatus\r\n): number => {\r\n  switch (param[6]) {\r\n    case 0:\r\n      return enemy.hp;\r\n    case 1:\r\n      return enemy.mp;\r\n    case 10:\r\n      return enemy.tp;\r\n  }\r\n  if (param[6] >= 2 && param[6] <= 9) {\r\n    return enemy.param(param[6] - 2);\r\n  }\r\n  return 0;\r\n};\r\n\r\nexport const getActorValue = (\r\n  actor: DataOperand_Actor,\r\n  param: Operand_ActorStatus\r\n) => {\r\n  switch (param[6]) {\r\n    case 0: // Level\r\n      return actor.level;\r\n    case 1: // EXP\r\n      return actor.currentExp();\r\n    case 2: // HP\r\n      return actor.hp;\r\n    case 3: // MP\r\n      return actor.mp;\r\n    case 12: // TP\r\n      return actor.tp;\r\n  }\r\n  if (param[6] >= 4 && param[6] <= 11) {\r\n    return actor.param(param[6] - 4);\r\n  }\r\n  return 0;\r\n};\r\n","import type {\r\n  EventCommandLike2,\r\n  EventCommandUnknown,\r\n} from \"@RpgTypes/eventCommand\";\r\n\r\nexport const cloneParameters = <\r\n  Param extends ReadonlyArray<number | boolean | string>\r\n>(\r\n  param: Param\r\n): Param => {\r\n  return [...param] as unknown as Param;\r\n};\r\n\r\nexport const cloneEventCommand = <\r\n  Param extends Array<number | boolean | string>\r\n>(\r\n  command: EventCommandLike2<number, Param>\r\n) => {\r\n  return {\r\n    code: command.code,\r\n    indent: command.indent,\r\n    parameters: cloneParameters<Param>(command.parameters),\r\n  };\r\n};\r\n\r\nconst isPrimitive = (value: unknown): value is string | number | boolean =>\r\n  typeof value === \"string\" ||\r\n  typeof value === \"number\" ||\r\n  typeof value === \"boolean\";\r\n\r\nexport const isCloneableCommand = (\r\n  value: EventCommandUnknown\r\n): value is EventCommandLike2<number, (string | number | boolean)[]> => {\r\n  return value.parameters.every(isPrimitive);\r\n};\r\n","import Ajv from \"ajv\";\r\nimport type {\r\n  CommandUnion_ChangeActorText,\r\n  Command_ScrollTextHeader,\r\n  CommandUnion_AnyAudio,\r\n  Command_CommonEvent,\r\n  Command_ShowChoices,\r\n  Command_ShowChoiceWhen,\r\n  Command_InputNumber,\r\n  Command_ShowMessageHeader,\r\n} from \"./commands\";\r\nimport SCHEMA_COMMAND_CHANGE_ACTOR_TEXT from \"./commands/actor/changeText/schema\";\r\nimport SCHEMA_COMMAND_ANY_AUDIO from \"./commands/audio/play/schema\";\r\nimport { SCHEMA_COMMAND_CALL_COMMON_EVENT } from \"./commands/flow/callCommonEvent/schema\";\r\nimport { SCHEMA_COMMAND_INPUT_NUMBER } from \"./commands/message/inputNumber/schema\";\r\nimport { SCHEMA_COMMAND_SCROLL_TEXT_HEAD } from \"./commands/message/scrollText/schema\";\r\nimport SCHEMA_COMMAND_SHOW_CHOICE_WHEN from \"./commands/message/setupChoice/item/schema\";\r\nimport SCHEMA_COMMAND_SHOW_CHOICES from \"./commands/message/setupChoice/schema\";\r\nimport { SCHEMA_COMMAND_SHOW_MESSAGE } from \"./commands/message/showMessage/schema\";\r\nimport {\r\n  SCHEMA_COMMAND_EMPTY_PARAM,\r\n  SCHEMA_COMMAND_TEXT_BODY,\r\n} from \"./unionSchema\";\r\nimport type {\r\n  CommandUnion_EmptyParam,\r\n  CommandUnion_TextBody,\r\n} from \"./unionTypes\";\r\n\r\nconst ajv = new Ajv({ code: { source: false }, strict: true });\r\n// schemaはindex.ts無しで直接importすること！\r\n// 過去に循環参照エラーで苦しんでます\r\n\r\n// 各Schemaはtype以外はimportしないこと\r\n// 定数の解決に失敗してエラーになることがある\r\nconst changeActorText = ajv.compile(SCHEMA_COMMAND_CHANGE_ACTOR_TEXT);\r\nexport const isCommandChangeActorText = (\r\n  data: unknown\r\n): data is CommandUnion_ChangeActorText => {\r\n  return changeActorText(data);\r\n};\r\n\r\nconst scrollTextHead = ajv.compile(SCHEMA_COMMAND_SCROLL_TEXT_HEAD);\r\nexport const isCommandScrollTextHead = (\r\n  data: unknown\r\n): data is Command_ScrollTextHeader => {\r\n  return scrollTextHead(data);\r\n};\r\n\r\nconst audioCommand = ajv.compile(SCHEMA_COMMAND_ANY_AUDIO);\r\nexport const isCommandAudio = (\r\n  data: unknown\r\n): data is CommandUnion_AnyAudio => {\r\n  return audioCommand(data);\r\n};\r\n\r\nconst emptyParam = ajv.compile(SCHEMA_COMMAND_EMPTY_PARAM);\r\nexport const isCommandNonParam = (\r\n  data: unknown\r\n): data is CommandUnion_EmptyParam => {\r\n  return emptyParam(data);\r\n};\r\n\r\nconst textBody = ajv.compile(SCHEMA_COMMAND_TEXT_BODY);\r\nexport const isCommandTextBody = (\r\n  command: unknown\r\n): command is CommandUnion_TextBody => {\r\n  return textBody(command);\r\n};\r\n\r\nconst commonVent = ajv.compile(SCHEMA_COMMAND_CALL_COMMON_EVENT);\r\nexport const isCommandCommonEvent = (\r\n  data: unknown\r\n): data is Command_CommonEvent => {\r\n  return commonVent(data);\r\n};\r\n\r\nconst showChoices = ajv.compile(SCHEMA_COMMAND_SHOW_CHOICES);\r\nexport const isCommandShowChoices = (\r\n  data: unknown\r\n): data is Command_ShowChoices => {\r\n  return showChoices(data);\r\n};\r\n\r\nconst showChoiceItem = ajv.compile(SCHEMA_COMMAND_SHOW_CHOICE_WHEN);\r\nexport const isCommandShowChoiceItem = (\r\n  data: unknown\r\n): data is Command_ShowChoiceWhen => {\r\n  return showChoiceItem(data);\r\n};\r\n\r\nconst inputNumber = ajv.compile(SCHEMA_COMMAND_INPUT_NUMBER);\r\nexport const isCommandInputNumber = (\r\n  data: unknown\r\n): data is Command_InputNumber => {\r\n  return inputNumber(data);\r\n};\r\n\r\nconst showMessage = ajv.compile(SCHEMA_COMMAND_SHOW_MESSAGE);\r\nexport const isCommandShowMessage = (\r\n  data: unknown\r\n): data is Command_ShowMessageHeader => {\r\n  return showMessage(data);\r\n};\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { CommandUnion_ChangeActorText } from \"./types\";\r\n\r\nconst SCHEMA_COMMAND_CHANGE_ACTOR_TEXT = {\r\n  type: \"object\",\r\n  required: [\"code\", \"parameters\", \"indent\"],\r\n\r\n  properties: {\r\n    code: {\r\n      type: \"integer\",\r\n      enum: [320, 324, 325],\r\n    },\r\n    indent: { type: \"integer\" },\r\n    parameters: {\r\n      type: \"array\",\r\n      minItems: 2,\r\n      maxItems: 2,\r\n      items: [\r\n        { type: \"integer\", minimum: 0 }, // actorId\r\n        { type: \"string\" }, // name\r\n      ],\r\n    },\r\n  },\r\n  additionalProperties: false,\r\n} as const satisfies JSONSchemaType<CommandUnion_ChangeActorText>;\r\n\r\nexport default SCHEMA_COMMAND_CHANGE_ACTOR_TEXT;\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { Command_ScrollTextHeader, Command_ScrollTextBody } from \"./types\";\r\n\r\nexport const SCHEMA_COMMAND_SCROLL_TEXT_HEAD = {\r\n  type: \"object\",\r\n  properties: {\r\n    code: { type: \"number\", const: 105 },\r\n    indent: { type: \"integer\", minimum: 0 },\r\n    parameters: {\r\n      type: \"array\",\r\n      minItems: 2,\r\n      maxItems: 2,\r\n      items: [\r\n        { type: \"number\" }, // speed\r\n        { type: \"boolean\" }, // skip\r\n      ],\r\n    },\r\n  },\r\n  required: [\"code\", \"indent\", \"parameters\"],\r\n} as const satisfies JSONSchemaType<Command_ScrollTextHeader>;\r\n\r\nexport const SCHEMA_COMMAND_SCROLL_TEXT_BODY = {\r\n  type: \"object\",\r\n  properties: {\r\n    code: { type: \"number\", const: 405 },\r\n    indent: { type: \"integer\", minimum: 0 },\r\n    parameters: {\r\n      type: \"array\",\r\n      minItems: 1,\r\n      maxItems: 1,\r\n      items: [{ type: \"string\" }], // content\r\n    },\r\n  },\r\n  required: [\"code\", \"indent\", \"parameters\"],\r\n} as const satisfies JSONSchemaType<Command_ScrollTextBody>;\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { AudioFileParams } from \"src/utils\";\r\nimport type { CommandUnion_AnyAudio } from \"./types\";\r\n\r\n// enumは意図的に直書き。\r\n// 定数を使うとimport解決でエラーが起こる\r\nconst SCHEMA_COMMAND_ANY_AUDIO = {\r\n  type: \"object\",\r\n  required: [\"code\", \"parameters\", \"indent\"],\r\n\r\n  properties: {\r\n    code: {\r\n      type: \"integer\",\r\n      enum: [132, 133, 139, 241, 245, 249, 250],\r\n    },\r\n    indent: { type: \"integer\" },\r\n    parameters: {\r\n      type: \"array\",\r\n      minItems: 1,\r\n      maxItems: 1,\r\n      items: [\r\n        {\r\n          type: \"object\",\r\n          properties: {\r\n            name: { type: \"string\" },\r\n            volume: { type: \"integer\" },\r\n            pitch: { type: \"integer\" },\r\n            pan: { type: \"integer\" },\r\n          },\r\n          required: [\"name\", \"volume\", \"pitch\", \"pan\"],\r\n          additionalProperties: false,\r\n        } satisfies JSONSchemaType<AudioFileParams>,\r\n      ],\r\n    },\r\n  },\r\n  additionalProperties: false,\r\n} as const satisfies JSONSchemaType<CommandUnion_AnyAudio>;\r\n\r\nexport default SCHEMA_COMMAND_ANY_AUDIO;\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type {\r\n  CommandUnion_EmptyParam,\r\n  CommandUnion_TextBody,\r\n} from \"./unionTypes\";\r\n// enumは意図的に数値直書き。\r\n// importで定数を取り込むと参照解決の問題でエラーになることがある\r\nexport const SCHEMA_COMMAND_TEXT_BODY = {\r\n  type: \"object\",\r\n  required: [\"code\", \"parameters\", \"indent\"],\r\n\r\n  properties: {\r\n    code: {\r\n      type: \"integer\",\r\n      enum: [108, 355, 401, 405, 408, 655] satisfies ReadonlyArray<\r\n        CommandUnion_TextBody[\"code\"]\r\n      >,\r\n    },\r\n    indent: { type: \"integer\", minimum: 0 },\r\n    parameters: {\r\n      type: \"array\",\r\n      minItems: 1,\r\n      maxItems: 1,\r\n      items: [{ type: \"string\" }],\r\n    },\r\n  },\r\n  additionalProperties: false,\r\n} as const satisfies JSONSchemaType<CommandUnion_TextBody>;\r\n\r\nexport const SCHEMA_COMMAND_EMPTY_PARAM = {\r\n  type: \"object\",\r\n  required: [\"code\", \"parameters\", \"indent\"],\r\n  properties: {\r\n    indent: { type: \"integer\", minimum: 0 },\r\n    parameters: { type: \"array\", minItems: 0, maxItems: 0 },\r\n    code: {\r\n      type: \"integer\",\r\n      enum: [\r\n        0, 109, 112, 113, 115, 204, 206, 213, 214, 216, 217, 221, 222, 243, 244,\r\n        251, 314, 315, 340, 351, 352, 353, 354, 411,\r\n      ] satisfies ReadonlyArray<CommandUnion_EmptyParam[\"code\"]>,\r\n    },\r\n  },\r\n  additionalProperties: false,\r\n} as const;\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { Command_CommonEvent } from \"./types\";\r\n\r\nexport const SCHEMA_COMMAND_CALL_COMMON_EVENT = {\r\n  type: \"object\",\r\n  properties: {\r\n    code: { type: \"number\", const: 117 },\r\n    indent: { type: \"integer\", minimum: 0 },\r\n    parameters: {\r\n      type: \"array\",\r\n      minItems: 1,\r\n      maxItems: 1,\r\n      items: [{ type: \"number\", minimum: 0, default: 0 }],\r\n    },\r\n  },\r\n  required: [\"code\", \"indent\", \"parameters\"],\r\n} as const satisfies JSONSchemaType<Command_CommonEvent>;\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { Command_ShowChoices } from \"./types\";\r\n\r\nconst SCHEMA_COMMAND_SHOW_CHOICES = {\r\n  type: \"object\",\r\n  properties: {\r\n    code: { type: \"number\", const: 102 },\r\n    indent: { type: \"integer\", minimum: 0 },\r\n    parameters: {\r\n      type: \"array\",\r\n      minItems: 5,\r\n      maxItems: 5,\r\n      items: [\r\n        { type: \"array\", items: { type: \"string\" } }, // choices\r\n        { type: \"integer\" }, // cancelType\r\n        { type: \"integer\" }, // defaultType\r\n        { type: \"integer\" }, // positionType\r\n        { type: \"integer\" }, // background\r\n      ],\r\n    },\r\n  },\r\n  required: [\"code\", \"indent\", \"parameters\"],\r\n} as const satisfies JSONSchemaType<Command_ShowChoices>;\r\n\r\nexport default SCHEMA_COMMAND_SHOW_CHOICES;\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { Command_ShowChoiceWhen } from \"./types\";\r\n\r\nconst SCHEMA_COMMAND_SHOW_CHOICE_WHEN = {\r\n  type: \"object\",\r\n  properties: {\r\n    code: { type: \"number\", const: 402 },\r\n    indent: { type: \"integer\", minimum: 0 },\r\n    parameters: {\r\n      type: \"array\",\r\n      minItems: 2,\r\n      maxItems: 2,\r\n      items: [\r\n        { type: \"integer\" }, // index\r\n        { type: \"string\" }, // name\r\n      ],\r\n    },\r\n  },\r\n  required: [\"code\", \"indent\", \"parameters\"],\r\n} as const satisfies JSONSchemaType<Command_ShowChoiceWhen>;\r\n\r\nexport default SCHEMA_COMMAND_SHOW_CHOICE_WHEN;\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { Command_InputNumber } from \"./types\";\r\n\r\nexport const SCHEMA_COMMAND_INPUT_NUMBER = {\r\n  type: \"object\",\r\n  properties: {\r\n    code: { type: \"number\", const: 103 },\r\n    indent: { type: \"integer\", minimum: 0 },\r\n    parameters: {\r\n      type: \"array\",\r\n      minItems: 2,\r\n      maxItems: 2,\r\n      items: [\r\n        { type: \"number\" }, // variableId\r\n        { type: \"number\" }, // digits\r\n      ],\r\n    },\r\n  },\r\n  required: [\"code\", \"indent\", \"parameters\"],\r\n} as const satisfies JSONSchemaType<Command_InputNumber>;\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { Command_ShowMessageHeader } from \"./types\";\r\n\r\nexport const SCHEMA_COMMAND_SHOW_MESSAGE = {\r\n  type: \"object\",\r\n  required: [\"code\", \"parameters\", \"indent\"],\r\n  properties: {\r\n    code: { type: \"integer\", const: 101 }, // Assuming 101 is the code for ShowMessage\r\n    indent: { type: \"integer\", minimum: 0 },\r\n    parameters: {\r\n      type: \"array\",\r\n      items: [\r\n        { type: \"string\" }, // facename\r\n        { type: \"integer\", minimum: 0, maximum: 7 }, // faceIndex\r\n        { type: \"integer\", minimum: 0, maximum: 2 }, // background\r\n        { type: \"integer\", minimum: 0, maximum: 2 }, // positionType\r\n        { type: \"string\" }, // speakerName\r\n      ] as const,\r\n\r\n      minItems: 5,\r\n      maxItems: 5,\r\n    },\r\n  },\r\n} as const satisfies JSONSchemaType<Command_ShowMessageHeader>;\r\n","import {\r\n  PLAY_BGM,\r\n  PLAY_BGS,\r\n  PLAY_ME,\r\n  PLAY_SE,\r\n  CHANGE_BATTLE_BGM,\r\n  CHANGE_VICTORY_ME,\r\n  CHANGE_DEFEAT_ME,\r\n} from \"@RpgTypes/rpg\";\r\nimport type {\r\n  Command_PlayBGM,\r\n  Command_PlayBGS,\r\n  Command_ChangeBattleBGM,\r\n  Command_ChangeVictoryME,\r\n  Command_ChangeDefeatME,\r\n  Command_PlayME,\r\n  Command_PlaySE,\r\n} from \"./commands/audio\";\r\nimport { isCommandAudio } from \"./validate\";\r\n\r\nexport const isCommandPlayBgm = (\r\n  command: unknown\r\n): command is Command_PlayBGM => {\r\n  return isCommandAudio(command) && command.code === PLAY_BGM;\r\n};\r\n\r\nexport const isCommandPlayBgs = (\r\n  command: unknown\r\n): command is Command_PlayBGS => {\r\n  return isCommandAudio(command) && command.code === PLAY_BGS;\r\n};\r\n\r\nexport const isCommandPlayMe = (\r\n  command: unknown\r\n): command is Command_PlayME => {\r\n  return isCommandAudio(command) && command.code === PLAY_ME;\r\n};\r\n\r\nexport const isCommandPlaySe = (\r\n  command: unknown\r\n): command is Command_PlaySE => {\r\n  return isCommandAudio(command) && command.code === PLAY_SE;\r\n};\r\n\r\nexport const isCommandChangeBattleBgm = (\r\n  command: unknown\r\n): command is Command_ChangeBattleBGM => {\r\n  return isCommandAudio(command) && command.code === CHANGE_BATTLE_BGM;\r\n};\r\n\r\nexport const isCommandChangeVictoryMe = (\r\n  command: unknown\r\n): command is Command_ChangeVictoryME => {\r\n  return isCommandAudio(command) && command.code === CHANGE_VICTORY_ME;\r\n};\r\n\r\nexport const isCommandChangeDefeatMe = (\r\n  command: unknown\r\n): command is Command_ChangeDefeatME => {\r\n  return isCommandAudio(command) && command.code === CHANGE_DEFEAT_ME;\r\n};\r\n","import {\r\n  SHOW_MESSAGE_BODY,\r\n  SHOW_SCROLLING_TEXT_BODY,\r\n  COMMENT_BODY,\r\n  COMMENT_HEAD,\r\n  SCRIPT_EVAL_BODY,\r\n  SCRIPT_EVAL,\r\n} from \"@RpgTypes/rpg\";\r\nimport type {\r\n  Command_ShowMessageBody,\r\n  Command_CommentBody,\r\n  Command_CommentHeader,\r\n  Command_ScrollTextBody,\r\n  Command_ScriptHeader,\r\n  Command_ScriptBody,\r\n} from \"./commands\";\r\nimport { isCommandTextBody } from \"./validate\";\r\n\r\nexport const isCommandShowMessageBody = (\r\n  command: unknown\r\n): command is Command_ShowMessageBody => {\r\n  return isCommandTextBody(command) && command.code === SHOW_MESSAGE_BODY;\r\n};\r\n\r\nexport const isCommandShowScrollingTextBody = (\r\n  command: unknown\r\n): command is Command_ScrollTextBody => {\r\n  return (\r\n    isCommandTextBody(command) && command.code === SHOW_SCROLLING_TEXT_BODY\r\n  );\r\n};\r\n\r\nexport const isCommandCommentHeader = (\r\n  command: unknown\r\n): command is Command_CommentHeader => {\r\n  return isCommandTextBody(command) && command.code === COMMENT_HEAD;\r\n};\r\n\r\nexport const isCommandCommentBody = (\r\n  command: unknown\r\n): command is Command_CommentBody => {\r\n  return isCommandTextBody(command) && command.code === COMMENT_BODY;\r\n};\r\n\r\nexport const isCommandScriptHeader = (\r\n  command: unknown\r\n): command is Command_ScriptHeader => {\r\n  return isCommandTextBody(command) && command.code === SCRIPT_EVAL;\r\n};\r\n\r\nexport const isCommandScriptBody = (\r\n  command: unknown\r\n): command is Command_ScriptBody => {\r\n  return isCommandTextBody(command) && command.code === SCRIPT_EVAL_BODY;\r\n};\r\n","export const FOLDER_AUDIO_BGM = \"bgm\" as const;\r\nexport const FOLDER_AUDIO_SE = \"se\" as const;\r\nexport const FOLDER_AUDIO_ME = \"me\" as const;\r\nexport const FOLDER_AUDIO_BGS = \"bgs\" as const;\r\n","export const FOLDER_IMG_BATTLEBACK1 = \"battlebacks1\" as const;\r\nexport const FOLDER_IMG_BATTLEBACK2 = \"battlebacks2\" as const;\r\nexport const FOLDER_IMG_CHACTERS = \"characters\" as const;\r\nexport const FOLDER_IMG_ENEMIES = \"enemies\" as const;\r\nexport const FOLDER_IMG_FACES = \"faces\" as const;\r\nexport const FOLDER_IMG_PARALLACES = \"parallaxes\" as const;\r\nexport const FOLDER_IMG_PICTURES = \"pictures\" as const;\r\nexport const FOLDER_IMG_SV_ACTORS = \"sv_actors\" as const;\r\nexport const FOLDER_IMG_SV_ENEMIES = \"sv_enemies\" as const;\r\nexport const FOLDER_IMG_SYSTEM = \"system\" as const;\r\nexport const FOLDER_IMG_TILESETS = \"tilesets\" as const;\r\nexport const FOLDER_IMG_TITLES1 = \"titles1\" as const;\r\nexport const FOLDER_IMG_TITLES2 = \"titles2\" as const;\r\n","export const FILENAME_SYSTEM = \"System.json\";\r\nexport const FILENAME_ACTORS = \"Actors.json\";\r\nexport const FILENAME_CLASSES = \"Classes.json\";\r\nexport const FILENAME_SKILLS = \"Skills.json\";\r\nexport const FILENAME_ITEMS = \"Items.json\";\r\nexport const FILENAME_WEAPONS = \"Weapons.json\";\r\nexport const FILENAME_ARMORS = \"Armors.json\";\r\nexport const FILENAME_ENEMIES = \"Enemies.json\";\r\nexport const FILENAME_TROOPS = \"Troops.json\";\r\nexport const FILENAME_STATES = \"States.json\";\r\nexport const FILENAME_ANIMATIONS = \"Animations.json\";\r\nexport const FILENAME_TILESET = \"Tilesets.json\";\r\nexport const FILENAME_COMMON_EVENTS = \"CommonEvents.json\";\r\nexport const FILENAME_MAP_INFOS = \"MapInfos.json\";\r\n","export const FOLDER_DATA = \"data\" as const;\r\nexport const FOLDER_IMG = \"img\" as const;\r\nexport const FOLDER_AUDIO = \"audio\" as const;\r\nexport const FOLDER_JS = \"js\" as const;\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport type { ArrayParamBase, ParamBase } from \"./paramBase\";\r\n\r\nexport const compileArrayField = <T, S extends JSONSchemaType<T>>(\r\n  data: ArrayParamBase<T>,\r\n  itemSchema: S\r\n) =>\r\n  ({\r\n    type: \"array\",\r\n    items: itemSchema,\r\n    ...withTexts(data),\r\n    ...withDefault(data.default),\r\n  } satisfies JSONSchemaType<T[]>);\r\n\r\n/**\r\n * - ParamBaseの派生型からメタ情報を抽出しJSONSchema形式に変換。値が無効な場合はフィールドを生成しない。\r\n */\r\nexport const withTexts = (\r\n  param: ParamBase\r\n): {\r\n  title?: string;\r\n  description?: string;\r\n} => ({\r\n  ...(typeof param.text === \"string\" ? { title: param.text } : {}),\r\n  ...(typeof param.desc === \"string\" ? { description: param.desc } : {}),\r\n});\r\n\r\n/**\r\n * - ParamBaseの派生型からdefault値を抽出。値が無効な場合はフィールドを生成しない。\r\n */\r\nexport const withDefault = <T>(\r\n  value: T | undefined\r\n):\r\n  | {}\r\n  | {\r\n      default: T;\r\n    } => (value !== undefined ? { default: value } : {});\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport { withTexts } from \"./core/paramBase/basicMetaField\";\r\nimport type {\r\n  JSONSchemaTypeWithRpgParam,\r\n  X_Param,\r\n} from \"./core/paramBase/x-rpg-param\";\r\nimport { xparamBaseData } from \"./core/paramBase/x-rpg-param\";\r\nimport type { NumberParam, NumberArrayParam } from \"./core/primitiveParams\";\r\nimport { withDefault } from \"./utils\";\r\n\r\nconst isIntegerKind = (digit: number | undefined | null) => {\r\n  return digit === undefined || digit === 0;\r\n};\r\nexport const compileNumberField = (\r\n  data: NumberParam\r\n): JSONSchemaType<number> => ({\r\n  type: isIntegerKind(data.decimals) ? \"integer\" : \"number\",\r\n  ...withDefault(data.default),\r\n  ...withTexts(data),\r\n});\r\nexport const compileNumberArrayField = (\r\n  data: NumberArrayParam\r\n): JSONSchemaType<number[]> => ({\r\n  type: \"array\",\r\n  items: {\r\n    type: isIntegerKind(data.decimals) ? \"integer\" : \"number\",\r\n  },\r\n  ...withDefault(data.default),\r\n  ...withTexts(data),\r\n});\r\n\r\nconst xparamNumber = (data: NumberParam | NumberArrayParam) =>\r\n  xparamBaseData(\r\n    data,\r\n    typeof data.decimals === \"number\"\r\n      ? ({ decimals: data.decimals } satisfies Partial<NumberParam>)\r\n      : {}\r\n  );\r\nexport const compileNumberFieldWithXparam = (\r\n  data: NumberParam\r\n): JSONSchemaTypeWithRpgParam<NumberParam> => ({\r\n  type: isIntegerKind(data.decimals) ? \"integer\" : \"number\",\r\n  ...withDefault(data.default),\r\n  ...withTexts(data),\r\n  ...(xparamNumber(data) satisfies X_Param),\r\n});\r\n\r\nexport const compileNumberArrayFieldWithXParam = (\r\n  data: NumberArrayParam\r\n): JSONSchemaTypeWithRpgParam<NumberArrayParam> => ({\r\n  type: \"array\",\r\n  items: {\r\n    type: isIntegerKind(data.decimals) ? \"integer\" : \"number\",\r\n  },\r\n  ...withDefault(data.default),\r\n  ...withTexts(data),\r\n  ...xparamNumber(data),\r\n});\r\n","import { compileBooleanFieldWithXParam, compileBooleanField } from \"./boolean\";\r\nimport { compileComboField, compileComboFieldWithXparam } from \"./combo\";\r\nimport type { PrimitiveParam } from \"./core/primitiveParams\";\r\nimport { compileFileField, compileFileFieldWithXparam } from \"./file\";\r\nimport {\r\n  compileNumberArrayField,\r\n  compileNumberArrayFieldWithXParam,\r\n  compileNumberField,\r\n  compileNumberFieldWithXparam,\r\n} from \"./numbers\";\r\nimport type { AnyParamSchema } from \"./pluginMeta/anyParamSchema\";\r\nimport { makeRpgIdFieldWithXParam, makeRpgIdField } from \"./rpgDataKind\";\r\nimport { compileSelectField, compileSelectFieldWithXparam } from \"./select\";\r\nimport { compileStringField, compileStringFieldWithXparam } from \"./string\";\r\nimport { makeStructRef } from \"./structDef\";\r\nimport { compileArrayField } from \"./utils\";\r\n\r\nconst makeStringArrayField = (\r\n  data: Extract<PrimitiveParam, { default: string[] }>\r\n) => compileArrayField(data, { type: \"string\" });\r\n\r\nconst makeDataIdArrayField = (\r\n  data: Extract<PrimitiveParam, { default: number[] }>\r\n) => compileArrayField(data, { type: \"integer\" });\r\n\r\nexport const compilePrimitiveField = (data: PrimitiveParam): AnyParamSchema => {\r\n  switch (data.kind) {\r\n    case \"string\":\r\n    case \"multiline_string\":\r\n      return compileStringField(data);\r\n    case \"file\":\r\n      return compileFileField(data);\r\n    case \"combo\":\r\n      return compileComboField(data);\r\n    case \"select\":\r\n      return compileSelectField(data);\r\n    case \"file[]\":\r\n      return makeStringArrayField(data);\r\n    case \"string[]\":\r\n    case \"multiline_string[]\":\r\n      return makeStringArrayField(data);\r\n    case \"number[]\":\r\n      return compileNumberArrayField(data);\r\n    case \"actor[]\":\r\n    case \"weapon[]\":\r\n    case \"armor[]\":\r\n    case \"skill[]\":\r\n    case \"item[]\":\r\n    case \"enemy[]\":\r\n    case \"state[]\":\r\n    case \"class[]\":\r\n    case \"troop[]\":\r\n      return makeDataIdArrayField(data);\r\n    case \"number\":\r\n      return compileNumberField(data);\r\n    case \"actor\":\r\n    case \"weapon\":\r\n    case \"armor\":\r\n    case \"skill\":\r\n    case \"item\":\r\n    case \"enemy\":\r\n    case \"state\":\r\n    case \"class\":\r\n    case \"troop\":\r\n      return makeRpgIdField(data);\r\n    case \"boolean\":\r\n      return compileBooleanField(data);\r\n    case \"struct\":\r\n      return makeStructRef(data);\r\n    default:\r\n      return {};\r\n  }\r\n};\r\n\r\nexport const compilePrimitiveFieldWithXParam = (\r\n  data: PrimitiveParam\r\n): AnyParamSchema => {\r\n  switch (data.kind) {\r\n    case \"string\":\r\n    case \"multiline_string\":\r\n      return compileStringFieldWithXparam(data);\r\n    case \"file\":\r\n      return compileFileFieldWithXparam(data);\r\n    case \"combo\":\r\n      return compileComboFieldWithXparam(data);\r\n    case \"select\":\r\n      return compileSelectFieldWithXparam(data);\r\n    case \"file[]\":\r\n      return makeStringArrayField(data);\r\n    case \"string[]\":\r\n    case \"multiline_string[]\":\r\n      return makeStringArrayField(data);\r\n    case \"number[]\":\r\n      return compileNumberArrayFieldWithXParam(data);\r\n    case \"actor[]\":\r\n    case \"weapon[]\":\r\n    case \"armor[]\":\r\n    case \"skill[]\":\r\n    case \"item[]\":\r\n    case \"enemy[]\":\r\n    case \"state[]\":\r\n    case \"class[]\":\r\n    case \"troop[]\":\r\n      return makeDataIdArrayField(data);\r\n    case \"number\":\r\n      return compileNumberFieldWithXparam(data);\r\n    case \"actor\":\r\n    case \"weapon\":\r\n    case \"armor\":\r\n    case \"skill\":\r\n    case \"item\":\r\n    case \"enemy\":\r\n    case \"state\":\r\n    case \"class\":\r\n    case \"troop\":\r\n      return makeRpgIdFieldWithXParam(data);\r\n    case \"boolean\":\r\n      return compileBooleanFieldWithXParam(data);\r\n    case \"struct\":\r\n      return makeStructRef(data);\r\n    default:\r\n      return {};\r\n  }\r\n};\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport { withTexts } from \"./core/paramBase/basicMetaField\";\r\nimport type { JSONSchemaTypeWithRpgParam } from \"./core/paramBase/x-rpg-param\";\r\nimport { xparamBaseData } from \"./core/paramBase/x-rpg-param\";\r\nimport type { StringParam } from \"./core/primitiveParams\";\r\nimport { withDefault } from \"./utils\";\r\n\r\nexport const compileStringField = (\r\n  data: StringParam\r\n): JSONSchemaType<string> => ({\r\n  type: \"string\",\r\n  ...withTexts(data),\r\n  ...withDefault(data.default),\r\n});\r\n\r\nexport const compileStringFieldWithXparam = (\r\n  data: StringParam\r\n): JSONSchemaTypeWithRpgParam<StringParam> => ({\r\n  type: \"string\",\r\n  ...withTexts(data),\r\n  ...withDefault(data.default),\r\n  ...xparamBaseData(data, {}),\r\n});\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport { withTexts } from \"./core/paramBase/basicMetaField\";\r\nimport type { JSONSchemaTypeWithRpgParam } from \"./core/paramBase/x-rpg-param\";\r\nimport { xparamBaseData } from \"./core/paramBase/x-rpg-param\";\r\nimport type { ComboParam } from \"./core/primitiveParams\";\r\nimport { withDefault } from \"./utils\";\r\n\r\nexport const compileComboField = (\r\n  data: ComboParam\r\n): JSONSchemaType<string> => ({\r\n  type: \"string\",\r\n  ...withDefault(data.default),\r\n  ...withTexts(data),\r\n});\r\n\r\nexport const compileComboFieldWithXparam = (\r\n  data: ComboParam\r\n): JSONSchemaTypeWithRpgParam<ComboParam> => ({\r\n  type: \"string\",\r\n  ...withDefault(data.default),\r\n  ...withTexts(data),\r\n  ...xparamBaseData(data, {\r\n    options: [...data.options],\r\n  }),\r\n});\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport { withTexts } from \"./core/paramBase/basicMetaField\";\r\nimport type { JSONSchemaTypeWithRpgParam } from \"./core/paramBase/x-rpg-param\";\r\nimport { xparamBaseData } from \"./core/paramBase/x-rpg-param\";\r\nimport type { SelectParam } from \"./core/primitiveParams\";\r\nimport { withDefault } from \"./utils\";\r\n\r\nexport const compileSelectField = (\r\n  data: SelectParam\r\n): JSONSchemaType<string> => ({\r\n  type: \"string\",\r\n  ...withDefault(data.default),\r\n  ...withTexts(data),\r\n  ...(data.options ? { enum: data.options.map((o): string => o.value) } : {}),\r\n});\r\n\r\nexport const compileSelectFieldWithXparam = (\r\n  data: SelectParam\r\n): JSONSchemaTypeWithRpgParam<SelectParam> => ({\r\n  type: \"string\",\r\n  ...withDefault(data.default),\r\n  ...withTexts(data),\r\n  ...{ enum: data.options.map((o): string => o.value) },\r\n  ...xparamBaseData(data, {\r\n    options: data.options.map((o) => ({\r\n      value: o.value,\r\n      option: o.option,\r\n    })),\r\n  }),\r\n});\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport { withTexts } from \"./core/paramBase/basicMetaField\";\r\nimport type { X_Param } from \"./core/paramBase/x-rpg-param\";\r\nimport { xparamBaseData } from \"./core/paramBase/x-rpg-param\";\r\nimport type { RpgDataIdParam, SystemDataIdParam } from \"./core/primitiveParams\";\r\nimport { lookupKind } from \"./core/rpgData/lookup\";\r\nimport { withDefault } from \"./utils\";\r\n\r\nexport const makeRpgIdField = (data: RpgDataIdParam | SystemDataIdParam) =>\r\n  ({\r\n    type: \"integer\",\r\n    ...withDefault(data.default),\r\n    ...withTexts(data),\r\n  } satisfies JSONSchemaType<number>);\r\n\r\nexport const makeRpgIdFieldWithXParam = (\r\n  data: RpgDataIdParam | SystemDataIdParam\r\n) => {\r\n  return {\r\n    type: \"integer\",\r\n    ...withDefault(data.default),\r\n    ...withTexts(data),\r\n    ...(xparamBaseData(data, lookupKind(data.kind)) satisfies X_Param),\r\n  } satisfies JSONSchemaType<number>;\r\n};\r\n","import type { JSONSchemaType } from \"ajv\";\r\nimport { withTexts } from \"./core/paramBase/basicMetaField\";\r\nimport type {\r\n  JSONSchemaTypeWithRpgParam,\r\n  X_Param,\r\n} from \"./core/paramBase/x-rpg-param\";\r\nimport { xparamBaseData } from \"./core/paramBase/x-rpg-param\";\r\nimport type { BooleanParam } from \"./core/primitiveParams\";\r\nimport { withDefault } from \"./utils\";\r\n\r\nexport const compileBooleanField = (\r\n  data: BooleanParam\r\n): JSONSchemaType<boolean> => ({\r\n  type: \"boolean\",\r\n  ...withDefault(data.default),\r\n  ...withTexts(data),\r\n});\r\n\r\nexport const compileBooleanFieldWithXParam = (\r\n  data: BooleanParam\r\n): JSONSchemaTypeWithRpgParam<BooleanParam> => ({\r\n  type: \"boolean\",\r\n  ...withDefault(data.default),\r\n  ...withTexts(data),\r\n  ...(xparamBoolean(data) satisfies X_Param),\r\n});\r\n\r\nconst xparamBoolean = (data: BooleanParam) =>\r\n  xparamBaseData(data, {\r\n    ...(typeof data.on === \"string\" ? { on: data.on } : {}),\r\n    ...(typeof data.off === \"string\" ? { off: data.off } : {}),\r\n  });\r\n","import { withTexts } from \"./core/paramBase/basicMetaField\";\r\nimport type { X_RPG_PARM, X_RmmzParam } from \"./core/paramBase/x-rpg-param\";\r\nimport { xparamBaseData } from \"./core/paramBase/x-rpg-param\";\r\nimport type { StructRefParam } from \"./core/primitiveParams\";\r\n\r\nexport interface JSONSchemaStructRef {\r\n  $ref: string;\r\n  description?: string;\r\n  title?: string;\r\n}\r\n\r\nexport const makeStructRef = (ref: StructRefParam): JSONSchemaStructRef => ({\r\n  $ref: `#/definitions/${ref.struct}`,\r\n  ...withTexts(ref),\r\n});\r\n\r\ntype SchemaType = JSONSchemaStructRef & {\r\n  [X_RPG_PARM]: X_RmmzParam<{ struct: string }>;\r\n};\r\n\r\nexport const makeStructRefWithXParam = (ref: StructRefParam) =>\r\n  ({\r\n    $ref: `#/definitions/${ref.struct}`,\r\n    ...withTexts(ref),\r\n    ...xparamBaseData(ref, {\r\n      struct: ref.struct,\r\n    }),\r\n  } satisfies SchemaType);\r\n","export type MappingTable<T> = {\r\n  [K in Extract<keyof T, string>]: (value: string) => T[K];\r\n};\r\n\r\ntype TableConcept = {\r\n  [key: string]: (tokens: string) => unknown;\r\n};\r\n\r\nexport const applyMappingTable = <T extends TableConcept>(\r\n  tokens: Record<string, string>,\r\n  fnTable: T\r\n): {\r\n  [K in keyof T]?: ReturnType<T[K]>;\r\n} => {\r\n  return Object.entries(fnTable).reduce((acc, [key, fn]) => {\r\n    if (key in tokens) {\r\n      const value = tokens[key as string];\r\n      if (typeof value === \"string\") {\r\n        return {\r\n          ...acc,\r\n          [key]: fn(value),\r\n        };\r\n      }\r\n    }\r\n    return acc;\r\n  }, {});\r\n};\r\n\r\nexport const compileParam = <Kind extends string, T>(\r\n  kind: Kind,\r\n  defaultValue: T,\r\n  tokens: Record<string, string>,\r\n  fnTable: TableConcept\r\n): {\r\n  kind: Kind;\r\n  default: T;\r\n} & {\r\n  [K in keyof TableConcept]?: ReturnType<TableConcept[K]>;\r\n} => {\r\n  return {\r\n    default: defaultValue,\r\n    ...applyMappingTable(tokens, fnTable),\r\n    kind,\r\n  };\r\n};\r\n\r\nexport const compileArrayParam = <\r\n  T extends TableConcept & { default: (s: string) => unknown[] },\r\n  Kind extends string\r\n>(\r\n  kind: Kind,\r\n  tokens: Record<string, string>,\r\n  fnTable: T\r\n): {\r\n  kind: Kind;\r\n  default: ReturnType<T[\"default\"]>;\r\n} & {\r\n  [K in keyof T]?: ReturnType<T[K]>;\r\n} => {\r\n  return {\r\n    default: [],\r\n    ...applyMappingTable(tokens, fnTable),\r\n    kind,\r\n  };\r\n};\r\n","export const KEYWORD_TARGET = \"target\" as const;\r\nexport const KEYWORD_PLUGINDESC = \"plugindesc\" as const;\r\nexport const KEYWORD_AUTHOR = \"author\" as const;\r\nexport const KEYWORD_HELP = \"help\" as const;\r\nexport const KEYWORD_URL = \"url\" as const;\r\n\r\nexport const KEYWORD_KIND = \"kind\" as const;\r\nexport const KEYWORD_TYPE = \"type\" as const;\r\n\r\nexport const KEYWORD_PARAM = \"param\" as const;\r\nexport const KEYWORD_DESC = \"desc\" as const;\r\nexport const KEYWORD_TEXT = \"text\" as const;\r\nexport const KEYWORD_PARENT = \"parent\" as const;\r\nexport const KEYWORD_DEFAULT = \"default\" as const;\r\n\r\nexport const KEYWORD_ON = \"on\" as const;\r\nexport const KEYWORD_OFF = \"off\" as const;\r\n\r\nexport const KEYWORD_MAX = \"max\" as const;\r\nexport const KEYWORD_MIN = \"min\" as const;\r\nexport const KEYWORD_DECIMALS = \"decimals\" as const;\r\n\r\nexport const KEYWORD_DIR = \"dir\" as const;\r\n\r\nexport const KEYWORD_OPTION = \"option\" as const;\r\nexport const KEYWORD_VALUE = \"value\" as const;\r\n\r\nexport const KEYWORD_COMMAND = \"command\" as const;\r\nexport const KEYWORD_ARG = \"arg\" as const;\r\n\r\nexport const KEYWORD_BASE = \"base\" as const;\r\nexport const KEYWORD_ORDERAFTER = \"orderAfter\" as const;\r\nexport const KEYWORD_ORDERBEFORE = \"orderBefore\" as const;\r\n\r\nexport const KEYWORD_STRUCT = \"struct\" as const;\r\n","export const parseDeepJSON = (json: string): unknown => {\r\n  const parsed = JSON.parse(json);\r\n  if (Array.isArray(parsed)) {\r\n    return parsed.map(parseDeepValue);\r\n  }\r\n  if (typeof parsed === \"object\" && parsed !== null) {\r\n    return Object.fromEntries(\r\n      Object.entries(parsed).map(([k, v]) => [k, parseDeepValue(v)])\r\n    );\r\n  }\r\n  return parsed;\r\n};\r\n\r\nconst parseDeepValue = (value: unknown): unknown => {\r\n  if (typeof value !== \"string\") {\r\n    return value;\r\n  }\r\n  try {\r\n    const parsed = JSON.parse(value);\r\n    // 配列の場合、各要素を再帰的にparseDeepValue\r\n    if (Array.isArray(parsed)) {\r\n      return parsed.map(parseDeepValue);\r\n    }\r\n    // オブジェクトの場合、各プロパティを再帰的にparseDeepValue\r\n    if (typeof parsed === \"object\" && parsed !== null) {\r\n      return Object.fromEntries(\r\n        Object.entries(parsed).map(([k, v]) => [k, parseDeepValue(v)])\r\n      );\r\n    }\r\n    return parsed;\r\n  } catch {\r\n    // JSON.parseに失敗した場合はそのまま返す\r\n    return value;\r\n  }\r\n};\r\n","import type { MappingTable } from \"./mapping/mapping\";\r\nimport { compileParam, compileArrayParam } from \"./mapping/mapping\";\r\nimport { KEYWORD_KIND } from \"./parse/keyword/constants\";\r\nimport type { OptionItem } from \"./parse/selectOption\";\r\nimport type { PluginParamTokens } from \"./parse/types\";\r\nimport type {\r\n  BooleanParam,\r\n  NumberParam,\r\n  PrimitiveParam,\r\n  FileParam,\r\n  GenericIdParam,\r\n  NumberArrayParam,\r\n  StringArrayParam,\r\n  FileArrayParam,\r\n  StringParam,\r\n  ComboParam,\r\n  SelectParam,\r\n} from \"./primitiveParams\";\r\nimport { parseDeepJSON } from \"./rmmzJSON\";\r\nimport type {\r\n  DataKind_RpgUnion,\r\n  DataKind_SystemUnion,\r\n} from \"./rpgData/rpgDataTypesNames\";\r\n\r\ntype MappingTableEx<T> = MappingTable<Omit<T, \"kind\">>;\r\n\r\nexport type ParamSoruceRecord<T> = Partial<Record<keyof T, string>>;\r\n\r\nexport const compileAttributes = (\r\n  tokens: PluginParamTokens\r\n): PrimitiveParam => {\r\n  if (KEYWORD_KIND in tokens.attr) {\r\n    const func = TABLE2[tokens.attr.kind as keyof typeof TABLE2];\r\n    if (func) {\r\n      return func(tokens);\r\n    }\r\n  }\r\n  return compileParam(\"any\", \"\", tokens.attr, STRING);\r\n};\r\n\r\nconst attrString = (value: string): string => value;\r\nconst numberArray = (value: string): number[] => {\r\n  const numbers = value\r\n    .replace(\"[\", \"\")\r\n    .replace(\"]\", \"\")\r\n    .split(\",\")\r\n    .map((v) => parseFloat(v.replaceAll(`\"`, \"\").trim()));\r\n  return numbers.filter((n) => !isNaN(n));\r\n};\r\n\r\nconst STRING = {\r\n  default: attrString,\r\n  text: attrString,\r\n  desc: attrString,\r\n  parent: attrString,\r\n} as const satisfies MappingTableEx<StringParam>;\r\n\r\nconst compileComboParam = (tokens: PluginParamTokens): ComboParam => {\r\n  const option: string[] = tokens.options?.map((o) => o.option) ?? [];\r\n\r\n  return {\r\n    ...compileParam(\"combo\", \"\", tokens.attr, STRING),\r\n    options: option,\r\n  };\r\n};\r\nconst compileSelectParam = (tokens: PluginParamTokens): SelectParam => {\r\n  const options: OptionItem[] =\r\n    tokens.options?.map((o) => ({\r\n      option: o.option,\r\n      value: o.value,\r\n    })) ?? [];\r\n\r\n  return {\r\n    ...compileParam(\"select\", \"\", tokens.attr, STRING),\r\n    options,\r\n  };\r\n};\r\n\r\nconst compileBooleanParam = (tokens: PluginParamTokens): BooleanParam => {\r\n  const BOOLEAN = {\r\n    default: (value: string) => value === \"true\",\r\n    text: attrString,\r\n    desc: attrString,\r\n    on: attrString,\r\n    off: attrString,\r\n    parent: attrString,\r\n  } as const satisfies MappingTableEx<BooleanParam>;\r\n  return compileParam(\"boolean\", true, tokens.attr, BOOLEAN);\r\n};\r\n\r\nconst compileNumberParam = (tokens: PluginParamTokens): NumberParam => {\r\n  const NUMBER = {\r\n    default: (value: string) => parseFloat(value),\r\n    text: attrString,\r\n    desc: attrString,\r\n    decimals: (value: string) => parseInt(value, 10),\r\n    min: (value: string) => parseFloat(value),\r\n    max: (value: string) => parseFloat(value),\r\n    parent: attrString,\r\n  } as const satisfies MappingTableEx<NumberParam>;\r\n  return compileParam(\"number\", 0, tokens.attr, NUMBER);\r\n};\r\n\r\nconst compileNumberArrayParam = (\r\n  tokens: PluginParamTokens\r\n): NumberArrayParam => {\r\n  const NUMBER_ARRAY = {\r\n    default: numberArray,\r\n    text: attrString,\r\n    desc: attrString,\r\n    decimals: (value: string) => parseInt(value, 10),\r\n    min: (value: string) => parseFloat(value),\r\n    max: (value: string) => parseFloat(value),\r\n    parent: attrString,\r\n  } as const satisfies MappingTableEx<NumberArrayParam>;\r\n  return compileArrayParam(\"number[]\", tokens.attr, NUMBER_ARRAY);\r\n};\r\n\r\nconst compileStringParam = (tokens: PluginParamTokens) => {\r\n  return compileParam(\"string\", \"\", tokens.attr, STRING);\r\n};\r\n\r\nconst compileStringArrayParam = (\r\n  tokens: PluginParamTokens\r\n): StringArrayParam => {\r\n  const STRING_ARRAY = {\r\n    default: (value: string): string[] => parseDeepJSON(value) as string[],\r\n    text: attrString,\r\n    desc: attrString,\r\n    parent: attrString,\r\n  } as const satisfies MappingTableEx<StringArrayParam>;\r\n  return compileArrayParam(\"string[]\", tokens.attr, STRING_ARRAY);\r\n};\r\n\r\nconst compileFileParam = (tokens: PluginParamTokens): FileParam => {\r\n  const FILE = {\r\n    default: attrString,\r\n    text: attrString,\r\n    desc: attrString,\r\n    parent: attrString,\r\n    dir: attrString,\r\n  } as const satisfies MappingTableEx<FileParam>;\r\n  return {\r\n    dir: \"\",\r\n    ...compileParam(\"file\", \"\", tokens.attr, FILE),\r\n  };\r\n};\r\n\r\nconst compileFileArrayParam = (tokens: PluginParamTokens): FileArrayParam => {\r\n  const FILE_ARRAY = {\r\n    default: (value: string): string[] => parseDeepJSON(value) as string[],\r\n    text: attrString,\r\n    desc: attrString,\r\n    parent: attrString,\r\n    dir: attrString,\r\n  } as const satisfies MappingTableEx<FileArrayParam>;\r\n  return {\r\n    dir: \"\",\r\n    ...compileArrayParam(\"file[]\", tokens.attr, FILE_ARRAY),\r\n  };\r\n};\r\n\r\nconst compileDataIdArray = <\r\n  Kind extends DataKind_RpgUnion | DataKind_SystemUnion\r\n>(\r\n  tokens: PluginParamTokens,\r\n  kind: `${Kind}[]`\r\n) => {\r\n  const DATA_ID_ARRAY = {\r\n    default: numberArray,\r\n    text: attrString,\r\n    desc: attrString,\r\n    parent: attrString,\r\n  } as const;\r\n  return compileArrayParam(kind, tokens.attr, DATA_ID_ARRAY);\r\n};\r\n\r\nconst compileDataId = <Kind extends DataKind_RpgUnion | DataKind_SystemUnion>(\r\n  tokens: PluginParamTokens,\r\n  kind: Kind\r\n) => {\r\n  const DATA_ID = {\r\n    default: (value: string) => parseInt(value, 10),\r\n    text: attrString,\r\n    desc: attrString,\r\n    parent: attrString,\r\n  } as const satisfies MappingTableEx<GenericIdParam>;\r\n  return compileParam(kind, 0, tokens.attr, DATA_ID);\r\n};\r\n\r\nconst TABLE2 = {\r\n  number: (tokens) => compileNumberParam(tokens),\r\n  \"number[]\": compileNumberArrayParam,\r\n  string: compileStringParam,\r\n  \"string[]\": compileStringArrayParam,\r\n  multiline_string: compileStringParam,\r\n  \"multiline_string[]\": compileStringArrayParam,\r\n  combo: compileComboParam,\r\n  select: compileSelectParam,\r\n  actor: (tokens) => compileDataId(tokens, \"actor\"),\r\n  \"actor[]\": (tokens) => compileDataIdArray(tokens, \"actor[]\"),\r\n  class: (tokens) => compileDataId(tokens, \"class\"),\r\n  \"class[]\": (tokens) => compileDataIdArray(tokens, \"class[]\"),\r\n  skill: (tokens) => compileDataId(tokens, \"skill\"),\r\n  \"skill[]\": (tokens) => compileDataIdArray(tokens, \"skill[]\"),\r\n  item: (tokens) => compileDataId(tokens, \"item\"),\r\n  \"item[]\": (tokens) => compileDataIdArray(tokens, \"item[]\"),\r\n  weapon: (tokens) => compileDataId(tokens, \"weapon\"),\r\n  \"weapon[]\": (tokens) => compileDataIdArray(tokens, \"weapon[]\"),\r\n  armor: (tokens) => compileDataId(tokens, \"armor\"),\r\n  \"armor[]\": (tokens) => compileDataIdArray(tokens, \"armor[]\"),\r\n  state: (tokens) => compileDataId(tokens, \"state\"),\r\n  \"state[]\": (tokens) => compileDataIdArray(tokens, \"state[]\"),\r\n  enemy: (tokens) => compileDataId(tokens, \"enemy\"),\r\n  \"enemy[]\": (tokens) => compileDataIdArray(tokens, \"enemy[]\"),\r\n  common_event: (tokens) => compileDataId(tokens, \"common_event\"),\r\n  \"common_event[]\": (tokens) => compileDataIdArray(tokens, \"common_event[]\"),\r\n  switch: (tokens) => compileDataId(tokens, \"switch\"),\r\n  \"switch[]\": (tokens) => compileDataIdArray(tokens, \"switch[]\"),\r\n  variable: (tokens) => compileDataId(tokens, \"variable\"),\r\n  \"variable[]\": (tokens) => compileDataIdArray(tokens, \"variable[]\"),\r\n  troop: (tokens) => compileDataId(tokens, \"troop\"),\r\n  \"troop[]\": (tokens) => compileDataIdArray(tokens, \"troop[]\"),\r\n  boolean: compileBooleanParam,\r\n  file: compileFileParam,\r\n  \"file[]\": compileFileArrayParam,\r\n} as const satisfies Partial<{\r\n  [K in PrimitiveParam[\"kind\"]]: (tokens: PluginParamTokens) => PrimitiveParam;\r\n}>;\r\n","export interface Block {\r\n  structs: PlguinStructBlock[];\r\n  bodies: PlguinBodyBlock[];\r\n}\r\n\r\nexport interface PlguinStructBlock {\r\n  locale?: string;\r\n  struct: string;\r\n  lines: string[];\r\n}\r\n\r\nexport interface PlguinBodyBlock {\r\n  locale?: string;\r\n  lines: string[];\r\n}\r\n\r\ninterface BlockState {\r\n  structs: PlguinStructBlock[];\r\n  bodies: PlguinBodyBlock[];\r\n  structName?: string;\r\n  locale?: string;\r\n  lines: string[];\r\n  blockType?:\r\n    | typeof BLCOK_BODY\r\n    | typeof BLCOK_STRUCT\r\n    | typeof BLOCK_INVALID\r\n    | typeof BLOCK_NONE;\r\n}\r\n\r\nconst BLCOK_BODY = \"BODY\" as const;\r\nconst BLCOK_STRUCT = \"STRUCT\" as const;\r\nconst BLOCK_INVALID = \"INVALID\" as const;\r\nconst BLOCK_NONE = \"NONE\" as const;\r\n\r\nexport const splitBlock = (block: string): Block => {\r\n  const lines = block.split(\"\\n\");\r\n\r\n  const initialState: BlockState = {\r\n    structs: [],\r\n    bodies: [],\r\n    structName: undefined,\r\n    locale: undefined,\r\n    lines: [],\r\n    blockType: BLOCK_NONE,\r\n  };\r\n\r\n  const finalState = lines.reduce<BlockState>((state, line) => {\r\n    const trimmed = line.trim();\r\n    const structMatch = trimmed.match(\r\n      /^\\/\\*~struct~([A-Za-z0-9_]+)(?::([A-Za-z0-9_-]+))?/\r\n    );\r\n\r\n    if (structMatch) {\r\n      return handleStructMatch(state, structMatch);\r\n    }\r\n    if (trimmed === \"/*:\") {\r\n      return handleBlockStart(state);\r\n    }\r\n    if (trimmed === \"*/\") {\r\n      return state.lines.length > 0 ? handleBlockEnd(state) : state;\r\n    }\r\n    return {\r\n      ...state,\r\n      lines: state.lines.concat([trimmed]),\r\n    };\r\n  }, initialState);\r\n\r\n  return {\r\n    structs: finalState.structs,\r\n    bodies: finalState.bodies,\r\n  };\r\n};\r\n\r\nconst handleStructMatch = (\r\n  state: BlockState,\r\n  structMatch: RegExpMatchArray\r\n): BlockState => {\r\n  const flushed = state.lines.length > 0 ? handleBlockEnd(state) : state;\r\n  // struct名が空文字の場合はstructNameをundefinedにする\r\n  const structName = structMatch[1] || undefined;\r\n  return {\r\n    ...flushed,\r\n    structName,\r\n    blockType: structName ? BLCOK_STRUCT : BLOCK_INVALID,\r\n    locale: structMatch[2],\r\n    lines: [],\r\n  };\r\n};\r\n\r\nconst handleBlockStart = (state: BlockState): BlockState => {\r\n  const flushed = state.lines.length > 0 ? handleBlockEnd(state) : state;\r\n  return {\r\n    ...flushed,\r\n    blockType: BLCOK_BODY,\r\n    structName: undefined,\r\n    locale: undefined,\r\n    lines: [],\r\n  };\r\n};\r\nconst handleBlockEnd = (state: BlockState): BlockState => {\r\n  if (state.blockType === BLCOK_BODY) {\r\n    return {\r\n      ...state,\r\n      bodies: state.bodies.concat([{ lines: [...state.lines] }]),\r\n      lines: [],\r\n      blockType: BLOCK_NONE,\r\n    };\r\n  }\r\n\r\n  if (state.structName && state.blockType === BLCOK_STRUCT) {\r\n    return {\r\n      ...state,\r\n      structs: state.structs.concat([\r\n        {\r\n          struct: state.structName,\r\n          locale: state.locale,\r\n          lines: [...state.lines],\r\n        },\r\n      ]),\r\n      blockType: BLOCK_NONE,\r\n      structName: undefined,\r\n      locale: undefined,\r\n      lines: [],\r\n    };\r\n  }\r\n\r\n  return {\r\n    ...state,\r\n    blockType: BLOCK_NONE,\r\n    structName: undefined,\r\n    lines: [],\r\n  };\r\n};\r\n","import type { OptionsState } from \"./internalTypes\";\r\n\r\nexport const addValue = (state: OptionsState, value: string): OptionsState => {\r\n  return state.currentOption\r\n    ? {\r\n        items: state.items.concat({\r\n          option: state.currentOption,\r\n          value: value,\r\n        }),\r\n      }\r\n    : {\r\n        items: state.items,\r\n      };\r\n};\r\n\r\nexport const addOption = (\r\n  state: OptionsState,\r\n  option: string\r\n): OptionsState => {\r\n  return state.currentOption\r\n    ? {\r\n        items: state.items.concat({\r\n          option: state.currentOption,\r\n          value: state.currentOption,\r\n        }),\r\n        currentOption: option,\r\n      }\r\n    : {\r\n        items: state.items,\r\n        currentOption: option,\r\n      };\r\n};\r\n\r\nexport const finalizeOptions = (state: OptionsState) => {\r\n  if (state.currentOption) {\r\n    return {\r\n      items: state.items.concat({\r\n        option: state.currentOption,\r\n        value: state.currentOption,\r\n      }),\r\n    };\r\n  }\r\n  return state;\r\n};\r\n","import type { ParseState } from \"./internalTypes\";\r\nimport { finalizeOptions } from \"./option\";\r\nimport type { PluginCommandTokens } from \"./types\";\r\n\r\nexport const withTexts = (command: { desc?: string; text?: string }) => {\r\n  return {\r\n    ...(typeof command.desc === \"string\" ? { desc: command.desc } : {}),\r\n    ...(typeof command.text === \"string\" ? { text: command.text } : {}),\r\n  };\r\n};\r\n\r\nexport const flashCurrentItem = (state: ParseState): ParseState => {\r\n  // 1. optionをflush\r\n  const p = flushOptionsToParam(state);\r\n  // 2. commandをflush\r\n  const c = flushCurrentCommand(p);\r\n  // 3. paramをflush\r\n  return flushCurrentParam(c);\r\n};\r\n\r\nconst flushOptionsToParam = (state: ParseState): ParseState => {\r\n  if (state.currentParam && state.currentOption) {\r\n    const kind = state.currentParam.attr.kind;\r\n    if (kind === \"select\" || kind === \"combo\") {\r\n      return {\r\n        ...state,\r\n        currentParam: {\r\n          ...state.currentParam,\r\n          options: finalizeOptions(state.currentOption).items,\r\n        },\r\n      };\r\n    }\r\n  }\r\n  return state;\r\n};\r\n\r\nconst flushCurrentParam = (state: ParseState): ParseState => {\r\n  if (state.currentParam) {\r\n    return {\r\n      ...state,\r\n      params: [...state.params, state.currentParam],\r\n      currentParam: null,\r\n      currentContext: null,\r\n    };\r\n  }\r\n  return state;\r\n};\r\n\r\nconst flushCurrentCommand = (state: ParseState): ParseState => {\r\n  if (state.currentCommand) {\r\n    const newArgs = state.currentParam\r\n      ? [...state.currentCommand.args, state.currentParam]\r\n      : state.currentCommand.args;\r\n    const newCommand: PluginCommandTokens = {\r\n      ...withTexts(state.currentCommand),\r\n      command: state.currentCommand.command,\r\n      args: newArgs,\r\n    };\r\n    return {\r\n      ...state,\r\n      commands: [...state.commands, newCommand],\r\n      currentCommand: null,\r\n      currentParam: null,\r\n      currentContext: null,\r\n      currentOption: null,\r\n    };\r\n  }\r\n  return state;\r\n};\r\n","import type { Block, PlguinBodyBlock, PlguinStructBlock } from \"./block\";\r\nimport { splitBlock } from \"./block\";\r\nimport { flashCurrentItem, withTexts } from \"./flashState\";\r\nimport type { ParseState } from \"./internalTypes\";\r\nimport {\r\n  KEYWORD_TEXT,\r\n  KEYWORD_DESC,\r\n  KEYWORD_DEFAULT,\r\n  KEYWORD_ON,\r\n  KEYWORD_OFF,\r\n  KEYWORD_MIN,\r\n  KEYWORD_MAX,\r\n  KEYWORD_PARAM,\r\n  KEYWORD_ARG,\r\n  KEYWORD_HELP,\r\n  KEYWORD_KIND,\r\n  KEYWORD_AUTHOR,\r\n  KEYWORD_PLUGINDESC,\r\n  KEYWORD_URL,\r\n  KEYWORD_STRUCT,\r\n} from \"./keyword/constants\";\r\nimport type { KeywordEnum } from \"./keyword/types\";\r\nimport {\r\n  handleBase,\r\n  handleOption,\r\n  handleOrderAfter,\r\n  handleOrderBefore,\r\n  handleValue,\r\n} from \"./state\";\r\nimport { typeIsStruct } from \"./struct\";\r\nimport type {\r\n  ParsedPlugin,\r\n  PluginCommandTokens,\r\n  PluginMeta,\r\n  StructParseState,\r\n} from \"./types\";\r\n\r\nexport const parsePlugin = (text: string) => {\r\n  return parsePluginCore(text, KEYWORD_FUNC_TABLE);\r\n};\r\n\r\nconst getBody = (block: Block): PlguinBodyBlock | undefined => {\r\n  if (block.bodies.length === 0) {\r\n    return undefined;\r\n  }\r\n  return block.bodies[0];\r\n};\r\n\r\nconst parseBodyBlock = (\r\n  body: PlguinBodyBlock,\r\n  table: Record<string, (state: ParseState, value: string) => ParseState>\r\n): ParseState => {\r\n  const state = body.lines.reduce<ParseState>((acc, line) => {\r\n    const trimmed = line.trim().replace(/^\\*\\s?/, \"\");\r\n    if (!trimmed.startsWith(\"@\")) {\r\n      if (acc.currentContext === KEYWORD_HELP) {\r\n        // キーワードが来ない場合はヘルプ行として追加\r\n        return { ...acc, helpLines: acc.helpLines.concat(trimmed) };\r\n      }\r\n      // コメントモード以外 & キーワードが来ない場合は無視\r\n      return acc;\r\n    }\r\n\r\n    const [tag, ...rest] = trimmed.slice(1).split(\" \");\r\n    const value = rest.join(\" \").trim();\r\n    const fn = table[tag as keyof typeof table];\r\n\r\n    if (fn) {\r\n      return fn(acc, value);\r\n    }\r\n    return acc;\r\n  }, makeParseState());\r\n  return flashCurrentItem(state);\r\n};\r\n\r\nconst parseStructBlock = (body: PlguinStructBlock): StructParseState => {\r\n  const state = parseBodyBlock(body, KEYWORD_FUNC_TABLE);\r\n  return {\r\n    name: body.struct,\r\n    params: state.params,\r\n  };\r\n};\r\n\r\nconst parsePluginCore = (\r\n  text: string,\r\n  table: Record<string, (state: ParseState, value: string) => ParseState>\r\n): ParsedPlugin => {\r\n  const blocks: Block = splitBlock(text);\r\n  const structs = blocks.structs.map((s) => parseStructBlock(s));\r\n  const body = getBody(blocks);\r\n  if (!body) {\r\n    return {\r\n      params: [],\r\n      commands: [],\r\n      meta: {},\r\n      helpLines: [],\r\n      structs: structs,\r\n    };\r\n  }\r\n\r\n  const finalState = parseBodyBlock(body, table);\r\n  return {\r\n    params: finalState.params,\r\n    commands: finalState.commands,\r\n    meta: finalState.meta,\r\n    helpLines: finalState.helpLines,\r\n    structs: structs,\r\n  };\r\n};\r\n\r\nconst makeParseState = (): ParseState => ({\r\n  helpLines: [],\r\n  params: [],\r\n  commands: [],\r\n  currentParam: null,\r\n  currentCommand: null,\r\n  currentContext: null,\r\n  currentOption: null,\r\n  dependencies: {\r\n    base: [],\r\n    orderBefore: [],\r\n    orderAfter: [],\r\n  },\r\n  meta: {},\r\n});\r\n\r\nconst handleHelpContext = (oldstate: ParseState): ParseState => {\r\n  const state = flashCurrentItem(oldstate);\r\n  return {\r\n    ...state,\r\n    currentContext: KEYWORD_HELP,\r\n  };\r\n};\r\n\r\nconst handleParamContext = (\r\n  oldstate: ParseState,\r\n  value: string\r\n): ParseState => {\r\n  const state = flashCurrentItem(oldstate);\r\n  // すでに同名のparamが存在する場合は新しいparamを作らない\r\n  if (state.params.some((p) => p.name === value)) {\r\n    return state;\r\n  }\r\n  return {\r\n    ...state,\r\n    currentContext: KEYWORD_PARAM,\r\n    currentParam: { name: value, attr: {} },\r\n  };\r\n};\r\n\r\nconst handleText = (state: ParseState, value: string): ParseState => {\r\n  if (state.currentParam) {\r\n    return addParamField(state, KEYWORD_TEXT, value);\r\n  }\r\n  if (state.currentCommand) {\r\n    if (!(KEYWORD_TEXT in state.currentCommand)) {\r\n      return {\r\n        ...state,\r\n        currentCommand: {\r\n          ...withTexts(state.currentCommand),\r\n          command: state.currentCommand.command,\r\n          args: state.currentCommand.args,\r\n          [KEYWORD_TEXT]: value,\r\n        },\r\n      };\r\n    }\r\n  }\r\n  return state;\r\n};\r\n\r\nconst handleDesc = (state: ParseState, value: string): ParseState => {\r\n  if (state.currentParam) {\r\n    return addParamField(state, KEYWORD_DESC, value);\r\n  }\r\n  if (state.currentCommand) {\r\n    return {\r\n      ...state,\r\n      currentCommand: {\r\n        ...state.currentCommand,\r\n        desc: value,\r\n      },\r\n    };\r\n  }\r\n  return state;\r\n};\r\n\r\nconst handleCommandContext = (\r\n  oldstate: ParseState,\r\n  value: string\r\n): ParseState => {\r\n  const state: ParseState = flashCurrentItem(oldstate);\r\n  if (state.commands.some((c) => c.command === value)) {\r\n    // すでに同名のcommandが存在する場合は新しいcommandを作らない\r\n    return state;\r\n  }\r\n  return {\r\n    ...state,\r\n    currentCommand: { command: value, args: [] },\r\n    currentParam: null,\r\n  };\r\n};\r\n\r\nconst handleArgContext = (state: ParseState, value: string): ParseState => {\r\n  if (!state.currentCommand) {\r\n    return state;\r\n  }\r\n  if (state.currentParam) {\r\n    const argAddedCommand: PluginCommandTokens = {\r\n      ...withTexts(state.currentCommand),\r\n      command: state.currentCommand.command,\r\n      args: state.currentCommand.args.concat(state.currentParam),\r\n    };\r\n    return {\r\n      ...state,\r\n      commands: state.commands,\r\n      currentCommand: argAddedCommand,\r\n      currentContext: KEYWORD_ARG,\r\n      currentParam: {\r\n        name: value,\r\n        attr: {},\r\n      },\r\n    };\r\n  }\r\n  return {\r\n    ...state,\r\n    currentParam: {\r\n      name: value,\r\n      attr: {},\r\n    },\r\n  };\r\n};\r\nconst handlerType = (state: ParseState, value: string): ParseState => {\r\n  if (typeIsStruct(value)) {\r\n    const structName = value.slice(7, -1);\r\n    const addSturct = addParamField(state, KEYWORD_STRUCT, structName);\r\n    return addParamField(addSturct, KEYWORD_KIND, KEYWORD_STRUCT);\r\n  }\r\n  if (state.currentParam) {\r\n    return addParamField(state, KEYWORD_KIND, value);\r\n  }\r\n  return state;\r\n};\r\n\r\nconst addParamField = (\r\n  state: ParseState,\r\n  key: string,\r\n  value: string\r\n): ParseState => {\r\n  if (state.currentParam) {\r\n    if (!(key in state.currentParam.attr)) {\r\n      return {\r\n        ...state,\r\n        currentParam: {\r\n          ...state.currentParam,\r\n          attr: { ...state.currentParam.attr, [key]: value },\r\n        },\r\n      };\r\n    }\r\n  }\r\n  return state;\r\n};\r\n\r\nconst addMetaField = (\r\n  state: ParseState,\r\n  key: keyof PluginMeta,\r\n  value: string\r\n): ParseState => {\r\n  return {\r\n    ...state,\r\n    meta: { [key]: value, ...state.meta },\r\n  };\r\n};\r\n\r\nconst KEYWORD_FUNC_TABLE = {\r\n  param: handleParamContext,\r\n  text: handleText,\r\n  desc: handleDesc,\r\n  command: handleCommandContext,\r\n  arg: handleArgContext,\r\n  help: handleHelpContext,\r\n  option: handleOption,\r\n  value: handleValue,\r\n  type: handlerType,\r\n  default: (state, value) => addParamField(state, KEYWORD_DEFAULT, value),\r\n  on: (state, value) => addParamField(state, KEYWORD_ON, value),\r\n  off: (state, value) => addParamField(state, KEYWORD_OFF, value),\r\n  min: (state, value) => addParamField(state, KEYWORD_MIN, value),\r\n  max: (state, value) => addParamField(state, KEYWORD_MAX, value),\r\n  base: handleBase,\r\n  orderAfter: handleOrderAfter,\r\n  orderBefore: handleOrderBefore,\r\n  author: (state, val) => addMetaField(state, KEYWORD_AUTHOR, val),\r\n  plugindesc: (s, val) => addMetaField(s, KEYWORD_PLUGINDESC, val),\r\n  url: (state, val) => addMetaField(state, KEYWORD_URL, val),\r\n} as const satisfies {\r\n  [K in KeywordEnum]?: (state: ParseState, value: string) => ParseState;\r\n};\r\n","import { addBasePlugin, addOrderAfter, addOrderBefore } from \"./dependencies\";\r\nimport type { OptionsState, ParseState } from \"./internalTypes\";\r\nimport { addOption, addValue } from \"./option\";\r\n\r\nexport const handleBase = (state: ParseState, value: string): ParseState => {\r\n  return { ...state, dependencies: addBasePlugin(state.dependencies, value) };\r\n};\r\n\r\nexport const handleOrderAfter = (\r\n  state: ParseState,\r\n  value: string\r\n): ParseState => {\r\n  return {\r\n    ...state,\r\n    dependencies: addOrderAfter(state.dependencies, value),\r\n  };\r\n};\r\n\r\nexport const handleOrderBefore = (\r\n  state: ParseState,\r\n  value: string\r\n): ParseState => {\r\n  return {\r\n    ...state,\r\n    dependencies: addOrderBefore(state.dependencies, value),\r\n  };\r\n};\r\n\r\nexport const handleOption = (state: ParseState, value: string): ParseState => {\r\n  if (!state.currentParam) {\r\n    return state;\r\n  }\r\n\r\n  const newOption: OptionsState = addOption(\r\n    state.currentOption ?? { items: [] },\r\n    value\r\n  );\r\n\r\n  return {\r\n    ...state,\r\n    currentOption: newOption,\r\n  };\r\n};\r\n\r\nexport const handleValue = (state: ParseState, value: string): ParseState => {\r\n  if (!state.currentOption) {\r\n    return state;\r\n  }\r\n  const newOption: OptionsState = addValue(state.currentOption, value);\r\n  return {\r\n    ...state,\r\n    currentOption: newOption,\r\n  };\r\n};\r\n","export const structName = (value: string): string => {\r\n  if (value.endsWith(\">\") && value.startsWith(\"struct<\")) {\r\n    return value.slice(7, -1);\r\n  }\r\n  return \"\";\r\n};\r\nexport const typeIsStruct = (value: string): value is `struct<${string}>` => {\r\n  return value.endsWith(\">\") && value.startsWith(\"struct<\");\r\n};\r\n","export interface PluginDependencies {\r\n  base: string[];\r\n  orderBefore: string[];\r\n  orderAfter: string[];\r\n}\r\n\r\nexport const addBasePlugin = (\r\n  dep: PluginDependencies,\r\n  base: string\r\n): PluginDependencies => {\r\n  return {\r\n    orderAfter: dep.orderAfter,\r\n    orderBefore: dep.orderBefore,\r\n    base: dep.base.concat(base),\r\n  };\r\n};\r\n\r\nexport const addOrderBefore = (\r\n  dep: PluginDependencies,\r\n  order: string\r\n): PluginDependencies => {\r\n  return {\r\n    base: dep.base,\r\n    orderAfter: dep.orderAfter,\r\n    orderBefore: dep.orderBefore.concat(order),\r\n  };\r\n};\r\n\r\nexport const addOrderAfter = (\r\n  dep: PluginDependencies,\r\n  order: string\r\n): PluginDependencies => {\r\n  return {\r\n    base: dep.base,\r\n    orderBefore: dep.orderBefore,\r\n    orderAfter: dep.orderAfter.concat(order),\r\n  };\r\n};\r\n","import { compileAttributes } from \"./attributes\";\r\nimport { parsePlugin as parse } from \"./parse/parse\";\r\nimport type {\r\n  ParsedPlugin,\r\n  PluginCommandTokens,\r\n  PluginParamTokens,\r\n} from \"./parse/types\";\r\nimport type { PluginCommandBody, PluginJSON } from \"./pluginJSONTypes\";\r\nimport type { PrimitiveParam } from \"./primitiveParams\";\r\n\r\nexport interface PluginParam {\r\n  name: string;\r\n  attr: PrimitiveParam;\r\n}\r\n\r\nexport const parsePlugin = (text: string) => {\r\n  return compilePlugin(parse(text));\r\n};\r\n\r\nconst compilePlugin = (parsedPlugin: ParsedPlugin): PluginJSON => {\r\n  return {\r\n    target: \"MZ\",\r\n    meta: parsedPlugin.meta,\r\n    commands: reduceCommands(parsedPlugin.commands),\r\n    params: reduceParams(parsedPlugin.params),\r\n  };\r\n};\r\n\r\nconst reduceParams = (\r\n  params: ReadonlyArray<PluginParamTokens>\r\n): { [key: string]: PrimitiveParam } => {\r\n  return params.reduce<{ [key: string]: PrimitiveParam }>((acc, param) => {\r\n    return {\r\n      [param.name]: compileAttributes(param),\r\n      ...acc,\r\n    };\r\n  }, {});\r\n};\r\n\r\nconst reduceCommands = (\r\n  tokens: ReadonlyArray<PluginCommandTokens>\r\n): Record<string, PluginCommandBody> => {\r\n  return tokens.reduce((acc, token) => {\r\n    const body: PluginCommandBody = {\r\n      desc: token.desc,\r\n      text: token.text,\r\n      args: reduceParams(token.args),\r\n    };\r\n    return {\r\n      [token.command]: body,\r\n      ...acc,\r\n    };\r\n  }, {});\r\n};\r\n","import type { PrimitiveParam } from \"./schema/compile/kinds\";\r\nimport type { PrimitiveStructSchema } from \"./schema/compile/kinds/compileFlatStruct\";\r\nimport { compileFlatStruct } from \"./schema/compile/kinds/compileFlatStruct\";\r\nimport { parsePlugin } from \"./schema/compile/kinds/core/parsePlugin\";\r\n\r\nexport const pluginSourceToJSON = (text: string) => {\r\n  return parsePlugin(text);\r\n};\r\n\r\nexport const structToJSONSchema = <T extends object>(\r\n  params: Record<keyof T, PrimitiveParam>\r\n): PrimitiveStructSchema<T> => {\r\n  return compileFlatStruct(params);\r\n};\r\n","import { compilePrimitiveField } from \"./compileField\";\r\nimport type { PrimitiveParam } from \"./core/primitiveParams\";\r\nimport type { AnyParamSchema } from \"./pluginMeta/anyParamSchema\";\r\n\r\nexport interface PrimitiveStructSchema<T extends object> {\r\n  type: \"object\";\r\n  properties: Record<keyof T, AnyParamSchema>;\r\n  required: (keyof T)[];\r\n  additionalProperties: false;\r\n}\r\n\r\nexport const compileFlatStruct = <T extends object>(\r\n  params: Record<keyof T, PrimitiveParam>\r\n): PrimitiveStructSchema<T> => {\r\n  const properties = Object.entries<PrimitiveParam>(params).reduce(\r\n    (acc, [key, value]) => {\r\n      const field: AnyParamSchema = compilePrimitiveField(value);\r\n      return {\r\n        ...acc,\r\n        [key]: field,\r\n      };\r\n    },\r\n    {}\r\n  ) as Record<keyof T, AnyParamSchema>;\r\n  return {\r\n    type: \"object\",\r\n    properties,\r\n    required: Object.keys(properties) as (keyof T)[],\r\n    additionalProperties: false,\r\n  };\r\n};\r\n"],"names":["createControlCharFormat","char","id","fromStringArray","array","map","text","index","controlChar","getControlChars","Array","from","matchAll","match","parseInt","createActorControlChars","actors","actor","name","createSystemVariableControlChars","system","variables","filter","pair","makeCommonEventData","data","trigger","list","switchId","makeTroopData","members","pages","makeTroopMember","enemyId","x","y","hidden","makeTroopEventConditions","actorHp","actorId","enemyValid","switchValid","makeEventPageCondition","arg","switch1Id","switch1Valid","switch2Id","switch2Valid","variableId","variableValid","variableValue","selfSwitchCh","selfSwitchValid","itemId","itemValid","actorValid","NO_OPERATION","SHOW_MESSAGE","SHOW_MESSAGE_BODY","SHOW_CHOICES","SHOW_CHOICES_ITEM","INPUT_NUMBER","SELECT_ITEM","SHOW_SCROLLING_TEXT","SHOW_SCROLLING_TEXT_BODY","COMMENT_HEAD","COMMENT_BODY","SKIP","CONDITIONAL_BRANCH","CONDITIONAL_BRANCH_ELSE","LOOP","LOOP_BREAK","EXIT_EVENT_PROCESSING","COMMON_EVENT","LABEL","LABEL_JUMP","CONTROL_SWITCHES","CONTROL_VARIABLES","CONTROL_SELF_SWITCH","CONTROL_TIMER","CHANGE_GOLD","CHANGE_ITEMS","CHANGE_WEAPONS","CHANGE_ARMORS","CHANGE_PARTY_MEMBER","CHANGE_BATTLE_BGM","CHANGE_VICTORY_ME","CHANGE_SAVE_ACCESS","CHANGE_MENU_ACCESS","CHANGE_ENCOUNTER","CHANGE_FORMATION_ACCESS","CHANGE_WINDOW_COLOR","CHANGE_DEFEAT_ME","CHANGE_VEHICLE_BGM","TRANSFER_PLAYER","SET_VEHICLE_LOCATION","SET_EVENT_LOCATION","SCROLL_MAP","SET_MOVEMENT_ROUTE","GET_ONOFF_VEHICLE","CHANGE_TRANSPARENCY","SHOW_ANIMATION","SHOW_BALLOON_ICON","ERASE_EVENT","CHANGE_PLAYER_FOLLOWERS","GATHER_FOLLOWERS","FADEOUT_SCREEN","FADEIN_SCREEN","TINT_SCREEN","FLASH_SCREEN","SHAKE_SCREEN","WAIT","SHOW_PICTURE","MOVE_PICTURE","ROTATE_PICTURE","TINT_PICTURE","ERASE_PICTURE","SET_WEATHER_EFFECT","PLAY_BGM","FADEOUT_BGM","SAVE_BGM","RESUME_BGM","PLAY_BGS","FADEOUT_BGS","PLAY_ME","PLAY_SE","STOP_SE","PLAY_MOVIE","CHANGE_TILESET","CHANGE_BATTLE_BACKGROUND","CHANGE_PARALLAX","GET_LOCATION_INFO","BATTLE_PROCESSING","SHOP_PROCESSING","SHOP_PROCESSING_BODY","NAME_INPUT_PROCESSING","CHANGE_HP","CHANGE_MP","CHANGE_TP","RECOVER_ALL","CHANGE_EXP","CHANGE_NAME","CHANGE_CLASS","CHANGE_ACTOR_IMAGES","CHANGE_VEHICLE_IMAGE","CHANGE_NICKNAME","CHANGE_PROFILE","CHANGE_ENEMY_HP","CHANGE_ENEMY_MP","CHANGE_ENEMY_STATE","ENEMY_RECOVER_ALL","ENEMY_APPEAR","ENEMY_TRANSFORM","SHOW_BATTLE_ANIMATION","FORCE_ACTION","ABORT_BATTLE","OPEN_MENU_SCREEN","CHANGE_ENEMY_TP","OPEN_SAVE_SCREEN","GAME_OVER","RETURN_TO_TITLE_SCREEN","SCRIPT_EVAL","SCRIPT_EVAL_BODY","PLUGIN_COMMAND_MV","PLUGIN_COMMAND_MZ","createEventCommand","code","param","indent","parameters","ROUTE_END","ROUTE_MOVE_DOWN","ROUTE_MOVE_LEFT","ROUTE_MOVE_RIGHT","ROUTE_MOVE_UP","ROUTE_MOVE_LOWER_L","ROUTE_MOVE_LOWER_R","ROUTE_MOVE_UPPER_L","ROUTE_MOVE_UPPER_R","ROUTE_MOVE_RANDOM","ROUTE_MOVE_TOWARD","ROUTE_MOVE_AWAY","ROUTE_MOVE_FORWARD","ROUTE_MOVE_BACKWARD","ROUTE_JUMP","ROUTE_WAIT","ROUTE_TURN_DOWN","ROUTE_TURN_LEFT","ROUTE_TURN_RIGHT","ROUTE_TURN_UP","ROUTE_TURN_90D_R","ROUTE_TURN_90D_L","ROUTE_TURN_180D","ROUTE_TURN_90D_R_L","ROUTE_TURN_RANDOM","ROUTE_TURN_TOWARD","ROUTE_TURN_AWAY","ROUTE_SWITCH_ON","ROUTE_SWITCH_OFF","ROUTE_CHANGE_SPEED","ROUTE_CHANGE_FREQ","ROUTE_WALK_ANIME_ON","ROUTE_WALK_ANIME_OFF","ROUTE_STEP_ANIME_ON","ROUTE_STEP_ANIME_OFF","ROUTE_DIR_FIX_ON","ROUTE_DIR_FIX_OFF","ROUTE_THROUGH_ON","ROUTE_THROUGH_OFF","ROUTE_TRANSPARENT_ON","ROUTE_TRANSPARENT_OFF","ROUTE_CHANGE_IMAGE","ROUTE_CHANGE_OPACITY","ROUTE_CHANGE_BLEND_MODE","ROUTE_PLAY_SE","ROUTE_SCRIPT","makeMapEvent","note","makeMapEventIamge","characterIndex","characterName","direction","pattern","tileId","makeMapEventPage","conditions","directionFix","image","moveFrequency","moveRoute","repeat","skippable","wait","makeMapData","battleback1Name","battleback2Name","autoplayBgm","autoplayBgs","parallaxLoopX","parallaxLoopY","parallaxName","parallaxShow","parallaxSx","parallaxSy","width","height","bgm","pan","pitch","volume","bgs","disableDashing","displayName","encounterList","events","makeMapInfoData","info","mapId","toString","padStart","expanded","order","parentId","scrollX","scrollY","SCHEMA_MAP_EVENT_PAGE","type","required","properties","minimum","enum","items","oneOf","SCHEMA_DATA_MAP","regionSet","troopId","weight","ajv","Ajv","strict","mapInfo","compile","mapData","isDataMapInfo","isDataMap","defineGameDataSources","dataLabels","defineSkill","skills","defineActor","defineState","states","defineArmor","armors","defineClass","classes","defineEnemy","enemies","defineItem","defineWeapon","weapons","defineCommonEvent","commonEvents","labels","label","skill","title","source","author","module","kind","state","armor","class","enemy","item","weapon","commonEvent","LABEL_SET_DATA","options","initialEquipments","faceImage","characterImage","svBattlerImage","nickname","profile","classId","initialLevel","maxLevel","params","learnings","expParams","armorTypeId","slotTypeId","dropItems","battlerHue","battlerName","gold","consumable","requiredWeaponTypeId1","requiredWeaponTypeId2","mpCost","tpCost","restriction","priority","motion","overlay","removeAtBattleEnd","removeByRestriction","autoRemovalTiming","minTurns","maxTurns","removeByDamage","chanceByDamage","removeByWalking","stepsToRemove","weaponTypeId","usableItem","scope","speed","successRate","DEFAULT_DAMAGE_LABELS","makeDamage","damage","elementId","formula","variance","critical","makeActorData","faceName","faceIndex","traits","equips","normalizeDataActor","makeArmorData","iconIndex","description","atypeId","etypeId","price","makeClassData","makeDropItem","dropItem","dataId","denominator","makeEnemyAction","action","conditionParam1","conditionParam2","conditionType","rating","skillId","makeEnemyData","exp","actions","makeStateData","message1","message2","message3","message4","messageType","releaseByDamage","TRAIT_ELEMENT_RATE","TRAIT_DEBUFF_RATE","TRAIT_STATE_RATE","TRAIT_STATE_RESIST","TRAIT_PARAM","TRAIT_XPARAM","TRAIT_SPARAM","TRAIT_ATTACK_ELEMENT","TRAIT_ATTACK_STATE","TRAIT_ATTACK_SPEED","TRAIT_ATTACK_TIMES","TRAIT_ATTACK_SKILL","TRAIT_SKILL_TYPE_ADD","TRAIT_SKILL_TYPE_SEAL","TRAIT_SKILL_ADD","TRAIT_SKILL_SEAL","TRAIT_EQUIP_WEAPON_TYPE","TRAIT_EQUIP_ARMOR_TYPE","TRAIT_EQUIP_LOCK","TRAIT_EQUIP_SEAL","TRAIT_SLOT_TYPE","TRAIT_ACTION_PLUS","TRAIT_SPECIAL_FLAG","TRAIT_COLLAPSE_TYPE","TRAIT_PARTY_ABILITY","COLLAPS_NORMAL","COLLAPS_BOSS","COLLAPS_INSTANT","COLLAPS_NONE","defineTraitCollapseType","global","collapsOptionsToArray","normal","bossCollaps","instantCollaps","noneCollaps","EXTRA_PARAM_HIT","EXTRA_PARAM_EVA","EXTRA_PARAM_CRI","EXTRA_PARAM_CEV","EXTRA_PARAM_MEV","EXTRA_PARAM_MRF","EXTRA_PARAM_CNT","EXTRA_PARAM_HRG","EXTRA_PARAM_MRG","EXTRA_PARAM_TRG","defineTraitExtraParam","xparam","extraParamsToArray","hitRate","evasionRate","criticalRate","criticalEvasionRate","magicEvasionRate","magicReflectionRate","counterAttackRate","hpRegenerationRate","mpRegenerationRate","tpRegenerationRate","extraParamName","paramIndex","REGULAR_PARAM_MAX_HP","REGULAR_PARAM_MAX_MP","REGULAR_PARAM_ATK","REGULAR_PARAM_DEF","REGULAR_PARAM_MATK","REGULAR_PARAM_MDEF","REGULAR_PARAM_AGI","REGULAR_PARAM_LUK","defineTraitRegularParam","regularParamsToArray","maxHp","maxMp","atk","def","matk","mdef","agi","luk","regularParamName","SPECIAL_PARAM_TGR","SPECIAL_PARAM_GRD","SPECIAL_PARAM_REC","SPECIAL_PARAM_PHA","SPECIAL_PARAM_MCR","SPECIAL_PARAM_TCR","SPECIAL_PARAM_PDR","SPECIAL_PARAM_MDR","SPECIAL_PARAM_FDR","SPECIAL_PARAM_EXR","defineTraitSpecialParam","specialParam","specialParamsToArray","specialParams","targetRate","guardEffectRate","recoveryEffectRate","pharmacology","mpCostRate","tpChargeRate","physicalDamageRate","magicDamageRate","floorDamageRate","experienceRate","specialParamName","PARTY_ABILITY_ENCOUNTER_HALF","PARTY_ABILITY_ENCOUNTER_NONE","PARTY_ABILITY_CANCEL_SURPRISE","PARTY_ABILITY_RAISE_PREEMPTIVE","PARTY_ABILITY_GOLD_DOUBLE","PARTY_ABILITY_DROP_ITEM_DOUBLE","defineTraitPartyAbility","partyAbilityToArray","encounterHalf","encounterNone","cancelSurprise","raisePreemptive","goldDouble","dropItemDouble","FLAG_ID_AUTO_BATTLE","FLAG_ID_GUARD","FLAG_ID_SUBSTITUTE","FLAG_ID_PRESERVE_TP","defineTraitSpecialFlag","specialFlagToArray","autoBattle","guard","substitute","preventEscape","FORMAT_NAME","FORMAT_PARAM_RATE_MUL","FORMAT_PARAM_RATE_PLUS","FORMAT_PARAM_VALUE","LABEL_SET_TRAIT","regularParam","format","extraParam","specialFlag","collaps","partyAbility","elementRate","debuffRate","stateRate","stateResist","attackElement","attackState","attackSpeed","attackTimes","actionPlus","attackSkill","equipWeaponType","equipArmorType","equipLock","equipSeal","slotType","skillAdd","skillSeal","skillTypeAdd","skillTypeSeal","defineTraitItems","set","TYPENAME_TRAIT","SCHEMA_TRAIT","value","AUTHOR_RMMZ","SRC_COLOR","compilePlaceholders","keys","key","dataKey","placeHolder","compileArrayPlaceholderEX","input","dataIdKey","sourceId","joinSoruceId","getItemMappersFromRule","rule","itemMappers","itemMapper","compileFormatRule","extraItems","compileItemMapper","fallbackFormat","generateFallbackFormatText","generateFallbackLabel","props","numbers","strings","arrayIndex","kindKey","Set","a","size","join","replacePlaceholder","baseText","field","replaceAll","String","detectFormatErrors","formatRule","errorTexts","limits","placeHolderMaxLength","formatMaxLength","length","formatLabel","syntaxErrors","message","formatVeryLong","reason","slice","semanticErrors","detectItemMapperErrors","detectInvalidPlaceholders","matched","placeHolderKeys","mapper","reduce","acc","push","longPlaceHolder","has","extraPlaceHolder","error","checkItemMapperSourceError","includedName","includes","hasSource","dataSource","missingName","missingSourceId","mergeItemsSource","formatList","namedItemSources","sourceMap","mappingNamedItems","entry","buildFinalFormatEntry","kindId","Map","resolveDataSource","patternCompiled","get","newItem","cloneItems","applyFormatRule","getDataId","numText","applyPlaceholdersToText","formatWithItemName","itemName","find","i","currentText","RULE_TRAIT","formatTraitText","descriptor","trait","t","makeWeaponData","animationId","wtypeId","LABELS_DATA_WEAPON","HITTYPE_CERTAIN","HITTYPE_PHYSICAL","HITTYPE_MAGICAL","EFFECT_RECOVER_HP","EFFECT_RECOVER_MP","EFFECT_GAIN_TP","EFFECT_ADD_STATE","EFFECT_REMOVE_STATE","EFFECT_ADD_BUFF","EFFECT_ADD_DEBUFF","EFFECT_REMOVE_BUFF","EFFECT_REMOVE_DEBUFF","EFFECT_SPECIAL","EFFECT_GROW","EFFECT_LEARN_SKILL","EFFECT_COMMON_EVENT","resolveItemEffectLabels","defineEffectRecoverHp","defineEffectRecoverMp","defineEffectGainTp","defineEffectAddState","defineEffectRemoveState","defineEffectAddBuff","defineEffectAddDebuff","defineEffectRemoveBuff","defineEffectRemoveDebuff","defineEffectSpecial","defineEffectGrow","defineEffectLearnSkill","defineEffectCommonEvent","defineEffect","baseLabel","domainName","desc","special","recoverHp","recoverMp","gainTp","addState","removeState","addBuff","addDebuff","removeBuff","removeDebuff","grow","learnSkill","FORMAT_STATE","FORMAT_RECOVER","FORMAT_ADD_BUFF","LABEL_SET_ITEM_EFFECT","SPECIAL_EFFECT_ESCAPE","formatItemEffectText","effectDefine","effect","value1","value2","DEFAULT_ITEM_LABELS","DEFAULT_SKILL_LABELS","DEFAULT_USABLE_ITEM_LABELS","makeItemData","itypeId","occasion","repeats","tpGain","hitType","effects","makeSkillData","stypeId","requiredWtypeId1","requiredWtypeId2","SCHEMA_STRING","SCHEMA_INTEGER","SCHEMA_POSITIVE_INTEGER","SCHEMA_DAMATE","additionalProperties","SCHEMA_EFFECT","SCHEMA_DATA_SKILL","SCHEMA_DATA_ITEM","isDataItem","isDataSkill","maximum","isDataActor","minItems","maxItems","isDataArmor","default","isDataWeapon","rate","isDataEnemy","isDataState","class_","level","isDataClass","createNoteEntity","makeRegex","readNoteObject","fn","readNoteEx","readNote","regex","replaceNote","transformFunction","Error","_subString","newText","getNoteValue","targetKey","m","setNoteValue","newValue","replace","MODULE_DATA","SRC_DATA_ACTOR","SRC_DATA_MAP","SRC_DATA_ENEMY","SRC_DATA_STATE","SRC_DATA_SKILL","SRC_DATA_ITEMS","SRC_DATA_WEAPON","SRC_DATA_ARMOR","SRC_DATA_CLASS","SRC_DATA_COMMON_EVNET","SRC_DATA_TROOP","resolveTraitLabels","atttackState","systemElementsSourceId","stateSourceId","skillSourceId","systemSkillTypesSourceId","systemWeaponTypesSourceId","systemArmorTypesSourceId","systemEquipTypesSourceId","DEFAULT_GLOBAL_LABELS","displayType","effectName","flashTimings","offsetX","offsetY","rotation","scale","soundTimings","unknownCode","content","apply","turn","dualWield","escape","labelsRegistry","rpg","itemEffect","makeSystemAdvanced","advanced","gameId","screenWidth","screenHeight","uiAreaWidth","uiAreaHeight","windowOpacity","screenScale","numberFontFilename","mainFontFilename","fallbackFonts","fontSize","isValidNumber","val","Number","isNaN","makeAudioFileParams","audioFileParams","makeSoundsArray","sounds","cursor","ok","cancel","buzzer","equip","save","load","battleStart","enemyAttack","enemyDamage","enemyCollapse","bossCollapes1","bossCollapes2","actorDamage","actorCollapse","playRecovery","playMiss","playEvasion","playMagicEvasion","playReflection","shop","useItem","useSkill","makeSoundsObject","audioFileParamsSchema","SCHEMA_SYSTEM_AUDIOFILES","battleBgm","victoryMe","gameoverMe","titleBgm","defeatMe","SCHEMA_SYSTEM_BATTLE_RULE_RMMZ","magicSkills","uniqueItems","battleSystem","getItemCommandEnabled","menuCommands","getSkillCommandEnabled","getEquipCommandEnabled","getStatusCommandEnabled","getFormationCommandEnabled","getSaveCommandEnabled","getItemCategoryEnabled","itemCategories","getWeaponCategoryEnabled","getArmorCategoryEnabled","getKeyItemCategoryEnabled","makeItemCategories","keyItem","makeItemCategoriesFromArray","makeMenuCommandsEnabled","status","formation","makeMenuCommandsEnabledFromArray","SCHEMA_SYSTEM_BOOLEAN_GAMEMENU_OPTIONS","makeBooleanOptions","optAutosave","optDisplayTp","optDrawTitle","optExtraExp","optFloorDeath","optFollowers","optKeyItemsNumber","optSideView","optSlipDeath","optTransparent","optMessageSkip","optSplashScreen","SCHEMA_BOOLEAN","SCHEMA_SYSTEM_BOOLEAN_OPTIONS","makeGameInitial","gameInitial","startMapId","startX","startY","partyMembersArray","SCHEMA_SYSTEM_GAME_INITIAL","SCHEMA_SYSTEM_IMAGE_SIZE","tileSize","faceSize","iconSize","SCHEMA_SYSTEM_TITLE_IMAGES","title1Name","title2Name","SCHEMA_SYSTEM_OTHER_DATA","locale","versionId","windowTone","makeNamedItem","getVariableNames","getElementTypes","elements","getEquipTypes","equipTypes","getSkillTypes","skillTypes","getWeaponTypes","weaponTypes","getArmorTypes","armorTypes","getSwitches","switches","defineSystemItems","buildElementTypesSource","buildEquipTypesSource","buildWeaponTypesSource","buildSkillTypesSource","buildArmorTypesSource","buildVariableNamesSource","buildSwitchesSource","stringArraySchema","SCHEMA_SYSTEM_RPG_DATA_NAMES","makeDataNames","cloneStringArray","makeTermsBasic","terms","levelA","hp","hpA","mp","mpA","tp","tpA","experience","makeTermsBasicFromArray","makeTermsCommandArray","makeTermsCommandArrayWithNulls","empty","fight","attack","gameEnd","equip2","optimize","clear","newGame","continue_","toTitle","buy","sell","makeTermsCommandFromArray","validate","msg","fallback","makeTermsMessages","actionFailure","actorRecovery","actorGain","actorLoss","actorDrain","actorNoDamage","actorNoHit","alwaysDash","bgmVolume","bgsVolume","commandRemember","criticalToActor","criticalToEnemy","counterAttack","debuffAdd","defeat","enemyDrain","enemyGain","enemyLoss","enemyNoDamage","enemyNoHit","enemyRecovery","evasion","autosave","escapeFailure","escapeStart","emerge","expNext","expTotal","file","buffAdd","buffRemove","obtainExp","obtainGold","obtainItem","obtainSkill","levelUp","partyName","loadMessage","meVolume","possession","preemptive","saveMessage","seVolume","magicEvasion","magicReflection","surprise","touchUI","victory","SCHEMA_STRING_NULL","nullable","SCHEMA_SYSTEM_TERMS_BUNDLE","currencyUnit","gameTitle","messages","commands","basic","minLength","makeParamNamesArray","mhp","mmp","mat","mdf","hit","eva","getParamNames","makeTitleCommandWindow","background","SCHEMA_SYSTEM_TITLE_COMMAND_WINDOW","makeVehicleData","vehicle","makeEditorSetting","jsonFormatLevel","messageWidth1","messageWidth2","SCHEMA_SYSTEM_TEST_BATTLER","SCHEMA_SYSTEM_GAME_EDITOR_BUNDLE","testBattlers","testTroopId","editMapId","editor","DEFAULT_SYSTEM_LABELS_BOOLEAN","DEFAULT_SYSTEM_LABELS_DATA_TYPES","LABELS_SYSTEM_BATTLER_PARAMS","LABELS_SYSTEM_GAME_COMMANDS","SCHEMA_SYSTEM_MEMBERS_ATTACK_MOTION","weaponImageId","SCHEMA_SYSTEM_VEHICLE","SCHEMA_SYSTEM_PARTIAL_BUNDLE","airship","boat","ship","attackMotions","schema","reducedList","mergeSystemSchema","systemValidate","isDataSystem","testBattler","imageSize","makeSystemData","fragments","cloneSize","texts","editing","images","dataNames","cloneNumberArray","vehicles","me","battleTest","cloneObjectArray","cloneTestBattler","editorTemporary","gameInit","makeTerms","menuComamnds","makeTermsCommand","buildReferenceItemSources","gameData","gameDataLabels","traitLabels","compileTraitDisplayData","namedItemSource","compileItemEffectDisplayData","itemEffectLabels","additional","domainNames","record","Object","entries","makeCommandChangeActorName","makeCommandChangeActorNickName","makeCommandChangeActorProfile","makeAudioCommand","filename","makeCommandAudioAny","audio","makeCommandPlayBGM","makeCommandPlayBGS","makeCommandPlayME","makeCommandPlaySE","makeCommandChangeBattleBGM","makeCommandChangeVictoryME","makeCommandChangeDefeatME","makeCommandCommonEvent","toArrayCommonEvent","fromArrayCommonEvent","eventId","object","fromArrayControlSwitches","min","max","toArrayControlSwitches","makeCommandControlSwitches","makeCommentArray","comment","convertCommentArrayToObject","paramArray","makeCommandCommentHeader","makeCommandCommentBody","makeCommentCommandArray","comments","toArrayInputNumber","digits","fromArrayInputNumber","makeCommandInputNumber","toArrayScrollingTextHeader","skip","fromArrayScrollingTextHeader","makeCommandScrollingTextHeader","toArrayScrollingTextBody","fromArrayScrollingTextBody","makeCommandScrollingTextBody","makeCommandShowChoiceItem","fromArraySetupChoiceItem","toArraySetupChoiceItem","fromArraySetupChoice","choices","cancelType","defaultType","positionType","toArraySetupChoice","makeCommandSetupChoice","cloneChoices","command","makeCommandShowMessage","facename","speakerName","fromArrayShowMessageHeader","toArrayShowMessageHeader","makeCommandShowMessageBody","makeCommandScriptHeader","script","makeCommandScriptBody","makeCommandScriptArray","lines","line","OPERAND_CONSTANT","OPERAND_VARIABLE","OPERAND_RANDOM","OPERAND_GAMEDATA","OPERAND_SCRIPT","ENEMY_PARAM_INDEX","HP","MP","MHP","MMP","ATK","DEF","MAT","MDF","AGI","LUK","TP","toArrayOperandConstant","target","operation","startId","endId","toArrayOperandVariable","toArrayOperandRandom","toArrayOperandScript","toArrayOperandItemData","toArrayOperandActorStatus","toArrayOperandEnemyStatus","getEnemyValue","getActorValue","currentExp","cloneParameters","cloneEventCommand","isPrimitive","isCloneableCommand","every","changeActorText","isCommandChangeActorText","scrollTextHead","const","isCommandScrollTextHead","audioCommand","isCommandAudio","emptyParam","isCommandNonParam","textBody","isCommandTextBody","commonVent","isCommandCommonEvent","showChoices","isCommandShowChoices","showChoiceItem","isCommandShowChoiceItem","inputNumber","isCommandInputNumber","showMessage","isCommandShowMessage","isCommandPlayBgm","isCommandPlayBgs","isCommandPlayMe","isCommandPlaySe","isCommandChangeBattleBgm","isCommandChangeVictoryMe","isCommandChangeDefeatMe","isCommandShowMessageBody","isCommandShowScrollingTextBody","isCommandCommentHeader","isCommandCommentBody","isCommandScriptHeader","isCommandScriptBody","FOLDER_AUDIO_BGM","FOLDER_AUDIO_SE","FOLDER_AUDIO_ME","FOLDER_AUDIO_BGS","FOLDER_IMG_BATTLEBACK1","FOLDER_IMG_BATTLEBACK2","FOLDER_IMG_CHACTERS","FOLDER_IMG_ENEMIES","FOLDER_IMG_FACES","FOLDER_IMG_PARALLACES","FOLDER_IMG_PICTURES","FOLDER_IMG_SV_ACTORS","FOLDER_IMG_SV_ENEMIES","FOLDER_IMG_SYSTEM","FOLDER_IMG_TILESETS","FOLDER_IMG_TITLES1","FOLDER_IMG_TITLES2","FILENAME_SYSTEM","FILENAME_ACTORS","FILENAME_CLASSES","FILENAME_SKILLS","FILENAME_ITEMS","FILENAME_WEAPONS","FILENAME_ARMORS","FILENAME_ENEMIES","FILENAME_TROOPS","FILENAME_STATES","FILENAME_ANIMATIONS","FILENAME_TILESET","FILENAME_COMMON_EVENTS","FILENAME_MAP_INFOS","FOLDER_DATA","FOLDER_IMG","FOLDER_AUDIO","FOLDER_JS","compileArrayField","itemSchema","withTexts","withDefault","isIntegerKind","digit","makeStringArrayField","compilePrimitiveField","compileStringField","o","compileSelectField","decimals","compileNumberField","compileBooleanField","$ref","ref","struct","applyMappingTable","tokens","fnTable","compileParam","defaultValue","compileArrayParam","KEYWORD_HELP","KEYWORD_KIND","KEYWORD_TEXT","KEYWORD_STRUCT","parseDeepJSON","json","parsed","JSON","parse","isArray","parseDeepValue","fromEntries","k","v","compileAttributes","attr","func","TABLE2","STRING","attrString","numberArray","split","parseFloat","trim","n","parent","compileStringParam","compileStringArrayParam","STRING_ARRAY","compileDataIdArray","DATA_ID_ARRAY","compileDataId","DATA_ID","number","NUMBER","compileNumberParam","NUMBER_ARRAY","string","multiline_string","combo","option","select","common_event","switch","variable","troop","boolean","BOOLEAN","on","off","FILE","dir","FILE_ARRAY","BLCOK_BODY","BLCOK_STRUCT","BLOCK_NONE","handleStructMatch","structMatch","flushed","handleBlockEnd","structName","blockType","handleBlockStart","bodies","concat","structs","finalizeOptions","currentOption","flashCurrentItem","p","flushOptionsToParam","c","flushCurrentCommand","flushCurrentParam","currentParam","currentContext","currentCommand","newArgs","args","newCommand","parseBodyBlock","body","table","trimmed","startsWith","helpLines","tag","rest","makeParseState","parsePluginCore","blocks","block","initialState","finalState","s","KEYWORD_FUNC_TABLE","parseStructBlock","getBody","meta","dependencies","base","orderBefore","orderAfter","addParamField","addMetaField","oldstate","some","argAddedCommand","help","newOption","addOption","addValue","endsWith","typeIsStruct","addSturct","dep","plugindesc","url","parsePlugin","compilePlugin","parsedPlugin","reduceCommands","reduceParams","token","pluginSourceToJSON","structToJSONSchema"],"mappings":";AAAa,MAAAA,IAA0B,CACrCC,IACAC,OAEO,KAAKD,EAAQC,IAAAA,EAAAA,KAGTC,IAAkB,CAC7BF,IACAG,OAEOA,GAAMC,IAAI,CAACC,IAAMC,QAAW,EACjCD,UACAE,aAAaR,EAAwBC,IAAMM,EAAAA,EAAAA,EAAAA,GCNlCE,IAAmBH,CAAAA,OAGvBI,MAAMC,KAAKL,GAAKM,SADT,wBAC0BP,CAAAA,EAAAA,IACrCQ,CAAAA,QAA6B;AAAA,EAC5BZ,MAAMY,GAAM,CAAA;AAAA,EACZX,IAAIY,SAASD,GAAM,CAAI,GAAA,EAAA;AAAA,EAAA,GCPhBE,IACXC,CAAAA,OAEOA,GAAOX,IAAsBY,CAAAA,QAAW,EAC7CX,MAAMW,GAAMC,MACZV,aAAaR,ECXc,KDW2BiB,GAAMf,EAAAA,EAAAA,EAAAA,GAInDiB,IACXC,CAAAA,OAEOA,GAAOC,UACXhB,IAAqB,CAACa,IAAMX,QAAW;AAAA,EACtCD,MAAMY,MAAQ;AAAA,EACdV,aAAaR,ECpBe,KDoB6BO,EAAAA;AAE1De,EAAAA,EAAAA,OAAQC,CAAAA,OAAuB,OAAdA,GAAKjB,OEpBdkB,IAAsB,CACjCC,KAAkC,QACZ,EACtBvB,IAAIuB,GAAKvB,MAAM,GACfgB,MAAMO,GAAKP,QAAQ,IACnBQ,SAASD,GAAKC,WAAW,GACzBC,MAAMF,GAAKE,QAAQ,CAAA,GACnBC,UAAUH,GAAKG,YAAY,MAGhBC,IAAgB,CAACJ,KAA4B,QAAoB;AAAA,EAC5EvB,IAAIuB,GAAKvB,MAAM;AAAA,EACfgB,MAAMO,GAAKP,QAAQ;AAAA,EACnBY,SAASL,GAAKK,WAAW,CAAA;AAAA,EACzBC,OAAON,GAAKM,SAAS;IAGVC,IAAkB,CAC7BP,KAA8B,QACZ,EAClBQ,SAASR,GAAKQ,WAAW,GACzBC,GAAGT,GAAKS,KAAK,GACbC,GAAGV,GAAKU,KAAK,GACbC,QAAQX,GAAKW,UAAAA,UAGFC,IAA2B,CACtCZ,KAAuC,QACZ;AAAA,EAC3Ba,SAASb,GAAKa,WAAW;AAAA,EACzBC,SAASd,GAAKc,WAAW;AAAA,EACzBC,YAAYf,GAAKe,cAAc;AAAA,EAC/BC,aAAahB,GAAKgB,eAAe;AAAA,ICjCtBC,IAAyB,CACpCC,KAAiC,QAE1B;AAAA,EACLC,WAAWD,GAAIC,aAAa;AAAA,EAC5BC,cAAAA,WAAcF,GAAIC;AAAAA,EAClBE,WAAWH,GAAIG,aAAa;AAAA,EAC5BC,cAAAA,WAAcJ,GAAIG;AAAAA,EAClBE,YAAYL,GAAIK,cAAc;AAAA,EAC9BC,eAAAA,WAAeN,GAAIK;AAAAA,EACnBE,eAAeP,GAAIO,iBAAiB;AAAA,EACpCC,cAAcR,GAAIQ,gBAAgB;AAAA,EAClCC,iBAAAA,WAAiBT,GAAIQ;AAAAA,EACrBE,QAAQV,GAAIU,UAAU;AAAA,EACtBC,WAAAA,WAAWX,GAAIU;AAAAA,EACfd,SAASI,GAAIJ,WAAW;AAAA,EACxBgB,YAAAA,WAAYZ,GAAIJ;IClBPiB,IAAe,GACfC,IAAe,KACfC,IAAoB,KACpBC,IAAe,KACfC,IAAoB,KACpBC,IAAe,KACfC,IAAc,KACdC,IAAsB,KACtBC,IAA2B,KAC3BC,IAAe,KACfC,IAAe,KACfC,IAAO,KACPC,IAAqB,KACrBC,IAA0B,KAC1BC,IAAO,KACPC,IAAa,KACbC,IAAwB,KACxBC,IAAe,KACfC,IAAQ,KACRC,IAAa,KACbC,IAAmB,KACnBC,IAAoB,KACpBC,IAAsB,KACtBC,IAAgB,KAChBC,IAAc,KACdC,IAAe,KACfC,IAAiB,KACjBC,IAAgB,KAChBC,IAAsB,KACtBC,IAAoB,KACpBC,IAAoB,KACpBC,IAAqB,KACrBC,IAAqB,KACrBC,IAAmB,KACnBC,IAA0B,KAC1BC,IAAsB,KAEtBC,IAAmB,KACnBC,IAAqB,KAErBC,IAAkB,KAClBC,IAAuB,KACvBC,IAAqB,KACrBC,IAAa,KACbC,IAAqB,KACrBC,KAAoB,KACpBC,KAAsB,KACtBC,KAAiB,KACjBC,KAAoB,KACpBC,KAAc,KACdC,KAA0B,KAC1BC,KAAmB,KACnBC,KAAiB,KACjBC,KAAgB,KAChBC,KAAc,KACdC,KAAe,KACfC,KAAe,KAEfC,KAAO,KACPC,KAAe,KACfC,KAAe,KACfC,KAAiB,KACjBC,KAAe,KACfC,KAAgB,KAChBC,KAAqB,KAErBC,KAAW,KACXC,KAAc,KACdC,KAAW,KACXC,KAAa,KAEbC,KAAW,KACXC,KAAc,KACdC,KAAU,KACVC,KAAU,KACVC,KAAU,KAEVC,KAAa,KAEbC,KAAiB,KACjBC,KAA2B,KAC3BC,KAAkB,KAClBC,KAAoB,KAEpBC,KAAoB,KAEpBC,KAAkB,KAClBC,KAAuB,KACvBC,KAAwB,KACxBC,KAAY,KACZC,KAAY,KACZC,KAAY,KACZC,KAAc,KACdC,KAAa,KAEbC,KAAc,KACdC,KAAe,KACfC,KAAsB,KACtBC,KAAuB,KACvBC,KAAkB,KAClBC,KAAiB,KAEjBC,KAAkB,KAClBC,KAAkB,KAElBC,KAAqB,KACrBC,KAAoB,KACpBC,KAAe,KACfC,KAAkB,KAClBC,KAAwB,KACxBC,KAAe,KACfC,KAAe,KACfC,KAAmB,KAEnBC,KAAkB,KAElBC,KAAmB,KACnBC,KAAY,KACZC,KAAyB,KACzBC,KAAc,KACdC,KAAmB,KACnBC,KAAoB,KACpBC,KAAoB,KCtHpBC,KAAqB,CAIhCC,IACAC,IACAC,KAAiB,OAEV;AAAA,EACLF,MAAAA;AAAAA,EACAE;EACAC,YAAYF;ICfHG,KAAY,GACZC,KAAkB,GAClBC,KAAkB,GAClBC,KAAmB,GACnBC,KAAgB,GAChBC,KAAqB,GACrBC,KAAqB,GACrBC,KAAqB,GACrBC,KAAqB,GACrBC,KAAoB,GACpBC,KAAoB,IACpBC,KAAkB,IAClBC,KAAqB,IACrBC,KAAsB,IACtBC,KAAa,IACbC,KAAa,IACbC,KAAkB,IAClBC,KAAkB,IAClBC,KAAmB,IACnBC,KAAgB,IAChBC,KAAmB,IACnBC,KAAmB,IACnBC,KAAkB,IAClBC,KAAqB,IACrBC,KAAoB,IACpBC,KAAoB,IACpBC,KAAkB,IAClBC,KAAkB,IAClBC,KAAmB,IACnBC,KAAqB,IACrBC,KAAoB,IACpBC,KAAsB,IACtBC,KAAuB,IACvBC,KAAsB,IACtBC,KAAuB,IACvBC,KAAmB,IACnBC,KAAoB,IACpBC,KAAmB,IACnBC,KAAoB,IACpBC,KAAuB,IACvBC,KAAwB,IACxBC,KAAqB,IACrBC,KAAuB,IACvBC,KAA0B,IAC1BC,KAAgB,IAChBC,KAAe,ICzCfC,KAAe,OACnB;AAAA,EACLtN,IAAI;AAAA,EACJgB,MAAM;AAAA,EACNa,OAAO;EACP0L,MAAM;AAAA,EACNvL,GAAG;AAAA,EACHC,GAAG;AAAA,IAIMuL,KAAoB,OACxB,EACLC,gBAAgB,GAChBC,eAAe,IACfC,WAAW,GACXC,SAAS,GACTC,QAAQ,EAICC,IAAAA,KAAmB,OACvB,EACLC,YAAYvL,EACZf,GAAAA,MAAM,CACNuM,GAAAA,cAAAA,OACAC,OAdK;AAAA,EACLR,gBAAgB;AAAA,EAChBC,eAAe;AAAA,EACfC,WAAW;AAAA,EACXC,SAAS;AAAA,EACTC,QAAQ;AAURK,GAAAA,eAAe,GACfC,WAAW,EACT1M,MAAM,CACN2M,GAAAA,QAAAA,OACAC,WAAAA,OACAC,MAAAA,MClCOC,EAAAA,IAAAA,KAAc,CAACpO,KAAyB,QAC5C;AAAA,EACLoB,MAAMpB,GAAIoB,QAAQ,CAAA;AAAA,EAClBiN,iBAAiBrO,GAAIqO,mBAAmB;AAAA,EACxCC,iBAAiBtO,GAAIsO,mBAAmB;AAAA,EAExCC,aAAavO,GAAIuO,eAAAA;AAAAA,EACjBC,aAAaxO,GAAIwO;EACjBC,eAAezO,GAAIyO,iBAAiB;AAAA,EACpCC,eAAe1O,GAAI0O,iBAAiB;AAAA,EACpCC,cAAc3O,GAAI2O,gBAAgB;AAAA,EAClCC,cAAc5O,GAAI4O,gBAAAA;AAAAA,EAClBC,YAAY7O,GAAI6O,cAAc;AAAA,EAC9BC,YAAY9O,GAAI8O,cAAc;AAAA,EAE9BjN,GAAG7B,GAAI6B,KAAK;AAAA,EACZC,GAAG9B,GAAI8B,KAAK;AAAA,EACZiN,OAAO/O,GAAI+O,SAAS;AAAA,EACpBC,QAAQhP,GAAIgP,UAAU;AAAA,EACtB5B,MAAMpN,GAAIoN,QAAQ;AAAA,EAElB6B,KAAKjP,GAAIiP,OAAO,EAAEpO,MAAM,IAAIqO,KAAK,GAAGC,OAAO,KAAKC,QAAQ;EACxDC,KAAKrP,GAAIqP,OAAO,EAAExO,MAAM,IAAIqO,KAAK,GAAGC,OAAO,KAAKC,QAAQ,IAAA;AAAA,EACxDE,gBAAgBtP,GAAIsP,kBAAkB;AAAA,EACtCC,aAAavP,GAAIuP,eAAe;AAAA,EAChCC,eAAexP,GAAIwP,iBAAiB,CAAA;AAAA,EACpCC,QAAQzP,GAAIyP,UAAU,CAAA;AAAA,ICtBbC,KAAkB,CAC7BC,KAA+C,EAAE9P,IAAI,EAAA,MAAA;AAE9C,SAAA,EACLgB,MAAM8O,GAAK9O,SARM+O,KAQcD,GAAK9P,IAP/B+P,GAAMC,SAAWC,EAAAA,SAAS,GAAG,GAAA,IAQlCjQ,IAAI8P,GAAK9P,IACTkQ,UAAUJ,GAAKI,YAAAA,OACfC,OAAOL,GAAKK,SAAS,GACrBC,UAAUN,GAAKM,YAAY,GAC3BC,SAASP,GAAKO,WAAW,GACzBC,SAASR,GAAKQ,WAAW,EAdT;AAAA,MAACP;AC8BRQ,GAAAA,KAAwB;AAAA,EACnCC,MAAM;AAAA,EACNC,UAAU,CACR,SACA,aACA,cACA,gBACA,eAAA;AAAA,EAEFC,YAAY,EACVxC,eAAe,EAAEsC,MAAM,aACvBxC,cAAc,EAAEwC,MAAM,UACtBzC,GAAAA,YCzC2C;AAAA,IAC7CyC,MAAM;AAAA,IACNC,UAAU,CACR,aACA,gBACA,aACA,gBACA,cACA,iBACA,gBACA,mBACA,iBACA,UACA,aACA,WACA,YAAA;AAAA,IAEFC,YAAY,EACVhO,WAAW,EAAE8N,MAAM,WAAWG,SAAS,EAAA,GACvChO,cAAc,EAAE6N,MAAM,UAAA,GACtB5N,WAAW,EAAE4N,MAAM,WAAWG,SAAS,EACvC9N,GAAAA,cAAc,EAAE2N,MAAM,UAAA,GACtB1N,YAAY;AAAA,MAAE0N,MAAM;AAAA,MAAWG,SAAS;AAAA,IAAA,GACxC5N,eAAe,EAAEyN,MAAM,aACvBvN,cAAc,EAAEuN,MAAM,SAAA,GACtBtN,iBAAiB,EAAEsN,MAAM,UACzBxN,GAAAA,eAAe,EAAEwN,MAAM,UACvBrN,GAAAA,QAAQ,EAAEqN,MAAM,WAAWG,SAAS,EAAA,GACpCvN,WAAW;AAAA,MAAEoN,MAAM;AAAA,IAAA,GACnBnO,SAAS,EAAEmO,MAAM,aACjBnN,YAAY,EAAEmN,MAAM,UDcpBvC,EAAAA;AAAAA,EAAAA,GAAAA,OAjCkC,EACpCuC,MAAM,UACNC,UAAU,CACR,kBACA,iBACA,aACA,WACA,WAEFC,YAAY;AAAA,IACVjD,gBAAgB,EAAE+C,MAAM,WAAWG,SAAS,EAAA;AAAA,IAC5CjD,eAAe,EAAE8C,MAAM,SAAA;AAAA,IACvB7C,WAAW,EAAE6C,MAAM,WAAWI,MAAM,CAAC,GAAG,GAAG,GAAG,CAAA,EAAA;AAAA,IAC9ChD,SAAS,EAAE4C,MAAM,UAAA;AAAA,IACjB3C,QAAQ,EAAE2C,MAAM,UAAA;AAAA,EAAA,EAAA,GAoBhBrC,WE5CiC;AAAA,IACnCqC,MAAM;AAAA,IACNC,UAAU,CAAC,QAAQ,UAAU,aAAa,MAC1CC;AAAAA,IAAAA,YAAY,EACVpC,MAAM,EAAEkC,MAAM,aACdpC,QAAQ,EAAEoC,MAAM,UAAA,GAChBnC,WAAW,EAAEmC,MAAM,UAAA,GACnB/O,MAAM,EACJ+O,MAAM,SACNK,OAAO;AAAA,MACLL,MAAM;AAAA,MACNC,UAAU,CAAC,QAAQ,YAAA;AAAA,MACnBC,YAAY,EACVtG,MAAM,EAAEoG,MAAM,UAAA,GACdjG,YAAY,EACViG,MAAM,SACNK,OAAO,EACLC,OAAO,CACL,EAAEN,MAAM,SAAA,GACR,EAAEA,MAAM,SACR,GAAA;AAAA,QACEA,MAAM;AAAA,QACNC,UAAU,CAAC,QAAQ,OAAO,SAAS,QAAA;AAAA,QACnCC,YAAY,EACV1P,MAAM,EAAEwP,MAAM,SACdnB,GAAAA,KAAK,EAAEmB,MAAM,UAAA,GACblB,OAAO,EAAEkB,MAAM,UAAA,GACfjB,QAAQ,EAAEiB,MAAM,UAAA,EAAA;AAAA,MAAA,CAAA,EAAA,EAAA,EAAA;AAAA,IAAA,EAAA,EAAA;AAAA,EAAA,EAAA;AAAA,GFsBvBO,KAAkB;AAAA,EAC7BP,MAAM;AAAA,EAENC,UAAU,CACR,mBACA,mBACA,QACA,SACA,UACA,KACA,KACA,cACA,cACA,iBACA,iBACA,kBACA,gBACA,gBACA,eACA,QACA,eACA,OACA,eACA,KAAA;AAAA,EAEFC,YAAY;AAAA,IACVnP,MAAM,EAAEiP,MAAM,SAASK,OAAO,EAAEL,MAAM,UAAA,EAAA;AAAA,IACtChC,iBAAiB,EAAEgC,MAAM,SACzB/B;AAAAA,IAAAA,iBAAiB,EAAE+B,MAAM,SAEzB3B;AAAAA,IAAAA,eAAe,EAAE2B,MAAM,UAAA;AAAA,IACvB5B,eAAe;AAAA,MAAE4B,MAAM;AAAA;IACvB1B,cAAc,EAAE0B,MAAM,SAAA;AAAA,IACtBzB,cAAc,EAAEyB,MAAM,UACtBvB;AAAAA,IAAAA,YAAY,EAAEuB,MAAM,UACpBxB;AAAAA,IAAAA,YAAY,EAAEwB,MAAM,UAAA;AAAA,IAEpBxO,GAAG,EAAEwO,MAAM,WAAWG,SAAS,EAAA;AAAA,IAC/B1O,GAAG,EAAEuO,MAAM,WAAWG,SAAS,EAAA;AAAA,IAC/BzB,OAAO,EAAEsB,MAAM,WAAWG,SAAS,EAAA;AAAA,IACnCxB,QAAQ,EAAEqB,MAAM,WAAWG,SAAS,EACpCpD;AAAAA,IAAAA,MAAM,EAAEiD,MAAM,SAAA;AAAA,IAEdd,aAAa,EAAEc,MAAM,SAAA;AAAA,IACrBf,gBAAgB,EAAEe,MAAM,UAAA;AAAA,IAExB9B,aAAa,EAAE8B,MAAM,UAAA;AAAA,IACrBpB,KAAK,EACHoB,MAAM,UACNC,UAAU,CAAC,QAAQ,OAAO,SAAS,QAAA,GACnCC,YAAY,EACV1P,MAAM,EAAEwP,MAAM,SAAA,GACdnB,KAAK,EAAEmB,MAAM,UAAA,GACblB,OAAO,EAAEkB,MAAM,UAAA,GACfjB,QAAQ,EAAEiB,MAAM,UAAA,EAAA,EAAA;AAAA,IAIpB7B,aAAa;AAAA,MAAE6B,MAAM;AAAA,IAAA;AAAA,IACrBhB,KAAK,EACHgB,MAAM,UACNC,UAAU,CAAC,QAAQ,OAAO,SAAS,QAAA,GACnCC,YAAY,EACV1P,MAAM,EAAEwP,MAAM,SAAA,GACdnB,KAAK,EAAEmB,MAAM,UAAA,GACblB,OAAO,EAAEkB,MAAM,UAAA,GACfjB,QAAQ,EAAEiB,MAAM,UAAA,EAAA,EAAA;AAAA,IAIpBb,eAAe,EACba,MAAM,SACNK,OAAO,EACLL,MAAM,UACNC,UAAU,CAAC,aAAa,WAAW,QAAA,GACnCC,YAAY;AAAA,MACVM,WAAW,EAAER,MAAM,SAASK,OAAO,EAAEL,MAAM,UAAA,EAAA;AAAA,MAC3CS,SAAS,EAAET,MAAM,UAAA;AAAA,MACjBU,QAAQ,EAAEV,MAAM,UAItBZ;AAAAA,IAAAA,EAAAA,EAAAA;AAAAA,IAAAA,QAAQ,EACNY,MAAM,SACNK,OAAO,EACLL,MAAM,UACNC,UAAU,CACR,MACA,QACA,KACA,KACA,OAEFC,GAAAA,YAAY;AAAA,MACV1Q,IAAI,EAAEwQ,MAAM,UACZxP;AAAAA,MAAAA,MAAM,EAAEwP,MAAM,SACdxO;AAAAA,MAAAA,GAAG,EAAEwO,MAAM,UAAA;AAAA,MACXvO,GAAG,EAAEuO,MAAM,UACXjD;AAAAA,MAAAA,MAAM,EAAEiD,MAAM,SAAA;AAAA,MACd3O,OAAO,EACL2O,MAAM,SACNK,OAAON,GGrJbY;AAAAA,IAAAA,EAAAA,EAAAA;AAAAA,EAAAA;AAAAA,GAAAA,KAAM,IAAIC,EAAI,EAClBC,QAAAA,SAGIC,KAAUH,GAAII,QCNS;AAAA,EAC3Bf,MAAM;AAAA,EACNC,UAAU,CACR,QACA,MACA,YACA,SACA,YACA,WACA,SAAA;AAAA,EAEFC,YAAY,EACV1P,MAAM,EAAEwP,MAAM,SACdxQ,GAAAA,IAAI,EAAEwQ,MAAM,WAAWG,SAAS,KAChCT,UAAU,EAAEM,MAAM,UAAA,GAClBL,OAAO;AAAA,IAAEK,MAAM;AAAA,EAAA,GACfJ,UAAU,EAAEI,MAAM,UAAA,GAClBH,SAAS,EAAEG,MAAM,SAAA,GACjBF,SAAS,EAAEE,MAAM,SAAA,EAAA;IDVfgB,KAAUL,GAAII,QAAQR,EAAAA,GAEfU,KAAiBlQ,CAAAA,OACrB+P,GAAQ/P,EAGJmQ,GAAAA,KAAanQ,CAAAA,OACjBiQ,GAAQjQ,EEQJoQ,GAAAA,KAAwB,CACnCpQ,IACAqQ,OAEO,CACLC,GAAYtQ,GAAKuQ,QAAQF,EACzBG,GAAAA,GAAYxQ,GAAKT,QAAQ8Q,EACzBI,GAAAA,GAAYzQ,GAAK0Q,QAAQL,KACzBM,GAAY3Q,GAAK4Q,QAAQP,EAAAA,GACzBQ,GAAY7Q,GAAK8Q,SAAST,EAAAA,GAC1BU,GAAY/Q,GAAKgR,SAASX,EAAAA,GAC1BY,GAAWjR,GAAKsP,OAAOe,EACvBa,GAAAA,GAAalR,GAAKmR,SAASd,EAC3Be,GAAAA,GAAkBpR,GAAKqR,cAAchB,EAInCC,CAAAA,GAAAA,KAAc,CAClBC,IACAe,QAEO;AAAA,EACLC,OAAOD,GAAOE,MAAMC;AAAAA,EACpBnC,OAAOiB;AAAAA,EACPmB,QAAQ,EACNC,QAAQ,QACRC,QAAQ,QACRC,MAAM;IAKNrB,KAAc,CAClBjR,IACA+R,QAEO;AAAA,EACLhC,OAAO/P;AAAAA,EACPgS,OAAOD,GAAO9R,MAAMiS;AAAAA,EACpBC,QAAQ,EACNC,QAAQ,QACRC,QAAQ,QACRC,MAAM,QAAA;AAKNpB,IAAAA,KAAc,CAClBC,IACAY,QAEO,EACLhC,OAAOoB,IACPa,OAAOD,GAAOQ,MAAML,OACpBC,QAAQ,EACNC,QAAQ,QACRC,QAAQ,QACRC,MAAM,QAAA,EAAA,IAKNlB,KAAc,CAClBC,IACAU,QAEO,EACLhC,OAAOsB,IACPW,OAAOD,GAAOS,MAAMN,OACpBC,QAAQ;AAAA,EACNC,QAAQ;AAAA,EACRE,MAAM;AAAA,EACND,QAAQ;AAKRf,EAAAA,IAAAA,KAAc,CAClBC,IACAQ,QAEO,EACLhC,OAAOwB,IACPS,OAAOD,GAAOU,MAAMP,OACpBC,QAAQ,EACNC,QAAQ,QACRC,QAAQ,QACRC,MAAM,QAAA,EAAA,IAKNd,KAAc,CAClBC,IACAM,QAEO,EACLhC,OAAO0B,IACPO,OAAOD,GAAOW,MAAMR,OACpBC,QAAQ;AAAA,EACNC,QAAQ;AAAA,EACRC,QAAQ;AAAA,EACRC,MAAM;AAKNZ,EAAAA,IAAAA,KAAa,CACjB3B,IACAgC,QACqB,EACrBhC,OAAAA,IACAiC,OAAOD,GAAOY,KAAKT,OACnBC,QAAQ,EACNC,QAAQ,QACRC,QAAQ,QACRC,MAAM,OAGJX,EAAAA,IAAAA,KAAe,CACnBC,IACAG,QACqB,EACrBhC,OAAO6B,IACPI,OAAOD,GAAOa,OAAOV,OACrBC,QAAQ;AAAA,EACNC,QAAQ;AAAA,EACRC,QAAQ;AAAA,EACRC,MAAM;AAIJT,EAAAA,IAAAA,KAAoB,CACxBC,IACAC,QACqB,EACrBhC,OAAO+B,IACPE,OAAOD,GAAOc,YAAYX,OAC1BC,QAAQ,EACNC,QAAQ,QACRC,QAAQ,QACRC,MAAM,eAAA,EAAA,IC3JGQ,KAAiB;AAAA,EAC5B7S,OAAO;AAAA,IACLiS,OAAO;AAAA,IACPa,SAAS;AAAA,MACPC,mBAAmB;AAAA,MACnBC,WAAW;AAAA,MACXC,gBAAgB;AAAA,MAChBC,gBAAgB;AAAA,MAChBC,UAAU;AAAA,MACVC,SAAS;AAAA,MACTC,SAAS;AAAA,MACTC,cAAc;AAAA,MACdC,UAAU;AAAA,IAAA;AAAA,EAAA;AAAA,EAGdf,OAAO,EACLP,OAAO,MACPa,SAAS,EACPU,QAAQ,SACRC,WAAW,SACXC,WAAW,WAAA,EAAA;AAAA,EAGfnB,OAAO,EACLN,OAAO,MACPa,SAAS,EACPa,aAAa,WACbC,YAAY,YAAA,EAAA;AAAA,EAGhBnB,OAAO,EACLR,OAAO,QACPa,SAAS,EACPe,WAAW,YACXC,YAAY,WACZC,aAAa,SACbC,MAAM;EAGVtB,MAAM,EACJT,OAAO,QACPa,SAAS,EACPmB,YAAY,MAAA,EAAA;AAAA,EAGhBjC,OAAO,EACLC,OAAO,OACPa,SAAS;AAAA,IACPoB,uBAAuB;AAAA,IACvBC,uBAAuB;AAAA,IACvBC,QAAQ;AAAA,IACRC,QAAQ;AAAA,EAGZ/B,EAAAA;AAAAA,EAAAA,OAAO,EACLL,OAAO,QACPa,SAAS;AAAA,IACPwB,aAAa;AAAA,IACbC,UAAU;AAAA,IACVC,QAAQ;AAAA,IACRC,SAAS;AAAA,IACTC,mBAAmB;AAAA,IACnBC,qBAAqB;AAAA,IACrBC,mBAAmB;AAAA,IACnBC,UAAU;AAAA,IACVC,UAAU;AAAA,IACVC,gBAAgB;AAAA,IAChBC,gBAAgB;AAAA,IAChBC,iBAAiB;AAAA,IACjBC,eAAe;AAAA,EAGnBvC,EAAAA;AAAAA,EAAAA,QAAQ,EACNV,OAAO,MACPa,SAAS,EACPqC,cAAc;EAGlBC,YAAY,EACVnD,OAAO,IACPa,SAAS;AAAA,IACPuC,OAAO;AAAA,IACPC,OAAO;AAAA,IACPC,aAAa;AAAA,EAAA,EAAA;AAAA,EAGjB3C,aAAa,EACXX,OAAO,WACPa,SAAS,EACPrS,SAAS,QACTE,UAAU,UACVV,MAAM,MACNhB,IAAI,MACJyB,MAAM,UAAA,EAAA;AAAA,GCtGC8U,KAAwB;AAAA,EACnCvD,OAAO;AAAA,EACPa,SAAS,CAAA;ACHE2C,GAAAA,KAAa,CAACC,KAA0B,QAAgB,EACnEjG,MAAMiG,GAAOjG,QAAQ,GACrBkG,WAAWD,GAAOC,aAAa,GAC/BC,SAASF,GAAOE,WAAW,IAC3BC,UAAUH,GAAOG,YAAY,GAC7BC,UAAUJ,GAAOI,YAAY,MAAA,ICLlBC,KAAgB,CAAC/V,KAA6B,QAAoB;AAAA,EAC7EC,MAAMD,GAAMC,QAAQ;AAAA,EACpBhB,IAAIe,GAAMf,MAAM;AAAA,EAChB8U,aAAa/T,GAAM+T,eAAe;AAAA,EAClCpH,eAAe3M,GAAM2M,iBAAiB;AAAA,EACtCD,gBAAgB1M,GAAM0M,kBAAkB;AAAA,EACxCsJ,UAAUhW,GAAMgW,YAAY;AAAA,EAC5BC,WAAWjW,GAAMiW,aAAa;AAAA,EAC9BC,QAAQ,CAAA;AAAA,EACR1J,MAAMxM,GAAMwM,QAAQ;AAAA,EACpB6G,SAASrT,GAAMqT,WAAW;AAAA,EAC1BF,UAAUnT,GAAMmT,YAAY;AAAA,EAC5BC,SAASpT,GAAMoT,WAAW;AAAA,EAC1B+C,QAAQ;EACR7C,cAActT,GAAMsT,gBAAgB;AAAA,EACpCC,UAAUvT,GAAMuT,YAAY;AAAA,IAGjB6C,KAAsB5V,CAAAA,QAC1B;AAAA,EACLP,MAAMO,GAAKP,QAAQ;AAAA,EACnBhB,IAAIuB,GAAKvB,MAAM;AAAA,EACf8U,aAAavT,GAAKuT,eAAe;AAAA,EACjCpH,eAAenM,GAAKmM,iBAAiB;AAAA,EACrCD,gBAAgBlM,GAAKkM,kBAAkB;AAAA,EACvCsJ,UAAUxV,GAAKwV,YAAY;AAAA,EAC3BC,WAAWzV,GAAKyV,aAAa;AAAA,EAC7BC,QAAQ,CAAA;AAAA,EACR1J,MAAMhM,GAAKgM,QAAQ;AAAA,EACnB6G,SAAS7S,GAAK6S,WAAW;AAAA,EACzBF,UAAU3S,GAAK2S,YAAY;AAAA,EAC3BC,SAAS5S,GAAK4S,WAAW;AAAA,EACzB+C,QAAQ,CAAA;AAAA,EACR7C,cAAc9S,GAAK8S,gBAAgB;AAAA,EACnCC,UAAU/S,GAAK+S,YAAY;AClClB8C,IAAAA,KAAgB,CAAC9D,KAA6B,QAAoB;AAAA,EAC7EtT,IAAIsT,GAAMtT,MAAM;AAAA,EAChBgB,MAAMsS,GAAMtS,QAAQ;AAAA,EACpBqW,WAAW/D,GAAM+D,aAAa;AAAA,EAC9BC,aAAahE,GAAMgE,eAAe;AAAA,EAClCL,QAAQ3D,GAAM2D,UAAU,CAAA;AAAA,EACxB1J,MAAM+F,GAAM/F,QAAQ;AAAA,EACpBgK,SAASjE,GAAMiE,WAAW;AAAA,EAC1BhD,QAAQjB,GAAMiB,UAAU,CACtB,GACA,GACA,GACA,GACA,GACA,GACA,GACA,CAEFiD;AAAAA,EAAAA,SAASlE,GAAMkE,WAAW;AAAA,EAC1BC,OAAOnE,GAAMmE,SAAS;ACnBXC,IAAAA,KAAgB,CAACnW,KAA4B,QAAoB,EAC5EP,MAAMO,GAAKP,QAAQ,IACnBhB,IAAIuB,GAAKvB,MAAM,GACfiX,QAAQ,CAAA,GACR1J,MAAMhM,GAAKgM,QAAQ,IACnBgH,QAAQ,CACN,GACA,GACA,GACA,GACA,GACA,GACA,GACA,CAEFC,GAAAA,WAAWjT,GAAKiT,aAAa,CAAA,GAC7BC,WAAWlT,GAAKkT,aAAa,OChBlBkD,KAAe,CAACC,KAA8B,QAAkB;AAAA,EAC3EC,QAAQD,GAASC,UAAU;AAAA,EAC3BC,aAAaF,GAASE,eAAe;AAAA,EACrC1E,MAAMwE,GAASxE,QAAQ;AAAA,IAGZ2E,KAAkB,CAC7BC,KAAgC,QACd;AAAA,EAClBC,iBAAiBD,GAAOC,mBAAmB;AAAA,EAC3CC,iBAAiBF,GAAOE,mBAAmB;AAAA,EAC3CC,eAAeH,GAAOG,iBAAiB;AAAA,EACvCC,QAAQJ,GAAOI,UAAU;AAAA,EAEzBC,SAASL,GAAOK,WAAW;AAGhBC,IAAAA,KAAgB,CAAC/W,KAA4B,OAAoB;;AAAA;AAAA,IAC5EP,MAAMO,GAAKP,QAAQ;AAAA,IACnBhB,IAAIuB,GAAKvB,MAAM;AAAA,IACf8U,aAAavT,GAAKuT,eAAe;AAAA,IACjCD,YAAYtT,GAAKsT,cAAc;AAAA,IAC/BD,aAAWrT,MAAAA,GAAKqT,cAALrT,gBAAAA,IAAgBpB,IAAI,MAAMwX,UAAmB,CACxDY;AAAAA,IAAAA,KAAKhX,GAAKgX,OAAO;AAAA,IACjBxD,MAAMxT,GAAKwT,QAAQ;AAAA,IACnBkC,QAAQ,CAAA;AAAA,IACR1J,MAAMhM,GAAKgM,QAAQ;AAAA,IACnBgH,QAAQ,CACN,GACA,GACA,GACA,GACA,GACA,GACA,GACA,CAEFiE;AAAAA,IAAAA,SAAS;;GCrCEC,KAAgB,CAAClX,KAA4B,QAAoB;AAAA,EAC5EP,MAAMO,GAAKP,QAAQ;AAAA,EACnBhB,IAAIuB,GAAKvB,MAAM;AAAA,EACfqX,WAAW9V,GAAK8V,aAAa;AAAA,EAC7BqB,UAAUnX,GAAKmX,YAAY;AAAA,EAC3BC,UAAUpX,GAAKoX,YAAY;AAAA,EAC3BC,UAAUrX,GAAKqX,YAAY;AAAA,EAC3BC,UAAUtX,GAAKsX,YAAY;AAAA,EAC3B5B,QAAQ,CAAA;AAAA,EACR1J,MAAMhM,GAAKgM,QAAQ;AAAA,EAEnBuL,aAAavX,GAAKuX,eAAe;AAAA,EACjCC,iBAAiBxX,GAAKwX;EACtB1D,aAAa9T,GAAK8T,eAAe;AAAA,EACjCC,UAAU/T,GAAK+T,YAAY;AAAA,EAC3BC,QAAQhU,GAAKgU,UAAU;AAAA,EACvBC,SAASjU,GAAKiU,WAAW;AAAA,EACzBC,mBAAmBlU,GAAKkU,qBAAqB;AAAA,EAC7CC,qBAAqBnU,GAAKmU,uBAAuB;AAAA,EACjDC,mBAAmBpU,GAAKoU,qBAAqB;AAAA,EAC7CC,UAAUrU,GAAKqU,YAAY;AAAA,EAC3BC,UAAUtU,GAAKsU,YAAY;AAAA,EAC3BC,gBAAgBvU,GAAKuU,kBAAkB;AAAA,EACvCC,gBAAgBxU,GAAKwU,kBAAkB;AAAA,EACvCC,iBAAiBzU,GAAKyU,mBAAmB;AAAA,EACzCC,eAAe1U,GAAK0U,iBAAiB;AC3B1B+C,IAAAA,KAAqB,IACrBC,KAAoB,IACpBC,KAAmB,IACnBC,KAAqB,IACrBC,KAAc,IACdC,KAAe,IACfC,KAAe,IACfC,KAAuB,IACvBC,KAAqB,IACrBC,KAAqB,IACrBC,KAAqB,IACrBC,KAAqB,IACrBC,KAAuB,IACvBC,KAAwB,IACxBC,KAAkB,IAClBC,KAAmB,IACnBC,KAA0B,IAC1BC,KAAyB,IACzBC,KAAmB,IACnBC,KAAmB,IACnBC,KAAkB,IAClBC,KAAoB,IACpBC,KAAqB,IACrBC,KAAsB,IACtBC,KAAsB,ICxBtBC,KAAiB,GACjBC,KAAe,GACfC,KAAkB,GAClBC,KAAe,GCQfC,KAA0B,CACrChI,IACAiI,QACqB;AAAA,EACrBjK,OAAOkK,GAAsBlI,GAAOgB,SAASiH,EAC7ChI;AAAAA,EAAAA,OAAOD,GAAOG;AAAAA,EACdC,QAAQ,EACNC,QAAQ,QACRC,QAAQ,SACRC,MAAM,UAAA;AAAA,IAIG2H,KAAwB,CACnClH,IACAiH,OAEO,CACL,EACE9a,ID9BwB,GC+BxBgB,MAAM8Z,GAAOE,UAEf,EACEhb,IDjCsB,GCkCtBgB,MAAM6S,GAAQoH,YAEhB,GAAA,EACEjb,IDpCyB,GCqCzBgB,MAAM6S,GAAQqH,eAEhB,GAAA;AAAA,EACElb,IDvCsB;AAAA,ECwCtBgB,MAAM6S,GAAQsH;ICxCPC,KAAkB,GAKlBC,KAAkB,GAKlBC,KAAkB,GAKlBC,KAAkB,GAKlBC,KAAkB,GAKlBC,KAAkB,GAKlBC,KAAkB,GAKlBC,KAAkB,GAKlBC,KAAkB,GAKlBC,KAAkB,GC/BlBC,KACXC,CAAAA,QACqB;AAAA,EACrBlL,OAAOmL,GAAmBD,GAAOlI,OAAAA;AAAAA,EACjCf,OAAOiJ,GAAO/I;AAAAA,EACdC,QAAQ,EACNC,QAAQ,QACRC,QAAQ,SACRC,MAAM,UAAA;AAIG4I,IAAAA,KACXD,CAAAA,OAEO,CACL,EACE/b,ID/ByB,GCgCzBgB,MAAM+a,GAAOE,QAEf,GAAA,EACEjc,ID9ByB,GC+BzBgB,MAAM+a,GAAOG,eAEf,EACElc,ID7ByB,GC8BzBgB,MAAM+a,GAAOI,aAAAA,GAEf,EACEnc,ID5ByB,GC6BzBgB,MAAM+a,GAAOK,oBAEf,GAAA,EACEpc,ID3ByB,GC4BzBgB,MAAM+a,GAAOM,iBAAAA,GAEf;AAAA,EACErc,ID1ByB;AAAA,EC2BzBgB,MAAM+a,GAAOO;AAAAA,GAEf,EACEtc,IDzByB,GC0BzBgB,MAAM+a,GAAOQ,kBAAAA,GAEf,EACEvc,IDxByB,GCyBzBgB,MAAM+a,GAAOS,mBAAAA,GAEf,EACExc,IDvByB,GCwBzBgB,MAAM+a,GAAOU,mBAAAA,GAEf,EACEzc,IDtByB,GCuBzBgB,MAAM+a,GAAOW,mBAAAA,CAAAA,GAKNC,KAAiB,CAC5BC,IACA/J,OAAAA;AAEA,UAAQ+J,IAAAA;AAAAA,IACN,KD/D2B;ACgEzB,aAAO/J,GAAOuJ;AAAAA,IAChB,KD3E2B;AC4EzB,aAAOvJ,GAAOqJ;AAAAA,IAChB,KDpD2B;ACqDzB,aAAOrJ,GAAO0J;AAAAA,IAChB,KD1E2B;AC2EzB,aAAO1J,GAAOsJ;AAAAA,IAChB,KDtF2B;ACuFzB,aAAOtJ,GAAOoJ;AAAAA,IAChB,KDrD2B;ACsDzB,aAAOpJ,GAAO2J;AAAAA,IAChB,KDtE2B;ACuEzB,aAAO3J,GAAOwJ;AAAAA,IAChB,KDnE2B;ACoEzB,aAAOxJ,GAAOyJ;AAAAA,IAChB,KDtD2B;ACuDzB,aAAOzJ,GAAO4J;AAAAA,IAChB,KDnD2B;ACoDzB,aAAO5J,GAAO6J;AAAAA,EAAAA;AAElB,SAAO,YAAYE,ECnGRC;AAAAA,GAAAA,KAAuB,GAKvBC,KAAuB,GAIvBC,KAAoB,GAIpBC,KAAoB,GAIpBC,KAAqB,GAKrBC,KAAqB,GAKrBC,KAAoB,GAIpBC,KAAoB,GCnBpBC,KACXhT,CAAAA,QACqB,EACrBwG,OAAOyM,GAAqBjT,GAAMwJ,OAAAA,GAClCf,OAAOzI,GAAM2I,OACbC,QAAQ,EACNC,QAAQ,QACRC,QAAQ,SACRC,MAAM,SAAA,EAAA,IAIGkK,KACXjT,CAAAA,OAEO,CACL;AAAA,EAAErK,ID5B8B;AAAA,EC4BJgB,MAAMqJ,GAAMkT;GACxC,EAAEvd,IDxB8B,GCwBJgB,MAAMqJ,GAAMmT,MACxC,GAAA,EAAExd,IDrB2B,GCqBJgB,MAAMqJ,GAAMoT,IAAAA,GACrC,EAAEzd,IDlB2B,GCkBJgB,MAAMqJ,GAAMqT,IACrC,GAAA,EAAE1d,IDf4B,GCeJgB,MAAMqJ,GAAMsT,QACtC,EAAE3d,IDX4B,GCWJgB,MAAMqJ,GAAMuT,QACtC,EAAE5d,IDP2B,GCOJgB,MAAMqJ,GAAMwT,IAAAA,GACrC,EAAE7d,IDJ2B,GCIJgB,MAAMqJ,GAAMyT,IAI5BC,CAAAA,GAAAA,KAAmB,CAC9BnB,IACA/J,OAAAA;AAEA,UAAQ+J,IAAAA;AAAAA,IACN,KD5CgC;AC6C9B,aAAO/J,GAAO0K;AAAAA,IAChB,KDzCgC;AC0C9B,aAAO1K,GAAO2K;AAAAA,IAChB,KDvC6B;ACwC3B,aAAO3K,GAAO4K;AAAAA,IAChB,KDrC6B;ACsC3B,aAAO5K,GAAO6K;AAAAA,IAChB,KDnC8B;ACoC5B,aAAO7K,GAAO8K;AAAAA,IAChB,KDhC8B;ACiC5B,aAAO9K,GAAO+K;AAAAA,IAChB,KD7B6B;AC8B3B,aAAO/K,GAAOgL;AAAAA,IAChB,KD3B6B;AC4B3B,aAAOhL,GAAOiL;AAAAA,IAChB;AACE,aAAO,YAAYlB,EC7DZoB;AAAAA,EAAAA;AAAAA,GAAAA,KAAoB,GAKpBC,KAAoB,GAKpBC,KAAoB,GAKpBC,KAAoB,GAKpBC,KAAoB,GAKpBC,KAAoB,GAKpBC,KAAoB,GAKpBC,KAAoB,GAKpBC,KAAoB,GAKpBC,KAAoB,GC/BpBC,KACXC,CAAAA,QACqB,EACrB9N,OAAO+N,GAAqBD,GAAa9K,OAAAA,GACzCf,OAAO6L,GAAa3L,OACpBC,QAAQ,EACNC,QAAQ,QACRC,QAAQ,SACRC,MAAM,UAIGwL,EAAAA,IAAAA,KACXC,CAAAA,OAEO,CACL;AAAA,EACE7e,ID/B2B;AAAA,ECgC3BgB,MAAM6d,GAAcC;AAAAA,GAEtB,EACE9e,ID9B2B,GC+B3BgB,MAAM6d,GAAcE,mBAEtB,EACE/e,ID7B2B,GC8B3BgB,MAAM6d,GAAcG,mBAEtB,GAAA,EACEhf,ID5B2B,GC6B3BgB,MAAM6d,GAAcI,aAAAA,GAEtB,EACEjf,ID3B2B,GC4B3BgB,MAAM6d,GAAcK,WAEtB,GAAA,EACElf,ID1B2B,GC2B3BgB,MAAM6d,GAAcM,aAAAA,GAEtB;AAAA,EACEnf,IDzB2B;AAAA,EC0B3BgB,MAAM6d,GAAcO;AAAAA,GAEtB,EACEpf,IDxB2B,GCyB3BgB,MAAM6d,GAAcQ,gBAAAA,GAEtB,EACErf,IDvB2B,GCwB3BgB,MAAM6d,GAAcS,gBAEtB,GAAA,EACEtf,IDtB2B,GCuB3BgB,MAAM6d,GAAcU,eAKbC,CAAAA,GAAAA,KAAmB,CAC9B5C,IACA/J,OAAAA;AAEA,UAAQ+J,IAAAA;AAAAA,IACN,KDjC6B;ACkC3B,aAAO/J,GAAO0M;AAAAA,IAChB,KDhF6B;ACiF3B,aAAO1M,GAAOiM;AAAAA,IAChB,KD1C6B;AC2C3B,aAAOjM,GAAOyM;AAAAA,IAChB,KD/E6B;ACgF3B,aAAOzM,GAAOkM;AAAAA,IAChB,KDlE6B;ACmE3B,aAAOlM,GAAOqM;AAAAA,IAChB,KD/D6B;ACgE3B,aAAOrM,GAAOsM;AAAAA,IAChB,KD5D6B;AC6D3B,aAAOtM,GAAOuM;AAAAA,IAChB,KDzD6B;AC0D3B,aAAOvM,GAAOwM;AAAAA,IAChB,KD/E6B;ACgF3B,aAAOxM,GAAOoM;AAAAA,IAChB,KDtF6B;ACuF3B,aAAOpM,GAAOmM;AAAAA,EAAAA;AAElB,SAAO,YAAYpC,EAAAA;AAAAA,GCtGR6C,KAA+B,GAC/BC,KAA+B,GAC/BC,KAAgC,GAChCC,KAAiC,GACjCC,KAA4B,GAC5BC,KAAiC,GCQjCC,KACXlM,CAAAA,QACqB;AAAA,EACrBhD,OAAOmP,GAAoBnM,GAAQA,OAAAA;AAAAA,EACnCf,OAAOe,GAAQb;AAAAA,EACfC,QAAQ,EACNC,QAAQ,QACRC,QAAQ,SACRC,MAAM,eAIG4M;AAAAA,IAAAA,KACXnM,CAAAA,OAEO,CACL,EACE7T,ID9BsC,GC+BtCgB,MAAM6S,GAAQoM,cAEhB,GAAA,EACEjgB,IDjCsC,GCkCtCgB,MAAM6S,GAAQqM,cAAAA,GAEhB,EACElgB,IDpCuC,GCqCvCgB,MAAM6S,GAAQsM,eAAAA,GAEhB;AAAA,EACEngB,IDvCwC;AAAA,ECwCxCgB,MAAM6S,GAAQuM;AAEhB,GAAA,EACEpgB,ID1CmC,GC2CnCgB,MAAM6S,GAAQwM,WAAAA,GAEhB,EACErgB,ID7CwC,GC8CxCgB,MAAM6S,GAAQyM,eCnDPC,CAAAA,GAAAA,KAAsB,GACtBC,KAAgB,GAChBC,KAAqB,GACrBC,KAAsB,GCQtBC,KACX7N,CAAAA,QACqB,EACrBjC,OAAO+P,GAAmB9N,GAAMe,OAChCf,GAAAA,OAAOA,GAAME,OACbC,QAAQ;AAAA,EACNC,QAAQ;AAAA,EACRC,QAAQ;AAAA,EACRC,MAAM;AAAA,EAAA,IAIGwN,KACX9N,CAAAA,OAEO,CACL,EACE9S,ID5B6B,GC6B7BgB,MAAM8R,GAAM+N,WAEd,GAAA,EACE7gB,ID/BuB,GCgCvBgB,MAAM8R,GAAMgO,MAAAA,GAEd,EACE9gB,IDlC4B,GCmC5BgB,MAAM8R,GAAMiO,WAAAA,GAEd;AAAA,EACE/gB,IDrC6B;AAAA,ECsC7BgB,MAAM8R,GAAMkO;IC5BZC,KAAc,UACdC,KAAwB,qBACxBC,KAAyB,qBACzBC,KAAqB,WAEdC,KAAkB;AAAA,EAC7BrO,OAAO;AAAA,EACPa,SAAS;AAAA,IACPyN,cAAc,EACZtO,OAAO,SACPuO,QAAQL,IACRrN,SAAS;AAAA,MACP0J,OAAO;AAAA,MACPC,OAAO;AAAA,MACPC,KAAK;AAAA,MACLC,KAAK;AAAA,MACLC,MAAM;AAAA,MACNC,MAAM;AAAA,MACNC,KAAK;AAAA,MACLC,KAAK;AAAA,IAAA,EAAA;AAAA,IAGT0D,YAAY,EACVxO,OAAO,SACPuO,QAAQJ,IACRtN,SAAS;AAAA,MACPoI,SAAS;AAAA,MACTC,aAAa;AAAA,MACbC,cAAc;AAAA,MACdC,qBAAqB;AAAA,MACrBC,kBAAkB;AAAA,MAClBC,qBAAqB;AAAA,MACrBC,mBAAmB;AAAA,MACnBC,oBAAoB;AAAA,MACpBC,oBAAoB;AAAA,MACpBC,oBAAoB;AAAA,IAGxBiC,EAAAA;AAAAA,IAAAA,cAAc,EACZ3L,OAAO,SACPuO,QAAQL,IACRrN,SAAS;AAAA,MACPiL,YAAY;AAAA,MACZC,iBAAiB;AAAA,MACjBC,oBAAoB;AAAA,MACpBC,cAAc;AAAA,MACdC,YAAY;AAAA,MACZC,cAAc;AAAA,MACdC,oBAAoB;AAAA,MACpBC,iBAAiB;AAAA,MACjBC,iBAAiB;AAAA,MACjBC,gBAAgB;AAAA,IAGpBkC,EAAAA;AAAAA,IAAAA,aAAa;AAAA,MACXzO,OAAO;AAAA,MACPuO,QAAQN;AAAAA,MACRpN,SAAS,EACPgN,YAAY,QACZC,OAAO,MACPC,YAAY,QACZC,eAAe;;IAGnBU,SAAS,EACP1O,OAAO,WACPuO,QAAQN,IACRpN,SAAS;AAAA,MACPoH,aAAa;AAAA,MACbC,gBAAgB;AAAA,MAChBC,aAAa;AAAA,IAGjBwG,EAAAA;AAAAA,IAAAA,cAAc,EACZ3O,OAAO,UACPuO,QAAQN,IACRpN,SAAS;AAAA,MACPsM,gBAAgB;AAAA,MAChBG,gBAAgB;AAAA,MAChBL,eAAe;AAAA,MACfC,eAAe;AAAA,MACfG,YAAY;AAAA,MACZD,iBAAiB;AAAA,IAGrBwB,EAAAA;AAAAA,IAAAA,aAAa,EACX5O,OAAO,SACPuO,QAAQL,GAEVW;AAAAA,IAAAA,YAAY,EACV7O,OAAO,SACPuO,QAAQL,GAEVY;AAAAA,IAAAA,WAAW,EACT9O,OAAO,WACPuO,QAAQL,GAAAA;AAAAA,IAEVa,aAAa;AAAA,MACX/O,OAAO;AAAA,MACPuO,QAAQN;AAAAA,IAAAA;AAAAA,IAEVe,eAAe,EACbhP,OAAO,QACPuO,QAAQN,GAEVgB;AAAAA,IAAAA,aAAa,EACXjP,OAAO,UACPuO,QAAQJ,GAAAA;AAAAA,IAEVe,aAAa,EACXlP,OAAO,UACPuO,QAAQH,GAAAA;AAAAA,IAEVe,aAAa;AAAA,MACXnP,OAAO;AAAA,MACPuO,QAAQH;AAAAA;IAEVgB,YAAY,EACVpP,OAAO,QACPuO,QAAQL;IAEVmB,aAAa,EACXrP,OAAO,SACPuO,QAAQN,GAAAA;AAAAA,IAEVqB,iBAAiB,EACftP,OAAO,WACPuO,QAAQN,GAEVsB;AAAAA,IAAAA,gBAAgB,EACdvP,OAAO,WACPuO,QAAQN,GAAAA;AAAAA,IAEVuB,WAAW;AAAA,MACTxP,OAAO;AAAA,MACPuO,QAAQN;AAAAA,IAAAA;AAAAA,IAEVwB,WAAW,EACTzP,OAAO,QACPuO,QAAQN,GAEVyB;AAAAA,IAAAA,UAAU,EACR1P,OAAO,WACPuO,QAAQN,GAAAA;AAAAA,IAEV0B,UAAU,EACR3P,OAAO,SACPuO,QAAQN,GAAAA;AAAAA,IAEV2B,WAAW,EACT5P,OAAO,YACPuO,QAAQN,GAAAA;AAAAA,IAEV4B,cAAc,EACZ7P,OAAO,YACPuO,QAAQN;IAEV6B,eAAe,EACb9P,OAAO,YACPuO,QAAQN,GAAAA;AAAAA,EAAAA;GCjKD8B,KAAmB,CAC9BC,IACAlI,OAEO,CACLuC,GAAwB2F,GAAI1B,YAAAA,GAC5BxF,GAAsBkH,GAAIxB,UAC1B9C,GAAAA,GAAwBsE,GAAIrE,YAAAA,GAC5B9D,GAAwBmI,GAAItB,SAAS5G,EAAAA,GACrC6F,GAAuBqC,GAAIvB,WAC3B1B,GAAAA,GAAwBiD,GAAIrB,YAAAA,CAAAA,GClBnBsB,KAAiB,SAEjBC,KAAe;AAAA,EAC1B1S,MAAM;AAAA,EACNC,UAAU,CAAC,QAAQ,UAAU,OAAA;AAAA,EAC7BC,YAAY,EACVtG,MAAM,EAAEoG,MAAM,UAAA,GACdqH,QAAQ,EAAErH,MAAM,UAAA,GAChB2S,OAAO,EAAE3S,MAAM,UAAA,EAAA;AAAA,GCXN4S,KAAc,QACdC,KAAY,UCgBnBC,KACJC,CAAAA,OAEOA,GAAKpjB,IAAKqjB,CAAAA,QAAS;AAAA,EACxBC,SAASD;AAAAA,EACTE,aAAa,IAAIF,EAcRG;AAAAA,EAAAA,GAAAA,KACXC,CAAAA,QAEO;AAAA,EACLH,SAASG,GAAMC;AAAAA,EACfH,aAAa,IAAIE,GAAMC,SAAAA;AAAAA,EACvBC,UAAU,EACR5Q,QAAQ0Q,GAAME,SAAS5Q,QACvBE,MAAMwQ,GAAME,SAAS1Q,MACrBD,QAAQyQ,GAAME,SAAS3Q,OAAAA;AC3ChB4Q,IAAAA,KAAgB9Q,CAAAA,OACpB,GAAGA,GAAOC,MAAAA,IAAUD,GAAOE,MAAAA,IAAUF,GAAOG,IAAAA,ICmBxC4Q,KACXC,CAAAA,OAAAA;AAEM,QAAAxiB,KAAOwiB,GAAKC,eAAe,CAC1B;AAAA,SAAAD,GAAKE,aAAa,CAAI1iB,GAAAA,IAAMwiB,GAAKE,UAAAA,IAAc,CAAI1iB,GAAAA,EAAAA;AAAAA,GCR/C2iB,KAAoB,CAC/BH,IACAI,KAAiD,CACtB,MAAA;AAAA,SAAA;AAAA,IAC3BH,aAAa,CAAIF,GAAAA,GAAuBC,EAAUI,GAAAA,GAAAA,EAAAA,EAAYlkB,IAC5DmkB,EAEFC;AAAAA,IAAAA,gBAAgB,EACdnkB,MAAMokB,GAA2BP,EAAAA,GACjCnR,OAAO2R,GAAsBR;IAE/BvT,aHlBAgU,KGkBmCT,GAAKP,eAAe,CAAA,GHjBtB;AAAA,MACjCiB,SAASD,GAAMC,UAAUrB,GAAoBoB,GAAMC,OAAAA,IAAW;MAC9DC,SAASF,GAAME,UAAUtB,GAAoBoB,GAAME,OAAW,IAAA,CAAA;AAAA;IGgB9DC,YAAYZ,GAAKY,aACbZ,GAAKY,WAAW1kB,IAAIwjB,EACpB,IAAA,CAAA;AAAA,EAAA;AHtBgC,MACpCe;AAAAA,GGwBIJ,KACJJ,CAAAA,QAEO,EACLR,aAAa,IAAIQ,GAAYR,WAC7BoB,KAAAA,SAASZ,GAAYY,SACrBjB,WAAWK,GAAYL,UAAAA,IAIrBW,KAAiCP,CAAAA,OAAAA;AACrC,MAAIA,GAAKM,6BACHN,GAAKM,eAAenkB,KACtB,QAAO6jB,GAAKM,eAAenkB;AAGzB,QAAA4iB,MDhDNiB,CAAAA;;+BAEWc,IAAsB,CAC3Bd,KAAAA,MAAAA,GAAKP,gBAALO,gBAAAA,IAAkBU,YAAW,CAAA,GAAA,KAC7BV,KAAAA,GAAKP,gBAALO,mBAAkBW,YAAW,SAC7BX,KAAAA,GAAKY,eAALZ,mBAAiB9jB,IAAK6kB,CAAAA,OAAMA,GAAEnB,eAAc,CAAA,CAAA,CAAA;AAAA,KC2CmBI,EAAAA;AACjE,SAAa,MAAbjB,GAAIiC,OClDkB,oBDsDnBzkB,MAAMC,KAAKuiB,EACf7iB,EAAAA,IAAKsT,CAAAA,OAAS,GAAGA,EAASA,KAAAA,EAAAA,GAAAA,EAC1ByR,KAAK,IAAA;GAGJT,KAA4BR,CAAAA,OAAAA;;AAAAA,sBAC5BA,MAAAA,GAAKM,mBAALN,gBAAAA,IAAqBnR,SAChBmR,GAAKM,eAAezR,QC9DF;AAAA,GDyFvBqS,KAAqB,CAKzBC,IACA7jB,IACA8jB;AAEM,QAAAlC,KAAQ5hB,GAAK8jB,GAAM5B,OACrB;AAAA,SAAAN,QACKiC,KAAAA,KAEFA,GAASE,WAAWD,GAAM3B,aAAa6B,OAAOpC,EAAAA,CAAAA;GElE1CqC,KAAqB,CAChCjE,IACAkE,IACAC,IACAC,KAAuB,EACrBC,sBAAsB,IACtBC,iBAAiB,IAGftE,MAAAA,GAAO3T,QAAQkY,UAAUH,GAAOE,kBAC3B,EACLE,aAAaxE,GAAOzO,OACpBkT,cAAc,CACZ;AAAA,EACEC,SAASP,GAAWQ;AAAAA,EACpBC,QAAQ5E,GAAO3T,QAAQwY,MAAM,GAAGT,GAAOE,eAG3CQ;AAAAA,CAAAA,GAAAA,gBAAgB,CAGb,EAAA,IAAA;AAAA,EACLN,aAAaxE,GAAOzO;AAAAA,EACpBuT,gBAAgBC,GAAuB/E,IAAQkE,IAAYC,EAC3DM;AAAAA,EAAAA,cAAcO,GACZhF,GAAO3T,SACP6X,IACAC,IACAC,GAAOC,oBAAAA;GAKPW,KAA4B,CAChChF,IACA0C,IACAyB,IACAE,OAAAA;AAEA,QAAMY,KAAUhmB,MAAMC,KAAK8gB,GAAO7gB,SAAS,sBAAA,CAAA,GACrC+lB,MHjE8BxC,CAAAA,OAAAA;;+BACzBc,IAAY,MACjBd,MAAAA,GAAKP,gBAALO,gBAAAA,IAAkBU,YAAW,CAC7BV,GAAAA,GAAAA,GAAKE,aAAa,CAACF,GAAKE,WAAWT,WAAAA,IAAe,SAClDO,KAAAA,GAAKC,gBAALD,mBAAkB9jB,IAAKumB,CAAAA,OAAWA,GAAOhD,iBAAgB,CACzDO,GAAAA,KAAAA,KAAAA,GAAKP,gBAALO,mBAAkBW,YAAW,CAAA,GAAA,KAC7BX,MAAAA,GAAKY,eAALZ,gBAAAA,IAAiB9jB,IAAK6kB,CAAAA,OAAMA,GAAEnB,eAAc;KG2DcI,EAAAA;AAChE,SAAOuC,GAAQG,OAA0B,CAACC,IAAKnT,OAAAA;AACvC,UAAArT,KAAeqT,GAAK,CAEtB;AAAA,WAAgB,MAAhBrT,GAAK0lB,SACAc,KAELxmB,GAAK0lB,SAASF,MAChBgB,GAAIC,KAAK,EACPZ,SAASP,GAAWoB,iBACpBX,QAAQ/lB,GAAKgmB,MAAM,GAAGR,EAAAA,EAAAA,CAAAA,GAEjBgB,OAEJH,GAAgBM,IAAI3mB,EACvBwmB,KAAAA,GAAIC,KAAK;AAAA,MACPZ,SAASP,GAAWsB;AAAAA,MACpBb,QAAQ/lB;AAAAA,QAGLwmB;AAAAA,EACN,GAAA,CAAA,CAAA;AAAA,GAGCN,KAAyB,CAC7B/E,IACAkE,IACAC,OAEO1B,GAAuByB,EAAYkB,EAAAA,OACxC,CAAC1C,IAAMxQ,OAAAA;AACL,QAAMwT,KAAQC,GAA2B3F,IAAQ9N,IAAMiS,EAAAA;AAIhD,SAHHuB,MACFhD,GAAK4C,KAAKI,EAAAA,GAELhD;GAET,CAIEiD,CAAAA,GAAAA,KAA6B,CACjC3F,IACA0C,IACAyB,OAEA;AAAA,QAAMyB,KAAwB5F,GAAO3T,QAAQwZ,SAASnD,GAAKP,WAAAA,GACrD2D,OAAuB9F,GAAO+F;AAChC,SAAA,CAACH,MAAgBE,KACZ,EACLpB,SAASP,GAAW6B,aACpBpB,QAAQlC,GAAKP,YAGbyD,IAAAA,MAAAA,CAAiBE,KACZ,EACLpB,SAASP,GAAW8B,iBACpBrB,QAAQlC,GAAKP,YAHb,IAAA;AAAA,GC1HO+D,KAAmB,CAC9BC,IACAC,OAEM;AAAA,QAAAC,KAAYC,GAAkBF,EACpC;AAAA,SAAOD,GAAWf,OAAiC,CAACC,IAAK9T,OAAAA;AACjD,UAAAgV,KAAQC,GAAsBjV,IAAO8U,EAEpC;AAAA,WADHhB,GAAA5D,IAAIlQ,GAAMkV,QAAQF,EAAAA,GACflB;AAAAA,KACF,oBAAAqB,KAAAA;AAAAA,GAGHF,KAAwB,CAC5BxG,IACAqG;AAEA,QAAM3U,KAASiV,GAAkB3G,GAAO+F,YAAYM,EAC7C;AAAA,SAAA,EACLO,iBAAiB5G,GAAO3T,SACxBkF,OAAOyO,GAAOzO,OACdvR,MAAM0R,KAASA,GAAOpC,eAIpBqX;AAAAA,GAAAA,KAAoB,CACxBjV,IACA2U,OAAAA;AAEA,MAAK3U,GAGL,QAAO2U,GAAUQ,IAAIrE,GAAa9Q,EAAAA,CAAAA;AAAAA,GAG9B4U,KACJpmB,CAAAA,OAEOA,GAAKklB,OAAqC,CAACxmB,IAAKsT;AACrD,QAAM4U,KAA2B,EAC/BxX,OAAOyX,GAAW7U,GAAK5C,KACvBoC,GAAAA,QAAQQ,GAAKR,QACbH,OAAOW,GAAKX,MAGP;AAAA,SADP3S,GAAI6iB,IAAIe,GAAatQ,GAAKR,MAASoV,GAAAA,EAAAA,GAC5BloB;GACF,oBAAA8nB,KAAAA,GAGHK,KAAc7mB,CAAAA,OACXA,GAAKtB,IAAqBsT,CAAAA,QAAU;AAAA,EAAEzT,IAAIyT,GAAKzT;AAAAA,EAAIgB,MAAMyS,GAAKzS;KCgC1DunB,KAAkB,CAC7BhnB,IACAE,IACAwiB,IACA1C,IACAiH,OAEA;AAAA,QAAMpoB,MJrBNglB,CAAAA,IACA7jB,IACA0iB,OAEM;AAAA,UAAAwE,KAAkBxE,GAAKvT,WAAWiU,QAAQgC,OAC9C,CAACvmB,IAAMilB,OAAUF,GAAmB/kB,IAAMmB,IAAM8jB,EAAAA,GAChDD;AAEK,WAAAnB,GAAKvT,WAAWkU,QAAQ+B,OAC7B,CAACvmB,IAAMilB,OAAUF,GAAmB/kB,IAAMmB,IAAM8jB,KAChDoD,EIWmBC;AAAAA,EAAAA,GAAwBnH,IAAQhgB,IAAM0iB,EAAAA;AAC3D,SAAOxiB,KAAOknB,GAAmBvoB,IAAMmB,IAAM0iB,IAAMxiB,IAAM+mB,EAAapoB,IAAAA;AAAAA,GAGlEuoB,KAAqB,CACzBvoB,IACAmB,IACA0iB,IACAxiB,IACA+mB,OAAAA;AAEA,QAAMI,MC3FNnnB,CAAAA,IACAoW;AAEM,UAAApE,MAjBNoE,CAAAA,IACApW,OAEM;AAAA,YAAAgS,KAAUhS,GAAKoW,EAAAA;AACrB,aAAIpE,MACEA,GAAKzT,OAAO6X,KACPpE,KAIJhS,GAAKonB,KAAMC,CAAAA,OAAMA,GAAE9oB,OAAO6X;OAOPA,IAAQpW,EAClC;AAAA,WAAOgS,KAAOA,GAAKzS,OAAO,SAAS6W,EAAAA;AAAAA,EAAAA,GDuFEpW,IAAM+mB,GAAUjnB,EAAAA,CAAAA;AACrD,SAAO0iB,GAAKC,YAAYyC,OAAO,CAACoC,IAAa5E,OACpC4E,GAAYzD,WAAWnB,GAAWT,aAAakF,EACrDxoB,GAAAA,EAAAA;AAAAA,GEhGC4oB,KAAa;AAAA,EACjB7E,YAAY,EACVT,aAAa,QACbG,WAAW,UACXiB,SAAS,OAEXpB;AAAAA,EAAAA,aAAa,EACXiB,SAAS,CAAC,OAAA,EAAA;AAIDsE,GAAAA,KAAkB,CAC7BC,IACAC,IACAtY,OAEM;AAAA,QAAAoT,KAAOG,GAAkB4E,EAAAA;AACxB,SAAAT,GACLY,IACAtY,IACAoT,IACAiF,GAAWtb,SACVwb,CAAAA,OAAMA,GAAEvR,MClCAwR;AAAAA,GAAAA,KAAiB,CAC5B3V,KAA+B,QACd;AAAA,EACjB1T,IAAI0T,GAAO1T,MAAM;AAAA,EACjBgB,MAAM0S,GAAO1S,QAAQ;AAAA,EACrBqW,WAAW3D,GAAO2D,aAAa;AAAA,EAC/BC,aAAa5D,GAAO4D,eAAe;AAAA,EACnCL,QAAQvD,GAAOuD,UAAU,CACzB1J;AAAAA,EAAAA,MAAMmG,GAAOnG,QAAQ;AAAA,EACrB+b,aAAa5V,GAAO4V,eAAe;AAAA,EACnC/U,QAAQb,GAAOa,UAAU,CACvB,GACA,GACA,GACA,GACA,GACA,GACA,GACA,CAEFiD;AAAAA,EAAAA,SAAS9D,GAAO8D,WAAW;AAAA,EAC3BC,OAAO/D,GAAO+D,SAAS;AAAA,EACvBhB,QAAQD,GAAW9C,GAAO+C,UAAU,CAAA,CAAA;AAAA,EACpC8S,SAAS7V,GAAO6V,WAAW;ACvBhBC,IAAAA,KAAqB;AAAA,EAChCxW,OAAO;AAAA,EACPa,SAAS,EACPqC,cAAc,UAAA;ACNLuT,GAAAA,KAAkB,GAClBC,KAAmB,GACnBC,KAAkB,GCFlBC,KAAoB,IACpBC,KAAoB,IACpBC,KAAiB,IACjBC,KAAmB,IACnBC,KAAsB,IACtBC,KAAkB,IAClBC,KAAoB,IACpBC,KAAqB,IACrBC,KAAuB,IACvBC,KAAiB,IACjBC,KAAc,IACdC,KAAqB,IACrBC,KAAsB,ICgBtBC,KACX5X,CAAAA,OAEO,CACL6X,GAAsB7X,EAAAA,GACtB8X,GAAsB9X,EAAAA,GACtB+X,GAAmB/X,EAAAA,GACnBgY,GAAqBhY,EAAAA,GACrBiY,GAAwBjY,EAAAA,GACxBkY,GAAoBlY,EAAAA,GACpBmY,GAAsBnY,EACtBoY,GAAAA,GAAuBpY,EACvBqY,GAAAA,GAAyBrY,EACzBsY,GAAAA,GAAoBtY,EACpBuY,GAAAA,GAAiBvY,EACjBwY,GAAAA,GAAuBxY,EACvByY,GAAAA,GAAwBzY,EAgBtB0Y,CAAAA,GAAAA,KAAe,CACnBnhB,IACAohB,IACAlE,QAC8B;AAAA,EAC9BU,QAAQ5d;AAAAA,EACR0I,OAAO0Y,GAAUC;AAAAA,EACjB7d,SAAS4d,GAAUjK;AAAAA,EACnBjK,aAAakU,GAAUE;AAAAA,EACvBpE,YAAAA;AAGI6D,IAAAA,KACJtY,CAAAA,OAC6B0Y,GDjED,ICiE8B1Y,GAAO8Y,UAE7DjB,KACJ7X,CAAAA,OAEA0Y,GD/E+B,IC+EC1Y,GAAO+Y,SAEnCjB,GAAAA,KACJ9X,CAAAA,OAEA0Y,GDnF+B,ICmFC1Y,GAAOgZ,SAAAA,GAEnCjB,KACJ/X,CAAAA,OAC6B0Y,GDtFD,ICsF8B1Y,GAAOiZ,MAAAA,GAE7DjB,KACJhY,CAAAA,OAEA0Y,GD1F8B,IC0FC1Y,GAAOkZ,UAvCS;AAAA,EAC/C7Y,QAAQ;AAAA,EACRC,QAAQ;AAAA,EACRC,MAAM;AAsCF0X,CAAAA,GAAAA,KACJjY,CAAAA,OAEA0Y,GD9FiC,IC8FC1Y,GAAOmZ,aA5CM,EAC/C9Y,QAAQ,QACRC,QAAQ,QACRC,MAAM,QA2CF2X,CAAAA,GAAAA,KACJlY,CAAAA,OAEA0Y,GDlG6B,ICkGC1Y,GAAOoZ,SAvDyB,EAC9D/Y,QAAQ,QACRC,QAAQ,SACRC,MAAM,SAAA,CAAA,GAsDF4X,KACJnY,CAAAA,OAEA0Y,GDtG+B,ICsGC1Y,GAAOqZ,WA5DuB;AAAA,EAC9DhZ,QAAQ;AAAA,EACRC,QAAQ;AAAA,EACRC,MAAM;AAAA,CAAA,GA2DF6X,KACJpY,CAAAA,OAEA0Y,GD1GgC,IC0GC1Y,GAAOsZ,YAjEsB,EAC9DjZ,QAAQ,QACRC,QAAQ,SACRC,MAAM,SAgEF8X,CAAAA,GAAAA,KACJrY,CAAAA,OAEA0Y,GD9GkC,ICgHhC1Y,GAAOuZ,cAxEqD;AAAA,EAC9DlZ,QAAQ;AAAA,EACRC,QAAQ;AAAA,EACRC,MAAM;AAyEFgY,CAAAA,GAAAA,KACJvY,CAAAA,OAEA0Y,GDrHyB,ICqHC1Y,GAAOwZ,MA/E6B,EAC9DnZ,QAAQ,QACRC,QAAQ,SACRC,MAAM,SA8EFiY,CAAAA,GAAAA,KACJxY,CAAAA,OAEA0Y,GDzHgC,ICyHC1Y,GAAOyZ,YAAY,EAClDpZ,QAAQ,QACRC,QAAQ,QACRC,MAAM,QAAA,CAAA,GAGJkY,KACJzY,CAAAA,OAEA0Y,GDjIiC,ICiIC1Y,GAAOc,aAAa;AAAA,EACpDT,QAAQ;AAAA,EACRC,QAAQ;AAAA,EACRC,MAAM;AAAA,CAAA,GC5IJmZ,KAAe,oBACfC,KAAiB,wBACjBC,KAAkB,sBAClBxL,KAAc,UAEPyL,KAAwB,EACnC1Z,OAAO,QACPa,SAAS,EACPoY,SAAS;AAAA,EACPP,MAAM;AAAA,EACND,YAAY;AAAA,EACZlK,QAAQkL;AAEVP,GAAAA,WAAW,EACTR,MAAM,YACND,YAAY,SACZlK,QAAQkL,MAEVX,QAAQ,EACNJ,MAAM,qBACND,YAAY,QACZlK,QAAQiL,GAAAA,GAEVH,MAAM;AAAA,EACJX,MAAM;AAAA,EACND,YAAY;AAAA,EACZlK,QA3Bc;AAAA,GA6BhB+K,YAAY,EACVZ,MAAM,YACND,YAAY,SACZlK,QAAQN,GAAAA,GAEV2K,WAAW;AAAA,EACTF,MAAM;AAAA,EACND,YAAY;AAAA,EACZlK,QAAQiL;GAEVX,WAAW;AAAA,EACTH,MAAM;AAAA,EACND,YAAY;AAAA,EACZlK,QAAQiL;AAEVL,GAAAA,YAAY,EACVT,MAAM,WACND,YAAY,QACZlK,QAAQN,MAEVmL,cAAc;AAAA,EACZV,MAAM;AAAA,EACND,YAAY;AAAA,EACZlK,QAAQN;GAEV+K,aAAa,EACXN,MAAM,mBACND,YAAY,UACZlK,QAAQgL,GAAAA,GAEVZ,SAAS,EACPD,MAAM,QACND,YAAY,QACZlK,QAAQN,GAAAA,GAEV8K,UAAU;AAAA,EACRL,MAAM;AAAA,EACND,YAAY;AAAA,EACZlK,QAAQgL;AAEV5Y,GAAAA,aAAa,EACX+X,MAAM,gBACND,YAAY,WACZlK,QAAQN,GC3ED0L,EAAAA,EAAAA,GAAAA,KAAwB,GCOxBC,KAAuB,CAClCC,IACAC,IACAjc,OAAAA;AAEM,QAAA4C,KAAO5C,GAAMgY,KAAMpV,CAAAA,OAASA,GAAKzT,OAAO8sB,GAAOjV,MAC/C7W,GAAAA,KAAeyS,KAAOA,GAAKzS,OAAO;AACxC,SAAO6rB,GAAajf,QACjB0X,WAXiB,YAWSwH,GAAOC,OAAO/c,SAAAA,CAAAA,EACxCsV,WAXiB,YAWSwH,GAAOE,OAAOhd,YACxCsV,WAde,UAcStkB,ECdhBisB;AAAAA,GAAAA,KAAsB,EACjCja,OAAO,QACPa,SAAS,EACPmB,YAAY,MAAA,EAAA,GCHHkY,KAAuB;AAAA,EAClCla,OAAO;AAAA,EACPa,SAAS,EACPoB,uBAAuB,YACvBC,uBAAuB,YACvBC,QAAQ,QACRC,QAAQ;GCNC+X,KAA6B,EACxCna,OAAO,IACPa,SAAS;AAAA,EACPuC,OAAO;AAAA,EACPC,OAAO;AAAA,EACPC,aAAa;ACLJ8W,EAAAA,GAAAA,KAAe,CAAC3Z,KAA2B,QAAmB;AAAA,EACzE6V,aAAa7V,GAAK6V,eAAe;AAAA,EACjCtpB,IAAIyT,GAAKzT,MAAM;AAAA,EACfgB,MAAMyS,GAAKzS,QAAQ;AAAA,EACnBqW,WAAW5D,GAAK4D,aAAa;AAAA,EAC7BC,aAAa7D,GAAK6D,eAAe;AAAA,EACjC+V,SAAS5Z,GAAK4Z,WAAW;AAAA,EAEzB9f,MAAMkG,GAAKlG,QAAQ;AAAA,EACnByH,YAAYvB,GAAKuB,cAAAA;AAAAA,EACjBoB,OAAO3C,GAAK2C,SAAS;AAAA,EACrBkX,UAAU7Z,GAAK6Z,YAAY;AAAA,EAC3BjX,OAAO5C,GAAK4C,SAAS;AAAA,EACrBC,aAAa7C,GAAK6C,eAAe;AAAA,EACjCiX,SAAS9Z,GAAK8Z,WAAW;AAAA,EACzBC,QAAQ/Z,GAAK+Z,UAAU;AAAA,EACvBC,SAASha,GAAKga,WAAW;AAAA,EACzBhX,QAAQD,GAAW/C,GAAKgD,UAAU,CAAA,CAAA;AAAA,EAClCiX,SAAS,CACTjW;AAAAA,EAAAA,OAAO;ACnBIkW,IAAAA,KAAgB,CAAC5a,KAA6B,QAAoB;AAAA,EAC7E6a,SAAS7a,GAAM6a,WAAW;AAAA,EAC1BC,kBAAkB9a,GAAM8a,oBAAoB;AAAA,EAC5CC,kBAAkB/a,GAAM+a,oBAAoB;AAAA,EAC5CxE,aAAavW,GAAMuW,eAAe;AAAA,EAClC7S,QAAQD,GAAWzD,GAAM0D,UAAU,CAAA,CACnCa;AAAAA,EAAAA,aAAavE,GAAMuE,eAAe;AAAA,EAClCoW,SAAS,CACTD;AAAAA,EAAAA,SAAS1a,GAAM0a,WAAW;AAAA,EAC1BpW,WAAWtE,GAAMsE,aAAa;AAAA,EAC9BrX,IAAI+S,GAAM/S,MAAM;AAAA,EAChB0Y,UAAU3F,GAAM2F,YAAY;AAAA,EAC5BC,UAAU5F,GAAM4F,YAAY;AAAA,EAC5BG,aAAa/F,GAAM+F,eAAe;AAAA,EAClC9X,MAAM+R,GAAM/R,QAAQ;AAAA,EACpBuM,MAAMwF,GAAMxF,QAAQ;AAAA,EACpB4H,QAAQpC,GAAMoC,UAAU;AAAA,EACxBmY,UAAUva,GAAMua,YAAY;AAAA,EAC5BC,SAASxa,GAAMwa,WAAW;AAAA,EAC1BnX,OAAOrD,GAAMqD,SAAS;AAAA,EACtBC,OAAOtD,GAAMsD,SAAS;AAAA,EACtBC,aAAavD,GAAMuD,eAAe;AAAA,EAClClB,QAAQrC,GAAMqC,UAAU;AAAA,EACxBoY,QAAQza,GAAMya,UAAU;AAAA,ICxBbO,KAAgB,EAC3Bvd,MAAM,SAAA,GAGKwd,KAAiB,EAC5Bxd,MAAM,UAGKyd,GAAAA,KAA0B,EACrCzd,MAAM,WACNG,SAAS,ECHLud,GAAAA,KAAgB;AAAA,EACpB1d,MAAM;AAAA,EACNE,YAAY,EACVF,MAAM,EAAEA,MAAM,aACdkG,WAAWuX,IACXtX,SAASoX,IACTnX,UAAUoX,IACVnX,UAAU,EAAErG,MAAM,UAEpBC,EAAAA;AAAAA,EAAAA,UAAU,CAAC,QAAQ,aAAa,WAAW,YAAY,UAAA;AAAA,EACvD0d,sBAAsB;AAAA,GAGlBC,KAAgB,EACpB5d,MAAM,UACNE,YAAY,EACVtG,MAAM4jB,IACNnW,QAAQoW,IACRlB,QAAQiB,IACRhB,QAAQgB,GAEVvd,GAAAA,UAAU,CAAC,QAAQ,UAAU,UAAU,QAAA,GACvC0d,sBAAsB,MAAA,GAGlBE,KAAoB;AAAA,EACxB7d,MAAM;AAAA,EACNC,UAAU,CACR,QACA,MACA,eACA,aACA,YACA,YACA,eACA,UACA,oBACA,oBACA,WACA,UACA,eACA,WACA,YACA,WACA,SACA,SACA,eACA,UACA,QACA,SAAA;AAAA,EAGFC,YAAY;AAAA,IACV1P,MAAM+sB;AAAAA,IACN/tB,IAAIiuB;AAAAA,IACJ3W,aAAayW;AAAAA,IACb1W,WAAW4W;AAAAA,IACXvV,UAAUqV;AAAAA,IACVpV,UAAUoV;AAAAA,IAEVjV,aAAamV;AAAAA,IACb9Y,QAAQ6Y;AAAAA,IACRH,kBAAkBI;AAAAA,IAClBH,kBAAkBG;AAAAA,IAClBL,SAASK;AAAAA,IACT7Y,QAAQ4Y;AAAAA,IAER1E,aAAa2E;AAAAA,IACbR,SAASQ;AAAAA,IACTX,UAAU,EAAE9c,MAAM,UAAA;AAAA,IAClB+c,SAASU;AAAAA,IACT7X,OAAO4X;AAAAA,IACP3X,OAAO2X;AAAAA,IACP1X,aAAa0X;AAAAA,IACbR,QAAQQ;AAAAA,IAERzgB,MAAMwgB;AAAAA,IAENL,SAAS,EACPld,MAAM,SACNK,OAAOud,GAAAA;AAAAA,IAET3X,QAAQyX;AAAAA,EAAAA;AAAAA,EAGVC,sBAAsB;AAAA,GAGlBG,KAAmB;AAAA,EACvB9d,MAAM;AAAA,EACNC,UAAU,CACR,QACA,MACA,eACA,aACA,QACA,eACA,WACA,YACA,WACA,SACA,SACA,eACA,UACA,cACA,SACA,SAAA;AAAA,EAGFC,YAAY,EACV1P,MAAM+sB,IACN/tB,IAAIiuB,IACJ3W,aAAayW,IACb1W,WAAW4W,IACX1gB,MAAMwgB,IACNzE,aAAa2E,IACbR,SAASO,IACTV,UAAUU,IACVT,SAASS,IACT5X,OAAO4X,IACP3X,OAAO2X,IACP1X,aAAa0X,IACbR,QAAQQ,IACRhZ,YAAY;AAAA,IAAExE,MAAM;AAAA,EACpBiH,GAAAA,OAAOwW,IACPZ,SAASY,IACTP,SAAS,EACPld,MAAM,SACNK,OAAOud,GAET3X,GAAAA,QAAQyX;GCzHN/c,KAAM,IAAIC,EAAI,EAClBC,aAEIoC,CAAAA,GAAAA,KAAOtC,GAAII,QAAQ+c,KAEZC,KAAchtB,CAAAA,OAClBkS,GAAKlS,EAAAA,GAGRwR,KAAQ5B,GAAII,QAAQ8c,EACbG,GAAAA,KAAejtB,CAAAA,OACnBwR,GAAMxR,EAAAA,GAGTR,KAAQoQ,GAAII,QC7BQ;AAAA,EACxBf,MAAM;AAAA,EACNC,UAAU,CACR,QACA,MACA,YACA,eACA,iBACA,kBACA,YACA,aACA,WACA,gBACA,UAEFC;AAAAA,EAAAA,YAAY;AAAA,IACV1P,MAAM,EAAEwP,MAAM,SAAA;AAAA,IACdsE,aAAa,EAAEtE,MAAM,SACrB9C;AAAAA,IAAAA,eAAe,EAAE8C,MAAM,SAAA;AAAA,IACvB/C,gBAAgB,EAAE+C,MAAM,UAAA;AAAA,IACxBuG,UAAU,EAAEvG,MAAM,SAClBwG;AAAAA,IAAAA,WAAW,EAAExG,MAAM,WAAWG,SAAS,GAAG8d,SAAS,EAAA;AAAA,IACnDzuB,IAAI;AAAA,MAAEwQ,MAAM;AAAA,MAAWG,SAAS;AAAA,IAAA;AAAA,IAChCuD,UAAU,EAAE1D,MAAM,SAElB2D;AAAAA,IAAAA,SAAS,EAAE3D,MAAM,SACjB6D;AAAAA,IAAAA,cAAc,EAAE7D,MAAM,WAAWG,SAAS,EAAA;AAAA,IAC1C2D,UAAU,EAAE9D,MAAM,UAAA;AAAA,IAClB4D,SAAS,EAAE5D,MAAM,WAAWG,SAAS,EAAA;AAAA,IACrCuG,QAAQ,EAAE1G,MAAM,SAASK,OAAO,EAAEL,MAAM,UACxCjD,EAAAA;AAAAA,IAAAA,MAAM,EAAEiD,MAAM,SACdyG;AAAAA,IAAAA,QAAQ,EACNzG,MAAM,SACNK,OAAO,EACLL,MAAM,UACNE,YAAY,EACVtG,MAAM,EAAEoG,MAAM,UACdqH,GAAAA,QAAQ,EAAErH,MAAM,aAChB2S,OAAO;AAAA,MAAE3S,MAAM;AAAA,IAEjBC,EAAAA,GAAAA,UAAU,CAAC,QAAQ,UAAU,ODVxBie,EAAAA,EAAAA;AAAAA,EAAAA;AAAAA,CAAAA,GAAAA,KAAentB,CAAAA,OACnBR,GAAMQ,EAGT+R,GAAAA,KAAQnC,GAAII,QEhCS;AAAA,EACzBf,MAAM;AAAA,EACNC,UAAU,CACR,QACA,MACA,eACA,aACA,SACA,UACA,UACA,QACA,WACA,SAAA;AAAA,EAGFC,YAAY;AAAA,IACV1P,MAAM,EAAEwP,MAAM,SACdxQ;AAAAA,IAAAA,IAAI,EAAEwQ,MAAM,WAAWG,SAAS,EAAA;AAAA,IAChC2G,aAAa;AAAA,MAAE9G,MAAM;AAAA,IAAA;AAAA,IACrB6G,WAAW,EAAE7G,MAAM,WAAWG,SAAS,EAAA;AAAA,IACvC8G,OAAO,EAAEjH,MAAM,WAAWG,SAAS,EAAA;AAAA,IACnCpD,MAAM,EAAEiD,MAAM,SAAA;AAAA,IACdgH,SAAS,EAAEhH,MAAM,WAAWG,SAAS,EAAA;AAAA,IACrC4G,SAAS,EAAE/G,MAAM,WAAWG,SAAS,EAAA;AAAA,IAErC4D,QAAQ;AAAA,MACN/D,MAAM;AAAA,MACNK,OAAO,CACL,EAAEL,MAAM,UAAA,GACR,EAAEA,MAAM,UACR,GAAA,EAAEA,MAAM,UAAA,GACR,EAAEA,MAAM,UACR,GAAA,EAAEA,MAAM,UAAA,GACR,EAAEA,MAAM,UACR,GAAA,EAAEA,MAAM,UAAA,GACR,EAAEA,MAAM;MAEVme,UAAU;AAAA,MACVC,UAAU;AAAA,IAAA;AAAA,IAGZ3X,QAAQ,EACNzG,MAAM,SACNK,OAAO,EACLL,MAAM,UACNE,YAAY,EACVtG,MAAM,EAAEoG,MAAM,UACdqH,GAAAA,QAAQ,EAAErH,MAAM,UAChB2S,GAAAA,OAAO,EAAE3S,MAAM,UAEjBC,EAAAA,GAAAA,UAAU,CAAC,QAAQ,UAAU,OAAA,EAAA,EAAA;AAAA,EAAA;IFjBxBoe,KAAettB,CAAAA,OACnB+R,GAAM/R,EAGTmS,GAAAA,KAASvC,GAAII,QGvCQ,EACzBf,MAAM,UACNC,UAAU,CACR,QACA,MACA,eACA,aACA,SACA,UACA,UACA,QACA,WACA,aAAA,GAGFC,YAAY,EACV1P,MAAM;AAAA,EAAEwP,MAAM;AAAA,GACdxQ,IAAI,EAAEwQ,MAAM,WAAWG,SAAS,EAAA,GAChC2G,aAAa,EAAE9G,MAAM,SAAA,GACrB6G,WAAW,EAAE7G,MAAM,WAAWG,SAAS,EAAA,GACvC8G,OAAO,EAAEjH,MAAM,WAAWG,SAAS,EAAA,GACnCpD,MAAM,EAAEiD,MAAM,SAAA,GACdgH,SAAS;AAAA,EAAEhH,MAAM;AAAA,EAAWG,SAAS;AACrC4Y,GAAAA,SAAS,EAAE/Y,MAAM,WAAWG,SAAS,EACrC2Y,GAAAA,aAAa,EAAE9Y,MAAM,WAAWG,SAAS,EACzC4D,GAAAA,QAAQ,EACN/D,MAAM,SACNK,OAAO,CACL,EAAEL,MAAM,UAAA,GACR,EAAEA,MAAM,UACR,GAAA,EAAEA,MAAM,UACR,GAAA;AAAA,EAAEA,MAAM;AAAA,GACR,EAAEA,MAAM,UACR,GAAA,EAAEA,MAAM,UAAA,GACR,EAAEA,MAAM,UACR,GAAA,EAAEA,MAAM,UAAA,CAAA,GAEVme,UAAU,GACVC,UAAU,EAAA,GAEZnY,QAAQ;AAAA,EACNjG,MAAM;AAAA,EACNE,YAAY;AAAA,IACVF,MAAM,EAAEA,MAAM,WAAWG,SAAS,EAAA;AAAA,IAClC+F,WAAW,EAAElG,MAAM,WAAWG,SAAS;IACvCgG,SAAS,EAAEnG,MAAM,SACjBoG;AAAAA,IAAAA,UAAU,EAAEpG,MAAM,WAAWG,SAAS,GAAG8d,SAAS;IAClD5X,UAAU,EAAErG,MAAM,WAAWse,SAAS,MAAA;AAAA,EAAA;AAAA,EAExCre,UAAU,CAAC,QAAQ,aAAa,WAAW,YAAY;GAEzDwG,QAAQ,EACNzG,MAAM,SACNK,OAAO,EACLL,MAAM,UACNE,YAAY,EACVtG,MAAM,EAAEoG,MAAM,aACdqH,QAAQ,EAAErH,MAAM,UAAA,GAChB2S,OAAO;AAAA,EAAE3S,MAAM;AAEjBC,EAAAA,GAAAA,UAAU,CAAC,QAAQ,UAAU,OHpBxBse,EAAAA,EAAAA,EAAAA,EAAAA,CAAAA,GAAAA,KAAgBxtB,CAAAA,OACpBmS,GAAOnS,EAGViS,GAAAA,KAAQrC,GAAII,QI1CQ;AAAA,EACxBf,MAAM;AAAA,EACNC,UAAU,CACR,QACA,MACA,eACA,cACA,OACA,QACA,QACA,UACA,aACA,UACA;EAGFC,YAAY;AAAA,IACV1P,MAAM,EAAEwP,MAAM;IACdxQ,IAAI,EAAEwQ,MAAM,WAAWG,SAAS,EAAA;AAAA,IAChCkE,YAAY,EAAErE,MAAM,WAAWG,SAAS,EACxCmE;AAAAA,IAAAA,aAAa,EAAEtE,MAAM,SACrB+H;AAAAA,IAAAA,KAAK,EAAE/H,MAAM,WAAWG,SAAS,EAAA;AAAA,IACjCoE,MAAM,EAAEvE,MAAM,WAAWG,SAAS,EAAA;AAAA,IAClCpD,MAAM,EAAEiD,MAAM,SAAA;AAAA,IAEd+D,QAAQ,EACN/D,MAAM,SACNK,OAAO,CACL;AAAA,MAAEL,MAAM;AAAA,IAAA,GACR,EAAEA,MAAM,UACR,GAAA,EAAEA,MAAM,UAAA,GACR,EAAEA,MAAM,UACR,GAAA,EAAEA,MAAM,UAAA,GACR,EAAEA,MAAM,UAAA,GACR,EAAEA,MAAM,UACR,GAAA,EAAEA,MAAM,UAAA,CAAA,GAEVme,UAAU,GACVC,UAAU,EAAA;AAAA,IAEZpW,SAAS;AAAA,MACPhI,MAAM;AAAA,MAENK,OAAO,EACLL,MAAM,UACNC,UAAU,CACR,mBACA,mBACA,iBACA,WACA,WAEFC,YAAY,EACVuH,iBAAiB,EAAEzH,MAAM,aACzB0H,iBAAiB;AAAA,QAAE1H,MAAM;AAAA,MAAA,GACzB2H,eAAe,EAAE3H,MAAM,UAAA,GACvB6H,SAAS,EAAE7H,MAAM,UACjB4H,GAAAA,QAAQ,EAAE5H,MAAM;;IAKtByG,QAAQ,EACNzG,MAAM,SACNK,OAAO,EACLL,MAAM,UACNE,YAAY;AAAA,MACVtG,MAAM,EAAEoG,MAAM,UAAA;AAAA,MACdqH,QAAQ,EAAErH,MAAM,UAAA;AAAA,MAChB2S,OAAO,EAAE3S,MAAM,UAAA;AAAA,IAAA,GAEjBC,UAAU,CAAC,QAAQ,UAAU,OAIjCmE,EAAAA,EAAAA;AAAAA,IAAAA,WAAW,EACTpE,MAAM,SACNK,OAAO,EACLL,MAAM,UACNE,YAAY,EACV0C,MAAM,EAAE5C,MAAM,UAAA,GACdqH,QAAQ;AAAA,MAAErH,MAAM;AAAA,IAAA,GAChBsH,aAAa,EAAEtH,MAAM,WAAWG,SAAS,EACzCqe,GAAAA,MAAM,EAAExe,MAAM,SAEhBC,EAAAA,GAAAA,UAAU,CAAC,QAAQ,UAAU,aJ1CxBwe,EAAAA,EAAAA;AAAAA,EAAAA;AAAAA,CAAAA,GAAAA,KAAe1tB,CAAAA,OACnBiS,GAAMjS,KAGT8R,KAAQlC,GAAII,QKjDQ;AAAA,EACxBf,MAAM;AAAA,EACNC,UAAU,CACR,QACA,MACA,aACA,YACA,YACA,YACA,YACA,eACA,YACA,UACA,WACA,qBACA,kBACA,mBACA,uBACA,qBACA,YACA,YACA,kBACA,iBACA,MAAA;AAAA,EAGFC,YAAY;AAAA,IACV1P,MAAM,EAAEwP,MAAM,SAAA;AAAA,IACdxQ,IAAI,EAAEwQ,MAAM,WAAWG,SAAS,EAAA;AAAA,IAChC0G,WAAW,EAAE7G,MAAM,WAAWG,SAAS,EAAA;AAAA,IAEvC+H,UAAU,EAAElI,MAAM,SAAA;AAAA,IAClBmI,UAAU,EAAEnI,MAAM,SAAA;AAAA,IAClBoI,UAAU,EAAEpI,MAAM,SAAA;AAAA,IAClBqI,UAAU,EAAErI,MAAM,SAElB6E;AAAAA,IAAAA,aAAa,EAAE7E,MAAM,UAAA;AAAA,IACrB8E,UAAU,EAAE9E,MAAM,UAAA;AAAA,IAClB+E,QAAQ,EAAE/E,MAAM,UAChBgF;AAAAA,IAAAA,SAAS,EAAEhF,MAAM;IAEjBiF,mBAAmB,EAAEjF,MAAM,UAAA;AAAA,IAC3BsF,gBAAgB;AAAA,MAAEtF,MAAM;AAAA;IAExBwF,iBAAiB,EAAExF,MAAM,UAAA;AAAA,IACzBkF,qBAAqB,EAAElF,MAAM,UAE7BsI;AAAAA,IAAAA,aAAa,EAAEtI,MAAM,UAAA;AAAA,IACrBuI,iBAAiB,EAAEvI,MAAM;IACzBmF,mBAAmB;AAAA,MAAEnF,MAAM;AAAA,IAAA;AAAA,IAE3BoF,UAAU,EAAEpF,MAAM,UAAA;AAAA,IAClBqF,UAAU,EAAErF,MAAM,UAElBuF;AAAAA,IAAAA,gBAAgB,EAAEvF,MAAM;IACxByF,eAAe,EAAEzF,MAAM,UAAA;AAAA,IACvBjD,MAAM,EAAEiD,MAAM,SAAA;AAAA,IAEdyG,QAAQ,EACNzG,MAAM,SACNK,OAAO;AAAA,MACLL,MAAM;AAAA,MACNE,YAAY,EACVtG,MAAM,EAAEoG,MAAM,UACdqH,GAAAA,QAAQ,EAAErH,MAAM,UAChB2S,GAAAA,OAAO,EAAE3S,MAAM,UAEjBC,EAAAA;AAAAA,MAAAA,UAAU,CAAC,QAAQ,UAAU,OAAA;AAAA,IAAA,EAAA;AAAA,EAAA;AAAA,CAAA,GLjBxBye,KAAe3tB,CAAAA,OACnB8R,GAAM9R,EAAAA,GAGT4tB,KAAShe,GAAII,QMtDO;AAAA,EACxBf,MAAM;AAAA,EACNC,UAAU,CACR,QACA,MACA,QACA,aACA,UACA,aACA,QAGFC;AAAAA,EAAAA,YAAY,EACV1P,MAAM,EAAEwP,MAAM,YACdxQ,IAAI,EAAEwQ,MAAM,WAAWG,SAAS,EAAA,GAChCpD,MAAM,EAAEiD,MAAM,SAAA,GAEdiE,WAAW;AAAA,IACTjE,MAAM;AAAA,IACNK,OAAO,EAAEL,MAAM,UAEjB+D;AAAAA,EAAAA,GAAAA,QAAQ,EACN/D,MAAM,SACNK,OAAO,CACL,EAAEL,MAAM,UAAA,GACR,EAAEA,MAAM,UACR,GAAA,EAAEA,MAAM,UAAA,GACR,EAAEA,MAAM,UACR,GAAA,EAAEA,MAAM,UAAA,GACR,EAAEA,MAAM,UACR,GAAA,EAAEA,MAAM,UACR,GAAA;AAAA,IAAEA,MAAM;AAAA,EAAA,CAAA,GAEVme,UAAU,GACVC,UAAU,EAAA,GAEZpa,WAAW,EACThE,MAAM,SACNK,OAAO;AAAA,IACLL,MAAM;AAAA,IACNE,YAAY,EACV0e,OAAO,EAAE5e,MAAM,UAAA,GACf6H,SAAS,EAAE7H,MAAM,UAAA,GACjBjD,MAAM,EAAEiD,MAAM,SAAA,EAAA;AAAA,IAEhBC,UAAU,CAAC,SAAS,SAAA;AAAA,IACpB0d,sBAAsB;AAAA,EAAA,EAAA,GAG1BlX,QAAQ,EACNzG,MAAM,SACNK,OAAO;AAAA,IACLL,MAAM;AAAA,IACNE,YAAY,EACVtG,MAAM,EAAEoG,MAAM,UAAA,GACdqH,QAAQ,EAAErH,MAAM,UAAA,GAChB2S,OAAO,EAAE3S,MAAM,UAAA,EAAA;AAAA,IAEjBC,UAAU,CAAC,QAAQ,UAAU,OAC7B0d;AAAAA,IAAAA,sBAAAA;AAAAA;EAKNA,sBAAsB;ANTXkB,CAAAA,GAAAA,KAAe9tB,CAAAA,OACnB4tB,GAAO5tB,EAAAA,GOzDH+tB,KAAmB,CAAC9L,IAAaL,OACrC,IAAIK,EAAOL,IAAAA,EAAAA,KAGPoM,KAAY,MAAM,qCAElBC,KAAiB,CAC5BjuB,IACAkuB,OACaC,GAAWnuB,GAAKgM,MAAM,CAACiW,IAAKL,OAAUsM,GAAGjM,IAAKL,IAAO5hB,EAAAA,CAAAA,GAEvDouB,KAAYpiB,CAAAA,OAChBmiB,GAAWniB,IAAM,CAACiW,IAAKL,OAAU,CAACK,IAAKL,EAM1CuM,CAAAA,GAAAA,KAAa,CACjBniB,IACAkiB,OAAAA;AAEA,QAAMG,KAlBuB;AAmB7B,SAAOpvB,MAAMC,KAAK8M,GAAK7M,SAASkvB,EAAAA,GAASjvB,CAAAA,OAAU8uB,GAAG9uB,GAAM,CAAIA,GAAAA,GAAM,CAS3DkvB,CAAAA,CAAAA;AAAAA,GAAAA,KAAc,CACzBtiB,IACAuiB,OAAAA;AAEI,MAAAviB,GAAKuY,UAAU,IACX,OAAA,IAAIiK,MAAM;AAGlB,SAAOxiB,GAAK+X,WApCiB,qCAsC3B,CAAC0K,IAAYxM,IAAaL;AAClB,UAAA8M,KAAUH,GAAkBtM,IAAKL,EAAAA;AACnC,QAAA8M,GAAQnK,UAAU,IACd,OAAA,IAAIiK,MAAM,2CAEX;AAAA,WAAAT,GAAiB9L,IAAKyM,EAKtBC;AAAAA,EAAAA,CAAAA;AAAAA,GAAAA,KAAe,CAC1B3iB,IACA4iB,OAAAA;AAEA,QAAMP,KApDuB,qCAqDvBjvB,KAAQH,MAAMC,KAAK8M,GAAK7M,SAASkvB,EAAAA,CAAAA,EAAQ/G,KAC5CuH,CAAAA,OAAMA,GAAE,CAAA,MAAOD;AAEX,SAAAxvB,KAAQA,GAAM,CAAA,IAAA;AAGV0vB,GAAAA,KAAe,CAC1B9iB,IACA4iB,IACAG,OAEA;AAAA,QAAMV,KAhEuB;AAkE7B,SAAOriB,GAAKgjB,QAAQX,IAAO,CAACjvB,IAAO6iB,OAC7BA,OAAQ2M,KACHb,GAAiB9L,IAAK8M,EAExB3vB,IAAAA,EAAAA;GC5EE6vB,KAAc,QAEdC,KAAiB,SACjBC,KAAe,OACfC,KAAiB,SACjBC,KAAiB,SACjBC,KAAiB,SACjBC,KAAiB,QACjBC,KAAkB,UAClBC,KAAiB,SACjBC,KAAiB,SACjBC,KAAwB,gBACxBC,KAAiB,SC0CjBC,KAAsBve,CAAAA,OAC1B,CACL+O,GAAY/O,GAAO+O,WACnBC,GAAAA,GAAWhP,GAAOgP,UAClBC,GAAAA,GAAUjP,GAAOiP,SAAAA,GACjBC,GAAYlP,GAAOkP,cAEnBT,GAAazO,GAAOyO,YACpBE,GAAAA,GAAW3O,GAAO2O,UAAAA,GAClB7C,GAAa9L,GAAO8L,YAAAA,GACpBqD,GAAcnP,GAAOmP,aACrBqP,GAAAA,GAAaxe,GAAOoP,WACpBC,GAAAA,GAAYrP,GAAOqP,WACnBC,GAAAA,GAAYtP,GAAOsP,WACnBE,GAAAA,GAAYxP,GAAOwP,WAAAA,GAEnBQ,GAAahQ,GAAOgQ,eACpBC,GAAcjQ,GAAOiQ,gBACrBH,GAAS9P,GAAO8P,WAChBC,GAAU/P,GAAO+P,SAEjBN,GAAAA,GAAgBzP,GAAOyP,eAAAA,GACvBC,GAAe1P,GAAO0P,cAAAA,GACtBC,GAAU3P,GAAO2P,SAAAA,GACjBC,GAAU5P,GAAO4P,SAAAA,GACjBC,GAAS7P,GAAO6P,QAEhBN,GAAAA,GAAWvP,GAAOuP,UAClBX,GAAAA,GAAY5O,GAAO4O,WAAAA,GACnBC,GAAQ7O,GAAO6O,UACfC,GAAa9O,GAAO8O,YAUlBC,CAAAA,GAAAA,KAAe9O,CAAAA,QAAuC;AAAA,EAC1DlF,SAASkF,GAAMyO;AAAAA,EACfzO,OAAOA,GAAME;AAAAA,EACbgV,QnDjGgC;AAAA,EmDkGhCV,YAAYgK,GAGRzP;AAAAA,IAAAA,KAAc/O,CAAAA,QAAuC,EACzDlF,SAASkF,GAAMyO,QACfzO,OAAOA,GAAME,OACbgV,QnDvG+B,ImDwG/BV,YAjB8D,EAC9DpU,QAAQ,QACRC,QAAQ,SACRC,MAAM,SAAA,EAAA,IAiBF0O,KAAahP,CAAAA,QAAuC;AAAA,EACxDlF,SAASkF,GAAMyO;AAAAA,EACfzO,OAAOA,GAAME;AAAAA,EACbgV,QnD7G8B;AAAA,EmD8G9BV,YAAYiK,GAGRxP;AAAAA,IAAAA,KAAejP,CAAAA,QAAuC,EAC1DlF,SAASkF,GAAMyO,QACfzO,OAAOA,GAAME,OACbgV,QnDnHgC,ImDoHhCV,YAAYiK,SAGRjQ,KACJzO,CAAAA,QACiB;AAAA,EACjBjF,SAASiF,GAAO0O;AAAAA,EAChBzO,OAAOD,GAAOG;AAAAA,EACdgV,QnD3HyB;AAAA,EmD4HzBV,YAxC8D,EAC9DpU,QAAQ,QACRC,QAAQ,SACRC,MAAM,SAAA;AAAA,IAwCFoO,KACJ3O,CAAAA,QACiB,EACjBjF,SAASiF,GAAO0O,QAChBzO,OAAOD,GAAOG,OACdgV,QnDnI0B,ImDoI1BV,YAAY,EACVpU,QAAQ,QACRC,QAAQ,SACRC,MAAM,UAIJuL,EAAAA,IAAAA,KACJ9L,CAAAA,QACiB;AAAA,EACjBjF,SAASiF,GAAO0O;AAAAA,EAChBzO,OAAOD,GAAOG;AAAAA,EACdgV,QnD/I0B;AAAA,EmDgJ1BV,YAAY,EACVpU,QAAQ,QACRC,QAAQ,SACRC,MAAM,UAIJ4O;AAAAA,IAAAA,KAAiBlP,CAAAA,QAAuC,EAC5DlF,SAASkF,GAAMyO,QACfzO,OAAOA,GAAME,OACbgV,QnDzJkC,ImD0JlCV,YAAYgK,GAAAA,EAAAA,IAGRD,KAAgBve,CAAAA,QAAuC;AAAA,EAC3DlF,SAASkF,GAAMyO;AAAAA,EACfzO,OAAOA,GAAME;AAAAA,EACbgV,QnD/JgC;AAAA,EmDgKhCV,YAAYiK,GAAAA;AAAAA,IAGRrP,KAAepP,CAAAA,QAAuC,EAC1DlF,SAASkF,GAAMyO,QACfzO,OAAOA,GAAME,OACbgV,QnDrKgC,GAAA,ImDwK5B7F,KAAerP,CAAAA,QAAuC,EAC1DlF,SAASkF,GAAMyO,QACfzO,OAAOA,GAAME,OACbgV,QnD1KgC,GAAA,ImD6K5B3F,KAAevP,CAAAA,QAAuC;AAAA,EAC1DlF,SAASkF,GAAMyO;AAAAA,EACfzO,OAAOA,GAAME;AAAAA,EACbgV,QnD/KgC;AAAA,EmDgLhCV,YAAYkK,GAGR3O;AAAAA,IAAAA,KAAgB/P,CAAAA,QAAuC,EAC3DlF,SAASkF,GAAMyO,QACfzO,OAAOA,GAAME,OACbgV,QnDrLkC,ImDsLlCV,YAAYmK,SAGR3O,KAAiBhQ,CAAAA,QAAuC;AAAA,EAC5DlF,SAASkF,GAAMyO;AAAAA,EACfzO,OAAOA,GAAME;AAAAA,EACbgV,QnD3LmC;AAAA,EmD4LnCV,YAAYmK,GAGR9O;AAAAA,IAAAA,KAAY7P,CAAAA,QAAuC,EACvDlF,SAASkF,GAAMyO,QACfzO,OAAOA,GAAME,OACbgV,QnDjM6B,ImDkM7BV,YAAYkK,GAGR5O,EAAAA,IAAAA,KAAa9P,CAAAA,QAAuC,EACxDlF,SAASkF,GAAMyO,QACfzO,OAAOA,GAAME,OACbgV,QnDvM8B,ImDwM9BV,YAAYkK,GAGRlP,EAAAA,IAAAA,KAAmBxP,CAAAA,QAAuC;AAAA,EAC9DlF,SAASkF,GAAMyO;AAAAA,EACfzO,OAAOA,GAAME;AAAAA,EACbgV,QnD7MqC;AAAA,EmD8MrCV,YAAYoK,GAAAA;AAAAA,IAGRnP,KAAkBzP,CAAAA,QAAuC,EAC7DlF,SAASkF,GAAMyO,QACfzO,OAAOA,GAAME,OACbgV,QnDnNoC,ImDoNpCV,YAAYqK,GAAAA,EAAAA,IAGRnP,KAAa1P,CAAAA,QAAuC;AAAA,EACxDlF,SAASkF,GAAMyO;AAAAA,EACfzO,OAAOA,GAAME;AAAAA,EACbgV,QnDzN8B;AAAA,EmD0N9BV,YAAYsK,GAAAA;AAGRnP,IAAAA,KAAa3P,CAAAA,QAAuC,EACxDlF,SAASkF,GAAMyO,QACfzO,OAAOA,GAAME,OACbgV,QnD/N8B,ImDgO9BV,YAAYsK,GAGRlP,EAAAA,IAAAA,KAAY5P,CAAAA,QAAuC,EACvDlF,SAASkF,GAAMyO,QACfzO,OAAOA,GAAME,OACbgV,QnDrO6B,ImDsO7BV,YAAYsK,GAAAA,EAAAA,IAGRxP,KAActP,CAAAA,QAAuC;AAAA,EACzDlF,SAASkF,GAAMyO;AAAAA,EACfzO,OAAOA,GAAME;AAAAA,EACbgV,QnD3O+B;AmD8O3BvG,IAAAA,KACJ5O,CAAAA,QACiB,EACjBjF,SAASiF,GAAO0O,QAChBzO,OAAOD,GAAOG,OACdgV,QnDlPgC,ImDmPhCV,YAAY,EACVpU,QAAQ,QACRC,QAAQ,SACRC,MAAM,QAIJsO,EAAAA,IAAAA,KACJ5O,CAAAA,QACiB,EACjBlF,SAASkF,GAAMyO,QACfzO,OAAOA,GAAME,OACbgV,QnD9PiC,ImD+PjCV,YAAY;AAAA,EACVpU,QAAQ;AAAA,EACRC,QAAQ;AAAA,EACRC,MAAM;AAAA,EAAA,IAIJuO,KACJ9O,CAAAA,QACiB,EACjBjF,SAASiF,GAAO0O,QAChBzO,OAAOD,GAAOG,OACdgV,QnD1QiC,ImD2QjCV,YAAY,EACVpU,QAAQ,QACRC,QAAQ,SACRC,MAAM,eAIJme,EAAAA,IAAAA,KAAgB,OAA2B;AAAA,EAC/Cre,QAAQ;AAAA,EACRC,QAAQ;AAAA,EACRC,MAAM;AAAA,IAGFoe,KAAgB,OAA2B,EAC/Cte,QAAQ,QACRC,QAAQ,QACRC,MAAM,YAGFke,KAAyB,OAAgC,EAC7Dpe,QAAQ,QACRC,QAAQ,UACRC,MAAM,WAGFqe,IAAAA,KAA2B,OAAkC;AAAA,EACjEve,QAAQ;AAAA,EACRC,QAAQ;AAAA,EACRC,MAAM;AAAA,IAGFse,KAA4B,OAAmC,EACnExe,QAAQ,QACRC,QAAQ,UACRC,MAAM,cAAA,IAGFue,KAA2B,OAAkC,EACjEze,QAAQ,QACRC,QAAQ,UACRC,MAAM,aAGFwe,IAAAA,KAA2B,OAAkC;AAAA,EACjE1e,QAAQ;AAAA,EACRC,QAAQ;AAAA,EACRC,MAAM;AC/UKye,IAAAA,KAAwB;AAAA,EACnC7xB,IAAI;AAAA,EACJgB,MAAM;AAAA,EACNuM,MAAM;AAAA,EACN+J,aAAa;AAAA,EACbD,WAAW;AAAA,EACXiW,UAAU;AAAA,EACV/Y,QAAQ;AAAA,EACRgZ,SAAS;AAAA,EACTnX,OAAO;AAAA,EACPC,OAAO;AAAA,EACPC,aAAa;AAAA,EACbgT,aAAa;AAAA,EACbwI,aAAa;AAAA,EACbrkB,gBAAgB;AAAA,EAChBC,eAAe;AAAA,EACfqkB,YAAY;AAAA,EACZ/a,WAAW;AAAA,EACXD,UAAU;AAAA,EACVib,cAAc;AAAA,EACdvwB,MAAM;AAAA,EACNqX,aAAa;AAAA,EACbmZ,SAAS;AAAA,EACTC,SAAS;AAAA,EACT1c,SAAS;AAAA,EACTF,UAAU;AAAA,EACVD,aAAa;AAAA,EACb8c,UAAU;AAAA,EACVC,OAAO;AAAA,EACPC,cAAc;AAAA,EACdpc,eAAe;AAAA,EACfzF,MAAM;AAAA,EACNoG,UAAU;AAAA,EACV0b,aAAa;AAAA,EACbC,SAAS;AAAA,EACTC,OAAO;AAAA,EACPC,MAAM;AAAA,EACN9e,aAAa;AAAA,EACbqH,QAAQ;AAAA,EACR0X,WAAW;AAAA,EACXzX,aAAa;AAAA,EACbC,gBAAgB;AAAA,EAChBC,aAAa;AAAA,EACbwX,QAAQ;ACpCGC,GAAAA,KAAiB,OACrB,EACLC,KAAK,EACHpc,QAAQF,IACRhV,MAAMqS,IACNqD,QAAQoK,IACRyR,YAAYpG,GAAAA,GAEd5R,QAAQ+W,GAAAA,ICFCkB,KAAqB,CAChCC,KAAqC,QAE9B;AAAA,EACLC,QAAQD,GAASC,UAAU;AAAA,EAC3BC,aAAaF,GAASE,eAAe;AAAA,EACrCC,cAAcH,GAASG,gBAAgB;AAAA,EACvCC,aAAaJ,GAASI,eAAe;AAAA,EACrCC,cAAcL,GAASK,gBAAgB;AAAA,EACvCC,eAAeN,GAASM,iBAAiB;AAAA,EACzCC,aAAaP,GAASO,eAAe;AAAA,EAErCC,oBAAoBR,GAASQ,sBAAsB;AAAA,EACnDC,kBAAkBT,GAASS,oBAAoB;AAAA,EAC/CC,eAAeV,GAASU,iBAAiB;AAAA,EACzCC,UAAUX,GAASW,YAAY;IC9BtBC,KAAiBC,CAAAA,OACN,YAARA,OAAAA,MAAAA,CAAqBC,OAAOC,MAAMF,ECCrCG,GAAAA,KAAsB,CACjCC,KAA4C,QAErC;AAAA,EACLjzB,MAAMizB,GAAgBjzB,QAAQ;AAAA,EAC9BuO,QAAQ0kB,GAAgB1kB,UAAU;AAAA,EAClCD,OAAO2kB,GAAgB3kB,SAAS;AAAA,EAChCD,KAAK4kB,GAAgB5kB,OAAO;ACNnB6kB,IAAAA,KAAkB,CAC7BC,KAAuC,OAEhC,CACLH,GAAoBG,GAAOC,MAAAA,GAC3BJ,GAAoBG,GAAOE,KAC3BL,GAAoBG,GAAOG,MAC3BN,GAAAA,GAAoBG,GAAOI,MAC3BP,GAAAA,GAAoBG,GAAOK,KAAAA,GAC3BR,GAAoBG,GAAOM,IAAAA,GAC3BT,GAAoBG,GAAOO,OAC3BV,GAAoBG,GAAOQ,WAC3BX,GAAAA,GAAoBG,GAAOxB,MAC3BqB,GAAAA,GAAoBG,GAAOS,WAC3BZ,GAAAA,GAAoBG,GAAOU,WAC3Bb,GAAAA,GAAoBG,GAAOW,aAAAA,GAC3Bd,GAAoBG,GAAOY,aAAAA,GAC3Bf,GAAoBG,GAAOa,gBAC3BhB,GAAoBG,GAAOc,WAC3BjB,GAAAA,GAAoBG,GAAOe,aAC3BlB,GAAAA,GAAoBG,GAAOgB,YAAAA,GAC3BnB,GAAoBG,GAAOiB,QAAAA,GAC3BpB,GAAoBG,GAAOkB,cAC3BrB,GAAoBG,GAAOmB,gBAC3BtB,GAAAA,GAAoBG,GAAOoB,cAC3BvB,GAAAA,GAAoBG,GAAOqB,IAAAA,GAC3BxB,GAAoBG,GAAOsB,OAAAA,GAC3BzB,GAAoBG,GAAOuB,QAAAA,CAAAA,GAIlBC,KACXxB,CAAAA,QAEO;AAAA,EACLC,QAAQD,GAAO,CACfE;AAAAA,EAAAA,IAAIF,GAAO,CAAA;AAAA,EACXG,QAAQH,GAAO,CAAA;AAAA,EACfI,QAAQJ,GAAO;EACfK,OAAOL,GAAO,CACdM;AAAAA,EAAAA,MAAMN,GAAO,CACbO;AAAAA,EAAAA,MAAMP,GAAO,CAAA;AAAA,EACbQ,aAAaR,GAAO,CAAA;AAAA,EACpBxB,QAAQwB,GAAO;EACfS,aAAaT,GAAO,CACpBU;AAAAA,EAAAA,aAAaV,GAAO,EACpBW;AAAAA,EAAAA,eAAeX,GAAO,EAAA;AAAA,EACtBY,eAAeZ,GAAO,EAAA;AAAA,EACtBa,eAAeb,GAAO,EACtBc;AAAAA,EAAAA,aAAad,GAAO,EAAA;AAAA,EACpBe,eAAef,GAAO,EACtBgB;AAAAA,EAAAA,cAAchB,GAAO,EAAA;AAAA,EACrBiB,UAAUjB,GAAO,EACjBkB;AAAAA,EAAAA,aAAalB,GAAO,EAAA;AAAA,EACpBmB,kBAAkBnB,GAAO,EACzBoB;AAAAA,EAAAA,gBAAgBpB,GAAO,EAAA;AAAA,EACvBqB,MAAMrB,GAAO,EACbsB;AAAAA,EAAAA,SAAStB,GAAO,EAAA;AAAA,EAChBuB,UAAUvB,GAAO,EAAA;AAAA,ICzDfyB,KAAwB,EAC5BplB,MAAM,UACNE,YAAY,EACV1P,MAAM,EAAEwP,MAAM,SAAA,GACdjB,QAAQ,EAAEiB,MAAM,WAAWG,SAAS,GAAG8d,SAAS,IAChDnf,GAAAA,OAAO,EAAEkB,MAAM,WAAWG,SAAS,GAAG8d,SAAS,IAC/Cpf,GAAAA,KAAK;AAAA,EAAEmB,MAAM;AAAA,EAAWG,SAAAA;AAAAA,EAAe8d,SAAS;AAElDhe,EAAAA,GAAAA,UAAU,CAAC,QAAQ,UAAU,SAAS,KAAA,GACtC0d,4BAGW0H,GAAAA,KAA2B;AAAA,EACtC1H,sBAAAA;AAAAA,EACA3d,MAAM;AAAA,EACNC,UAAU,CACR,aACA,aACA,cACA,YACA,YACA,QAAA;AAAA,EAEFC,YAAY,EACVolB,WAAWF,IACXG,WAAWH,IACXI,YAAYJ,IACZK,UAAUL,IACVM,UAAUN,IACVzB,QAAQ;AAAA,IACN3jB,MAAM;AAAA,IACNK,OAAO+kB;AAAAA,IACPjH,UAAU;AAAA,IACVC,UAAU;AAAA;GClCHuH,KAAiC;AAAA,EAC5C3lB,MAAM;AAAA,EACN2d,sBAAsB;AAAA,EACtB1d,UAAU,CAAC,eAAe,cAC1BC;AAAAA,EAAAA,YAAY,EACV0lB,aAAa;AAAA,IACX5lB,MAAM;AAAA,IACNK,OAAO,EAAEL,MAAM,SAAA;AAAA,IACfme,UAAU;AAAA,IACV0H,aAAAA;AAAAA,EAEFC,GAAAA,cAAc,EAAE9lB,MAAM,SAAA,EAAA;ACZb+lB,GAAAA,KACXr1B,CAAAA,OAEOA,GAAOs1B,aAAa,CAAA,GAGhBC,KACXv1B,CAAAA,OAEOA,GAAOs1B,aAAa,CAAA,GAGhBE,KACXx1B,CAAAA,OAEOA,GAAOs1B,aAAa,IAGhBG,KACXz1B,CAAAA,OAEOA,GAAOs1B,aAAa,CAGhBI,GAAAA,KACX11B,CAAAA,OAEOA,GAAOs1B,aAAa,CAGhBK,GAAAA,KACX31B,CAAAA,OAEOA,GAAOs1B,aAAa,CAAA,GAGhBM,KACX51B,CAAAA,OAEOA,GAAO61B,eAAe,CAAA,GAGlBC,KACX91B,CAAAA,OAEOA,GAAO61B,eAAe,CAGlBE,GAAAA,KACX/1B,CAAAA,OAEOA,GAAO61B,eAAe,CAGlBG,GAAAA,KACXh2B,CAAAA,OAEOA,GAAO61B,eAAe,CAAA,GCzDlBI,KAAqB,CAChC9sB,KAAiC,OAE1B,CACLA,GAAMoJ,QAAQ,MACdpJ,GAAMqJ,UAAU,MAChBrJ,GAAMiJ,SAAAA,MACNjJ,GAAM+sB,WAAW,IAAA,GAGRC,KACXhtB,CAAAA,QAEO;AAAA,EACLoJ,MAAMpJ,GAAM;EACZqJ,QAAQrJ,GAAM;EACdiJ,OAAOjJ,GAAM;EACb+sB,SAAS/sB,GAAM;IChBNitB,KAA0B,CACrCjtB,KAAsC,OAE/B,CACLA,GAAMoJ,QAAAA,MACNpJ,GAAM0I,SAAAA,MACN1I,GAAMmqB,SAAAA,MACNnqB,GAAMktB,UAAAA,MACNltB,GAAMmtB,aAAAA,MACNntB,GAAMoqB,QAAAA,OAIGgD,KACXv3B,CAAAA,QAEO;AAAA,EACLuT,MAAMvT,GAAM;EACZ6S,OAAO7S,GAAM,CACbs0B;AAAAA,EAAAA,OAAOt0B,GAAM,CAAA;AAAA,EACbq3B,QAAQr3B,GAAM,CACds3B;AAAAA,EAAAA,WAAWt3B,GAAM,CAAA;AAAA,EACjBu0B,MAAMv0B,GAAM,CAAA;AAAA,ICpBHw3B,KAAyC,EACpDjnB,UAAU,CAAC,kBAAkB,cAC7B0d,GAAAA,sBAAAA,OACA3d,MAAM,UACNE,YAAY,EACVqmB,gBCRkC;AAAA,EACpCvmB,MAAM;AAAA,EACNoe,UAAU;AAAA,EACVD,UAAU;AAAA,EACV9d,OAAO,EACLL,MAAM,UAAA;AAAA,GDINgmB,cETwC,EAC1ChmB,MAAM,SACNoe,UAAU,GACVD,UAAU,GACV9d,OAAO,EACLL,MAAM,UAAA,EAAA,EAAA,EAAA,GCLGmnB,KAAqB,CAChC9jB,KAA8C,QAEvC;AAAA,EACL+jB,aAAa/jB,GAAQ+jB,eAAe;AAAA,EACpCC,cAAchkB,GAAQgkB,gBAAgB;AAAA,EACtCC,cAAcjkB,GAAQikB;EACtBC,aAAalkB,GAAQkkB,eAAAA;AAAAA,EACrBC,eAAenkB,GAAQmkB;EACvBC,cAAcpkB,GAAQokB,gBAAgB;AAAA,EACtCC,mBAAmBrkB,GAAQqkB,qBAAqB;AAAA,EAChDC,aAAatkB,GAAQskB;EACrBC,cAAcvkB,GAAQukB,gBAAAA;AAAAA,EACtBC,gBAAgBxkB,GAAQwkB;EACxBC,gBAAgBzkB,GAAQykB,kBAAkB;AAAA,EAC1CC,iBAAiB1kB,GAAQ0kB,mBAAmB;AAAA,ICd1CC,KAAiB,EACrBhoB,MAAM,UAAA,GAGKioB,KAAgC;AAAA,EAC3CjoB,MAAM;AAAA,EACN2d,sBAAsB;AAAA,EACtB1d,UAAU,CACR,eACA,gBACA,gBACA,eACA,iBACA,gBACA,qBACA,eACA,gBACA,kBACA,kBACA,iBAAA;AAAA,EAEFC,YAAY;AAAA,IACVknB,aAAaY;AAAAA,IACbX,cAAcW;AAAAA,IACdV,cAAcU;AAAAA,IACdT,aAAaS;AAAAA,IACbR,eAAeQ;AAAAA,IACfP,cAAcO;AAAAA,IACdN,mBAAmBM;AAAAA,IACnBL,aAAaK;AAAAA,IACbJ,cAAcI;AAAAA,IACdH,gBAAgBG;AAAAA,IAChBF,gBAAgBE;AAAAA,IAChBD,iBAAiBC;AAAAA,EAAAA;AAAAA,GClCRE,KAAkB,CAC7BC,KAA2C,QACnB;AAAA,EACxBC,YAAYD,GAAYC,cAAc;AAAA,EACtCC,QAAQF,GAAYE,UAAU;AAAA,EAC9BC,QAAQH,GAAYG,UAAU;AAAA,EAC9BC,mBAAmBJ,GAAYI,oBAC3Bv4B,MAAMC,KAAKk4B,GAAYI,iBAAAA,IACvB,CAAC,CCPMC;AAAAA,IAAAA,KAA6B;AAAA,EACxC7K,sBAAAA;AAAAA,EACA3d,MAAM;AAAA,EACNC,UAAU,CAAC,cAAc,UAAU,UAAU,mBAAA;AAAA,EAC7CC,YAAY,EACVkoB,YAAY,EAAEpoB,MAAM,WAAWG,SAAS,EACxCkoB,GAAAA,QAAQ,EAAEroB,MAAM,WAAWG,SAAS,KACpCmoB,QAAQ,EAAEtoB,MAAM,WAAWG,SAAS,EAAA,GACpCooB,mBAAmB,EACjBvoB,MAAM,SACNK,OAAO;AAAA,IAAEL,MAAM;AAAA,IAAWG,SAAS;AAAA,EAAA,EAAA,EAAA;AAAA,GCV5BsoB,KAA2B,EACtC9K,sBAAAA,OACA3d,MAAM,UACNC,UAAU,CAAC,YAAY,YAAY,aACnCC,YAAY,EACVwoB,UAAU,EAAE1oB,MAAM,WAAWG,SAAS,EAAA,GACtCwoB,UAAU;AAAA,EAAE3oB,MAAM;AAAA,EAAWG,SAAS;AAAA,GACtCyoB,UAAU,EAAE5oB,MAAM,WAAWG,SAAS,EAAA,EAAA,EAAA,GAI7B0oB,KAA6B,EACxClL,sBAAsB,OAEtB3d,MAAM,UACNC,UAAU,CAAC,cAAc,YACzBC,GAAAA,YAAY,EACV4oB,YAAY,EAAE9oB,MAAM,SAAA,GACpB+oB,YAAY;AAAA,EAAE/oB,MAAM;AAAA,EAAA,EAAA,GClBXgpB,KAA2B,EACtChpB,MAAM,UACN2d,sBAAsB,OACtB1d,UAAU,CAAC,UAAU,aAAa,eAClCC,YAAY,EACV+oB,QAAQ,EAAEjpB,MAAM,YAChBkpB,WAAW,EAAElpB,MAAM,SAAA,GACnBmpB,YAAY;AAAA,EACVnpB,MAAM;AAAA,EACNK,OAAO,EAAEL,MAAM;EACfme,UAAU;AAAA,EACVC,UAAU;AAAA,EAAA,EAAA,GCXVgL,KAAgB,CAAC54B,IAAcX,QAAmC;AAAA,EACtEW;EACAhB,IAAIK;AAGOw5B,IAAAA,KACX34B,CAAAA,OAEOA,GAAOC,UAAUhB,IAAIy5B,KAGjBE,KACX54B,CAAAA,OAEOA,GAAO64B,SAAS55B,IAAIy5B,EAAAA,GAGhBI,KACX94B,CAAAA,OAEOA,GAAO+4B,WAAW95B,IAAIy5B,EAGlBM,GAAAA,KACXh5B,CAAAA,OAEOA,GAAOi5B,WAAWh6B,IAAIy5B,KAGlBQ,KACXl5B,CAAAA,OAEOA,GAAOm5B,YAAYl6B,IAAIy5B,EAGnBU,GAAAA,KACXp5B,CAAAA,OAEOA,GAAOq5B,WAAWp6B,IAAIy5B,EAAAA,GAGlBY,KACXt5B,CAAAA,OAEOA,GAAOu5B,SAASt6B,IAAIy5B,EAAAA,GCjBhBc,KAAoB,CAC/Bx5B,IACA4R,OAEO,CACL6nB,GAAwBz5B,IAAQ4R,EAChC8nB,GAAAA,GAAsB15B,IAAQ4R,EAC9B+nB,GAAAA,GAAuB35B,IAAQ4R,EAAAA,GAC/BgoB,GAAsB55B,IAAQ4R,EAC9BioB,GAAAA,GAAsB75B,IAAQ4R,EAC9BkoB,GAAAA,GAAyB95B,IAAQ4R,EAAAA,GACjCmoB,GAAoB/5B,IAAQ4R,EAAAA,CAAAA,GAG1BioB,KAAwB,CAC5B75B,IACA4R,QACqB;AAAA,EACrBjC,OAAOypB,GAAcp5B,EAAAA;AAAAA,EACrB4R,OAAOA,GAAMe,QAAQ0mB;AAAAA,EACrBtnB,QAAQ,EACNC,QAAQ,QACRC,QAAQ,UACRC,MCrDkC,aAAA;AAAA,IDyDhCunB,KAA0B,CAC9Bz5B,IACA4R,QACqB,EACrBjC,OAAOipB,GAAgB54B,EAAAA,GACvB4R,OAAOA,GAAMe,QAAQkmB,UACrB9mB,QAAQ;AAAA,EACNC,QAAQ;AAAA,EACRC,QAAQ;AAAA,EACRC,MCjE+B;ADqE7BwnB,EAAAA,IAAAA,KAAwB,CAC5B15B,IACA4R,QACqB,EACrBjC,OAAOmpB,GAAc94B,EACrB4R,GAAAA,OAAOA,GAAMe,QAAQomB,YACrBhnB,QAAQ,EACNC,QAAQ,QACRC,QAAQ,UACRC,MC7EkC,aDiFhC0nB,EAAAA,IAAAA,KAAwB,CAC5B55B,IACA4R,QACqB;AAAA,EACrBjC,OAAOqpB,GAAch5B,EAAAA;AAAAA,EACrB4R,OAAOA,GAAMe,QAAQsmB;AAAAA,EACrBlnB,QAAQ,EACNC,QAAQ,QACRC,QAAQ,UACRC,MCzFkC,aAAA;AAAA,ID6FhC4nB,KAA2B,CAC/B95B,IACA4R,QACqB,EACrBjC,OAAOgpB,GAAiB34B,EAAAA,GACxB4R,OAAOA,GAAMe,QAAQ1S,WACrB8R,QAAQ;AAAA,EACNC,QAAQ;AAAA,EACRC,QAAQ;AAAA,EACRC,MCrGgC;ADyG9B6nB,EAAAA,IAAAA,KAAsB,CAC1B/5B,IACA4R,QACqB,EACrBjC,OAAO2pB,GAAYt5B,EACnB4R,GAAAA,OAAOA,GAAMe,QAAQ4mB,UACrBxnB,QAAQ,EACNC,QAAQ,QACRC,QAAQ,UACRC,MCjH+B,SAAA,EAAA,IDqH7BynB,KAAyB,CAC7B35B,IACA4R,QACqB;AAAA,EACrBjC,OAAOupB,GAAel5B,EACtB4R;AAAAA,EAAAA,OAAOA,GAAMe,QAAQwmB;AAAAA,EACrBpnB,QAAQ,EACNC,QAAQ,QACRC,QAAQ,UACRC,MC7HmC;ICHjC8nB,KAAoB,EACxB1qB,MAAM,SACNK,OAAO,EAAEL,MAAM,SAAA,EAAA,GAGJ2qB,KAA+B;AAAA,EAC1ChN,sBAAAA;AAAAA,EACA3d,MAAM;AAAA,EACNC,UAAU,CACR,eACA,cACA,YACA,aACA,cACA,YACA,YAEFC;AAAAA,EAAAA,YAAY;AAAA,IACV2pB,aAAaa;AAAAA,IACbf,YAAYe;AAAAA,IACZnB,UAAUmB;AAAAA,IACV/5B,WAAW+5B;AAAAA,IACXjB,YAAYiB;AAAAA,IACZT,UAAUS;AAAAA,IACVX,YAAYW;AAAAA,EAAAA;AAAAA,GCzBHE,KACX75B,CAAAA,QAC0B;AAAA,EAC1Bg5B,YAAYc,GAAiB95B,GAAKg5B,UAAAA;AAAAA,EAClCR,UAAUsB,GAAiB95B,GAAKw4B,QAChCE;AAAAA,EAAAA,YAAYoB,GAAiB95B,GAAK04B,UAClCI;AAAAA,EAAAA,aAAagB,GAAiB95B,GAAK84B,WAAAA;AAAAA,EACnCF,YAAYkB,GAAiB95B,GAAK44B,UAAAA;AAAAA,EAClCh5B,WAAWk6B,GAAiB95B,GAAKJ,SACjCs5B;AAAAA,EAAAA,UAAUY,GAAiB95B,GAAKk5B,QAAAA;AAG5BY,IAAAA,KAAoBn7B,CAAAA,OACjBA,KAAQ,CAAA,GAAIA,EAAS,IAAA,CAAA,GCbjBo7B,KACXC,CAAAA,OAEO,CACLA,GAAMnM,SAAS,SACfmM,GAAMC,UAAU,SAChBD,GAAME,MAAM,MACZF,GAAMG,OAAO,MACbH,GAAMI,MAAM,MACZJ,GAAMK,OAAO,MACbL,GAAMM,MAAM,MACZN,GAAMO,OAAO,MACbP,GAAMQ,cAAc,OACpBR,GAAMhjB,OAAO,KAAA,GAIJyjB,KACX97B,CAAAA,QAEO;AAAA,EACLkvB,OAAOlvB,GAAM,CACbs7B;AAAAA,EAAAA,QAAQt7B,GAAM,CAAA;AAAA,EACdu7B,IAAIv7B,GAAM,CACVw7B;AAAAA,EAAAA,KAAKx7B,GAAM,CAAA;AAAA,EACXy7B,IAAIz7B,GAAM,CACV07B;AAAAA,EAAAA,KAAK17B,GAAM,CAAA;AAAA,EACX27B,IAAI37B,GAAM,CACV47B;AAAAA,EAAAA,KAAK57B,GAAM,CAAA;AAAA,EACX67B,YAAY77B,GAAM,CAClBqY;AAAAA,EAAAA,KAAKrY,GAAM,CAAA;AC7BF+7B,IAAAA,KACX5xB,CAAAA,OAEO6xB,GAA+B7xB,IAAO,KAGlC6xB,KAAiC,CAC5C7xB,IACA8xB,OAEO,CACL9xB,GAAM+xB,SAAS,SACf/xB,GAAMsoB,UAAU,UAChBtoB,GAAMgyB,UAAU,UAChBhyB,GAAMyW,SAAS,SACfzW,GAAMoJ,QAAQ,QACdpJ,GAAM0I,SAAS,SACf1I,GAAMmqB,SAAS,SACfnqB,GAAMktB,UAAU,UAChBltB,GAAMmtB,aAAa,aACnBntB,GAAMoqB,QAAQ,QACdpqB,GAAMiyB,WAAW,YACjBjyB,GAAMwJ,WAAW,WACjBxJ,GAAMqJ,UAAU,UAChBrJ,GAAMiJ,SAAS,SACfjJ,GAAM+sB,WAAW,YACjB/sB,GAAMkyB,UAAU,UAChBlyB,GAAMmyB,YAAY,YAClBnyB,GAAMoyB,SAAS,SACfpyB,GAAMqyB,WAAW,YACjBryB,GAAMsyB,aAAa,YACnBR,IACA9xB,GAAMuyB,WAAW,YACjBvyB,GAAMiqB,UAAU,UAChB6H,IACA9xB,GAAMwyB,OAAO,OACbxyB,GAAMyyB,QAAQ,MAAA,GAILC,KACX1yB,CAAAA,QAEO;AAAA,EACL+xB,OAAO/xB,GAAM,CACbsoB;AAAAA,EAAAA,QAAQtoB,GAAM,CAAA;AAAA,EACdgyB,QAAQhyB,GAAM,CAAA;AAAA,EACdyW,OAAOzW,GAAM;EACboJ,MAAMpJ,GAAM;EACZ0I,OAAO1I,GAAM;EACbmqB,OAAOnqB,GAAM,CACbktB;AAAAA,EAAAA,QAAQltB,GAAM,CACdmtB;AAAAA,EAAAA,WAAWntB,GAAM,CACjBoqB;AAAAA,EAAAA,MAAMpqB,GAAM,CACZiyB;AAAAA,EAAAA,SAASjyB,GAAM,EAAA;AAAA,EACfwJ,SAASxJ,GAAM,EAAA;AAAA,EACfqJ,QAAQrJ,GAAM,EAAA;AAAA,EACdiJ,OAAOjJ,GAAM,EAAA;AAAA,EACb+sB,SAAS/sB,GAAM,EACfkyB;AAAAA,EAAAA,QAAQlyB,GAAM,EAAA;AAAA,EACdmyB,UAAUnyB,GAAM,EAAA;AAAA,EAChBoyB,OAAOpyB,GAAM;EACbqyB,SAASryB,GAAM;EACfsyB,WAAWtyB,GAAM;EACjBuyB,SAASvyB,GAAM,EACfiqB;AAAAA,EAAAA,QAAQjqB,GAAM,EAEdwyB;AAAAA,EAAAA,KAAKxyB,GAAM,EAAA;AAAA,EACXyyB,MAAMzyB,GAAM,EAAA;AAAA,ICrEV2yB,KAAW,CAACC,IAAcC,OACR,YAAA,OAARD,KAAmBA,KAAMC,IAG5BC,KACXF,CAAAA,QAEO;AAAA,EACLG,eAAeJ,GAASC,GAAIG,eAAe,gBAAA;AAAA,EAC3CnI,aAAa+H,GAASC,GAAIhI,aAAa,oBACvCoI;AAAAA,EAAAA,eAAeL,GAASC,GAAII,eAAe,qBAAA;AAAA,EAC3CC,WAAWN,GAASC,GAAIK,WAAW,eAAA;AAAA,EACnCC,WAAWP,GAASC,GAAIM,WAAW,aACnCC;AAAAA,EAAAA,YAAYR,GAASC,GAAIO,YAAY,mBAAA;AAAA,EACrCC,eAAeT,GAASC,GAAIQ,eAAe,qBAAA;AAAA,EAC3CC,YAAYV,GAASC,GAAIS,YAAY,iBACrCC;AAAAA,EAAAA,YAAYX,GAASC,GAAIU,YAAY,cAAA;AAAA,EACrCC,WAAWZ,GAASC,GAAIW,WAAW,YAAA;AAAA,EACnCC,WAAWb,GAASC,GAAIY,WAAW,YACnCC;AAAAA,EAAAA,iBAAiBd,GAASC,GAAIa,iBAAiB,mBAAA;AAAA,EAC/CC,iBAAiBf,GAASC,GAAIc,iBAAiB;EAC/CC,iBAAiBhB,GAASC,GAAIe,iBAAiB,2BAAA;AAAA,EAC/CC,eAAejB,GAASC,GAAIgB,eAAe,eAC3CC;AAAAA,EAAAA,WAAWlB,GAASC,GAAIiB,WAAW,sBACnCC;AAAAA,EAAAA,QAAQnB,GAASC,GAAIkB,QAAQ;EAC7BtJ,aAAamI,GAASC,GAAIpI,aAAa,oBAAA;AAAA,EACvCuJ,YAAYpB,GAASC,GAAImB,YAAY,mBAAA;AAAA,EACrCC,WAAWrB,GAASC,GAAIoB,WAAW,eACnCC;AAAAA,EAAAA,WAAWtB,GAASC,GAAIqB,WAAW,aAAA;AAAA,EACnCC,eAAevB,GAASC,GAAIsB,eAAe,qBAAA;AAAA,EAC3CC,YAAYxB,GAASC,GAAIuB,YAAY,iBACrCC;AAAAA,EAAAA,eAAezB,GAASC,GAAIwB,eAAe,qBAAA;AAAA,EAC3CC,SAAS1B,GAASC,GAAIyB,SAAS,uBAAA;AAAA,EAC/BC,UAAU3B,GAASC,GAAI0B,UAAU,UACjCC;AAAAA,EAAAA,eAAe5B,GAASC,GAAI2B,eAAe,gBAAA;AAAA,EAC3CC,aAAa7B,GAASC,GAAI4B,aAAa,uBACvCC;AAAAA,EAAAA,QAAQ9B,GAASC,GAAI6B,QAAQ,cAC7BC;AAAAA,EAAAA,SAAS/B,GAASC,GAAI8B,SAAS;EAC/BC,UAAUhC,GAASC,GAAI+B,UAAU,eAAA;AAAA,EACjCC,MAAMjC,GAASC,GAAIgC,MAAM,MACzBC;AAAAA,EAAAA,SAASlC,GAASC,GAAIiC,SAAS,qBAC/BC;AAAAA,EAAAA,YAAYnC,GAASC,GAAIkC,YAAY;EACrCC,WAAWpC,GAASC,GAAImC,WAAW,kBAAA;AAAA,EACnCC,YAAYrC,GAASC,GAAIoC,YAAY,mBACrCC;AAAAA,EAAAA,YAAYtC,GAASC,GAAIqC,YAAY,iBACrCC;AAAAA,EAAAA,aAAavC,GAASC,GAAIsC,aAAa;EACvCC,SAASxC,GAASC,GAAIuC,SAAS,gBAAA;AAAA,EAC/BC,WAAWzC,GAASC,GAAIwC,WAAW,OACnCC;AAAAA,EAAAA,aAAa1C,GAASC,GAAIyC,aAAa,UACvCC;AAAAA,EAAAA,UAAU3C,GAASC,GAAI0C,UAAU;EACjCC,YAAY5C,GAASC,GAAI2C,YAAY,YAAA;AAAA,EACrCC,YAAY7C,GAASC,GAAI4C,YAAY,oBAAA;AAAA,EACrCC,aAAa9C,GAASC,GAAI6C,aAAa,UACvCC;AAAAA,EAAAA,UAAU/C,GAASC,GAAI8C,UAAU,WAAA;AAAA,EACjCC,cAAchD,GAASC,GAAI+C,cAAc,sBAAA;AAAA,EACzCC,iBAAiBjD,GAASC,GAAIgD,iBAAiB,yBAC/Clf;AAAAA,EAAAA,YAAYic,GAASC,GAAIlc,YAAY,kBAAA;AAAA,EACrCmf,UAAUlD,GAASC,GAAIiD,UAAU,yBAAA;AAAA,EACjCC,SAASnD,GAASC,GAAIkD,SAAS,UAAA;AAAA,EAC/B1K,SAASuH,GAASC,GAAIxH,SAAS,aAAA;AAAA,EAC/B2K,SAASpD,GAASC,GAAImD,SAAS;IC5D7BrS,KAAgB,EACpBvd,MAAM,SAAA,GAEF6vB,KAAqB;AAAA,EACzB7vB,MAAM;AAAA,EACN8vB;ACJIvS,GAAAA,KAAgB,EACpBvd,MAAM,SAAA,GCGK+vB,KAA6B,EACxC9vB,UAAU,CACR,SACA,gBACA,WAAA,GAEF0d,6BACA3d,MAAM,UACNE,YAAY;AAAA,EACV8vB,cAAc,EAAEhwB,MAAM,SAAA;AAAA,EACtBiwB,WAAW,EAAEjwB,MAAM,SAAA;AAAA,EACnB+qB,OAAO,EACLpN,sBAAAA,OACA3d,MAAM,UACNC,UAAU,CACR,YACA,YACA,SACA,QAAA,GAEFC,YAAY,EACVgwB,UDrBoC;AAAA,IAC1ClwB,MAAM;AAAA,IACN2d,sBAAsB;AAAA,IACtB1d,UAAU,CACR,iBACA,eACA,iBACA,iBACA,aACA,aACA,cACA,cACA,aACA,aACA,mBACA,mBACA,mBACA,iBACA,aACA,UACA,eACA,iBACA,iBACA,aACA,aACA,cACA,WACA,WACA,YACA,iBACA,eACA,QACA,eACA,YACA,gBACA,mBACA,aACA,cACA,cACA,eACA,aACA,cACA,eACA,YACA,cACA,WACA,WACA,SAAA;AAAA,IAEFC,YAAY;AAAA,MACV0sB,eAAerP;AAAAA,MACfkH,aAAalH;AAAAA,MACb0P,eAAe1P;AAAAA,MACfsP,eAAetP;AAAAA,MACfuP,WAAWvP;AAAAA,MACXwP,WAAWxP;AAAAA,MACXyP,YAAYzP;AAAAA,MACZ4P,YAAY5P;AAAAA,MACZ6P,WAAW7P;AAAAA,MACX8P,WAAW9P;AAAAA,MACX+P,iBAAiB/P;AAAAA,MACjBgQ,iBAAiBhQ;AAAAA,MACjBiQ,iBAAiBjQ;AAAAA,MACjBkQ,eAAelQ;AAAAA,MACfmQ,WAAWnQ;AAAAA,MACXoQ,QAAQpQ;AAAAA,MACR8G,aAAa9G;AAAAA,MACbwQ,eAAexQ;AAAAA,MACf0Q,eAAe1Q;AAAAA,MACfsQ,WAAWtQ;AAAAA,MACXuQ,WAAWvQ;AAAAA,MACXqQ,YAAYrQ;AAAAA,MACZ2Q,SAAS3Q;AAAAA,MACTgR,SAAShR;AAAAA,MACTiR,UAAUjR;AAAAA,MACV6Q,eAAe7Q;AAAAA,MACf8Q,aAAa9Q;AAAAA,MACbkR,MAAMlR;AAAAA,MACN2R,aAAa3R;AAAAA,MACb4R,UAAU5R;AAAAA,MACViS,cAAcjS;AAAAA,MACdkS,iBAAiBlS;AAAAA,MACjBqR,WAAWrR;AAAAA,MACXsR,YAAYtR;AAAAA,MACZuR,YAAYvR;AAAAA,MACZwR,aAAaxR;AAAAA,MACb0R,WAAW1R;AAAAA,MACX8R,YAAY9R;AAAAA,MACZ+R,aAAa/R;AAAAA,MACbgS,UAAUhS;AAAAA,MACVhN,YAAYgN;AAAAA,MACZoS,SAASpS;AAAAA,MACTqS,SAASrS;AAAAA,MACT0H,SAAS1H;AAAAA,MACTmR,SAASnR;AAAAA,MACToR,YAAYpR;AAAAA,MACZ2P,YAAY3P;AAAAA,MACZyQ,YAAYzQ;AAAAA,MACZ4Q,UAAU5Q;AAAAA,MACV+Q,QAAQ/Q;AAAAA,MACRyR,SAASzR;AAAAA,MACT6R,YAAY7R;AAAAA,MACZmS,UAAUnS;AAAAA,IChFN4S;AAAAA,EAAAA,GAAAA,UFnBkD;AAAA,IACxDnwB,MAAM;AAAA,IACNK,OAAO,CACLkd,IACAA,IACAA,IACAA,IACAA,IACAA,IACAA,IACAA,IACAA,IACAA,IACAA,IACAA,IACAA,IACAA,IACAA,IACAA,IACAA,IACAA,IACAA,IACAA,IACAsS,IACAtS,IACAA,IACAsS,IACAtS,IACAA,EAAAA;AAAAA,IAEFY,UAAU;AAAA,IACVC,UAAU;AAAA,EAAA,GEXJgS,OC5B+C,EACrDpwB,MAAM,SACNK,OAAO,EAAEL,MAAM,SAAA,GACfme,UAAU,IACVC,UAAU,GAAA,GDyBJra,QE7BsC;AAAA,IAC5C/D,MAAM;AAAA,IACNK,OAAO,EACLL,MAAM,UACNqwB,WAAW,EAAA;AAAA,IAEblS,UAAU;AAAA,IACVC,UAAU;AAAA,IACVyH,aAAa;AAAA,EAAA,EAAA,EAAA;AAAA,EAAA,GCHFyK,KACXz2B,CAAAA,OAEO,CACLA,GAAM02B,OAAO,IACb12B,GAAM22B,OAAO,IACb32B,GAAMoT,OAAO,IACbpT,GAAMqT,OAAO,IACbrT,GAAM42B,OAAO,IACb52B,GAAM62B,OAAO,IACb72B,GAAMwT,OAAO,IACbxT,GAAMyT,OAAO,IACbzT,GAAM82B,OAAO,IACb92B,GAAM+2B,OAAO,EAAA,GAIJC,KACXngC,CAAAA,OAEOA,GAAOq6B,MAAMhnB,OAAOpU,IAAI,CAACa,IAAMX,QAAW;AAAA,EAC/CW,MAAAA;AAAAA,EACAhB,IAAIK;KC3BKihC,KACXj3B,CAAAA,QAEO,EACLk3B,YAAYl3B,GAAMk3B,cAAc,GAChCtP,SAAS5nB,GAAM4nB,WAAW,GAC1BC,SAAS7nB,GAAM6nB,WAAW,EAAA,ICLjBsP,KAAqC;AAAA,EAChDrT,sBAAsB;AAAA,EACtB3d,MAAM;AAAA,EACNC,UAAU,CAAC,cAAc,WAAW,SAAA;AAAA,EACpCC,YAAY,EACV6wB,YAAY,EAAE/wB,MAAM,WAAWG,SAAS,GAAG8d,SAAS,IACpDwD,GAAAA,SAAS,EAAEzhB,MAAM,WAAWG,SAAAA,MAAgB8d,SAAS,IACrDyD,GAAAA,SAAS,EAAE1hB,MAAM,WAAWG,SAAAA,MAAgB8d,SAAS,ICP5CgT,EAAAA;AAAAA,GAAAA,KAAkB,CAC7BC,KAAiC,QACf;AAAA,EAClBj0B,gBAAgBi0B,GAAQj0B,kBAAkB;AAAA,EAC1CC,eAAeg0B,GAAQh0B,iBAAiB;AAAA,EACxC0B,KAAK4kB,GAAoB0N,GAAQtyB,OAAO,CAAA,CACxCwpB;AAAAA,EAAAA,YAAY8I,GAAQ9I,cAAc;AAAA,EAClCC,QAAQ6I,GAAQ7I,UAAU;AAAA,EAC1BC,QAAQ4I,GAAQ5I,UAAU;ACTf6I,IAAAA,KAAoB,CAC/Bt3B,KAAiC,QAE1B;AAAA,EACLu3B,iBAAiBv3B,GAAMu3B,mBAAmB;AAAA,EAC1CC,eAAex3B,GAAMw3B,iBAAiB;AAAA,EACtCC,eAAez3B,GAAMy3B,iBAAiB;ACL7BC,IAAAA,KAA6B;AAAA,EACxC5T,sBAAAA;AAAAA,EACA3d,MAAM;AAAA,EACNC,UAAU,CAAC,WAAW,UAAU,OAChCC;AAAAA,EAAAA,YAAY,EACVrO,SAAS,EAAEmO,MAAM,UAAA,GAEjB4e,OAAO,EAAE5e,MAAM,WAAWG,SAAS,EACnCuG,GAAAA,QAAQ,EACN1G,MAAM,SACNK,OAAO,EAAEL,MAAM,UAAA,EAAA,EAAA;AAAA,GCRRwxB,KAAmC;AAAA,EAC9C7T,sBAAAA;AAAAA,EACA3d,MAAM;AAAA,EACNC,UAAU,CACR,mBACA,mBACA,cACA,eACA,aACA,UACA,gBACA;EAEFC,YAAY;AAAA,IACVuxB,cAAc,EACZzxB,MAAM,SACNK,OAAOkxB;IAETG,aAAa,EAAE1xB,MAAM,WAAWG,SAAS,EAAA;AAAA,IACzCnC,iBAAiB,EAAEgC,MAAM,SACzB/B;AAAAA,IAAAA,iBAAiB,EAAE+B,MAAM;IACzB2xB,WAAW,EAAE3xB,MAAM,WAAWG,SAAS,EAAA;AAAA,IACvCkE,YAAY,EAAErE,MAAM,WAAWG,SAAS,EACxCmE;AAAAA,IAAAA,aAAa,EAAEtE,MAAM,SAAA;AAAA,IACrB4xB,QC1ByE;AAAA,MAC3EjU;MACA3d,MAAM;AAAA,MACNC,UAAU,CAAC,iBAAiB,iBAAiB,iBAAA;AAAA,MAC7CC,YAAY,EACVmxB,eAAe,EAAErxB,MAAM,WAAWG,SAAS,GAAG8d,SAAS,IACvDqT,GAAAA,eAAe,EAAEtxB,MAAM,WAAWG,SAAS,GAAG8d,SAAS,IAAA,GACvDmT,iBAAiB,EAAEpxB,MAAM,WAAWG,SAAS,GAAG8d,SAAS,EAAA,EAAA;AAAA,IAAA;AAAA,EAAA;AAAA,GCOhD4T,KAAgC;AAAA,EAC3CrvB,OAAO;AAAA,EACPa,SAAS;AAAA,IACPikB,cAAc;AAAA,IACdD,cAAc;AAAA,IACdG,eAAe;AAAA,IACfI,cAAc;AAAA,IACdR,aAAa;AAAA,IACbG,aAAa;AAAA,IACbE,cAAc;AAAA,IACdE,aAAa;AAAA,IACbD,mBAAmB;AAAA,IACnBG,gBAAgB;AAAA,IAChBC,gBAAgB;AAAA,IAChBC,iBAAiB;AAAA;GAIR+J,KAAmC,EAC9CtvB,OAAO,OAEPuO,QAAQ,UAER1N,SAAS;AAAA,EACPkmB,UAAU;AAAA,EACVE,YAAY;AAAA,EACZE,YAAY;AAAA,EACZE,aAAa;AAAA,EACbE,YAAY;AAAA,EACZE,UAAU;AAAA,EACVt5B,WAAW;AAIFohC,EAAAA,GAAAA,KAA+B,EAC1CvvB,OAAO,OACPa,SAAS,EACPgK,KAAK,MACLJ,KAAK,OACLC,KAAK,OACL0jB,KAAK,MACLD,KAAK,MACLrjB,KAAK,KACLmjB,KAAK,SACLC,KAAK,SACLH,KAAK,QACLC,KAAK,OAIIwB,EAAAA,GAAAA,KAA8B;AAAA,EACzCxvB,OAAO;AAAA,EACPa,SAAS;AAAA,IACPJ,MAAM;AAAA,IACNV,OAAO;AAAA,IACPyhB,OAAO;AAAA,IACP+C,QAAQ;AAAA,IACRC,WAAW;AAAA,IACX3jB,SAAS;AAAA,IACT4gB,MAAM;AAAA,IACN6H,SAAS;AAAA,IACThpB,OAAO;AAAA,IACPI,QAAQ;AAAA,IACRgpB,SAAS;AAAA,IACTL,QAAQ;AAAA,IACRvb,OAAO;AAAA,IACP6R,QAAQ;AAAA,IACRyJ,OAAO;AAAA,IACPS,KAAK;AAAA,IACLC,MAAM;AAAA,IACNxI,QAAQ;AAAA,IACRmI,OAAO;AAAA,IACPE,WAAW;AAAA,IACXJ,QAAQ;AAAA,IACRnF,SAAS;AAAA,IACToF,UAAU;AAAA,IACVI,SAAS;AAAA,EAAA;AAAA,GC1FP6F,KAAsC;AAAA,EAC1CjyB,MAAM;AAAA,EACN2d,sBAAAA;AAAAA,EACA1d,UAAU,CAAC,QAAQ,eACnBC;AAAAA,EAAAA,YAAY,EACVF,MAAM,EAAEA,MAAM,SACdkyB,GAAAA,eAAe,EAAElyB,MAAM,SAAA,EAAA;AAAA,GCNrBmyB,KAAwB;AAAA,EAC5BxU,sBAAAA;AAAAA,EACA3d,MAAM;AAAA,EACNC,UAAU,CACR,kBACA,iBACA,OACA,cACA,UACA;EAEFC,YAAY;AAAA,IACVjD,gBAAgB,EAAE+C,MAAM,WAAWG,SAAS,GAAG8d,SAAS,EACxD/gB;AAAAA,IAAAA,eAAe;AAAA,MAAE8C,MAAM;AAAA,MAAUqwB,WAAW;AAAA,IAAA;AAAA,IAC5CzxB,KAAK,EACHoB,MAAM,UACN2d,6BACA1d,UAAU,CAAC,QAAQ,UAAU,SAAS,QACtCC,YAAY;AAAA,MACV1P,MAAM,EAAEwP,MAAM,SAAA;AAAA,MACdjB,QAAQ,EAAEiB,MAAM,WAAWG,SAAS,GAAG8d,SAAS,IAAA;AAAA,MAChDnf,OAAO,EAAEkB,MAAM,WAAWG,SAAS,IAAI8d,SAAS,IAAA;AAAA,MAChDpf,KAAK,EAAEmB,MAAM,WAAWG,SAAS,MAAM8d,SAAS,IAAA;AAAA,IAAA,EAAA;AAAA,IAGpDmK,YAAY,EAAEpoB,MAAM,WAAWG,SAAS,EAAA;AAAA,IACxCkoB,QAAQ,EAAEroB,MAAM,WAAWG,SAAS,GAAG8d,SAAS,IAAA;AAAA,IAChDqK,QAAQ,EAAEtoB,MAAM,WAAWG,SAAS,GAAG8d,SAAS,IAAA;AAAA,EAAA;AAAA,GCvBvCmU,KAA+B,EAC1CzU,sBAAsB,OACtB1d,UAAU,CAAC,WAAW,QAAQ,QAAQ,YAAY,kBAClDD,MAAM,UACNE,YAAY;AAAA,EACVmyB,SAASF;AAAAA,EACTG,MAAMH;AAAAA,EACNI,MAAMJ;AAAAA,EACN3P,UCZ2B;AAAA,IAC7BxiB,MAAM;AAAA,IACNE,YAAY;AAAA,MACVuiB,QAAQ,EAAEziB,MAAM;MAChB0iB,aAAa,EAAE1iB,MAAM,UAAA;AAAA,MACrB2iB,cAAc,EAAE3iB,MAAM,UAAA;AAAA,MACtB4iB,aAAa,EAAE5iB,MAAM,UAAA;AAAA,MACrB6iB,cAAc;AAAA,QAAE7iB,MAAM;AAAA;MACtB8iB,eAAe,EAAE9iB,MAAM,UACvB+iB;AAAAA,MAAAA,aAAa,EAAE/iB,MAAM,SAAA;AAAA,MAErBgjB,oBAAoB,EAAEhjB,MAAM;MAC5BijB,kBAAkB,EAAEjjB,MAAM,SAC1BkjB;AAAAA,MAAAA,eAAe,EAAEljB,MAAM,SAAA;AAAA,MACvBmjB,UAAU,EAAEnjB,MAAM,UAAA;AAAA,IAAA;AAAA,IAEpBC,UAAU,CACR,UACA,eACA,gBACA,eACA,gBACA,iBACA,eACA,sBACA,oBACA,iBACA,UAAA;AAAA,IAEF0d,sBAAsB;AAAA,EAAA;AAAA,EDhBpB6U,eAAe,EACbxyB,MAAM,SACNK,OAAO4xB,GAAAA;AAAAA,EAAAA,GEgCP9b,KAAUllB,CAAAA,OAEPA,GAAKklB,OACV,CAACC,IAAKnT,QAAU,EACdhD,UAAU,CAAImW,GAAAA,GAAInW,UAAagD,GAAAA,GAAKhD,QACpCC,GAAAA,YAAY,EAAKkW,GAAAA,GAAIlW,YAAe+C,GAAAA,GAAK/C,WAE3C,EAAA,IAAA;AAAA,EAAED,UAAU,CAAIC;AAAAA,EAAAA,YAAY,CAAG;AAAA,CAAA,GChD7BS,KAAM,IAAIC,EAAI,EAAEC,QAAQ,KAAA,CAAA,GAExB4xB,MD4BJxhC,CAAAA,OAEM;AAAA,QAAAyhC,KAAcvc,GAAOllB,EACpB;AAAA,SAAA;AAAA,IACL0sB,sBAAAA;AAAAA,IACA3d,MAAM;AAAA,IACNC,UAAUjQ,MAAMC,KAAK,IAAIskB,IAAIme,GAAYzyB,QAAAA,CAAAA;AAAAA,IACzCC,YAAYwyB,GAAYxyB;AAAAA,ECnCbyyB;AAAAA,GDYsB,CACnCP,IACA/M,IACAM,IACAuB,IACAe,IACAO,IACAC,IACAO,IACA2B,IACAoF,IACAlH,IACA2I,ECvBIoB,CAAAA,GAAAA,KAAiBjyB,GAAII,QAAQ0xB,EAAAA,GAEtBI,KAAgB9hC,CAAAA,OACpB6hC,GAAe7hC,EAGlB+hC,GAAAA,KAAcnyB,GAAII,QAAQwwB,EAAAA;AAMX5wB,GAAII,QAAQkxB,EAAAA;AAKjC,MAAMc,KAAYpyB,GAAII,QAAQ0nB,ECAjBuK,GAAAA,KACXC,CAAAA;;AAEM,QAAAxe,KAAOye,GAAUD,GAAUxe,IAAAA;AAE1B,SAAA;AAAA,IAAA,GACD0S,GAAmB8L,GAAU5vB,OAIjC2sB;AAAAA,IAAAA,gBAAciD,MAAAA,GAAUE,UAAVF,gBAAAA,IAAiBjD,iBAAgB;AAAA,IAC/CC,aAAWgD,KAAAA,GAAUE,UAAVF,mBAAiBhD,cAAa;AAAA,IACzCtM,QAAQD,GAAgBuP,GAAUtP,MAClCiO;AAAAA,IAAAA,QAAQT,GAAkB8B,GAAUG,OAAAA;AAAAA,IAIpC5Q,UAAUD,GAAmB0Q,GAAUzQ,QAAAA;AAAAA,IACvCsG,cAAYmK,KAAAA,GAAUI,WAAVJ,mBAAkBnK,eAAc;AAAA,IAC5CC,cAAYkK,MAAAA,GAAUI,WAAVJ,gBAAAA,IAAkBlK,eAAc;AAAA,IACxC6B,GAAAA,GAAcqI,GAAUK,aAAa,EAIzC1N;AAAAA,IAAAA,aAAa2N,GAAiB,CAAA,CAAA;AAAA,IAC9BlB,SAASpB,IAAgBgC,MAAAA,GAAUO,aAAVP,gBAAAA,IAAoBZ,OAC7CC;AAAAA,IAAAA,MAAMrB,IAAgBgC,KAAAA,GAAUO,aAAVP,mBAAoBX,IAAAA;AAAAA,IAC1CC,MAAMtB,IAAgBgC,KAAAA,GAAUO,aAAVP,mBAAoBV,IAC1C7M;AAAAA,IAAAA,UAAUlC,IAAoByP,KAAAA,GAAUQ,OAAVR,mBAAcvN,QAAAA;AAAAA,IAC5CF,YAAYhC,IAAoByP,MAAAA,GAAUQ,OAAVR,gBAAAA,IAAczN;IAC9CC,UAAUjC,IAAoByP,KAAAA,GAAUr0B,QAAVq0B,mBAAexN,QAE7CiD;AAAAA,IAAAA,UAAUjU,GAAKiU;AAAAA,IACfC,UAAUlU,GAAKkU;AAAAA,IACfC,UAAUnU,GAAKmU;AAAAA,IACfM,WAAW;AAAA,IACXsJ,eAAe,CAAA;AAAA,IACfx0B,mBAAiBi1B,KAAAA,GAAUS,eAAVT,mBAAsBj1B,oBAAmB;AAAA,IAC1DC,mBAAiBg1B,MAAAA,GAAUS,eAAVT,gBAAAA,IAAsBh1B,oBAAmB;AAAA,IAC1DyzB,eAAauB,MAAAA,GAAUS,eAAVT,gBAAAA,IAAsBvB,gBAAe;AAAA,IAClDD,cAAckC,IACZV,MAAAA,GAAUS,eAAVT,gBAAAA,IAAsBxB,cACtBmC,EAEFtO;AAAAA,IAAAA,WAAW9B,IAAoByP,MAAAA,GAAUr0B,QAAVq0B,gBAAAA,IAAe3N,SAC9CC;AAAAA,IAAAA,WAAW/B,IAAoByP,MAAAA,GAAUQ,OAAVR,gBAAAA,IAAc1N;IAC7CoM,aAAWsB,KAAAA,GAAUY,oBAAVZ,mBAA2BtB,cAAa;AAAA,IACnDrtB,eAAa2uB,MAAAA,GAAUY,oBAAVZ,gBAAAA,IAA2B3uB,gBAAe;AAAA,IACvD2kB,QAAQ;AAAA,IACRb,cAAY6K,MAAAA,GAAUa,aAAVb,gBAAAA,IAAoB7K,eAAc;AAAA,IAC9CC,UAAQ4K,MAAAA,GAAUa,aAAVb,gBAAAA,IAAoB5K,WAAU;AAAA,IACtCC,UAAQ2K,KAAAA,GAAUa,aAAVb,mBAAoB3K,WAAU;AAAA,IACtCa,YAAY,CAAC,GAAG,GAAG,GAAG,CAAA;AAAA,IACtB4B,OAAOgJ,GAAUd,GAAUlI,SAAS,CAAA;IACpCxE,gBAAgBI,GACdsM,GAAU1M,cAAAA;AAAAA,IAEZgC,mBAAmBgL,IAAiBN,KAAAA,GAAUa,aAAVb,mBAAoB1K,iBAAAA;AAAAA,IACxDzC,cAAc;AAAA,IACdzhB,YAAY;AAAA,IACZ2hB,cAAcc,GACZmM,GAAUe,YAOVD;AAAAA,EAAAA;AAAAA,GAAAA,KAAahJ,CAAAA,QACV;AAAA,EACLqF,OAAOtF,GAAeC,GAAMqF,SAAS,CAAA,CAAA;AAAA,EACrCD,UAAU8D,GAAiBlJ,GAAMoF,YAAY,CAAA;EAC7CpsB,QAAQusB,GAAoBvF,GAAMhnB,UAAU,CAAA;EAC5CmsB,UAAUvD,GAAkB5B,GAAMmF,YAAY,CAAE,CAO9CqD;AAAAA,IAAAA,KAAoB7jC,CAAAA,OACjBA,KAAQ,CAAA,GAAIA,MAAS,CAGxBwjC,GAAAA,KAAaniC,CAAAA,QDnFSA,CAAAA,OACnBgiC,GAAUhiC,EAAAA,GCmFEA,EACf,IAAA;AAAA,EACE23B,UAAU33B,GAAK23B;AAAAA,EACfC,UAAU53B,GAAK43B;AAAAA,EACfC,UAAU73B,GAAK63B;AAAAA,IAEjB,EACEF,UAAU,IACVC,UAAU,KACVC,UAAU,GAIZ+K,GAAAA,KAAmB,CACvBjkC,IACAuvB,OAEOvvB,KAAQA,GAAMC,IAAIsvB,EAAM,IAAA,CAAA,GAG3B2U,KAAoB7iC,CAAAA,QDlHIA,CAAAA,OACrB+hC,GAAY/hC,EAAAA,GCkHEA,EACjB,IAAA,EACEc,SAASd,GAAKc,SACd6U,QAAQ6sB,GAAiBxiC,GAAK2V,MAC9BkY,GAAAA,OAAO7tB,GAAK6tB,MAEd,IAAA;AAAA,EACE/sB,SAAS;AAAA,EACT6U,QAAQ,CACRkY;AAAAA,EAAAA,OAAO;GCvHFsV,KAA4B,CACvCC,IACAC,IACAC,IACA/pB,IACA5Z,IACA4R,OAEO,IACFiQ,GAAiB8hB,IAAa/pB,QAC9BnJ,GAAsBgzB,IAAUC,EAChClK,GAAAA,GAAAA,GAAkBx5B,IAAQ4R,EAAAA,CAAAA,GAIpBgyB,KAA0B,CACrCC,IACAF,OAEOpd,GAAiB2J,GAAmByT,KAAcE,EAG9CC,GAAAA,KAA+B,CAC1CD,IACAE,IACAC;AAEM,QAAAzjC,KAAOgpB,GAAwBwa,EAC9B;AAAA,SAAAxd,GACLyd,KAAa,CAAA,GAAIzjC,IAASyjC,GAAAA,EAAAA,IAAczjC,IACxCsjC,EAAAA;ACrDSI,GAAAA,KACXC,CAAAA,OAEOC,OAAOC,QAAoBF,EAAQjlC,EAAAA,IAAI,IAAIgjB,EAAAA,MAAWA,GAAMnQ,KAAAA,GCKxDuyB,KAA6B,CACxCl7B,IACAC,KAAiB,OACY,EAC7BF,M3HiFyB,K2HhFzBG,YAAY,CAACF,GAAMhI,SAASgI,GAAMrJ,IAAAA,GAClCsJ,QAGWk7B,GAAAA,IAAAA,KAAiC,CAC5Cn7B,IACAC,KAAiB,OACgB;AAAA,EACjCF,M3H4E6B;AAAA,E2H3E7BG,YAAY,CAACF,GAAMhI,SAASgI,GAAM6J,QAClC5J;AAAAA,EAAAA,QAAAA;AAGWm7B,IAAAA,KAAgC,CAC3Cp7B,IACAC,KAAiB,OACe,EAChCF,M3HoE4B,K2HnE5BG,YAAY,CAACF,GAAMhI,SAASgI,GAAM8J,OAClC7J,GAAAA,QAAAA,GAAAA,ICbWo7B,KAAmB,CAC9Bt7B,IACAu7B,OAEOC,GAAoBx7B,IAAM4pB,GAAoB,EAAEhzB,MAAM2kC,GAAAA,CAAAA,CAAAA,GAGlDC,KAAsB,CACjCx7B,IACAy7B,IACAv7B,KAAiB,OAEV;AAAA,EACLF,MAAAA;AAAAA,EACAG,YAAY,CAACypB,GAAoB6R,EACjCv7B,CAAAA;AAAAA,EAAAA,QAAAA;AAISw7B,IAAAA,KAAqB,CAChCD,IACAv7B,KAAiB,MACGs7B,G5HuBE,K4HvB4BC,IAAOv7B,EAAAA,GAE9Cy7B,KAAqB,CAChCF,IACAv7B,KAAiB,MACGs7B,G5HuBE,K4HvB4BC,IAAOv7B,EAAAA,GAE9C07B,KAAoB,CAC/BH,IACAv7B,KAAiB,MACEs7B,G5HoBE,K4HpB2BC,IAAOv7B,EAAAA,GAE5C27B,KAAoB,CAC/BJ,IACAv7B,KAAiB,MACEs7B,G5HgBE,K4HhB2BC,IAAOv7B,EAAAA,GAE5C47B,KAA6B,CACxCL,IACAv7B,KAAiB,MAEjBs7B,G5HnC+B,K4HmCQC,IAAOv7B,EAEnC67B,GAAAA,KAA6B,CACxCN,IACAv7B,KAAiB,MAEjBs7B,G5HxC+B,K4HwCQC,IAAOv7B,EAEnC87B,GAAAA,KAA4B,CACvCP,IACAv7B,KAAiB,MAEjBs7B,G5HvC8B,K4HuCQC,IAAOv7B,ECxElC+7B,GAAAA,KAAyB,CACpCh8B,IACAC,KAAiB,OACQ;AAAA,EACzBF,M7HS0B;AAAA,E6HR1BE;EACAC,YAAY+7B,GAAmBj8B,MAAS,CAAE,CAAA;AAAA,IAG/Bk8B,KACXrmC,CAAAA,QAC6B,EAC7BsmC,SAAStmC,GAAM,CAAA,EAAA,IAGJomC,KACXG,CAAAA,OAC2B,CAACA,GAAOD,WAAW,CAAA,GCdnCE,KACXr8B,CAAAA,QAEO,EACLs8B,KAAKt8B,GAAM,CACXu8B,GAAAA,KAAKv8B,GAAM,CACX8Y,GAAAA,OAAO9Y,GAAM,CAIJw8B,EAAAA,IAAAA,KACXJ,CAAAA,OAEO,CAACA,GAAOE,KAAKF,GAAOG,KAAKH,GAAOtjB,KAG5B2jB,GAAAA,KAA6B,CACxCz8B,IACAC,KAAS,OACoB;AAAA,EAC7BF,M9HP8B;AAAA,E8HQ9BE,QAAAA;AAAAA,EACAC,YAAYs8B,GAAuBx8B,ECrBxB08B;AAAAA,IAAAA,KAAoBC,CAAAA,OACxB,CAACA,EAAAA,GAGGC,KACXC,CAAAA,QACyB,EACzBF,SAASE,GAAW,CAGTC,EAAAA,IAAAA,KAA2B,CACtCH,IACA18B,KAAiB,OACU,EAC3BF,M/Hb0B,K+Hc1BE,QAAAA,IACAC,YAAYw8B,GAAiBC,QAGlBI,KAAyB,CACpCJ,IACA18B,KAAiB,OACQ;AAAA,EACzBF,M/HrB0B;AAAA,E+HsB1BE,QAAAA;AAAAA,EACAC,YAAYw8B,GAAiBC,EAAAA;IAGlBK,KAA0B,CACrCC,IACAh9B,KAAiB,MAEVg9B,GAASnnC,IAAI,CAAC6mC,IAAS3mC,OAClB,MAAVA,KACI8mC,GAAyBH,IAAS18B,MAClC88B,GAAuBJ,IAAS18B,MCpC3Bi9B,KACXl9B,CAAAA,OAC2B,CAACA,GAAMvH,cAAc,GAAGuH,GAAMm9B,UAAU,CAAA,GAExDC,KACXvnC,CAAAA,QAC6B,EAC7B4C,YAAY5C,GAAM,CAAA,GAClBsnC,QAAQtnC,GAAM,CAGHwnC,EAAAA,IAAAA,KAAyB,CACpCr9B,IACAC,KAAiB,OACQ;AAAA,EACzBF,MhIjB0B;AAAA,EgIkB1BE,QACAC;AAAAA,EAAAA,YAAYg9B,GAAmBl9B,MAAS,CAAE,CAAA;ICZ/Bs9B,KAA6B,CACxCt9B,KAA+C,OAExC,EAACA,MAAAA,gBAAAA,GAAOgM,UAAS,IAAGhM,MAAAA,gBAAAA,GAAOu9B,SAAQ,KAAA,GAG/BC,KACX3nC,CAAAA,QAEO,EACLmW,OAAOnW,GAAM,CACb0nC,GAAAA,MAAM1nC,GAAM,CAIH4nC,EAAAA,IAAAA,KAAiC,CAC5Cz9B,KAA+C,IAC/CC,KAAiB,OAEV,EACLF,MjIzB+B,KiI0B/BE,QACAC,IAAAA,YAAYo9B,GAA2Bt9B,EAI9B09B,EAAAA,IAAAA,KAA2B,CACtC3nC,KAAe,OAER,CAACA,KAGG4nC,KACX9nC,CAAAA,QAEO,EACLqyB,SAASryB,GAAM,CAAA,EAAA,IAGN+nC,KAA+B,CAC1C7nC,KAAe,IACfkK,KAAiB,OAEV;AAAA,EACLF,MjIhDoC;AAAA,EiIiDpCE,QAAQA,MAAU;AAAA,EAClBC,YAAYw9B,GAAyB3nC;IC9C5B8nC,KAA4B,CACvC79B,IACAC,KAAiB,OACW,EAC5BF,MlIZ+B,KkIa/BE,YACAC,YAAY,EAACF,MAAAA,gBAAAA,GAAOhK,UAAS,IAAGgK,MAAAA,gBAAAA,GAAOrJ,SAAQ,EAAA,EAAA,IAGpCmnC,KACXjoC,CAAAA,QACgC,EAChCG,OAAOH,GAAM,CAAA,GACbc,MAAMd,GAAM,CAAA,EAAA,IAGDkoC,KACX3B,CAAAA,OAC8B,CAACA,GAAOpmC,SAAS,GAAGomC,GAAOzlC,QAAQ,EAAA,GAEtDqnC,KACXnoC,CAAAA,QAC6B;AAAA,EAC7BooC,SAASpoC,GAAM,CAAA;AAAA,EACfqoC,YAAYroC,GAAM,CAClBsoC;AAAAA,EAAAA,aAAatoC,GAAM,CAAA;AAAA,EACnBuoC,cAAcvoC,GAAM,CACpBqhC;AAAAA,EAAAA,YAAYrhC,GAAM,CAAA;IAGPwoC,KACXjC,CAAAA,OAC2B,CAC3BA,GAAO6B,WAAW,CAAA,GAClB7B,GAAO8B,cAAc,GACrB9B,GAAO+B,eAAe,GACtB/B,GAAOgC,gBAAgB,GACvBhC,GAAOlF,cAAc,CAAA,GAGVoH,KAAyB,CACpCt+B,IACAC,KAAiB,OACQ;AAAA,EACzBF,MlIrD0B;AAAA,EkIsD1BE,QAAAA;AAAAA,EACAC,YAAY,EACVF,MAAAA,gBAAAA,GAAOi+B,YAAW,CAAA,IAClBj+B,MAAAA,gBAAAA,GAAOk+B,eAAc,IACrBl+B,MAAAA,gBAAAA,GAAOm+B,gBAAe,IACtBn+B,MAAAA,gBAAAA,GAAOo+B,iBAAgB,IACvBp+B,MAAAA,gBAAAA,GAAOk3B,eAAc,CAAA;AAAA,IAIZqH,KACXC,CAAAA,QAEO;AAAA,EACLz+B,MAAMy+B,GAAQz+B;AAAAA,EACdE,QAAQu+B,GAAQv+B;AAAAA,EAChBC,YAAY,CACV,CAAIs+B,GAAAA,GAAQt+B,WAAW,CAAA,CAAA,GACvBs+B,GAAQt+B,WAAW,CAAA,GACnBs+B,GAAQt+B,WAAW,CACnBs+B,GAAAA,GAAQt+B,WAAW,CACnBs+B,GAAAA,GAAQt+B,WAAW,CAAA,CAAA;AAAA,ICtEZu+B,KAAyB,CACpCz+B,IACAC,KAAiB,OACc;AAAA,EAC/BF,MnIX0B;AAAA,EmIY1BE,QAAAA;AAAAA,EACAC,YAAY,EACVF,MAAAA,gBAAAA,GAAO0+B,aAAY,KACnB1+B,MAAAA,gBAAAA,GAAO2M,cAAa,IACpB3M,MAAAA,gBAAAA,GAAOk3B,eAAc,IACrBl3B,MAAAA,gBAAAA,GAAOo+B,iBAAgB,IACvBp+B,MAAAA,gBAAAA,GAAO2+B,gBAAe,EAAA;AAAA,IAIbC,KACX/oC,CAAAA,QAEO;AAAA,EACL6oC,UAAU7oC,GAAM,CAAA;AAAA,EAChB8W,WAAW9W,GAAM,CACjBqhC;AAAAA,EAAAA,YAAYrhC,GAAM,CAAA;AAAA,EAClBuoC,cAAcvoC,GAAM,CAAA;AAAA,EACpB8oC,aAAa9oC,GAAM,CAAA;AAAA,IAIVgpC,KACXzC,CAAAA,OAEO,CACLA,GAAOsC,UACPtC,GAAOzvB,WACPyvB,GAAOlF,YACPkF,GAAOgC,cACPhC,GAAOuC,cAIEG,KAA6B,CACxC/oC,IACAkK,KAAiB,OACY,EAC7BF,MnIjD+B,KmIkD/BE,YACAC,YAAY,CAACnK,EClDFgpC,EAAAA,IAAAA,KAA0B,CACrCC,IACA/+B,KAAiB,OAEV;AAAA,EACLF,MpI+GuB;AAAA,EoI9GvBE,QAAAA;AAAAA,EACAC,YAAY,CAAC8+B,EAIJC;AAAAA,IAAAA,KAAwB,CACnCD,IACA/+B,KAAiB,OAEV,EACLF,MpIqG4B,KoIpG5BE,QACAC,IAAAA,YAAY,CAAC8+B,EAGJE,EAAAA,IAAAA,KAAyB,CACpCC,IACAl/B,KAAiB,MAEVk/B,GAAMrpC,IAAI,CAACspC,IAAMppC,OACZ,MAAVA,KACI+oC,GAAwBK,IAAMn/B,EAC9Bg/B,IAAAA,GAAsBG,IAAMn/B,EAAAA,CAAAA,GC/BvBo/B,KAAmB,GACnBC,KAAmB,GACnBC,KAAiB,GACjBC,KAAmB,GACnBC,KAAiB,GCJjBC,KAAoB;AAAA,EAC/BC,IAAI;AAAA,EACJC,IAAI;AAAA,EACJC,KAAK;AAAA,EACLC,KAAK;AAAA,EACLC,KAAK;AAAA,EACLC,KAAK;AAAA,EACLC,KAAK;AAAA,EACLC,KAAK;AAAA,EACLC,KAAK;AAAA,EACLC,KAAK;AAAA,EACLC,IAAI;ACDOC,GAAAA,KAAyB,CACpCC,IACAznB,IACA0nB,KAAoB,MACQ,CAC5BD,GAAOE,SACPF,GAAOG,SAASH,GAAOE,SACvBD,IFjB8B,GEmB9B1nB,GAAMA,KAAAA,GAGK6nB,KAAyB,CACpCJ,IACAznB,IACA0nB,KAAoB,MACM,CAC1BD,GAAOE,SACPF,GAAOG,SAASH,GAAOE,SACvBD,IF5B8B,GE8B9B1nB,GAAMrgB,UAAAA,GAEKmoC,KAAuB,CAClCL,IACAznB,IACA0nB,KAAoB,MACI,CACxBD,GAAOE,SACPF,GAAOG,SAASH,GAAOE,SACvBD,IFtC4B,GEwC5B1nB,GAAMwjB,KACNxjB,GAAMyjB,GAAAA,GAGKsE,KAAuB,CAClCN,IACAznB,IACA0nB,KAAoB,MACI,CACxBD,GAAOE,SACPF,GAAOG,SAASH,GAAOE,SACvBD,IFjD4B,GEmD5B1nB,GAAM/Y,IAAAA,GAEK+gC,KAAyB,CACpCP,IACAznB,IACA0nB,KAAoB,MACM,CAC1BD,GAAOE,SACPF,GAAOG,SAASH,GAAOE,SACvBD,IF7D8B,GE+D9B1nB,GAAM3S,MACN2S,GAAMhgB,MAAAA,GAGKioC,KAA4B,CACvCR,IACAznB,IACA0nB,KAAoB,MACS,CAC7BD,GAAOE,SACPF,GAAOG,SAASH,GAAOE,SACvBD,IF1E8B,GE4E9B,GACA1nB,GAAM9iB,OACN8iB,GAAM9Y,KAGKghC,GAAAA,KAA4B,CACvCT,IACAznB,IACA0nB,KAAoB,MACS,CAC7BD,GAAOE,SACPF,GAAOG,SAASH,GAAOE,SACvBD,IFxF8B,GE0F9B,GACA1nB,GAAM9iB,OACN0pC,GAAkB5mB,GAAM9Y,KCxFbihC,CAAAA,GAAAA,KAAgB,CAC3B93B,IACAnJ,OAAAA;AAEQ,UAAAA,GAAM,CACZ,GAAA;AAAA,IAAA,KAAK;AACH,aAAOmJ,GAAMioB;AAAAA,IACf,KAAK;AACH,aAAOjoB,GAAMmoB;AAAAA,IACf,KAAK;AACH,aAAOnoB,GAAMqoB;AAAAA,EAEjB;AAAA,SAAIxxB,GAAM,CAAM,KAAA,KAAKA,GAAM,CAAA,KAAM,IACxBmJ,GAAMnJ,MAAMA,GAAM,CAAK,IAAA,CAAA,IAEzB;GAGIkhC,KAAgB,CAC3BxqC,IACAsJ,OAEQ;AAAA,UAAAA,GAAM,CACZ,GAAA;AAAA,IAAA,KAAK;AACH,aAAOtJ,GAAMquB;AAAAA,IACf,KAAK;AACH,aAAOruB,GAAMyqC,WACf;AAAA,IAAA,KAAK;AACH,aAAOzqC,GAAM06B;AAAAA,IACf,KAAK;AACH,aAAO16B,GAAM46B;AAAAA,IACf,KAAK;AACH,aAAO56B,GAAM86B;AAAAA,EAAAA;AAEjB,SAAIxxB,GAAM,CAAA,KAAM,KAAKA,GAAM,MAAM,KACxBtJ,GAAMsJ,MAAMA,GAAM,CAAA,IAAK,KAEzB;ACvCIohC,GAAAA,KAGXphC,CAAAA,OAEO,CAAIA,GAAAA,EAAAA,GAGAqhC,KAGX7C,CAAAA,QAEO;AAAA,EACLz+B,MAAMy+B,GAAQz+B;AAAAA,EACdE,QAAQu+B,GAAQv+B;AAAAA,EAChBC,YAAYkhC,GAAuB5C,GAAQt+B,UAIzCohC;AAAAA,IAAAA,KAAexoB,CAAAA,OACF,YAAA,OAAVA,MACU,YAAA,OAAVA,MACU,aAAA,OAAVA,IAEIyoB,KACXzoB,CAAAA,OAEOA,GAAM5Y,WAAWshC,MAAMF,ECL1Bx6B,GAAAA,KAAM,IAAIC,EAAI,EAAEhH,MAAM,EAAE6I,QAAAA,MAAiB5B,GAAAA,QAAAA,KAMzCy6B,CAAAA,GAAAA,KAAkB36B,GAAII,QC/Ba;AAAA,EACvCf,MAAM;AAAA,EACNC,UAAU,CAAC,QAAQ,cAAc,QAEjCC;AAAAA,EAAAA,YAAY,EACVtG,MAAM,EACJoG,MAAM,WACNI,MAAM,CAAC,KAAK,KAAK,GAAA,EAAA,GAEnBtG,QAAQ,EAAEkG,MAAM,UAAA,GAChBjG,YAAY;AAAA,IACViG,MAAM;AAAA,IACNme,UAAU;AAAA,IACVC,UAAU;AAAA,IACV/d,OAAO,CACL,EAAEL,MAAM,WAAWG,SAAS,EAAA,GAC5B,EAAEH,MAAM,SAId2d,CAAAA;AAAAA,EAAAA,EAAAA;AAAAA,EAAAA,sBAAAA;ADYW4d,CAAAA,GAAAA,KACXxqC,CAAAA,OAEOuqC,GAAgBvqC,EAGnByqC,GAAAA,KAAiB76B,GAAII,QEtCoB;AAAA,EAC7Cf,MAAM;AAAA,EACNE,YAAY,EACVtG,MAAM,EAAEoG,MAAM,UAAUy7B,OAAO,OAC/B3hC,QAAQ;AAAA,IAAEkG,MAAM;AAAA,IAAWG,SAAS;AAAA,EACpCpG,GAAAA,YAAY,EACViG,MAAM,SACNme,UAAU,GACVC,UAAU,GACV/d,OAAO,CACL,EAAEL,MAAM,SACR,GAAA,EAAEA,MAAM,UAIdC,CAAAA,EAAAA,EAAAA;AAAAA,EAAAA,UAAU,CAAC,QAAQ,UAAU,YAAA;AFwBlBy7B,CAAAA,GAAAA,KACX3qC,CAAAA,OAEOyqC,GAAezqC,EAGlB4qC,GAAAA,KAAeh7B,GAAII,QG1CQ,EAC/Bf,MAAM,UACNC,UAAU,CAAC,QAAQ,cAAc,QAEjCC,GAAAA,YAAY;AAAA,EACVtG,MAAM,EACJoG,MAAM,WACNI,MAAM,CAAC,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,GAEvCtG,EAAAA;AAAAA,EAAAA,QAAQ,EAAEkG,MAAM,UAAA;AAAA,EAChBjG,YAAY,EACViG,MAAM,SACNme,UAAU,GACVC,UAAU,GACV/d,OAAO,CACL;AAAA,IACEL,MAAM;AAAA,IACNE,YAAY,EACV1P,MAAM,EAAEwP,MAAM,SAAA,GACdjB,QAAQ,EAAEiB,MAAM,UAAA,GAChBlB,OAAO,EAAEkB,MAAM,UAAA,GACfnB,KAAK,EAAEmB,MAAM,UAAA,EAAA;AAAA,IAEfC,UAAU,CAAC,QAAQ,UAAU,SAAS;IACtC0d,sBAAsB;AAAA,EAAA,CAAA,EAAA;AAAA,GAK9BA,sBAAsB,MAAA,CAAA,GHcXie,KACX7qC,CAAAA,OAEO4qC,GAAa5qC,EAGhB8qC,GAAAA,KAAal7B,GAAII,QI1BmB;AAAA,EACxCf,MAAM;AAAA,EACNC,UAAU,CAAC,QAAQ,cAAc,QAAA;AAAA,EACjCC,YAAY,EACVpG,QAAQ,EAAEkG,MAAM,WAAWG,SAAS,EACpCpG,GAAAA,YAAY,EAAEiG,MAAM,SAASme,UAAU,GAAGC,UAAU,EACpDxkB,GAAAA,MAAM;AAAA,IACJoG,MAAM;AAAA,IACNI,MAAM,CACJ,GAAG,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KACpE,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK;;EAI9Cud,sBAAsB;AAAA,CAAA,GJaXme,KACX/qC,CAAAA,OAEO8qC,GAAW9qC,EAGdgrC,GAAAA,KAAWp7B,GAAII,QIvDmB;AAAA,EACtCf,MAAM;AAAA,EACNC,UAAU,CAAC,QAAQ,cAAc,QAAA;AAAA,EAEjCC,YAAY,EACVtG,MAAM,EACJoG,MAAM,WACNI,MAAM,CAAC,KAAK,KAAK,KAAK,KAAK,KAAK,GAAA,EAAA,GAIlCtG,QAAQ,EAAEkG,MAAM,WAAWG,SAAS,EAAA,GACpCpG,YAAY;AAAA,IACViG,MAAM;AAAA,IACNme,UAAU;AAAA,IACVC,UAAU;AAAA,IACV/d,OAAO,CAAC,EAAEL,MAAM,SAAA,CAAA;AAAA,EAAA,EAAA;AAAA,EAGpB2d,sBAAsB;AAAA,CAAA,GJqCXqe,KACX3D,CAAAA,OAEO0D,GAAS1D,EAAAA,GAGZ4D,KAAat7B,GAAII,QKlEyB,EAC9Cf,MAAM,UACNE,YAAY,EACVtG,MAAM,EAAEoG,MAAM,UAAUy7B,OAAO,IAC/B3hC,GAAAA,QAAQ;AAAA,EAAEkG,MAAM;AAAA,EAAWG,SAAS;AACpCpG,GAAAA,YAAY,EACViG,MAAM,SACNme,UAAU,GACVC,UAAU,GACV/d,OAAO,CAAC,EAAEL,MAAM,UAAUG,SAAS,GAAGme,SAAS,EAAA,CAAA,EAAA,EAAA,GAGnDre,UAAU,CAAC,QAAQ,UAAU,YLuDlBi8B,EAAAA,CAAAA,GAAAA,KACXnrC,CAAAA,OAEOkrC,GAAWlrC,EAGdorC,GAAAA,KAAcx7B,GAAII,QMzEY;AAAA,EAClCf,MAAM;AAAA,EACNE,YAAY,EACVtG,MAAM,EAAEoG,MAAM,UAAUy7B,OAAO,IAC/B3hC,GAAAA,QAAQ,EAAEkG,MAAM,WAAWG,SAAS,EACpCpG,GAAAA,YAAY,EACViG,MAAM,SACNme,UAAU,GACVC,UAAU,GACV/d,OAAO,CACL,EAAEL,MAAM,SAASK,OAAO,EAAEL,MAAM,SAChC,EAAA,GAAA;AAAA,IAAEA,MAAM;AAAA,EAAA,GACR,EAAEA,MAAM,UACR,GAAA,EAAEA,MAAM,UAAA,GACR,EAAEA,MAAM,UAIdC,CAAAA,EAAAA,EAAAA;AAAAA,EAAAA,UAAU,CAAC,QAAQ,UAAU,YAAA;AAAA,CAAA,GNwDlBm8B,KACXrrC,CAAAA,OAEOorC,GAAYprC,EAAAA,GAGfsrC,KAAiB17B,GAAII,QOhFa;AAAA,EACtCf,MAAM;AAAA,EACNE,YAAY,EACVtG,MAAM;AAAA,IAAEoG,MAAM;AAAA,IAAUy7B,OAAO;AAAA,EAC/B3hC,GAAAA,QAAQ,EAAEkG,MAAM,WAAWG,SAAS,EAAA,GACpCpG,YAAY,EACViG,MAAM,SACNme,UAAU,GACVC,UAAU,GACV/d,OAAO,CACL,EAAEL,MAAM,UACR,GAAA,EAAEA,MAAM,SAAA,CAAA,EAAA,EAAA;AAAA,EAIdC,UAAU,CAAC,QAAQ,UAAU,YAAA;AAAA,CAAA,GPkElBq8B,KACXvrC,CAAAA,OAEOsrC,GAAetrC,EAAAA,GAGlBwrC,KAAc57B,GAAII,QQvFmB,EACzCf,MAAM,UACNE,YAAY,EACVtG,MAAM,EAAEoG,MAAM,UAAUy7B,OAAO,IAAA,GAC/B3hC,QAAQ,EAAEkG,MAAM,WAAWG,SAAS,EAAA,GACpCpG,YAAY;AAAA,EACViG,MAAM;AAAA,EACNme,UAAU;AAAA,EACVC,UAAU;AAAA,EACV/d,OAAO,CACL,EAAEL,MAAM,SACR,GAAA,EAAEA,MAAM,SAAA,CAAA;AAAA,EAAA,GAIdC,UAAU,CAAC,QAAQ,UAAU,YAAA,EAAA,CAAA,GRyElBu8B,KACXzrC,CAAAA,OAEOwrC,GAAYxrC,EAAAA,GAGf0rC,KAAc97B,GAAII,QS9FmB;AAAA,EACzCf,MAAM;AAAA,EACNC,UAAU,CAAC,QAAQ,cAAc,QACjCC;AAAAA,EAAAA,YAAY,EACVtG,MAAM,EAAEoG,MAAM,WAAWy7B,OAAO,IAChC3hC,GAAAA,QAAQ,EAAEkG,MAAM,WAAWG,SAAS,EAAA,GACpCpG,YAAY,EACViG,MAAM,SACNK,OAAO,CACL,EAAEL,MAAM,SACR,GAAA;AAAA,IAAEA,MAAM;AAAA,IAAWG,SAAS;AAAA,IAAG8d,SAAS;AAAA,EAAA,GACxC,EAAEje,MAAM,WAAWG,SAAS,GAAG8d,SAAS,EAAA,GACxC,EAAEje,MAAM,WAAWG,SAAS,GAAG8d,SAAS,EAAA,GACxC,EAAEje,MAAM,SAAA,CAAA,GAGVme,UAAU,GACVC,UAAU,EAAA,EAAA;AT8EHse,CAAAA,GAAAA,KACX3rC,CAAAA,OAEO0rC,GAAY1rC,EAAAA,GUjFR4rC,KACXtE,CAAAA,OAEOuD,GAAevD,EpJ2CA,KAAA,QoJ3CYA,GAAQz+B,MAG/BgjC,KACXvE,CAAAA,OAEOuD,GAAevD,OpJ0CA,QoJ1CYA,GAAQz+B,MAG/BijC,KACXxE,CAAAA,OAEOuD,GAAevD,EAAAA,KpJsCD,QoJtCaA,GAAQz+B,MAG/BkjC,KACXzE,CAAAA,OAEOuD,GAAevD,EpJiCD,KAAA,QoJjCaA,GAAQz+B,MAG/BmjC,KACX1E,CAAAA,OAEOuD,GAAevD,OpJlBS,QoJkBGA,GAAQz+B,MAG/BojC,KACX3E,CAAAA,OAEOuD,GAAevD,EAAAA,KpJvBS,QoJuBGA,GAAQz+B,MAG/BqjC,KACX5E,CAAAA,OAEOuD,GAAevD,EpJtBQ,KAAA,QoJsBIA,GAAQz+B,MCzC/BsjC,KACX7E,CAAAA,OAEO2D,GAAkB3D,OrJnBM,QqJmBMA,GAAQz+B,MAGlCujC,KACX9E,CAAAA,OAGE2D,GAAkB3D,EAAAA,KrJpBkB,QqJoBNA,GAAQz+B,MAI7BwjC,KACX/E,CAAAA,OAEO2D,GAAkB3D,OrJ1BC,QqJ0BWA,GAAQz+B,MAGlCyjC,KACXhF,CAAAA,OAEO2D,GAAkB3D,EAAAA,KrJ/BC,QqJ+BWA,GAAQz+B,MAGlC0jC,KACXjF,CAAAA,OAEO2D,GAAkB3D,ErJwEA,KAAA,QqJxEYA,GAAQz+B,MAGlC2jC,KACXlF,CAAAA,OAEO2D,GAAkB3D,OrJmEK,QqJnEOA,GAAQz+B,MCrDlC4jC,KAAmB,OACnBC,KAAkB,MAClBC,KAAkB,MAClBC,KAAmB,OCHnBC,KAAyB,gBACzBC,KAAyB,gBACzBC,KAAsB,cACtBC,KAAqB,WACrBC,KAAmB,SACnBC,KAAwB,cACxBC,KAAsB,YACtBC,KAAuB,aACvBC,KAAwB,cACxBC,KAAoB,UACpBC,KAAsB,YACtBC,KAAqB,WACrBC,KAAqB,WCZrBC,KAAkB,eAClBC,KAAkB,eAClBC,KAAmB,gBACnBC,KAAkB,eAClBC,KAAiB,cACjBC,KAAmB,gBACnBC,KAAkB,eAClBC,KAAmB,gBACnBC,KAAkB,eAClBC,KAAkB,eAClBC,KAAsB,mBACtBC,KAAmB,iBACnBC,KAAyB,qBACzBC,KAAqB,iBCbrBC,KAAc,QACdC,KAAa,OACbC,KAAe,SACfC,KAAY,MCAZC,KAAoB,CAC/B5uC,IACA6uC,QAEC;AAAA,EACC5/B,MAAM;AAAA,EACNK,OAAOu/B;AAAAA,EACJC,GAAAA,GAAU9uC;KACV+uC,GAAY/uC,GAAKutB,OAMXuhB;AAAAA,IAAAA,KACXhmC,CAAAA,QAII,EAAA,GACsB,YAAfA,OAAAA,GAAMjK,OAAoB,EAAE4S,OAAO3I,GAAMjK,KAAAA,IAAS,CAAC,GAAA,GACpC,YAAfiK,OAAAA,GAAMqhB,OAAoB,EAAEpU,aAAajN,GAAMqhB,KAAAA,IAAS,CAAA,EAAA,IAMxD4kB,KACXntB,CAAAA,OAAAA,WAKQA,KAAsB;AAAA,EAAE2L,SAAS3L;AAAU,IAAA,CAAC,GC1BhDotB,KAAiBC,CAAAA,kBACdA,MAAiC,MAAVA,ICM1BC,KACJlvC,CAAAA,OACG4uC,GAAkB5uC,IAAM,EAAEiP,MAAM,SAMxBkgC,CAAAA,GAAAA,KAAyBnvC,CAAAA,OACpC;AAAA,UAAQA,GAAK6R,MAAAA;AAAAA,IACX,KAAK;AAAA,IACL,KAAK;AACH,cCrBJ7R,CAAAA,QAC4B;AAAA,QAC5BiP,MAAM;AAAA,QAAA,GACH6/B,GAAU9uC,EAAAA;AAAAA,QAAAA,GACV+uC,GAAY/uC,GAAKutB,OAAAA;AAAAA,MDiBT6hB,IAAmBpvC,EAC5B;AAAA,IAAA,KAAK;AAAA,IAEL,KAAK;AACH,cEzBJA,CAAAA,QAC4B,EAC5BiP,MAAM,UAAA,GACH8/B,GAAY/uC,GAAKutB,aACjBuhB,GAAU9uC,EAAAA,EAAAA,IFqBgBA,EAAAA;AAAAA,IAC3B,KAAK;AACH,cG3BJA,CAAAA,QAC4B,EAC5BiP,MAAM,UACH8/B,GAAAA,GAAY/uC,GAAKutB,OAAAA,GAAAA,GACjBuhB,GAAU9uC,EAAAA,GAAAA,GACTA,GAAKsS,UAAU;AAAA,QAAEjD,MAAMrP,GAAKsS,QAAQ1T,IAAKywC,CAAAA,OAAcA,GAAEztB,KAAW;AAAA,MAAA,IAAA,CAAA,EHsB7D0tB,IAAmBtvC,EAC5B;AAAA,IAAA,KAAK;AAAA,IAEL,KAAK;AAAA,IACL,KAAK;AACH,aAAOkvC,GAAqBlvC,EAAAA;AAAAA,IAC9B,KAAK;AACH,cDrBJA,CAAAA,QAC8B,EAC9BiP,MAAM,SACNK,OAAO;AAAA,QACLL,MAAM+/B,GAAchvC,GAAKuvC,QAAAA,IAAY,YAAY;AAAA,MAAA,GAAA,GAEhDR,GAAY/uC,GAAKutB,OAAAA,GAAAA,GACjBuhB,GAAU9uC,EAAAA,EAAAA,ICcsBA,EAAAA;AAAAA,IACjC,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AACH,cA9BJA,CAAAA,OACG4uC,GAAkB5uC,IAAM,EAAEiP,MAAM,UAAA,CAAA,GA6BHjP,EAAAA;AAAAA,IAC9B,KAAK;AACH,cDxCJA,CAAAA,QAC4B,EAC5BiP,MAAM+/B,GAAchvC,GAAKuvC,YAAY,YAAY,UAAA,GAC9CR,GAAY/uC,GAAKutB,OACjBuhB,GAAAA,GAAAA,GAAU9uC,ECoCFwvC,EAAAA,IAAmBxvC;IAC5B,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AACH,cIxDyBA,CAAAA,QAC5B,EACCiP,MAAM,WACH8/B,GAAAA,GAAY/uC,GAAKutB,OAAAA,GAAAA,GACjBuhB,GAAU9uC,EAAAA,EAAAA,IJoDWA,EAAAA;AAAAA,IACxB,KAAK;AACH,cKvDJA,CAAAA,QAC6B,EAC7BiP,MAAM,WAAA,GACH8/B,GAAY/uC,GAAKutB,OACjBuhB,GAAAA,GAAAA,GAAU9uC,ELmDFyvC,EAAAA,IAAoBzvC,EAC7B;AAAA,IAAA,KAAK;AACH,aMzDsE,EAC1E0vC,MAAM,kBADsBC,KNyDH3vC,IMxDE4vC,MAAAA,IAAAA,GACxBd,GAAUa,EAAAA,EAAAA;AAAAA,INwDX;AACE,aAAO,CAAC;AAAA,EAAA;AM3De,MAACA;GCHjBE,KAAoB,CAC/BC,IACAC,OAIOjM,OAAOC,QAAQgM,EAAS3qB,EAAAA,OAAO,CAACC,IAAMpD,CAAAA,IAAKiM;AAChD,MAAIjM,MAAO6tB,IAAQ;AACX,UAAAluB,KAAQkuB,GAAO7tB,EAAAA;AACjB,QAAiB,YAAVL,OAAAA,GACF,QAAA,EACFyD,GAAAA,IACHpD,CAACA,EAAMiM,GAAAA,GAAGtM;EAEd;AAEK,SAAAyD;GACN,KAGQ2qB,KAAe,CAC1Bn+B,IACAo+B,IACAH,IACAC,QAOO;AAAA,EACLxiB,SAAS0iB;AAAAA,EAAAA,GACNJ,GAAkBC,IAAQC,EAC7Bl+B;AAAAA,EAAAA,MAAAA;IAISq+B,KAAoB,CAI/Br+B,IACAi+B,IACAC,QAOO,EACLxiB,SAAS,CACNsiB,GAAAA,GAAAA,GAAkBC,IAAQC,EAAAA,GAC7Bl+B,MC3DSs+B,GAAAA,IAAAA,KAAe,QAGfC,KAAe,QAKfC,KAAe,QAuBfC,KAAiB,UClCjBC,KAAiBC,CAAAA,OACtB;AAAA,QAAAC,KAASC,KAAKC,MAAMH,EAAAA;AACtB,SAAAvxC,MAAM2xC,QAAQH,EACTA,IAAAA,GAAO7xC,IAAIiyC,EAAAA,IAEE,YAAXJ,OAAAA,MAAkC,SAAXA,KACzB3M,OAAOgN,YACZhN,OAAOC,QAAQ0M,EAAAA,EAAQ7xC,IAAI,CAAA,CAAEmyC,IAAGC,EAAAA,MAAO,CAACD,IAAGF,GAAeG,EAAAA,CAAAA,CAAAA,CAAAA,IAGvDP;AAGHI,GAAAA,KAAkBjvB,CAAAA,OAClB;AAAA,MAAiB,YAAVA,OAAAA,GACF,QAAAA;AAEL,MAAA;AACI,UAAA6uB,KAASC,KAAKC,MAAM/uB,EAAAA;AAEtB,WAAA3iB,MAAM2xC,QAAQH,EACTA,IAAAA,GAAO7xC,IAAIiyC,EAGE,IAAA,YAAA,OAAXJ,MAAkC,SAAXA,KACzB3M,OAAOgN,YACZhN,OAAOC,QAAQ0M,EAAQ7xC,EAAAA,IAAI,CAAEmyC,CAAAA,IAAGC,QAAO,CAACD,IAAGF,GAAeG,EAAAA,CAAAA,CAAAA,CAAAA,IAGvDP;AAAAA,EAAA,QACD;AAEC,WAAA7uB;AAAAA,EAAA;GCJEqvB,KACXnB,CAAAA,OAAAA;AAEI,MAAAM,MAAgBN,GAAOoB,MAAM;AAC/B,UAAMC,KAAOC,GAAOtB,GAAOoB,KAAKr/B,IAAAA;AAChC,QAAIs/B,GACF,QAAOA,GAAKrB,EACd;AAAA,EAAA;AAEF,SAAOE,GAAa,OAAO,IAAIF,GAAOoB,MAAMG,EAAAA;AAGxCC,GAAAA,KAAc1vB,CAAAA,OAA0BA,IACxC2vB,KAAe3vB,CAAAA,OACHA,GACboN,QAAQ,KAAK,EACbA,EAAAA,QAAQ,KAAK,EAAA,EACbwiB,MAAM,GAAA,EACN5yC,IAAKoyC,CAAAA,OAAMS,WAAWT,GAAEjtB,WAAW,KAAK,EAAA,EAAI2tB,KAChC7xC,CAAAA,CAAAA,EAAAA,OAAQ8xC,CAAAA,QAAOnf,MAAMmf,EAAAA,CAAAA,GAGhCN,KAAS;AAAA,EACb9jB,SAAS+jB;AAAAA,EACTzyC,MAAMyyC;AAAAA,EACNnnB,MAAMmnB;AAAAA,EACNM,QAAQN;AAgEJO,GAAAA,KAAsB/B,CAAAA,OACnBE,GAAa,UAAU,IAAIF,GAAOoB,MAAMG,EAG3CS,GAAAA,KACJhC,CAAAA,OAEA;AAAA,QAAMiC,KAAe,EACnBxkB,SAAU3L,CAAAA,OAA4B2uB,GAAc3uB,EAAAA,GACpD/iB,MAAMyyC,IACNnnB,MAAMmnB,IACNM,QAAQN;AAEV,SAAOpB,GAAkB,YAAYJ,GAAOoB,MAAMa;GA+B9CC,KAAqB,CAGzBlC,IACAj+B,OAAAA;AAEA,QAAMogC,KAAgB;AAAA,IACpB1kB,SAASgkB;AAAAA,IACT1yC,MAAMyyC;AAAAA,IACNnnB,MAAMmnB;AAAAA,IACNM,QAAQN;AAAAA;AAEV,SAAOpB,GAAkBr+B,IAAMi+B,GAAOoB,MAAMe,EAGxCC;AAAAA,GAAAA,KAAgB,CACpBpC,IACAj+B;AAEA,QAAMsgC,KAAU,EACd5kB,SAAU3L,CAAAA,OAAkBviB,SAASuiB,IAAO,EAAA,GAC5C/iB,MAAMyyC,IACNnnB,MAAMmnB,IACNM,QAAQN;AAEV,SAAOtB,GAAan+B,IAAM,GAAGi+B,GAAOoB,MAAMiB,EAAAA;AAAAA,GAGtCf,KAAS;AAAA,EACbgB,QAAStC,CAAAA,QArGiBA,CAAAA,OAAAA;AAC1B,UAAMuC,KAAS;AAAA,MACb9kB,SAAU3L,CAAAA,OAAkB6vB,WAAW7vB,EACvC/iB;AAAAA,MAAAA,MAAMyyC;AAAAA,MACNnnB,MAAMmnB;AAAAA,MACN/B,UAAW3tB,CAAAA,OAAkBviB,SAASuiB,IAAO,EAAA;AAAA,MAC7CwjB,KAAMxjB,CAAAA,OAAkB6vB,WAAW7vB,EACnCyjB;AAAAA,MAAAA,KAAMzjB,CAAAA,OAAkB6vB,WAAW7vB,EACnCgwB;AAAAA,MAAAA,QAAQN;AAAAA;AAEV,WAAOtB,GAAa,UAAU,GAAGF,GAAOoB,MAAMmB,EA2F1BC;AAAAA,EAAAA,GAAmBxC;EACvC,YAxFAA,CAAAA,OAAAA;AAEA,UAAMyC,KAAe,EACnBhlB,SAASgkB,IACT1yC,MAAMyyC,IACNnnB,MAAMmnB,IACN/B,UAAW3tB,CAAAA,OAAkBviB,SAASuiB,IAAO,KAC7CwjB,KAAMxjB,CAAAA,OAAkB6vB,WAAW7vB,EAAAA,GACnCyjB,KAAMzjB,CAAAA,OAAkB6vB,WAAW7vB,EAAAA,GACnCgwB,QAAQN,GAEV;AAAA,WAAOpB,GAAkB,YAAYJ,GAAOoB,MAAMqB,EA8ElDC;AAAAA,EAAAA;AAAAA,EAAAA,QAAQX;AAAAA,EACR,YAAYC;AAAAA,EACZW,kBAAkBZ;AAAAA,EAClB,sBAAsBC;AAAAA,EACtBY,OA5IyB5C,CAAAA,OAAAA;;AACnB,UAAA6C,OAAmB7C,MAAAA,GAAOx9B,YAAPw9B,gBAAAA,IAAgBlxC,IAAKywC,CAAAA,OAAMA,GAAEsD,YAAW,CAE1D;AAAA,WAAA,EACF3C,GAAAA,GAAa,SAAS,IAAIF,GAAOoB,MAAMG,EAAAA,GAC1C/+B,SAASqgC,GAAAA;AAAAA,EAAAA;AAAAA,EAwIXC,QArI0B9C,CAAAA,OAAAA;;AAC1B,UAAMx9B,OACJw9B,MAAAA,GAAOx9B,YAAPw9B,gBAAAA,IAAgBlxC,IAAKywC,CAAAA,QAAO,EAC1BsD,QAAQtD,GAAEsD,QACV/wB,OAAOytB,GAAEztB,MAAAA,QACJ;AAEF,WAAA,EAAA,GACFouB,GAAa,UAAU,IAAIF,GAAOoB,MAAMG,EAAAA,GAC3C/+B,SA6HF9S,GAAAA;AAAAA,EAAAA;AAAAA,EAAAA,OAAQswC,CAAAA,OAAWoC,GAAcpC,IAAQ,OAAA;AAAA,EACzC,WAAYA,CAAAA,OAAWkC,GAAmBlC,IAAQ,SAAA;AAAA,EAClD99B,OAAQ89B,CAAAA,OAAWoC,GAAcpC,IAAQ,OAAA;AAAA,EACzC,WAAYA,CAAAA,OAAWkC,GAAmBlC,IAAQ,SAAA;AAAA,EAClDt+B,OAAQs+B,CAAAA,OAAWoC,GAAcpC,IAAQ;EACzC,WAAYA,CAAAA,OAAWkC,GAAmBlC,IAAQ,SAClD59B;AAAAA,EAAAA,MAAO49B,CAAAA,OAAWoC,GAAcpC,IAAQ,MACxC;AAAA,EAAA,UAAWA,CAAAA,OAAWkC,GAAmBlC,IAAQ,QAAA;AAAA,EACjD39B,QAAS29B,CAAAA,OAAWoC,GAAcpC,IAAQ,QAAA;AAAA,EAC1C,YAAaA,CAAAA,OAAWkC,GAAmBlC,IAAQ,UACnD/9B;AAAAA,EAAAA,OAAQ+9B,CAAAA,OAAWoC,GAAcpC,IAAQ,OAAA;AAAA,EACzC,WAAYA,CAAAA,OAAWkC,GAAmBlC,IAAQ,SAClDh+B;AAAAA,EAAAA,OAAQg+B,CAAAA,OAAWoC,GAAcpC,IAAQ,OAAA;AAAA,EACzC,WAAYA,CAAAA,OAAWkC,GAAmBlC,IAAQ,SAClD79B;AAAAA,EAAAA,OAAQ69B,CAAAA,OAAWoC,GAAcpC,IAAQ,OAAA;AAAA,EACzC,WAAYA,CAAAA,OAAWkC,GAAmBlC,IAAQ,SAAA;AAAA,EAClD+C,cAAe/C,CAAAA,OAAWoC,GAAcpC,IAAQ,cAAA;AAAA,EAChD,kBAAmBA,CAAAA,OAAWkC,GAAmBlC,IAAQ,gBAAA;AAAA,EACzDgD,QAAShD,CAAAA,OAAWoC,GAAcpC,IAAQ,QAC1C;AAAA,EAAA,YAAaA,CAAAA,OAAWkC,GAAmBlC,IAAQ,UAAA;AAAA,EACnDiD,UAAWjD,CAAAA,OAAWoC,GAAcpC,IAAQ,UAAA;AAAA,EAC5C,cAAeA,CAAAA,OAAWkC,GAAmBlC,IAAQ,YACrDkD;AAAAA,EAAAA,OAAQlD,CAAAA,OAAWoC,GAAcpC,IAAQ,OACzC;AAAA,EAAA,WAAYA,CAAAA,OAAWkC,GAAmBlC,IAAQ,SAAA;AAAA,EAClDmD,SAjJ2BnD,CAAAA,OAAAA;AAC3B,UAAMoD,KAAU;AAAA,MACd3lB,SAAU3L,CAAAA,OAA4B,WAAVA;AAAAA,MAC5B/iB,MAAMyyC;AAAAA,MACNnnB,MAAMmnB;AAAAA,MACN6B,IAAI7B;AAAAA,MACJ8B,KAAK9B;AAAAA,MACLM,QAAQN;AAAAA,IAAAA;AAEV,WAAOtB,GAAa,WAAA,MAAiBF,GAAOoB,MAAMgC,EAyIlDxV;AAAAA,EAAAA;AAAAA,EAAAA,MA1FwBoS,CAAAA,OACxB;AAAA,UAAMuD,KAAO,EACX9lB,SAAS+jB,IACTzyC,MAAMyyC,IACNnnB,MAAMmnB,IACNM,QAAQN,IACRgC,KAAKhC,GAEA;AAAA,WAAA,EACLgC,KAAK,OACFtD,GAAa,QAAQ,IAAIF,GAAOoB,MAAMmC;;EAiF3C,UA7E6BvD,CAAAA,OAAAA;AAC7B,UAAMyD,KAAa,EACjBhmB,SAAU3L,CAAAA,OAA4B2uB,GAAc3uB,EAAAA,GACpD/iB,MAAMyyC,IACNnnB,MAAMmnB,IACNM,QAAQN,IACRgC,KAAKhC,GAEA;AAAA,WAAA,EACLgC,KAAK,IACFpD,GAAAA,GAAkB,UAAUJ,GAAOoB,MAAMqC,ECjI1CC,EAAAA;AAAAA,EAAAA;AAAAA,GAAAA,KAAa,QACbC,KAAe,UAEfC,KAAa,QAyCbC,KAAoB,CACxB7hC,IACA8hC,OAAAA;AAEA,QAAMC,KAAU/hC,GAAMm2B,MAAM1jB,SAAS,IAAIuvB,GAAehiC,EAAAA,IAASA,IAE3DiiC,KAAaH,GAAY,CAAM,KAAA;AAC9B,SAAA,EAAA,GACFC,IACHE,YACAC,IAAAA,WAAWD,KAAaN,KApDN,WAqDlBvb,QAAQ0b,GAAY,CACpB3L,GAAAA,OAAO;GAILgM,KAAoBniC,CAAAA,QAEjB;AAAA,EADSA,GAAAA,GAAMm2B,MAAM1jB,SAAS,IAAIuvB,GAAehiC,EAAAA,IAASA;AAAAA,EAG/DkiC,WAAWR;AAAAA,EACXO,YAAAA;AAAAA,EACA7b,QAAAA;AAAAA,EACA+P,OAAO,CAGL6L;AAAAA,IAAAA,KAAkBhiC,CAAAA,OAClBA,GAAMkiC,cAAcR,KACf,EACF1hC,GAAAA,IACHoiC,QAAQpiC,GAAMoiC,OAAOC,OAAO,CAAC,EAAElM,OAAO,CAAIn2B,GAAAA,GAAMm2B,YAChDA,OAAO,CAAA,GACP+L,WAAWN,GAAAA,IAIX5hC,GAAMiiC,cAAcjiC,GAAMkiC,cAAcP,KACnC;AAAA,EACF3hC,GAAAA;AAAAA,EACHsiC,SAAStiC,GAAMsiC,QAAQD,OAAO,CAC5B,EACEvE,QAAQ99B,GAAMiiC,YACd7b,QAAQpmB,GAAMomB,QACd+P,OAAO,CAAA,GAAIn2B,GAAMm2B,KAAAA,EAAAA,CAAAA,CAAAA;AAAAA,EAGrB+L,WAAWN;AAAAA,EACXK,YAAY;AAAA,EACZ7b,QAAQ;AAAA,EACR+P,OAAO,CAAA;AAAA,IAIJ;AAAA,EACFn2B,GAAAA;AAAAA,EACHkiC,WAAWN;AAAAA,EACXK,YAAY;AAAA,EACZ9L,OAAO,CCjGEoM;AAAAA,GAAAA,KAAmBviC,CAAAA,OAC1BA,GAAMwiC,gBACD,EACLhlC,OAAOwC,GAAMxC,MAAM6kC,OAAO,EACxBxB,QAAQ7gC,GAAMwiC,eACd1yB,OAAO9P,GAAMwiC,cAIZxiC,CAAAA,EAAAA,IAAAA,ICtCIg9B,KAAaxH,CAAAA,QACjB;AAAA,EACuB,GAAA,YAAA,OAAjBA,GAAQnd,OAAoB,EAAEA,MAAMmd,GAAQnd,KAAAA,IAAS,CAAC;AAAA,EACrC,GAAA,YAAA,OAAjBmd,GAAQzoC,OAAoB,EAAEA,MAAMyoC,GAAQzoC,KAAS,IAAA,CAAA;AAIvD01C,IAAAA,KAAoBziC,CAAAA,OAEzB;AAAA,QAAA0iC,KAAIC,GAAoB3iC,KAExB4iC,KAAIC,GAAoBH,EAE9B;AAAA,SAAOI,GAAkBF,EAAAA;AAAAA,GAGrBD,KAAuB3iC,CAAAA,OAAAA;AACvB,MAAAA,GAAM+iC,gBAAgB/iC,GAAMwiC,eAAe;AACvC,UAAAziC,KAAOC,GAAM+iC,aAAa3D,KAAKr/B;AACjC,QAAS,aAATA,MAA8B,YAATA,GAChB,QAAA,EACFC,GAAAA,IACH+iC,cAAc,EAAA,GACT/iC,GAAM+iC,cACTviC,SAAS+hC,GAAgBviC,GAAMwiC,aAAehlC,EAAAA,MAAAA,EAAAA;AAAAA,EAGpD;AAEK,SAAAwC;GAGH8iC,KAAqB9iC,CAAAA,OACrBA,GAAM+iC,eACD;AAAA,EACF/iC,GAAAA;AAAAA,EACHkB,QAAQ,CAAIlB,GAAAA,GAAMkB,QAAQlB,GAAM+iC;EAChCA,cAAc;AAAA,EACdC,gBAAgB;AAAA,IAGbhjC,IAGH6iC,KAAuB7iC,CAAAA,OAC3B;AAAA,MAAIA,GAAMijC,gBAAgB;AACxB,UAAMC,KAAUljC,GAAM+iC,eAClB,CAAI/iC,GAAAA,GAAMijC,eAAeE,MAAMnjC,GAAM+iC,YACrC/iC,IAAAA,GAAMijC,eAAeE,MACnBC,KAAkC,EACnCpG,GAAAA,GAAUh9B,GAAMijC,cAAAA,GACnBzN,SAASx1B,GAAMijC,eAAezN,SAC9B2N,MAAMD,GAED;AAAA,WAAA;AAAA,MACFljC,GAAAA;AAAAA,MACHstB,UAAU,CAAA,GAAIttB,GAAMstB,UAAU8V,EAC9BH;AAAAA,MAAAA,gBAAgB;AAAA,MAChBF,cAAc;AAAA,MACdC,gBAAgB;AAAA,MAChBR,eAAe;AAAA,IAAA;AAAA,EACjB;AAEK,SAAAxiC;AAAAA,GCnBHqjC,KAAiB,CACrBC,IACAC,OAAAA;AAEA,QAAMvjC,KAAQsjC,GAAKnN,MAAM7iB,OAAmB,CAACC,IAAK6iB,OAAAA;AAChD,UAAMoN,KAAUpN,GAAKwJ,KAAO1iB,EAAAA,QAAQ,UAAU,EAC9C;AAAA,QAAA,CAAKsmB,GAAQC,WAAW,GAAA,EAClB,QAAAlwB,GAAIyvB,mBAAmB3E,KAElB,EAAK9qB,GAAAA,IAAKmwB,WAAWnwB,GAAImwB,UAAUrB,OAAOmB,EAG5CjwB,EAAAA,IAAAA;AAGH,UAAA,CAACowB,OAAQC,EAAQJ,IAAAA,GAAQzwB,MAAM,CAAG2sB,EAAAA,MAAM,MACxC5vB,KAAQ8zB,GAAK/xB,KAAK,GAAK+tB,EAAAA,KAAAA,GACvBxjB,KAAKmnB,GAAMI,EAAAA;AAEjB,WAAIvnB,KACKA,GAAG7I,IAAKzD,EAEVyD,IAAAA;AAAAA,EAAAA,GACNswB,GACH,CAAA;AAAA,SAAOpB,GAAiBziC,EAWpB8jC;AAAAA,GAAAA,KAAkB,CACtB/2C,IACAw2C,OAAAA;AAEM,QAAAQ,MHrDmBC,CAAAA;AACnB,UAAA7N,KAAQ6N,GAAMtE,MAAM,IAAA,GAEpBuE,KAA2B;AAAA,MAC/B3B,SAAS;MACTF,QAAQ,CAAA;AAAA,MACRH,YAAAA;AAAAA,MACA7b,QAAQ;AAAA,MACR+P,OAAO,CACP+L;AAAAA,MAAAA,WAAWN;AAAAA,OAGPsC,KAAa/N,GAAM7iB,OAAmB,CAACtT,IAAOo2B;AAC5C,YAAAoN,KAAUpN,GAAKwJ,KACfkC,GAAAA,KAAc0B,GAAQl2C,MAC1B,oDAAA;AAGF,aAAIw0C,KACKD,GAAkB7hC,IAAO8hC,MAElB,UAAZ0B,KACKrB,GAAiBniC,EAEV,IAAA,SAAZwjC,KACKxjC,GAAMm2B,MAAM1jB,SAAS,IAAIuvB,GAAehiC,EAASA,IAAAA,KAEnD,KACFA,IACHm2B,OAAOn2B,GAAMm2B,MAAMkM,OAAO,CAACmB,EAAAA,CAAAA,EAAAA;AAAAA,IAAAA,GAE5BS;AAEI,WAAA,EACL3B,SAAS4B,GAAW5B,SACpBF,QAAQ8B,GAAW9B,OAAAA;AAAAA,EAAAA,GGkBYr1C,EAC3Bu1C,GAAAA,KAAUyB,GAAOzB,QAAQx1C,IAAKq3C,CAAAA,QAbZb,CAAAA,OAAAA;AAClB,UAAAtjC,KAAQqjC,GAAeC,IAAMc,EAC5B;AAAA,WAAA,EACLz2C,MAAM21C,GAAKxF,QACX58B,QAAQlB,GAAMkB,OAS0BmjC;AAAAA,EAAAA,GAAiBF,MACrDb,MAhDSU,CAAAA;AACX,QAAwB,MAAxBA,GAAM5B,OAAO3vB,OAGV,QAAAuxB,GAAM5B,OAAO,CA4CPkC;AAAAA,EAAAA,GAAQP;AACrB,MAAKT,CAAAA,GACI,QAAA;AAAA,IACLpiC,QAAQ,CACRosB;AAAAA,IAAAA,UAAU;IACViX,MAAM,CAAC;AAAA,IACPb,WAAW,CAAA;AAAA,IACXpB,SAAAA;AAAAA,EAAAA;AAIE,QAAA4B,KAAab,GAAeC,IAAMC,EACjC;AAAA,SAAA,EACLriC,QAAQgjC,GAAWhjC,QACnBosB,UAAU4W,GAAW5W,UACrBiX,MAAML,GAAWK,MACjBb,WAAWQ,GAAWR,WACtBpB,SAAAA,GAAAA;AAAAA,GAIEuB,KAAiB,OAAmB;AAAA,EACxCH,WAAW,CACXxiC;AAAAA,EAAAA,QAAQ,CACRosB;AAAAA,EAAAA,UAAU;EACVyV,cAAc;AAAA,EACdE,gBAAgB;AAAA,EAChBD,gBAAgB;AAAA,EAChBR,eAAe;AAAA,EACfgC,cAAc,EACZC,MAAM,CAAA,GACNC,aAAa,CAAA,GACbC,YAAY,CAAA,EAAA;AAAA,EAEdJ,MAAM,CAAA;AAAA,IAwHFK,KAAgB,CACpB5kC,IACAmQ,IACAL,OAEI9P,GAAM+iC,gBACF5yB,EAAAA,MAAOnQ,GAAM+iC,aAAa3D,QACvB;AAAA,EACFp/B,GAAAA;AAAAA,EACH+iC,cAAc,EAAA,GACT/iC,GAAM+iC,cACT3D,MAAM,EAAKp/B,GAAAA,GAAM+iC,aAAa3D,MAAMjvB,CAACA,EAAML,GAAAA,GAAAA,EAAAA;AAAAA,IAK5C9P,IAGH6kC,KAAe,CACnB7kC,IACAmQ,IACAL,QAEO,EAAA,GACF9P,IACHukC,MAAM,EAAEp0B,CAACA,EAAAA,GAAML,OAAU9P,GAAMukC,KAAAA,EAAAA,IAI7BH,KAAqB;AAAA,EACzBptC,OA5IyB,CACzB8tC,IACAh1B,OAEM;AAAA,UAAA9P,KAAQyiC,GAAiBqC,EAAAA;AAE3B,WAAA9kC,GAAMkB,OAAO6jC,KAAMrC,CAAAA,OAAMA,GAAE/0C,SAASmiB,EAC/B9P,IAAAA,KAEF,EACFA,GAAAA,IACHgjC,gBNxIyB,SMyIzBD,cAAc,EAAEp1C,MAAMmiB,IAAOsvB,MAAM,CAAG,EAAA,EAAA;AAAA,EAAA;AAAA,EAiIxCryC,MA7HiB,CAACiT,IAAmB8P,OACjC9P,GAAM+iC,eACD6B,GAAc5kC,IAAOu+B,IAAczuB,EAAAA,IAExC9P,GAAMijC,kBAAAA,EACF1E,MAAgBv+B,GAAMijC,kBACnB,EACFjjC,GAAAA,IACHijC,gBAAgB;AAAA,IAAA,GACXjG,GAAUh9B,GAAMijC,cAAAA;AAAAA,IACnBzN,SAASx1B,GAAMijC,eAAezN;AAAAA,IAC9B2N,MAAMnjC,GAAMijC,eAAeE;AAAAA,IAC3B5E,CAACA,KAAezuB;AAAAA,EAKjB9P,EAAAA,IAAAA;AAAAA,EA6GPqY,MA1GiB,CAACrY,IAAmB8P,OACjC9P,GAAM+iC,eACD6B,GAAc5kC,INlKG,QMkKkB8P,EAAAA,IAExC9P,GAAMijC,iBACD,EACFjjC,GAAAA,IACHijC,gBAAgB,EAAA,GACXjjC,GAAMijC,gBACT5qB,MAAMvI,GAIL9P,EAAAA,IAAAA;AAAAA,EA8FPw1B,SA3F2B,CAC3BsP,IACAh1B,OAEM;AAAA,UAAA9P,KAAoByiC,GAAiBqC,EAAAA;AACvC,WAAA9kC,GAAMstB,SAASyX,KAAMnC,CAAAA,OAAMA,GAAEpN,YAAY1lB,EAAAA,IAEpC9P,KAEF,EAAA,GACFA,IACHijC,gBAAgB,EAAEzN,SAAS1lB,IAAOqzB,MAAM,CAAA,EAAA,GACxCJ,cAAc,KAAA;AAAA,EAAA;AAAA,EAgFhB3zC,KA5EuB,CAAC4Q,IAAmB8P,OAAAA;AACvC,SAAC9P,GAAMijC,eACF,QAAAjjC;AAET,QAAIA,GAAM+iC,cAAc;AACtB,YAAMiC,KAAuC;AAAA,WACxChI,GAAUh9B,GAAMijC;QACnBzN,SAASx1B,GAAMijC,eAAezN;AAAAA,QAC9B2N,MAAMnjC,GAAMijC,eAAeE,KAAKd,OAAOriC,GAAM+iC,YAAAA;AAAAA,MAAAA;AAExC,aAAA;AAAA,QACF/iC,GAAAA;AAAAA,QACHstB,UAAUttB,GAAMstB;AAAAA,QAChB2V,gBAAgB+B;AAAAA,QAChBhC,gBN5LqB;AAAA,QM6LrBD,cAAc,EACZp1C,MAAMmiB,IACNsvB,MAAM,CAAA,EAAA;AAAA,MAAA;AAAA,IAEV;AAEK,WAAA,EACFp/B,GAAAA,IACH+iC,cAAc,EACZp1C,MAAMmiB,IACNsvB,MAAM,CAAA,EAAA,EAAA;AAAA,EAAA;AAAA,EAoDV6F,MAzJyBH,CAAAA,QAElB,EADOrC,GAAAA,GAAiBqC,KAG7B9B,gBAAgB3E,GAAAA;AAAAA,EAsJlBwC,QC5P0B,CAAC7gC,IAAmB8P,OAAAA;AAC1C,QAAC9P,CAAAA,GAAM+iC,aACF,QAAA/iC;AAGT,UAAMklC,MHlBiB,CACvBllC,IACA6gC,OAEO7gC,GAAMwiC,gBACT,EACEhlC,OAAOwC,GAAMxC,MAAM6kC,OAAO,EACxBxB,QAAQ7gC,GAAMwiC,eACd1yB,OAAO9P,GAAMwiC,cAEfA,CAAAA,GAAAA,eAAe3B,GAEjB,IAAA,EACErjC,OAAOwC,GAAMxC,OACbglC,eAAe3B,GGIWsE,GAC9BnlC,GAAMwiC,iBAAiB;AAAA,MAAEhlC,OAAO,CAAA;AAAA,IAChCsS,GAAAA,EAAAA;AAGK,WAAA,EAAA,GACF9P,IACHwiC,eAAe0C,GDiPjBp1B;AAAAA,EAAAA;AAAAA,EAAAA,OC7OyB,CAAC9P,IAAmB8P,OACzC;AAAA,QAAA,CAAC9P,GAAMwiC,cACF,QAAAxiC;AAET,UAAMklC,MH9CgB,CAACllC,IAAqB8P,OACrC9P,GAAMwiC,gBACT,EACEhlC,OAAOwC,GAAMxC,MAAM6kC,OAAO,EACxBxB,QAAQ7gC,GAAMwiC,eACd1yB,OAGJiG,GAAA,CAAA,EAAA,IAAA;AAAA,MACEvY,OAAOwC,GAAMxC;AAAAA,IGqCa4nC,GAASplC,GAAMwiC,eAAe1yB;AACvD,WAAA,EAAA,GACF9P,IACHwiC,eAAe0C;;EDuOjB/nC,MAnDkB,CAAC6C,IAAmB8P,OAAAA;AAClC,SElOuBA,CAAAA,OACpBA,GAAMu1B,SAAS,QAAQv1B,GAAM2zB,WAAW,SFiO3C6B,GAAax1B,KAAQ;AACvB,YAAMmyB,KAAanyB,GAAMiD,MAAM,GAAG,EAAA,GAC5BwyB,KAAYX,GAAc5kC,IAAOw+B,IAAgByD,EAAAA;AAChD,aAAA2C,GAAcW,IAAWjH,IAAcE;IAAc;AAE9D,WAAIx+B,GAAM+iC,eACD6B,GAAc5kC,IAAOs+B,IAAcxuB,EAAAA,IAErC9P;AAAAA;EA2CPyb,SAAS,CAACzb,IAAO8P,OAAU80B,GAAc5kC,IN9QZ,WM8QoC8P,EAAAA;AAAAA,EACjEuxB,IAAI,CAACrhC,IAAO8P,OAAU80B,GAAc5kC,IN7QZ,MM6Q+B8P,EACvDwxB;AAAAA,EAAAA,KAAK,CAACthC,IAAO8P,OAAU80B,GAAc5kC,IN7QZ,OM6QgC8P;EACzDwjB,KAAK,CAACtzB,IAAO8P,OAAU80B,GAAc5kC,IN3QZ,OM2QgC8P,EAAAA;AAAAA,EACzDyjB,KAAK,CAACvzB,IAAO8P,OAAU80B,GAAc5kC,IN7QZ,OM6QgC8P,EAAAA;AAAAA,EACzD20B,MC5RwB,CAACzkC,IAAmB8P,OAAAA;AACrC,WAAA,EAAA,GAAK9P,IAAOwkC,eEEnBgB,KFF+CxlC,GAAMwkC,cEGrDC,KFHmE30B,IEK5D,EACL60B,YAAYa,GAAIb,YAChBD,aAAac,GAAId,aACjBD,MAAMe,GAAIf,KAAKpC,OAAOoC,EAAAA,EAAAA,GAAAA;AAPG,QAC3Be,IACAf;AAAAA,EAAAA;AAAAA,EHyRAE,YCzR8B,CAC9B3kC,IACA8P,OAEO;AAAA,WAAA,EACF9P,GAAAA,IACHwkC,eEeFgB,KFf8BxlC,GAAMwkC,cEgBpC1nC,KFhBkDgT,IEkB3C,EACL20B,MAAMe,GAAIf,MACVC,aAAac,GAAId,aACjBC,YAAYa,GAAIb,WAAWtC,OAAOvlC,EAAAA,EAAAA,GAAAA;AAPT,QAC3B0oC,IACA1oC;AAAAA,EHoQA4nC;AAAAA,EAAAA,aChR+B,CAC/B1kC,IACA8P;AAEO,WAAA;AAAA,SACF9P;AAAAA,MACHwkC,eENFgB,KFM+BxlC,GAAMwkC,cELrC1nC,KFKmDgT,IEH5C,EACL20B,MAAMe,GAAIf,MACVE,YAAYa,GAAIb,YAChBD,aAAac,GAAId,YAAYrC,OAAOvlC,EAPV,EAAA;AAAA,IAAA;AAAA,QAC5B0oC,IACA1oC;AAAAA,EAAAA;AAAAA,EHgRA+C,QAAQ,CAACG,IAAOwgB,OAAQqkB,GAAa7kC,INjST,UMiSgCwgB,EAAAA;AAAAA,EAC5DilB,YAAY,CAACtB,IAAG3jB,OAAQqkB,GAAaV,INnSL,cMmS4B3jB,EAC5DklB;AAAAA,EAAAA,KAAK,CAAC1lC,IAAOwgB,OAAQqkB,GAAa7kC,INjST,OMiS6BwgB,EItR3CmlB;AAAAA,GAAAA,KAAe54C,CAAAA,OACnB64C,IJqBmB74C,CAAAA,OACnB+2C,GAAgB/2C,IAAMq3C,EItBRvF,GAAM9xC,MAGvB64C,KAAiBC,CAAAA,QACd;AAAA,EACLtO,QAAQ;AAAA,EACRgN,MAAMsB,GAAatB;AAAAA,EACnBjX,UAAUwY,GAAeD,GAAavY,QACtCpsB;AAAAA,EAAAA,QAAQ6kC,GAAaF,GAAa3kC,MAAAA;AAIhC6kC,IAAAA,KACJ7kC,CAAAA,OAEOA,GAAOoS,OAA0C,CAACC,IAAKvc,QACrD,EACL,CAACA,GAAMrJ,IAAOwxC,GAAAA,GAAkBnoC,QAC7Buc,GAEJ,IAAA,KAGCuyB,KACJ9H,CAAAA,OAEOA,GAAO1qB,OAAO,CAACC,IAAKyyB,OAAAA;AACzB,QAAM1C,KAA0B,EAC9BjrB,MAAM2tB,GAAM3tB,MACZtrB,MAAMi5C,GAAMj5C,MACZo2C,MAAM4C,GAAaC,GAAM7C,IAEpB,EAAA;AAAA,SAAA,EACL,CAAC6C,GAAMxQ,UAAU8N,IACd/vB,GAAAA,GAAAA;AAEJ,GAAA,KC/CQ0yB,KAAsBl5C,CAAAA,OAC1B44C,GAAY54C,EAAAA,GAGRm5C,KACXhlC,CAAAA,QCEAA,CAAAA,OAEA;AAAA,QAAM7D,KAAa20B,OAAOC,QAAwB/wB,IAAQoS,OACxD,CAACC,KAAMpD,IAAKL,EAAAA,MAAAA;AACJ,UAAAkC,KAAwBqrB,GAAsBvtB,EAC7C;AAAA,WAAA,EACFyD,GAAAA,IACHpD,CAACA,EAAM6B,GAAAA,GAAAA;AAAAA,EAAAA,GAGX,CAAA,CAAA;AAEK,SAAA;AAAA,IACL7U,MAAM;AAAA,IACNE,YACAD;AAAAA,IAAAA,UAAU40B,OAAO9hB,KAAK7S,EAAAA;AAAAA,IACtByd,sBAAAA;AAAAA;GDhBuB5Z,EAAAA;"}
"use strict";var ne=Object.defineProperty;var oe=(e,a,r)=>a in e?ne(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r;var P=(e,a,r)=>oe(e,typeof a!="symbol"?a+"":a,r);const m=require("./make.cjs2.js"),ce=require("jsonpath-js"),ie=require("@sigureya/rmmz-plugin-schema"),R=require("./mergeItemsSource.cjs.js"),O=(e,a,r)=>e.reduce((t,s)=>(s.code!==m.CHANGE_ARMORS&&s.code!==m.CHANGE_ITEMS&&s.code!==m.CHANGE_WEAPONS||t.push(j(s,a,r)),t),[]),de={[m.CHANGE_WEAPONS]:"weapon",[m.CHANGE_ARMORS]:"armor",[m.CHANGE_ITEMS]:"item"},j=(e,a,r)=>{const t=e.parameters[3]===m.OPERAND_DIRECT?{direct:!0,value:e.parameters[2]}:{direct:!1,variableId:e.parameters[2]},s=e.parameters[0]===m.OPERATION_GAIN?a.gain:e.parameters[0]===m.OPERATION_LOSE?a.lose:a.unknown,o=typeof e.parameters[4]=="boolean"?{includesEquip:e.parameters[4]}:{};return{itemKind:de[e.code],dataId:e.parameters[1],code:e.code,commandNameMZ:r(e.code),operation:s,...o,...t}},pe=e=>!!e,V=(e,a)=>e.pages.map((r,t)=>a(r,t,e)),Y=(e,a)=>e.events.filter(pe).flatMap(r=>V(r,a)),le=e=>e.conditions.itemId>0&&e.conditions.itemValid?{pageCondition:{itemId:e.conditions.itemId}}:{},F=(e,a)=>{const r=e.trimEnd(),t=a.get(r);return t?t.trimEnd():r},i=(e,a)=>{const r=e.trimEnd(),t=a(r);return t?t.trimEnd():r},f=(e,a,r=`
`)=>m.replaceNote(e.note,t=>i(t.value,a),r),B=(e,a)=>{switch(e.code){case m.SHOW_MESSAGE:return ye(e,a);case m.SHOW_CHOICES:return he(e,a);case m.SHOW_MESSAGE_BODY:case m.COMMENT_HEAD:case m.COMMENT_BODY:case m.SHOW_SCROLLING_TEXT_BODY:return ue(e,a);case m.CHANGE_NAME:case m.CHANGE_NICKNAME:case m.CHANGE_PROFILE:return ge(e,a);default:return e}},ue=(e,a)=>{const r=i(e.parameters[0],a);return{code:e.code,indent:e.indent,parameters:[r]}},ye=(e,a)=>{const r=e.parameters[4]?i(e.parameters[4],a):"";return m.makeCommandShowMessage({facename:e.parameters[0],faceIndex:e.parameters[1],background:e.parameters[2],positionType:e.parameters[3],speakerName:r},e.indent)},ge=(e,a)=>{const r=i(e.parameters[1],a);return{code:e.code,indent:e.indent,parameters:[e.parameters[0],r]}},he=(e,a)=>{const r=e.parameters[0].map(t=>i(t,a));return{code:m.SHOW_CHOICES,indent:e.indent,parameters:[r,e.parameters[1],e.parameters[2],e.parameters[3],e.parameters[4]]}},L=(e,a)=>e.map(r=>B(r,a)),$=(e,a)=>({params:Ne(e.params,r=>i(r,a)),messages:Ee(e.messages,r=>i(r,a)),basic:Te(e.basic,r=>i(r,a)),commands:xe(e.commands,r=>i(r,a))}),Te=(e,a)=>[a(e[0]),a(e[1]),a(e[2]),a(e[3]),a(e[4]),a(e[5]),a(e[6]),a(e[7]),a(e[8]),a(e[9])],xe=(e,a)=>[a(e[0]),a(e[1]),a(e[2]),a(e[3]),a(e[4]),a(e[5]),a(e[6]),a(e[7]),a(e[8]),a(e[9]),a(e[10]),a(e[11]),a(e[12]),a(e[13]),a(e[14]),a(e[15]),a(e[16]),a(e[17]),a(e[18]),a(e[19]),"",a(e[21]),a(e[22]),"",a(e[24]),a(e[25])],Ne=(e,a)=>[a(e[0]),a(e[1]),a(e[2]),a(e[3]),a(e[4]),a(e[5]),a(e[6]),a(e[7]),a(e[8]),a(e[9])],Ee=(e,a)=>({actionFailure:a(e.actionFailure),actorDamage:a(e.actorDamage),actorDrain:a(e.actorDrain),actorGain:a(e.actorGain),actorLoss:a(e.actorLoss),actorNoDamage:a(e.actorNoDamage),actorNoHit:a(e.actorNoHit),actorRecovery:a(e.actorRecovery),alwaysDash:a(e.alwaysDash),autosave:a(e.autosave),bgmVolume:a(e.bgmVolume),bgsVolume:a(e.bgsVolume),buffAdd:a(e.buffAdd),buffRemove:a(e.buffRemove),commandRemember:a(e.commandRemember),counterAttack:a(e.counterAttack),criticalToActor:a(e.criticalToActor),criticalToEnemy:a(e.criticalToEnemy),defeat:a(e.defeat),debuffAdd:a(e.debuffAdd),emerge:a(e.emerge),enemyDamage:a(e.enemyDamage),enemyDrain:a(e.enemyDrain),enemyGain:a(e.enemyGain),enemyLoss:a(e.enemyLoss),enemyNoDamage:a(e.enemyNoDamage),enemyNoHit:a(e.enemyNoHit),enemyRecovery:a(e.enemyRecovery),escapeFailure:a(e.escapeFailure),escapeStart:a(e.escapeStart),evasion:a(e.evasion),expNext:a(e.expNext),expTotal:a(e.expTotal),file:a(e.file),loadMessage:a(e.loadMessage),levelUp:a(e.levelUp),magicEvasion:a(e.magicEvasion),magicReflection:a(e.magicReflection),meVolume:a(e.meVolume),obtainExp:a(e.obtainExp),obtainGold:a(e.obtainGold),obtainItem:a(e.obtainItem),obtainSkill:a(e.obtainSkill),partyName:a(e.partyName),possession:a(e.possession),preemptive:a(e.preemptive),saveMessage:a(e.saveMessage),seVolume:a(e.seVolume),substitute:a(e.substitute),surprise:a(e.surprise),touchUI:a(e.touchUI),useItem:a(e.useItem),victory:a(e.victory)}),_=(e,a)=>e.map(r=>i(r,a)),U=e=>e.map(a=>a.parameters[0].trimEnd()).join(`
`).trimEnd();class q{constructor(a,r){this.header=a,this.bodies=r}getBodyText(){return U(this.joinCommandBodies())}mergedBody(){return{code:this.header.code,indent:this.header.indent,parameters:[this.getBodyText()]}}joinCommandBodies(){return[this.header,...this.bodies]}normalizedCommands(){return[this.mergedBody()]}}class w{constructor(a,r,t){this.bodyCode=a,this.header=r,this.bodies=t}normalizedCommands(){const a={...this.header,code:this.header.code,indent:this.header.indent,parameters:[...this.header.parameters]};return this.bodies.length===0?[a]:[a,this.mergedBody()]}getBodyText(){return U(this.bodies)}joinCommandBodies(){return this.bodies}mergedBody(){return{code:this.bodyCode,indent:this.header.indent,parameters:[this.getBodyText()]}}}const M=(e,a,r,t)=>{const s=e[a];if(!r(s))throw new Error(`Invalid head at index ${a}: ${JSON.stringify(s)}`);const o=[];for(let n=a+1;n<e.length;n++){const c=e[n];if(!t(c))break;o.push(c)}return{header:s,bodies:o}},fe=(e,a)=>{const{bodies:r,header:t}=((s,o)=>M(s,o,n=>n.code===m.COMMENT_HEAD,n=>n.code===m.COMMENT_BODY))(e,a);return Se(t)?new w(m.COMMENT_BODY,t,r):new q(t,r)},Se=e=>e.parameters[0]==="選択肢ヘルプ",Ae=(e,a)=>{const{bodies:r,header:t}=((s,o)=>M(s,o,n=>n.code===m.SHOW_MESSAGE,n=>n.code===m.SHOW_MESSAGE_BODY))(e,a);return new w(m.SHOW_MESSAGE_BODY,t,r)},be=(e,a)=>{const{bodies:r,header:t}=((s,o)=>M(s,o,n=>n.code===m.SCRIPT_EVAL,n=>n.code===m.SCRIPT_EVAL_BODY))(e,a);return new q(t,r)},Ce=(e,a)=>{const{bodies:r,header:t}=((s,o)=>M(s,o,n=>n.code===m.SHOW_SCROLLING_TEXT,n=>n.code===m.SHOW_SCROLLING_TEXT_BODY))(e,a);return new w(m.SHOW_SCROLLING_TEXT_BODY,t,r)},ve={[m.SHOW_MESSAGE]:(e,a,r)=>r.showMessage(Ae(e,a),a,e),[m.SCRIPT_EVAL]:(e,a,r)=>r.script(be(e,a),a,e),[m.COMMENT_HEAD]:(e,a,r)=>r.comment(fe(e,a),a,e),[m.SHOW_SCROLLING_TEXT]:(e,a,r)=>r.showScrollingText(Ce(e,a),a,e)},_e=e=>((a,r)=>({code:a.code,paramIndex:r,value:a.parameters[r]}))(e,1),I=(e,a)=>J(e,a),J=(e,a)=>e.flatMap((r,t)=>Ie(r,t,e,a)).filter(r=>r!==null),Ie=(e,a,r,t)=>{if(e.code===m.SHOW_CHOICES)return(n=>n.parameters[0].map((c,d)=>({code:102,paramIndex:d,value:c})))(e);const s=(o=e.code,ve[o]);var o;if(s){const n=s(r,a,Me);if(n!==void 0)return[n]}return e.code===m.CHANGE_NICKNAME||e.code===m.CHANGE_NAME||e.code===m.CHANGE_PROFILE?_e(e):e.code===m.PLUGIN_COMMAND_MZ?t(e):null},Me={comment:e=>{return a=e,{code:m.COMMENT_HEAD,paramIndex:0,value:a.getBodyText()};var a},showMessage:e=>{return a=e,{code:m.SHOW_MESSAGE_BODY,paramIndex:0,value:a.getBodyText(),speaker:(r=a.header,r.parameters[4]?r.parameters[4].trimEnd():"")};var a,r},script:e=>(a=>({code:m.SCRIPT_EVAL,paramIndex:0,value:a.getBodyText()}))(e),showScrollingText:e=>(a=>({code:m.SHOW_SCROLLING_TEXT_BODY,paramIndex:0,value:a.getBodyText()}))(e)},X=(e,a=()=>[])=>({eventId:e.id,commands:I(e.list,a)}),z=(e,a=()=>[])=>e.pages.map((r,t)=>({eventId:e.id,pageIndex:t,commands:I(r.list,a)})),K=(e,a=()=>[])=>({note:e.note,noteItems:m.readNote(e.note),displayedName:e.displayName,events:Oe(e,a)}),Oe=(e,a)=>Y(e,(r,t,s)=>({eventId:s.id,pageIndex:t,commands:I(r.list,a),note:s.note,noteItems:m.readNote(s.note),name:s.name})),Z=e=>(a=>a.kind.endsWith("[]"))(e.attr),Q=e=>e.kind==="struct",ee=e=>e.attr.kind==="struct[]",De=e=>ae[e.kind.replace("[]","")].type==="number",He=e=>ae[e.kind.replace("[]","")].type==="string",v={type:"string",hasText:!0},T={type:"number",hasText:!1},h={type:"number",hasText:!1},ae={string:v,number:{type:"number",hasText:!1},boolean:{type:"boolean"},armor:T,actor:T,class:T,enemy:T,skill:T,state:T,item:T,weapon:T,common_event:T,switch:T,variable:T,troop:T,multiline_string:v,file:{type:"string",hasText:!1},"file[]":{type:"string",hasText:!1},"multiline_string[]":v,"string[]":v,combo:v,select:v,any:v,struct:{type:"struct"},"actor[]":h,"enemy[]":h,"class[]":h,"skill[]":h,"state[]":h,"item[]":h,"weapon[]":h,"common_event[]":h,"troop[]":h,"armor[]":h,"switch[]":h,"variable[]":h,"number[]":h};function ke(e){return Ge(e,a=>!0,a=>!0)}const Ge=(e,a,r)=>{const t=[],s=[],o=[],n=[];return e.forEach(c=>{if(Q(c.attr))t.push({name:c.name,attr:c.attr});else if(ee(c))s.push(c);else if(Z(c)){if(r(c))return void n.push(c)}else a(c)&&o.push(c)}),{structs:t,structArrays:s,scalars:o,scalarArrays:n}};function Be(e){const a=e.map(r=>[r.name,r.attr]);return Object.fromEntries(a)}const we=(e,a)=>{if(e.length!==0)return`${a}[${e.map(r=>`"${r.name}"`).join(",")}]`},Pe=(e,a)=>e.map(r=>({path:`${a}["${r.name}"][*]`,param:r})),re={undefinedStruct:"undefined_struct",cyclicStruct:"cyclic_struct"};function te(e,a,r,t){const s={items:[],errs:[],frames:[{schemaName:e,basePath:a,ancestry:[]}]},o=Math.max(1,3*r.size+5),n=Array.from({length:o}).reduce(c=>c.frames.length===0?c:function(d,N,E){if(d.frames.length===0)return d;const p=d.frames[d.frames.length-1],x=d.frames.slice(0,-1);if(p.ancestry.includes(p.schemaName))return{frames:x,items:d.items,errs:[...d.errs,{code:E.cyclicStruct,path:p.basePath}]};const u=N.get(p.schemaName);if(!u)return{frames:x,items:d.items,errs:[...d.errs,{code:E.undefinedStruct,path:p.basePath}]};const A=function(g,y){const l=g.ancestry.concat(g.schemaName),b=g.basePath;return[...y.structs.map(C=>({schemaName:C.attr.struct,basePath:`${b}["${C.name}"]`,ancestry:l})),...y.structArrays.map(C=>({schemaName:C.attr.struct,basePath:`${b}["${C.name}"][*]`,ancestry:l}))].reverse()}(p,u);if(u.scalars.length>0||u.scalarArrays.length>0){const g=function(y,{path:l,structName:b}){return{category:"struct",objectSchema:Be(y.scalars),name:b,scalarArrays:Pe(y.scalarArrays,l),scalarsPath:y.scalars.length>0?we(y.scalars,l):void 0}}(u,{path:p.basePath,structName:p.schemaName});return x.push(...A),{frames:x,items:[...d.items,g],errs:d.errs}}return x.push(...A),{frames:x,items:d.items,errs:d.errs}}(c,r,t),s);return{items:n.items,errors:n.errs}}const Re=(e,a,r,t=re)=>te(e.attr.struct,`${a}["${e.name}"]`,r,t),Fe=(e,a,r,t=re)=>te(e.attr.struct,`${a}["${e.name}"][*]`,r,t),Le=(e,a,r,t)=>(s=>Q(s.attr))(r)?je(e,r,t):ee(r)?Ve(e,r,t):Z(r)?$e(e,a,r):We(e,a,r),$e=(e,a,r)=>({rootCategory:e,rootName:a,scalars:{name:"",objectSchema:{},scalarsPath:void 0,scalarArrays:[{path:`$["${r.name}"][*]`,param:r}]},structs:{items:[],errors:[]},structArrays:{items:[],errors:[]}}),We=(e,a,r)=>({rootCategory:e,rootName:a,scalars:{name:r.attr.kind,objectSchema:{[r.name]:r.attr},scalarsPath:`$["${r.name}"]`,scalarArrays:[]},structArrays:{items:[],errors:[]},structs:{items:[],errors:[]}}),je=(e,a,r)=>({rootName:a.name,rootCategory:e,scalars:void 0,structArrays:{items:[],errors:[]},structs:Re(a,"$",r)}),Ve=(e,a,r)=>({structArrays:Fe(a,"$",r),rootName:a.name,rootCategory:e,scalars:void 0,structs:{items:[],errors:[]}}),Ye=(e,a)=>a.map(r=>Ue(e,r)).flat(3),Ue=(e,a)=>[a.top?D(a,e,a.top,""):[],a.structs.map(r=>D(a,e,r)),a.structArrays.map(r=>D(a,e,r))],D=(e,a,r,t=r.bundleName)=>{const s=r.scalar?((n,c,d,N,E)=>N.pathSegments(d).map(({value:p,segments:x})=>((u,A,g,y,l)=>{if(typeof g=="object"||g===null)return null;const b=y[y.length-1];if(typeof b=="number")return null;const C=l[b];return C?{rootName:u.rootName,rootType:u.rootCategory,structName:A,value:g,param:{name:b,attr:C}}:null})(n,c,p,x,E)).filter(p=>p!==null))(e,t,a,r.scalar.jsonPathJS,r.scalar.record):[],o=r.arrays.map(n=>((c,d,N,E)=>{const p=E.jsonPathJS.find(N);if(!Array.isArray(p))return[];const x=E.schema.attr;return He(x)?((u,A,g,y)=>A.filter(l=>typeof l=="string").map(l=>({rootName:u.rootName,rootType:u.rootCategory,value:l,structName:g,param:y})))(c,p,d,E.schema):De(x)?((u,A,g,y)=>A.filter(l=>typeof l=="number").map(l=>({rootName:u.rootName,rootType:u.rootCategory,value:l,structName:g,param:y})))(c,p,d,E.schema):[]})(e,t,a,n));return[s,o].flat(2)},H=(e,a)=>e.scalarsPath?{bundleName:e.name,arrays:W(e.scalarArrays,e.name,a),scalar:qe(e.scalarsPath,e.objectSchema,a)}:{bundleName:e.name,arrays:W(e.scalarArrays,e.name,a)},W=(e,a,r)=>e.map(t=>({jsonPathJS:r(t.path),schema:t.param,parentType:a})),qe=(e,a,r)=>({jsonPathJS:r(e),record:a}),Je=(e,a,r,t)=>({pluginName:e,commandName:a.command,desc:a.desc??"",text:a.text??"",extractors:Xe(a,r,t)}),Xe=(e,a,r)=>e.args.map(t=>((s,o)=>{const n=s.scalars?H(s.scalars,o):void 0,c=s.structs.items.map(N=>H(N,o)),d=s.structArrays.items.map(N=>H(N,o));return{rootCategory:s.rootCategory,rootName:s.rootName,top:n,structs:c,structArrays:d}})(Le("args",e.command,t,a),r)),ze=(e,a)=>{const r=(t=>new Map(t.map(s=>[s.struct,ke(s.params)])))(e.schema.structs);return Ke(e.pluginName,e.schema.commands,r,a)},Ke=(e,a,r,t)=>a.map(s=>[`${e}:${s.command}`,Je(e,s,r,t)]),se=(e,a)=>{const[r,t]=e.parameters,s=`${r}:${t}`,o=a.get(s);return o?((n,c)=>({pluginName:c.pluginName,commandName:c.commandName,args:Ye(n,c.extractors)}))(ie.parseDeepRecord(e.parameters[3]),o):{pluginName:r,commandName:t,args:[]}};class k{constructor(a){P(this,"_commandMap");this._commandMap=a}keys(){return Array.from(this._commandMap.keys())}extractMapTexts(a){return K(a,r=>this.extractArgs(r))}extractBattleText(a){return z(a,r=>this.extractArgs(r))}extractCommonEventText(a){return X(a,r=>this.extractArgs(r))}extractArgs(a){const r=se(a,this._commandMap);return r.args.filter(Ze).map(t=>({code:m.PLUGIN_COMMAND_MZ,value:t.value,paramIndex:3,argName:t.param.name,argTitle:t.param.attr.text??t.param.name,commandName:r.commandName,pluginName:r.pluginName}))}extractCommandTexts(a){return I(a,r=>this.extractArgs(r))}}const Ze=e=>typeof e.value=="string",G=(e,a,r)=>({folder:r,key:a,image:e[a],id:e.id}),S=(e,a)=>({note:me(e),main:a.map(r=>({key:r,text:e[r],id:e.id}))}),me=e=>m.readNoteEx(e.note,(a,r)=>({key:a,text:r,id:e.id}));exports.buildReferenceItemSources=(e,a,r,t,s,o)=>[...m.defineTraitItems(r,t),...m.defineGameDataSources(e,a),...m.defineSystemItems(s,o)],exports.compileItemEffectDisplayData=(e,a,r)=>{const t=m.resolveItemEffectLabels(a);return R.mergeItemsSource(r?[...t,...r]:t,e)},exports.compileTraitDisplayData=(e,a)=>R.mergeItemsSource(m.resolveTraitLabels(a),e),exports.createTextDataExtractor=()=>new k(new Map),exports.createTextDataExtractorFromCommandItems=e=>{const a=new Map(e);return new k(a)},exports.createTextDataExtractorFromSchemas=e=>{const a=e.flatMap(r=>ze(r,t=>new ce.JSONPathJS(t)));return new k(new Map(a))},exports.extractBattleEventTexts=z,exports.extractCommonEventTexts=X,exports.extractImageFromActor=e=>[G(e,"faceName","faces"),G(e,"characterName","characters"),G(e,"battlerName","sv_actors")],exports.extractImageFromEnemy=e=>({key:"battlerName",image:e.battlerName,id:e.id}),exports.extractItemChangeData=j,exports.extractItemCommands=O,exports.extractItemFromMap=(e,a,r)=>Y(e.map,(t,s,o)=>({...le(t),commands:O(t.list,a,r),eventName:o.name,pageIndex:s})),exports.extractItemFromTroop=(e,a,r)=>{return t=(s,o,n)=>({commands:O(s.list,a,r),eventName:n.name,troopId:n.id,pageIndex:o}),e.flatMap(s=>V(s,t));var t},exports.extractMapText=K,exports.extractNoteText=me,exports.extractPluginCommandMzArgs=se,exports.extractTextData=S,exports.extractTextFromActor=e=>S(e,["name","nickname","profile"]),exports.extractTextFromArmor=e=>S(e,["name","description"]),exports.extractTextFromClass=e=>S(e,["name"]),exports.extractTextFromEnemy=e=>S(e,["name"]),exports.extractTextFromEventCommands=e=>J(e,()=>[]),exports.extractTextFromEventCommandsEx=I,exports.extractTextFromItem=e=>S(e,["name","description"]),exports.extractTextFromSkill=e=>S(e,["name","description","message1","message2"]),exports.extractTextFromState=e=>S(e,["name","message1","message2","message3","message4"]),exports.extractTextFromSystem=e=>({gameTitle:e.gameTitle,currencyUnit:e.currencyUnit,equipTypes:[...e.equipTypes],armorTypes:[...e.armorTypes],weaponTypes:[...e.weaponTypes],terms:{basic:m.makeTermsBasicFromArray(e.terms.basic),commands:m.makeTermsCommandFromArray(e.terms.commands),messages:m.makeTermsMessages(e.terms.messages),params:m.makeParamNamesFromArray(e.terms.params)}}),exports.extractTextFromWeapon=e=>S(e,["name","description"]),exports.replaceActorText=(e,a)=>{const r=f(e,a),t=i(e.name,a),s=i(e.nickname,a),o=i(e.profile,a);return{...e,name:t,nickname:s,profile:o,note:r}},exports.replaceClassText=(e,a)=>{const r=f(e,a),t=i(e.name,a);return{...e,name:t,note:r}},exports.replaceCommonEventTexts=(e,a)=>({...e,list:L(e.list,a)}),exports.replaceEnemyText=(e,a)=>{const r=f(e,a),t=i(e.name,a);return{...e,name:t,note:r}},exports.replaceEventCommandTexts=B,exports.replaceItemText=(e,a)=>{const r=f(e,a),t=i(e.name,a),s=i(e.description,a);return{...e,name:t,description:s,note:r}},exports.replaceMapDataTexts=(e,a)=>{const r=i(e.displayName,a),t=f(e,a),s={displayName:r,events:m.repleaceMapEventCommands(e,o=>o.map(n=>B(n,a))),note:t};return{...e,...s}},exports.replaceNoteTextByFunction=f,exports.replaceNoteTextByMap=(e,a,r=`
`)=>f(e,t=>a.get(t),r),exports.replaceSkillText=(e,a)=>{const r=f(e,a),t=i(e.name,a),s=i(e.description,a),o=i(e.message1,a),n=i(e.message2,a);return{...e,name:t,description:s,message1:o,message2:n,note:r}},exports.replaceStateText=(e,a)=>{const r=f(e,a),t=i(e.name,a),s=i(e.message1,a),o=i(e.message2,a),n=i(e.message3,a),c=i(e.message4,a);return{...e,name:t,message1:s,message2:o,message3:n,message4:c,note:r}},exports.replaceSystemTermsByMap=(e,a)=>$(e,r=>F(r,a)),exports.replaceSystemText=(e,a)=>({...e,gameTitle:i(e.gameTitle,a),currencyUnit:i(e.currencyUnit,a),elements:_(e.elements,a),skillTypes:_(e.skillTypes,a),weaponTypes:_(e.weaponTypes,a),armorTypes:_(e.armorTypes,a),equipTypes:_(e.equipTypes,a),terms:$(e.terms,a)}),exports.replaceTextByMap=F,exports.replaceTroopTexts=(e,a)=>{const r=e.pages.map(t=>({conditions:t.conditions,span:t.span,list:L(t.list,a)}));return{...e,pages:r}};

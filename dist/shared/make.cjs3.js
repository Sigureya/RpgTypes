"use strict";const x=require("ajv"),V=(e,a)=>({label:a.skill.title,items:e,source:{author:"rmmz",module:"data",kind:"skill"}}),w=(e,a)=>({items:e,label:a.actor.title,source:{author:"rmmz",module:"data",kind:"actor"}}),Y=(e,a)=>({items:e,label:a.state.title,source:{author:"rmmz",module:"data",kind:"state"}}),W=(e,a)=>({items:e,label:a.armor.title,source:{author:"rmmz",kind:"armor",module:"data"}}),q=(e,a)=>({items:e,label:a.class.title,source:{author:"rmmz",module:"data",kind:"class"}}),X=(e,a)=>({items:e,label:a.enemy.title,source:{author:"rmmz",module:"data",kind:"enemy"}}),K=(e,a)=>({items:e,label:a.item.title,source:{author:"rmmz",module:"data",kind:"item"}}),j=(e,a)=>({items:e,label:a.weapon.title,source:{author:"rmmz",module:"data",kind:"weapon"}}),$=(e,a)=>({items:e,label:a.commonEvent.title,source:{author:"rmmz",module:"data",kind:"common_event"}}),u=(e,a)=>({items:L(e.options,a),label:e.title,source:{author:"rmmz",module:"trait",kind:"collaps"}}),L=(e,a)=>[{id:0,name:a.normal},{id:1,name:e.bossCollaps},{id:2,name:e.instantCollaps},{id:3,name:e.noneCollaps}],c=e=>({items:k(e.options),label:e.title,source:{author:"rmmz",module:"trait",kind:"xparams"}}),k=e=>[{id:0,name:e.hitRate},{id:1,name:e.evasionRate},{id:2,name:e.criticalRate},{id:3,name:e.criticalEvasionRate},{id:4,name:e.magicEvasionRate},{id:5,name:e.magicReflectionRate},{id:6,name:e.counterAttackRate},{id:7,name:e.hpRegenerationRate},{id:8,name:e.mpRegenerationRate},{id:9,name:e.tpRegenerationRate}],T=e=>({items:O(e.options),label:e.title,source:{author:"rmmz",module:"trait",kind:"params"}}),O=e=>[{id:0,name:e.maxHp},{id:1,name:e.maxMp},{id:2,name:e.atk},{id:3,name:e.def},{id:4,name:e.matk},{id:5,name:e.mdef},{id:6,name:e.agi},{id:7,name:e.luk}],R=e=>({items:g(e.options),label:e.title,source:{author:"rmmz",module:"trait",kind:"sparams"}}),g=e=>[{id:0,name:e.targetRate},{id:1,name:e.guardEffectRate},{id:2,name:e.recoveryEffectRate},{id:3,name:e.pharmacology},{id:4,name:e.mpCostRate},{id:5,name:e.tpChargeRate},{id:6,name:e.physicalDamageRate},{id:7,name:e.magicDamageRate},{id:8,name:e.floorDamageRate},{id:9,name:e.experienceRate}],I=e=>({items:M(e.options),label:e.title,source:{author:"rmmz",module:"trait",kind:"partyAbility"}}),M=e=>[{id:0,name:e.encounterHalf},{id:1,name:e.encounterNone},{id:2,name:e.cancelSurprise},{id:3,name:e.raisePreemptive},{id:4,name:e.goldDouble},{id:5,name:e.dropItemDouble}],S=e=>({items:b(e.options),label:e.title,source:{author:"rmmz",module:"trait",kind:"sflag"}}),b=e=>[{id:0,name:e.autoBattle},{id:1,name:e.guard},{id:2,name:e.substitute},{id:3,name:e.preventEscape}],m=(e,a,r)=>({kindId:e,label:a.domainName,pattern:a.format,description:a.desc,dataSource:r}),Q=e=>m(41,e.special),J=e=>m(11,e.recoverHp),Z=e=>m(12,e.recoverMp),ee=e=>m(13,e.gainTp),ae=e=>m(21,e.addState,{author:"rmmz",module:"data",kind:"state"}),te=e=>m(22,e.removeState,{author:"rmmz",module:"data",kind:"state"}),re=e=>m(31,e.addBuff,{author:"rmmz",module:"trait",kind:"params"}),me=e=>m(32,e.addDebuff,{author:"rmmz",module:"trait",kind:"params"}),ie=e=>m(33,e.removeBuff,{author:"rmmz",module:"trait",kind:"params"}),oe=e=>m(34,e.removeDebuff,{author:"rmmz",module:"trait",kind:"params"}),ne=e=>m(42,e.grow,{author:"rmmz",module:"trait",kind:"params"}),se=e=>m(43,e.learnSkill,{author:"rmmz",module:"data",kind:"skill"}),de=e=>m(44,e.commonEvent,{author:"rmmz",module:"data",kind:"common_event"}),f=e=>E(e,(a,r)=>({key:a,value:r})),E=(e,a)=>{const r=/<([^<>:]{1,100}):([^>]{1,1000})>/g;return Array.from(e.matchAll(r),i=>a(i[1],i[2]))},C=(e,a=`
`)=>[...e.items.map(r=>`<${r.key}:${r.value}>`),e.note].join(a).trim(),y=e=>({note:le(e),items:f(e)}),le=e=>{if(e.length>=3e4)throw new Error("Note text is too long. Please shorten it.");return e.replaceAll(/<([^<>:]{1,100}):([^>]{1,1000})>/g,"")},N=(e,a)=>`<${e}:${a}>`,Ee=e=>({pattern:e.format,label:e.title,kindId:11,dataSource:h()}),Ae=e=>({pattern:e.format,label:e.title,kindId:12,dataSource:{author:"rmmz",module:"trait",kind:"params"}}),pe=e=>({pattern:e.format,label:e.title,kindId:13,dataSource:A()}),_e=e=>({pattern:e.format,label:e.title,kindId:14,dataSource:A()}),ue=e=>({pattern:e.format,label:e.title,kindId:21,dataSource:{author:"rmmz",module:"trait",kind:"params"}}),ce=e=>({pattern:e.format,label:e.title,kindId:22,dataSource:{author:"rmmz",module:"trait",kind:"xparams"}}),Te=e=>({pattern:e.format,label:e.title,kindId:23,dataSource:{author:"rmmz",module:"trait",kind:"sparams"}}),Re=e=>({pattern:e.format,label:e.title,kindId:31,dataSource:h()}),Ie=e=>({pattern:e.format,label:e.title,kindId:32,dataSource:A()}),Se=e=>({pattern:e.format,label:e.title,kindId:33}),Ce=e=>({pattern:e.format,label:e.title,kindId:34}),ye=e=>({pattern:e.format,label:e.title,kindId:35,dataSource:p()}),Ne=e=>({pattern:e.format,label:e.title,kindId:41,dataSource:G()}),Pe=e=>({pattern:e.format,label:e.title,kindId:42,dataSource:G()}),Le=e=>({pattern:e.format,label:e.title,kindId:43,dataSource:p()}),ke=e=>({pattern:e.format,label:e.title,kindId:44,dataSource:p()}),Oe=e=>({pattern:e.format,label:e.title,kindId:51,dataSource:De()}),ge=e=>({pattern:e.format,label:e.title,kindId:52,dataSource:ve()}),Me=e=>({pattern:e.format,label:e.title,kindId:53,dataSource:_()}),be=e=>({pattern:e.format,label:e.title,kindId:54,dataSource:_()}),fe=e=>({pattern:e.format,label:e.title,kindId:55,dataSource:_()}),he=e=>({pattern:e.format,label:e.title,kindId:61}),Ge=e=>({pattern:e.format,label:e.title,kindId:62,dataSource:{author:"rmmz",module:"trait",kind:"sflag"}}),He=e=>({pattern:e.format,label:e.title,kindId:63,dataSource:{author:"rmmz",module:"trait",kind:"collaps"}}),Fe=e=>({pattern:e.format,label:e.title,kindId:64,dataSource:{author:"rmmz",module:"trait",kind:"partyAbility"}}),A=()=>({author:"rmmz",module:"data",kind:"state"}),p=()=>({author:"rmmz",module:"data",kind:"skill"}),h=()=>({author:"rmmz",module:"system",kind:"elements"}),G=()=>({author:"rmmz",module:"system",kind:"skillTypes"}),De=()=>({author:"rmmz",module:"system",kind:"weaponTypes"}),ve=()=>({author:"rmmz",module:"system",kind:"armorTypes"}),_=()=>({author:"rmmz",module:"system",kind:"equipTypes"}),o=new x({strict:!0}),Be=o.compile({type:"object",required:["code","parameters","indent"],properties:{code:{type:"integer",enum:[320,324,325]},indent:{type:"integer"},parameters:{type:"array",minItems:2,maxItems:2,items:[{type:"integer",minimum:0},{type:"string"}]}},additionalProperties:!1}),Ue=o.compile({type:"object",properties:{code:{type:"number",const:105},indent:{type:"integer",minimum:0},parameters:{type:"array",minItems:2,maxItems:2,items:[{type:"number"},{type:"boolean"}]}},required:["code","indent","parameters"]}),ze=o.compile({type:"object",required:["code","parameters","indent"],properties:{indent:{type:"integer",minimum:0},parameters:{type:"array",minItems:0,maxItems:0},code:{type:"integer",enum:[0,109,112,113,115,204,206,213,214,216,217,221,222,243,244,251,314,315,340,351,352,353,354,411]}},additionalProperties:!1}),xe=o.compile({type:"object",required:["code","parameters","indent"],properties:{code:{type:"integer",enum:[108,355,401,405,408,655]},indent:{type:"integer",minimum:0},parameters:{type:"array",minItems:1,maxItems:1,items:[{type:"string"}]}},additionalProperties:!1}),n=e=>xe(e),Ve=o.compile({type:"object",properties:{code:{type:"number",const:117},indent:{type:"integer",minimum:0},parameters:{type:"array",minItems:1,maxItems:1,items:[{type:"number",minimum:0,default:0}]}},required:["code","indent","parameters"]}),we=o.compile({type:"object",properties:{code:{type:"number",const:102},indent:{type:"integer",minimum:0},parameters:{type:"array",minItems:5,maxItems:5,items:[{type:"array",items:{type:"string"}},{type:"integer"},{type:"integer"},{type:"integer"},{type:"integer"}]}},required:["code","indent","parameters"]}),Ye=o.compile({type:"object",properties:{code:{type:"number",const:402},indent:{type:"integer",minimum:0},parameters:{type:"array",minItems:2,maxItems:2,items:[{type:"integer"},{type:"string"}]}},required:["code","indent","parameters"]}),We=o.compile({type:"object",required:["code","parameters","indent"],properties:{code:{type:"integer",const:101},indent:{type:"integer",minimum:0},parameters:{type:"array",items:[{type:"string"},{type:"integer",minimum:0,maximum:7},{type:"integer",minimum:0,maximum:2},{type:"integer",minimum:0,maximum:2},{type:"string"}],minItems:5,maxItems:5}}}),s=(e,a)=>({name:e,id:a}),H=e=>e.variables.map(s),F=e=>e.elements.map(s),D=e=>e.equipTypes.map(s),v=e=>e.skillTypes.map(s),B=e=>e.weaponTypes.map(s),U=e=>e.armorTypes.map(s),z=e=>e.switches.map(s),qe=(e,a)=>({items:U(e),label:a.options.armorTypes,source:{author:"rmmz",module:"system",kind:"armorTypes"}}),Xe=(e,a)=>({items:F(e),label:a.options.elements,source:{author:"rmmz",module:"system",kind:"elements"}}),Ke=(e,a)=>({items:D(e),label:a.options.equipTypes,source:{author:"rmmz",module:"system",kind:"equipTypes"}}),je=(e,a)=>({items:v(e),label:a.options.skillTypes,source:{author:"rmmz",module:"system",kind:"skillTypes"}}),$e=(e,a)=>({items:H(e),label:a.options.variables,source:{author:"rmmz",module:"system",kind:"variable"}}),Qe=(e,a)=>({items:z(e),label:a.options.switches,source:{author:"rmmz",module:"system",kind:"switch"}}),Je=(e,a)=>({items:B(e),label:a.options.weaponTypes,source:{author:"rmmz",module:"system",kind:"weaponTypes"}}),P=(e,a)=>[e.fight??"Fight",e.escape??"Escape",e.attack??"Attack",e.guard??"Guard",e.item??"Item",e.skill??"Skill",e.equip??"Equip",e.status??"Status",e.formation??"Formation",e.save??"Save",e.gameEnd??"Game End",e.options??"Options",e.weapon??"Weapon",e.armor??"Armor",e.keyItem??"Key Item",e.equip2??"Equip2",e.optimize??"Optimize",e.clear??"Clear",e.newGame??"New Game",e.continue_??"Continue",a,e.toTitle??"To Title",e.cancel??"Cancel",a,e.buy??"Buy",e.sell??"Sell"],t=(e,a)=>typeof e=="string"?e:a;exports.ABORT_BATTLE=340,exports.BATTLE_PROCESSING=301,exports.CHANGE_ACTOR_IMAGES=322,exports.CHANGE_ARMORS=128,exports.CHANGE_BATTLE_BACKGROUND=283,exports.CHANGE_BATTLE_BGM=132,exports.CHANGE_CLASS=321,exports.CHANGE_DEFEAT_ME=139,exports.CHANGE_ENCOUNTER=136,exports.CHANGE_ENEMY_HP=331,exports.CHANGE_ENEMY_MP=332,exports.CHANGE_ENEMY_STATE=333,exports.CHANGE_ENEMY_TP=342,exports.CHANGE_EXP=315,exports.CHANGE_FORMATION_ACCESS=137,exports.CHANGE_GOLD=125,exports.CHANGE_HP=311,exports.CHANGE_ITEMS=126,exports.CHANGE_MENU_ACCESS=135,exports.CHANGE_MP=312,exports.CHANGE_NAME=320,exports.CHANGE_NICKNAME=324,exports.CHANGE_PARALLAX=284,exports.CHANGE_PARTY_MEMBER=129,exports.CHANGE_PLAYER_FOLLOWERS=216,exports.CHANGE_PROFILE=325,exports.CHANGE_SAVE_ACCESS=134,exports.CHANGE_TILESET=282,exports.CHANGE_TP=313,exports.CHANGE_TRANSPARENCY=211,exports.CHANGE_VEHICLE_BGM=140,exports.CHANGE_VEHICLE_IMAGE=323,exports.CHANGE_VICTORY_ME=133,exports.CHANGE_WEAPONS=127,exports.CHANGE_WINDOW_COLOR=138,exports.COLLAPS_BOSS=1,exports.COLLAPS_INSTANT=2,exports.COLLAPS_NONE=3,exports.COLLAPS_NORMAL=0,exports.COMMENT_BODY=408,exports.COMMENT_HEAD=108,exports.COMMON_EVENT=117,exports.CONDITIONAL_BRANCH=111,exports.CONDITIONAL_BRANCH_ELSE=411,exports.CONTROL_SELF_SWITCH=123,exports.CONTROL_SWITCHES=121,exports.CONTROL_TIMER=124,exports.CONTROL_VARIABLES=122,exports.EFFECT_ADD_BUFF=31,exports.EFFECT_ADD_DEBUFF=32,exports.EFFECT_ADD_STATE=21,exports.EFFECT_COMMON_EVENT=44,exports.EFFECT_GAIN_TP=13,exports.EFFECT_GROW=42,exports.EFFECT_LEARN_SKILL=43,exports.EFFECT_RECOVER_HP=11,exports.EFFECT_RECOVER_MP=12,exports.EFFECT_REMOVE_BUFF=33,exports.EFFECT_REMOVE_DEBUFF=34,exports.EFFECT_REMOVE_STATE=22,exports.EFFECT_SPECIAL=41,exports.ENEMY_APPEAR=335,exports.ENEMY_RECOVER_ALL=334,exports.ENEMY_TRANSFORM=336,exports.ERASE_EVENT=214,exports.ERASE_PICTURE=235,exports.EXIT_EVENT_PROCESSING=115,exports.EXTRA_PARAM_CEV=3,exports.EXTRA_PARAM_CNT=6,exports.EXTRA_PARAM_CRI=2,exports.EXTRA_PARAM_EVA=1,exports.EXTRA_PARAM_HIT=0,exports.EXTRA_PARAM_HRG=7,exports.EXTRA_PARAM_MEV=4,exports.EXTRA_PARAM_MRF=5,exports.EXTRA_PARAM_MRG=8,exports.EXTRA_PARAM_TRG=9,exports.FADEIN_SCREEN=222,exports.FADEOUT_BGM=242,exports.FADEOUT_BGS=246,exports.FADEOUT_SCREEN=221,exports.FLAG_ID_AUTO_BATTLE=0,exports.FLAG_ID_GUARD=1,exports.FLAG_ID_PRESERVE_TP=3,exports.FLAG_ID_SUBSTITUTE=2,exports.FLASH_SCREEN=224,exports.FORCE_ACTION=339,exports.GAME_OVER=353,exports.GATHER_FOLLOWERS=217,exports.GET_LOCATION_INFO=285,exports.GET_ONOFF_VEHICLE=206,exports.INPUT_NUMBER=103,exports.LABEL=118,exports.LABEL_JUMP=119,exports.LOOP=112,exports.LOOP_BREAK=113,exports.MOVE_PICTURE=232,exports.NAME_INPUT_PROCESSING=303,exports.NO_OPERATION=0,exports.OPEN_MENU_SCREEN=351,exports.OPEN_SAVE_SCREEN=352,exports.OPERAND_DIRECT=0,exports.OPERAND_VARIABLE=1,exports.OPERATION_GAIN=0,exports.OPERATION_LOSE=1,exports.PARTY_ABILITY_CANCEL_SURPRISE=2,exports.PARTY_ABILITY_DROP_ITEM_DOUBLE=5,exports.PARTY_ABILITY_ENCOUNTER_HALF=0,exports.PARTY_ABILITY_ENCOUNTER_NONE=1,exports.PARTY_ABILITY_GOLD_DOUBLE=4,exports.PARTY_ABILITY_RAISE_PREEMPTIVE=3,exports.PLAY_BGM=241,exports.PLAY_BGS=245,exports.PLAY_ME=249,exports.PLAY_MOVIE=261,exports.PLAY_SE=250,exports.PLUGIN_COMMAND_MV=356,exports.PLUGIN_COMMAND_MZ=357,exports.RECOVER_ALL=314,exports.REGULAR_PARAM_AGI=6,exports.REGULAR_PARAM_ATK=2,exports.REGULAR_PARAM_DEF=3,exports.REGULAR_PARAM_LUK=7,exports.REGULAR_PARAM_MATK=4,exports.REGULAR_PARAM_MAX_HP=0,exports.REGULAR_PARAM_MAX_MP=1,exports.REGULAR_PARAM_MDEF=5,exports.RESUME_BGM=244,exports.RETURN_TO_TITLE_SCREEN=354,exports.ROTATE_PICTURE=233,exports.SAVE_BGM=243,exports.SCRIPT_EVAL=355,exports.SCRIPT_EVAL_BODY=655,exports.SCROLL_MAP=204,exports.SELECT_ITEM=104,exports.SET_EVENT_LOCATION=203,exports.SET_MOVEMENT_ROUTE=205,exports.SET_VEHICLE_LOCATION=202,exports.SET_WEATHER_EFFECT=236,exports.SHAKE_SCREEN=225,exports.SHOP_PROCESSING=302,exports.SHOP_PROCESSING_BODY=605,exports.SHOW_ANIMATION=212,exports.SHOW_BALLOON_ICON=213,exports.SHOW_BATTLE_ANIMATION=337,exports.SHOW_CHOICES=102,exports.SHOW_CHOICES_ITEM=402,exports.SHOW_MESSAGE=101,exports.SHOW_MESSAGE_BODY=401,exports.SHOW_PICTURE=231,exports.SHOW_SCROLLING_TEXT=105,exports.SHOW_SCROLLING_TEXT_BODY=405,exports.SKIP=109,exports.SPECIAL_PARAM_EXR=9,exports.SPECIAL_PARAM_FDR=8,exports.SPECIAL_PARAM_GRD=1,exports.SPECIAL_PARAM_MCR=4,exports.SPECIAL_PARAM_MDR=7,exports.SPECIAL_PARAM_PDR=6,exports.SPECIAL_PARAM_PHA=3,exports.SPECIAL_PARAM_REC=2,exports.SPECIAL_PARAM_TCR=5,exports.SPECIAL_PARAM_TGR=0,exports.STOP_SE=251,exports.TINT_PICTURE=234,exports.TINT_SCREEN=223,exports.TRAIT_ACTION_PLUS=61,exports.TRAIT_ATTACK_ELEMENT=31,exports.TRAIT_ATTACK_SKILL=35,exports.TRAIT_ATTACK_SPEED=33,exports.TRAIT_ATTACK_STATE=32,exports.TRAIT_ATTACK_TIMES=34,exports.TRAIT_COLLAPSE_TYPE=63,exports.TRAIT_DEBUFF_RATE=12,exports.TRAIT_ELEMENT_RATE=11,exports.TRAIT_EQUIP_ARMOR_TYPE=52,exports.TRAIT_EQUIP_LOCK=53,exports.TRAIT_EQUIP_SEAL=54,exports.TRAIT_EQUIP_WEAPON_TYPE=51,exports.TRAIT_PARAM=21,exports.TRAIT_PARTY_ABILITY=64,exports.TRAIT_SKILL_ADD=43,exports.TRAIT_SKILL_SEAL=44,exports.TRAIT_SKILL_TYPE_ADD=41,exports.TRAIT_SKILL_TYPE_SEAL=42,exports.TRAIT_SLOT_TYPE=55,exports.TRAIT_SPARAM=23,exports.TRAIT_SPECIAL_FLAG=62,exports.TRAIT_STATE_RATE=13,exports.TRAIT_STATE_RESIST=14,exports.TRAIT_XPARAM=22,exports.TRANSFER_PLAYER=201,exports.WAIT=230,exports.buildNoteFromNormalized=C,exports.collapsOptionsToArray=L,exports.createNoteEntity=N,exports.defineGameDataSources=(e,a)=>[V(e.skills,a),w(e.actors,a),Y(e.states,a),W(e.armors,a),q(e.classes,a),X(e.enemies,a),K(e.items,a),j(e.weapons,a),$(e.commonEvents,a)],exports.defineSystemItems=(e,a)=>[Xe(e,a),Ke(e,a),Je(e,a),je(e,a),qe(e,a),$e(e,a),Qe(e,a)],exports.defineTraitCollapseType=u,exports.defineTraitExtraParam=c,exports.defineTraitItems=(e,a)=>[T(e.regularParam),c(e.extraParam),R(e.specialParam),u(e.collaps,a),S(e.specialFlag),I(e.partyAbility)],exports.defineTraitPartyAbility=I,exports.defineTraitRegularParam=T,exports.defineTraitSpecialFlag=S,exports.defineTraitSpecialParam=R,exports.extraParamName=(e,a)=>{switch(e){case 3:return a.criticalEvasionRate;case 1:return a.evasionRate;case 6:return a.counterAttackRate;case 2:return a.criticalRate;case 0:return a.hitRate;case 7:return a.hpRegenerationRate;case 4:return a.magicEvasionRate;case 5:return a.magicReflectionRate;case 8:return a.mpRegenerationRate;case 9:return a.tpRegenerationRate}return`?xparams[${e}]`},exports.extraParamsToArray=k,exports.fromArrayShowMessageHeader=e=>({facename:e[0],faceIndex:e[1],background:e[2],positionType:e[3],speakerName:e[4]}),exports.getArmorTypes=U,exports.getElementTypes=F,exports.getEquipTypes=D,exports.getNoteValue=(e,a)=>{const r=/<([^<>:]{1,100}):([^>]{1,1000})>/g,i=Array.from(e.matchAll(r)).find(d=>d[1]===a);return i?i[2]:void 0},exports.getSkillTypes=v,exports.getSwitches=z,exports.getVariableNames=H,exports.getWeaponTypes=B,exports.isCommandChangeActorText=e=>Be(e),exports.isCommandCommentBody=e=>n(e)&&e.code===408,exports.isCommandCommentHeader=e=>n(e)&&e.code===108,exports.isCommandCommonEvent=e=>Ve(e),exports.isCommandNonParam=e=>ze(e),exports.isCommandScriptBody=e=>n(e)&&e.code===655,exports.isCommandScriptHeader=e=>n(e)&&e.code===355,exports.isCommandScrollTextHead=e=>Ue(e),exports.isCommandShowChoiceItem=e=>Ye(e),exports.isCommandShowChoices=e=>we(e),exports.isCommandShowMessage=e=>We(e),exports.isCommandShowMessageBody=e=>n(e)&&e.code===401,exports.isCommandShowScrollingTextBody=e=>n(e)&&e.code===405,exports.isCommandTextBody=n,exports.makeCommandShowMessage=(e,a=0)=>({code:101,indent:a,parameters:[(e==null?void 0:e.facename)??"",(e==null?void 0:e.faceIndex)??0,(e==null?void 0:e.background)??0,(e==null?void 0:e.positionType)??2,(e==null?void 0:e.speakerName)??""]}),exports.makeCommandShowMessageBody=(e,a=0)=>({code:401,indent:a,parameters:[e]}),exports.makeParamNamesArray=e=>[e.mhp??"",e.mmp??"",e.atk??"",e.def??"",e.mat??"",e.mdf??"",e.agi??"",e.luk??"",e.hit??"",e.eva??""],exports.makeParamNamesFromArray=e=>({mhp:e[0],mmp:e[1],atk:e[2],def:e[3],mat:e[4],mdf:e[5],agi:e[6],luk:e[7],hit:e[8],eva:e[9]}),exports.makeTermsBasic=e=>[e.level??"Level",e.levelA??"Level",e.hp??"HP",e.hpA??"HP",e.mp??"MP",e.mpA??"MP",e.tp??"TP",e.tpA??"TP",e.experience??"EXP",e.exp??"EXP"],exports.makeTermsBasicFromArray=e=>({level:e[0],levelA:e[1],hp:e[2],hpA:e[3],mp:e[4],mpA:e[5],tp:e[6],tpA:e[7],experience:e[8],exp:e[9]}),exports.makeTermsCommandArray=e=>P(e,""),exports.makeTermsCommandArrayWithNulls=P,exports.makeTermsCommandFromArray=e=>({fight:e[0],escape:e[1],attack:e[2],guard:e[3],item:e[4],skill:e[5],equip:e[6],status:e[7],formation:e[8],save:e[9],gameEnd:e[10],options:e[11],weapon:e[12],armor:e[13],keyItem:e[14],equip2:e[15],optimize:e[16],clear:e[17],newGame:e[18],continue_:e[19],toTitle:e[21],cancel:e[22],buy:e[24],sell:e[25]}),exports.makeTermsMessages=e=>({actionFailure:t(e.actionFailure,"Action failed."),actorDamage:t(e.actorDamage,"%1 took %2 damage."),actorRecovery:t(e.actorRecovery,"%1 recovered %2 HP."),actorGain:t(e.actorGain,"%1 gained %2."),actorLoss:t(e.actorLoss,"%1 lost %2."),actorDrain:t(e.actorDrain,"%1 drained %2 HP."),actorNoDamage:t(e.actorNoDamage,"%1 was not damaged."),actorNoHit:t(e.actorNoHit,"%1 was not hit."),alwaysDash:t(e.alwaysDash,"Always dash."),bgmVolume:t(e.bgmVolume,"BGM volume"),bgsVolume:t(e.bgsVolume,"BGS volume"),commandRemember:t(e.commandRemember,"Command remember."),criticalToActor:t(e.criticalToActor,"%1 dealt %2 damage to %3."),criticalToEnemy:t(e.criticalToEnemy,"%1 dealt %2 damage to %3."),counterAttack:t(e.counterAttack,"%1 countered!"),debuffAdd:t(e.debuffAdd,"%1's %2 was lowered."),defeat:t(e.defeat,"Defeat."),enemyDamage:t(e.enemyDamage,"%1 took %2 damage."),enemyDrain:t(e.enemyDrain,"%1 drained %2 HP."),enemyGain:t(e.enemyGain,"%1 gained %2."),enemyLoss:t(e.enemyLoss,"%1 lost %2."),enemyNoDamage:t(e.enemyNoDamage,"%1 was not damaged."),enemyNoHit:t(e.enemyNoHit,"%1 was not hit."),enemyRecovery:t(e.enemyRecovery,"%1 recovered %2 HP."),evasion:t(e.evasion,"%1 evaded the attack!"),autosave:t(e.autosave,"Autosave"),escapeFailure:t(e.escapeFailure,"Escape failed."),escapeStart:t(e.escapeStart,"%1 started to escape!"),emerge:t(e.emerge,"%1 appeared!"),expNext:t(e.expNext,"Next level in %1 EXP."),expTotal:t(e.expTotal,"Total EXP: %1"),file:t(e.file,"File"),buffAdd:t(e.buffAdd,"%1's %2 was raised."),buffRemove:t(e.buffRemove,"%1's %2 was lowered."),obtainExp:t(e.obtainExp,"%1 EXP obtained."),obtainGold:t(e.obtainGold,"%1 gold obtained."),obtainItem:t(e.obtainItem,"%1 obtained %2."),obtainSkill:t(e.obtainSkill,"%1 learned %2."),levelUp:t(e.levelUp,"%1 leveled up!"),partyName:t(e.partyName,"Party"),loadMessage:t(e.loadMessage,"Load %1?"),meVolume:t(e.meVolume,"ME volume"),possession:t(e.possession,"Possession"),preemptive:t(e.preemptive,"%1 attacked first!"),saveMessage:t(e.saveMessage,"Save %1?"),seVolume:t(e.seVolume,"SE volume"),magicEvasion:t(e.magicEvasion,"%1 evaded the magic!"),magicReflection:t(e.magicReflection,"%1 reflected the magic!"),substitute:t(e.substitute,"%1 took the hit!"),surprise:t(e.surprise,"%1 surprised the enemy!"),touchUI:t(e.touchUI,"Touch UI"),useItem:t(e.useItem,"%1 used %2."),victory:t(e.victory,"Victory!")}),exports.normalizeNote=y,exports.partyAbilityToArray=M,exports.readNote=f,exports.readNoteEx=E,exports.readNoteObject=(e,a)=>E(e.note,(r,i)=>a(r,i,e)),exports.regularParamName=(e,a)=>{switch(e){case 0:return a.maxHp;case 1:return a.maxMp;case 2:return a.atk;case 3:return a.def;case 4:return a.matk;case 5:return a.mdef;case 6:return a.agi;case 7:return a.luk;default:return`?rparams[${e}]`}},exports.regularParamsToArray=O,exports.replaceNote=(e,a,r=`
`)=>{const i=y(e),d=i.items.map(l=>({key:l.key,value:a(l)}));return C({note:i.note,items:d},r)},exports.resolveItemEffectLabels=e=>[J(e),Z(e),ee(e),ae(e),te(e),re(e),me(e),ie(e),oe(e),Q(e),ne(e),se(e),de(e)],exports.resolveTraitLabels=e=>[Ee(e.elementRate),Ae(e.debuffRate),pe(e.stateRate),_e(e.stateResist),ue(e.regularParam),ce(e.extraParam),Te(e.specialParam),Re(e.attackElement),Ie(e.attackState),Se(e.attackSpeed),Ce(e.attackTimes),ye(e.attackSkill),Ne(e.skillTypeAdd),Pe(e.skillTypeSeal),Le(e.skillAdd),ke(e.skillSeal),Oe(e.equipWeaponType),ge(e.equipArmorType),Me(e.equipLock),be(e.equipSeal),fe(e.slotType),he(e.actionPlus),Ge(e.specialFlag),He(e.collaps),Fe(e.partyAbility)],exports.setNoteValue=(e,a,r)=>{const i=/<([^<>:]{1,100}):([^>]{1,1000})>/g;return e.replace(i,(d,l)=>l===a?N(l,r):d)},exports.specialFlagToArray=b,exports.specialParamName=(e,a)=>{switch(e){case 9:return a.experienceRate;case 0:return a.targetRate;case 8:return a.floorDamageRate;case 1:return a.guardEffectRate;case 4:return a.mpCostRate;case 5:return a.tpChargeRate;case 6:return a.physicalDamageRate;case 7:return a.magicDamageRate;case 3:return a.pharmacology;case 2:return a.recoveryEffectRate}return`?sparams[${e}]`},exports.specialParamsToArray=g,exports.toArrayShowMessageHeader=e=>[e.facename,e.faceIndex,e.background,e.positionType,e.speakerName];

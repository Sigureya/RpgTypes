"use strict";const Y=(a,e)=>({label:e.skill.title,items:a,source:{author:"rmmz",module:"data",kind:"skill"}}),x=(a,e)=>({items:a,label:e.actor.title,source:{author:"rmmz",module:"data",kind:"actor"}}),w=(a,e)=>({items:a,label:e.state.title,source:{author:"rmmz",module:"data",kind:"state"}}),W=(a,e)=>({items:a,label:e.armor.title,source:{author:"rmmz",kind:"armor",module:"data"}}),X=(a,e)=>({items:a,label:e.class.title,source:{author:"rmmz",module:"data",kind:"class"}}),K=(a,e)=>({items:a,label:e.enemy.title,source:{author:"rmmz",module:"data",kind:"enemy"}}),q=(a,e)=>({items:a,label:e.item.title,source:{author:"rmmz",module:"data",kind:"item"}}),$=(a,e)=>({items:a,label:e.weapon.title,source:{author:"rmmz",module:"data",kind:"weapon"}}),Q=(a,e)=>({items:a,label:e.commonEvent.title,source:{author:"rmmz",module:"data",kind:"common_event"}}),R=(a,e)=>({items:y(a.options,e),label:a.title,source:{author:"rmmz",module:"trait",kind:"collaps"}}),y=(a,e)=>[{id:0,name:e.normal},{id:1,name:a.bossCollaps},{id:2,name:a.instantCollaps},{id:3,name:a.noneCollaps}],p=a=>({items:k(a.options),label:a.title,source:{author:"rmmz",module:"trait",kind:"xparams"}}),k=a=>[{id:0,name:a.hitRate},{id:1,name:a.evasionRate},{id:2,name:a.criticalRate},{id:3,name:a.criticalEvasionRate},{id:4,name:a.magicEvasionRate},{id:5,name:a.magicReflectionRate},{id:6,name:a.counterAttackRate},{id:7,name:a.hpRegenerationRate},{id:8,name:a.mpRegenerationRate},{id:9,name:a.tpRegenerationRate}],I=a=>({items:O(a.options),label:a.title,source:{author:"rmmz",module:"trait",kind:"params"}}),O=a=>[{id:0,name:a.maxHp},{id:1,name:a.maxMp},{id:2,name:a.atk},{id:3,name:a.def},{id:4,name:a.matk},{id:5,name:a.mdef},{id:6,name:a.agi},{id:7,name:a.luk}],N=a=>({items:M(a.options),label:a.title,source:{author:"rmmz",module:"trait",kind:"sparams"}}),M=a=>[{id:0,name:a.targetRate},{id:1,name:a.guardEffectRate},{id:2,name:a.recoveryEffectRate},{id:3,name:a.pharmacology},{id:4,name:a.mpCostRate},{id:5,name:a.tpChargeRate},{id:6,name:a.physicalDamageRate},{id:7,name:a.magicDamageRate},{id:8,name:a.floorDamageRate},{id:9,name:a.experienceRate}],S=a=>({items:g(a.options),label:a.title,source:{author:"rmmz",module:"trait",kind:"partyAbility"}}),g=a=>[{id:0,name:a.encounterHalf},{id:1,name:a.encounterNone},{id:2,name:a.cancelSurprise},{id:3,name:a.raisePreemptive},{id:4,name:a.goldDouble},{id:5,name:a.dropItemDouble}],C=a=>({items:f(a.options),label:a.title,source:{author:"rmmz",module:"trait",kind:"sflag"}}),f=a=>[{id:0,name:a.autoBattle},{id:1,name:a.guard},{id:2,name:a.substitute},{id:3,name:a.preventEscape}],o=(a,e,r)=>({kindId:a,label:e.domainName,pattern:e.format,description:e.desc,dataSource:r}),j=a=>o(41,a.special),Z=a=>o(11,a.recoverHp),J=a=>o(12,a.recoverMp),aa=a=>o(13,a.gainTp),ea=a=>o(21,a.addState,{author:"rmmz",module:"data",kind:"state"}),ta=a=>o(22,a.removeState,{author:"rmmz",module:"data",kind:"state"}),ra=a=>o(31,a.addBuff,{author:"rmmz",module:"trait",kind:"params"}),ma=a=>o(32,a.addDebuff,{author:"rmmz",module:"trait",kind:"params"}),oa=a=>o(33,a.removeBuff,{author:"rmmz",module:"trait",kind:"params"}),ia=a=>o(34,a.removeDebuff,{author:"rmmz",module:"trait",kind:"params"}),sa=a=>o(42,a.grow,{author:"rmmz",module:"trait",kind:"params"}),la=a=>o(43,a.learnSkill,{author:"rmmz",module:"data",kind:"skill"}),na=a=>o(44,a.commonEvent,{author:"rmmz",module:"data",kind:"common_event"}),b=a=>d(a,(e,r)=>({key:e,value:r})),d=(a,e)=>{const r=/<([^<>:]{1,100}):([^>]{1,1000})>/g;return Array.from(a.matchAll(r),m=>e(m[1],m[2]))},E=(a,e=`
`)=>[...a.items.map(r=>`<${r.key}:${r.value}>`),a.note].join(e).trim(),A=a=>({note:Ea(a),items:b(a)}),Ea=a=>{if(a.length>=3e4)throw new Error("Note text is too long. Please shorten it.");return a.replaceAll(/<([^<>:]{1,100}):([^>]{1,1000})>/g,"")},P=(a,e)=>`<${a}:${e}>`,Aa=a=>({pattern:a.format,label:a.title,kindId:11,dataSource:G()}),da=a=>({pattern:a.format,label:a.title,kindId:12,dataSource:{author:"rmmz",module:"trait",kind:"params"}}),_a=a=>({pattern:a.format,label:a.title,kindId:13,dataSource:_()}),Ta=a=>({pattern:a.format,label:a.title,kindId:14,dataSource:_()}),ca=a=>({pattern:a.format,label:a.title,kindId:21,dataSource:{author:"rmmz",module:"trait",kind:"params"}}),ua=a=>({pattern:a.format,label:a.title,kindId:22,dataSource:{author:"rmmz",module:"trait",kind:"xparams"}}),Ra=a=>({pattern:a.format,label:a.title,kindId:23,dataSource:{author:"rmmz",module:"trait",kind:"sparams"}}),pa=a=>({pattern:a.format,label:a.title,kindId:31,dataSource:G()}),Ia=a=>({pattern:a.format,label:a.title,kindId:32,dataSource:_()}),Na=a=>({pattern:a.format,label:a.title,kindId:33}),Sa=a=>({pattern:a.format,label:a.title,kindId:34}),Ca=a=>({pattern:a.format,label:a.title,kindId:35,dataSource:T()}),Pa=a=>({pattern:a.format,label:a.title,kindId:41,dataSource:h()}),La=a=>({pattern:a.format,label:a.title,kindId:42,dataSource:h()}),ya=a=>({pattern:a.format,label:a.title,kindId:43,dataSource:T()}),ka=a=>({pattern:a.format,label:a.title,kindId:44,dataSource:T()}),Oa=a=>({pattern:a.format,label:a.title,kindId:51,dataSource:Da()}),Ma=a=>({pattern:a.format,label:a.title,kindId:52,dataSource:Fa()}),ga=a=>({pattern:a.format,label:a.title,kindId:53,dataSource:c()}),fa=a=>({pattern:a.format,label:a.title,kindId:54,dataSource:c()}),ba=a=>({pattern:a.format,label:a.title,kindId:55,dataSource:c()}),Ga=a=>({pattern:a.format,label:a.title,kindId:61}),ha=a=>({pattern:a.format,label:a.title,kindId:62,dataSource:{author:"rmmz",module:"trait",kind:"sflag"}}),va=a=>({pattern:a.format,label:a.title,kindId:63,dataSource:{author:"rmmz",module:"trait",kind:"collaps"}}),Ha=a=>({pattern:a.format,label:a.title,kindId:64,dataSource:{author:"rmmz",module:"trait",kind:"partyAbility"}}),_=()=>({author:"rmmz",module:"data",kind:"state"}),T=()=>({author:"rmmz",module:"data",kind:"skill"}),G=()=>({author:"rmmz",module:"system",kind:"elements"}),h=()=>({author:"rmmz",module:"system",kind:"skillTypes"}),Da=()=>({author:"rmmz",module:"system",kind:"weaponTypes"}),Fa=()=>({author:"rmmz",module:"system",kind:"armorTypes"}),c=()=>({author:"rmmz",module:"system",kind:"equipTypes"}),l=(a,e)=>({name:a,id:e}),v=a=>a.variables.map(l),H=a=>a.elements.map(l),D=a=>a.equipTypes.map(l),F=a=>a.skillTypes.map(l),U=a=>a.weaponTypes.map(l),B=a=>a.armorTypes.map(l),V=a=>a.switches.map(l),Ua=(a,e)=>({items:B(a),label:e.options.armorTypes,source:{author:"rmmz",module:"system",kind:"armorTypes"}}),Ba=(a,e)=>({items:H(a),label:e.options.elements,source:{author:"rmmz",module:"system",kind:"elements"}}),Va=(a,e)=>({items:D(a),label:e.options.equipTypes,source:{author:"rmmz",module:"system",kind:"equipTypes"}}),za=(a,e)=>({items:F(a),label:e.options.skillTypes,source:{author:"rmmz",module:"system",kind:"skillTypes"}}),Ya=(a,e)=>({items:v(a),label:e.options.variables,source:{author:"rmmz",module:"system",kind:"variable"}}),xa=(a,e)=>({items:V(a),label:e.options.switches,source:{author:"rmmz",module:"system",kind:"switch"}}),wa=(a,e)=>({items:U(a),label:e.options.weaponTypes,source:{author:"rmmz",module:"system",kind:"weaponTypes"}}),t=(a,e)=>typeof a=="string"?a:e,L=(a,e)=>[a.fight??"Fight",a.escape??"Escape",a.attack??"Attack",a.guard??"Guard",a.item??"Item",a.skill??"Skill",a.equip??"Equip",a.status??"Status",a.formation??"Formation",a.save??"Save",a.gameEnd??"Game End",a.options??"Options",a.weapon??"Weapon",a.armor??"Armor",a.keyItem??"Key Item",a.equip2??"Equip2",a.optimize??"Optimize",a.clear??"Clear",a.newGame??"New Game",a.continueGame??"Continue",e,a.toTitle??"To Title",a.cancel??"Cancel",e,a.buy??"Buy",a.sell??"Sell"];exports.ABORT_BATTLE=340,exports.BATTLE_PROCESSING=301,exports.CHANGE_ACTOR_IMAGES=322,exports.CHANGE_ACTOR_STATE=313,exports.CHANGE_ARMORS=128,exports.CHANGE_BATTLE_BACKGROUND=283,exports.CHANGE_BATTLE_BGM=132,exports.CHANGE_CLASS=321,exports.CHANGE_DEFEAT_ME=139,exports.CHANGE_ENCOUNTER=136,exports.CHANGE_ENEMY_HP=331,exports.CHANGE_ENEMY_MP=332,exports.CHANGE_ENEMY_STATE=333,exports.CHANGE_ENEMY_TP=342,exports.CHANGE_EXP=315,exports.CHANGE_FORMATION_ACCESS=137,exports.CHANGE_GOLD=125,exports.CHANGE_HP=311,exports.CHANGE_ITEMS=126,exports.CHANGE_MAP_NAME_DISPLAY=281,exports.CHANGE_MENU_ACCESS=135,exports.CHANGE_MP=312,exports.CHANGE_NAME=320,exports.CHANGE_NICKNAME=324,exports.CHANGE_PARALLAX=284,exports.CHANGE_PARAMETER=317,exports.CHANGE_PARTY_MEMBER=129,exports.CHANGE_PLAYER_FOLLOWERS=216,exports.CHANGE_PROFILE=325,exports.CHANGE_SAVE_ACCESS=134,exports.CHANGE_SKILL=318,exports.CHANGE_TILESET=282,exports.CHANGE_TP=326,exports.CHANGE_TRANSPARENCY=211,exports.CHANGE_VEHICLE_BGM=140,exports.CHANGE_VEHICLE_IMAGE=323,exports.CHANGE_VICTORY_ME=133,exports.CHANGE_WEAPONS=127,exports.CHANGE_WINDOW_COLOR=138,exports.COLLAPS_BOSS=1,exports.COLLAPS_INSTANT=2,exports.COLLAPS_NONE=3,exports.COLLAPS_NORMAL=0,exports.COMMENT_BODY=408,exports.COMMENT_HEAD=108,exports.COMMON_EVENT=117,exports.CONDITIONAL_BRANCH=111,exports.CONDITIONAL_BRANCH_ELSE=411,exports.CONTROL_SELF_SWITCH=123,exports.CONTROL_SWITCHES=121,exports.CONTROL_TIMER=124,exports.CONTROL_VARIABLES=122,exports.EFFECT_ADD_BUFF=31,exports.EFFECT_ADD_DEBUFF=32,exports.EFFECT_ADD_STATE=21,exports.EFFECT_COMMON_EVENT=44,exports.EFFECT_GAIN_TP=13,exports.EFFECT_GROW=42,exports.EFFECT_LEARN_SKILL=43,exports.EFFECT_RECOVER_HP=11,exports.EFFECT_RECOVER_MP=12,exports.EFFECT_REMOVE_BUFF=33,exports.EFFECT_REMOVE_DEBUFF=34,exports.EFFECT_REMOVE_STATE=22,exports.EFFECT_SPECIAL=41,exports.ENEMY_APPEAR=335,exports.ENEMY_RECOVER_ALL=334,exports.ENEMY_TRANSFORM=336,exports.ERASE_EVENT=214,exports.ERASE_PICTURE=235,exports.EXIT_EVENT_PROCESSING=115,exports.EXTRA_PARAM_CEV=3,exports.EXTRA_PARAM_CNT=6,exports.EXTRA_PARAM_CRI=2,exports.EXTRA_PARAM_EVA=1,exports.EXTRA_PARAM_HIT=0,exports.EXTRA_PARAM_HRG=7,exports.EXTRA_PARAM_MEV=4,exports.EXTRA_PARAM_MRF=5,exports.EXTRA_PARAM_MRG=8,exports.EXTRA_PARAM_TRG=9,exports.FADEIN_SCREEN=222,exports.FADEOUT_BGM=242,exports.FADEOUT_BGS=246,exports.FADEOUT_SCREEN=221,exports.FLAG_ID_AUTO_BATTLE=0,exports.FLAG_ID_GUARD=1,exports.FLAG_ID_PRESERVE_TP=3,exports.FLAG_ID_SUBSTITUTE=2,exports.FLASH_SCREEN=224,exports.FORCE_ACTION=339,exports.GAME_OVER=353,exports.GATHER_FOLLOWERS=217,exports.GET_LOCATION_INFO=285,exports.GET_ONOFF_VEHICLE=206,exports.INPUT_NUMBER=103,exports.LABEL=118,exports.LABEL_JUMP=119,exports.LOOP=112,exports.LOOP_BREAK=113,exports.MOVE_PICTURE=232,exports.NAME_INPUT_PROCESSING=303,exports.NO_OPERATION=0,exports.OPEN_MENU_SCREEN=351,exports.OPEN_SAVE_SCREEN=352,exports.OPERAND_DIRECT=0,exports.OPERAND_VARIABLE=1,exports.OPERATION_GAIN=0,exports.OPERATION_LOSE=1,exports.PARTY_ABILITY_CANCEL_SURPRISE=2,exports.PARTY_ABILITY_DROP_ITEM_DOUBLE=5,exports.PARTY_ABILITY_ENCOUNTER_HALF=0,exports.PARTY_ABILITY_ENCOUNTER_NONE=1,exports.PARTY_ABILITY_GOLD_DOUBLE=4,exports.PARTY_ABILITY_RAISE_PREEMPTIVE=3,exports.PLAY_BGM=241,exports.PLAY_BGS=245,exports.PLAY_ME=249,exports.PLAY_MOVIE=261,exports.PLAY_SE=250,exports.PLUGIN_COMMAND_MV=356,exports.PLUGIN_COMMAND_MZ=357,exports.RECOVER_ALL=314,exports.REGULAR_PARAM_AGI=6,exports.REGULAR_PARAM_ATK=2,exports.REGULAR_PARAM_DEF=3,exports.REGULAR_PARAM_LUK=7,exports.REGULAR_PARAM_MATK=4,exports.REGULAR_PARAM_MAX_HP=0,exports.REGULAR_PARAM_MAX_MP=1,exports.REGULAR_PARAM_MDEF=5,exports.RESUME_BGM=244,exports.RETURN_TO_TITLE_SCREEN=354,exports.ROTATE_PICTURE=233,exports.SAVE_BGM=243,exports.SCRIPT_EVAL=355,exports.SCRIPT_EVAL_BODY=655,exports.SCROLL_MAP=204,exports.SELECT_ITEM=104,exports.SET_EVENT_LOCATION=203,exports.SET_MOVEMENT_ROUTE=205,exports.SET_VEHICLE_LOCATION=202,exports.SET_WEATHER_EFFECT=236,exports.SHAKE_SCREEN=225,exports.SHOP_PROCESSING=302,exports.SHOP_PROCESSING_BODY=605,exports.SHOW_ANIMATION=212,exports.SHOW_BALLOON_ICON=213,exports.SHOW_BATTLE_ANIMATION=337,exports.SHOW_CHOICES=102,exports.SHOW_CHOICES_ITEM=402,exports.SHOW_MESSAGE=101,exports.SHOW_MESSAGE_BODY=401,exports.SHOW_PICTURE=231,exports.SHOW_SCROLLING_TEXT=105,exports.SHOW_SCROLLING_TEXT_BODY=405,exports.SKIP=109,exports.SPECIAL_PARAM_EXR=9,exports.SPECIAL_PARAM_FDR=8,exports.SPECIAL_PARAM_GRD=1,exports.SPECIAL_PARAM_MCR=4,exports.SPECIAL_PARAM_MDR=7,exports.SPECIAL_PARAM_PDR=6,exports.SPECIAL_PARAM_PHA=3,exports.SPECIAL_PARAM_REC=2,exports.SPECIAL_PARAM_TCR=5,exports.SPECIAL_PARAM_TGR=0,exports.STOP_SE=251,exports.TINT_PICTURE=234,exports.TINT_SCREEN=223,exports.TRAIT_ACTION_PLUS=61,exports.TRAIT_ATTACK_ELEMENT=31,exports.TRAIT_ATTACK_SKILL=35,exports.TRAIT_ATTACK_SPEED=33,exports.TRAIT_ATTACK_STATE=32,exports.TRAIT_ATTACK_TIMES=34,exports.TRAIT_COLLAPSE_TYPE=63,exports.TRAIT_DEBUFF_RATE=12,exports.TRAIT_ELEMENT_RATE=11,exports.TRAIT_EQUIP_ARMOR_TYPE=52,exports.TRAIT_EQUIP_LOCK=53,exports.TRAIT_EQUIP_SEAL=54,exports.TRAIT_EQUIP_WEAPON_TYPE=51,exports.TRAIT_PARAM=21,exports.TRAIT_PARTY_ABILITY=64,exports.TRAIT_SKILL_ADD=43,exports.TRAIT_SKILL_SEAL=44,exports.TRAIT_SKILL_TYPE_ADD=41,exports.TRAIT_SKILL_TYPE_SEAL=42,exports.TRAIT_SLOT_TYPE=55,exports.TRAIT_SPARAM=23,exports.TRAIT_SPECIAL_FLAG=62,exports.TRAIT_STATE_RATE=13,exports.TRAIT_STATE_RESIST=14,exports.TRAIT_XPARAM=22,exports.TRANSFER_PLAYER=201,exports.WAIT=230,exports.buildNoteFromNormalized=E,exports.collapsOptionsToArray=y,exports.convertTermsMessageMZtoMV=a=>({actionFailure:a.actionFailure,actorDamage:a.actorDamage,actorRecovery:a.actorRecovery,actorGain:a.actorGain,actorLoss:a.actorLoss,actorDrain:a.actorDrain,actorNoDamage:a.actorNoDamage,actorNoHit:a.actorNoHit,alwaysDash:a.alwaysDash,bgmVolume:a.bgmVolume,bgsVolume:a.bgsVolume,commandRemember:a.commandRemember,criticalToActor:a.criticalToActor,criticalToEnemy:a.criticalToEnemy,counterAttack:a.counterAttack,debuffAdd:a.debuffAdd,defeat:a.defeat,enemyDamage:a.enemyDamage,enemyDrain:a.enemyDrain,enemyGain:a.enemyGain,enemyLoss:a.enemyLoss,enemyNoDamage:a.enemyNoDamage,enemyNoHit:a.enemyNoHit,enemyRecovery:a.enemyRecovery,evasion:a.evasion,escapeFailure:a.escapeFailure,escapeStart:a.escapeStart,emerge:a.emerge,expNext:a.expNext,expTotal:a.expTotal,file:a.file,buffAdd:a.buffAdd,buffRemove:a.buffRemove,obtainExp:a.obtainExp,obtainGold:a.obtainGold,obtainItem:a.obtainItem,obtainSkill:a.obtainSkill,levelUp:a.levelUp,partyName:a.partyName,loadMessage:a.loadMessage,meVolume:a.meVolume,possession:a.possession,magicEvasion:a.magicEvasion,magicReflection:a.magicReflection,substitute:a.substitute,surprise:a.surprise,useItem:a.useItem,victory:a.victory,preemptive:a.preemptive,saveMessage:a.saveMessage,seVolume:a.seVolume}),exports.createNoteEntity=P,exports.defineGameDataSources=(a,e)=>[Y(a.skills,e),x(a.actors,e),w(a.states,e),W(a.armors,e),X(a.classes,e),K(a.enemies,e),q(a.items,e),$(a.weapons,e),Q(a.commonEvents,e)],exports.defineSystemItems=(a,e)=>[Ba(a,e),Va(a,e),wa(a,e),za(a,e),Ua(a,e),Ya(a,e),xa(a,e)],exports.defineTraitCollapseType=R,exports.defineTraitExtraParam=p,exports.defineTraitItems=(a,e)=>[I(a.regularParam),p(a.extraParam),N(a.specialParam),R(a.collaps,e),C(a.specialFlag),S(a.partyAbility)],exports.defineTraitPartyAbility=S,exports.defineTraitRegularParam=I,exports.defineTraitSpecialFlag=C,exports.defineTraitSpecialParam=N,exports.extraParamName=(a,e)=>{switch(a){case 3:return e.criticalEvasionRate;case 1:return e.evasionRate;case 6:return e.counterAttackRate;case 2:return e.criticalRate;case 0:return e.hitRate;case 7:return e.hpRegenerationRate;case 4:return e.magicEvasionRate;case 5:return e.magicReflectionRate;case 8:return e.mpRegenerationRate;case 9:return e.tpRegenerationRate}return`?xparams[${a}]`},exports.extraParamsToArray=k,exports.fromArrayShowMessageHeader=a=>({facename:a[0],faceIndex:a[1],background:a[2],positionType:a[3],speakerName:a[4]??""}),exports.getArmorTypes=B,exports.getElementTypes=H,exports.getEquipTypes=D,exports.getItemIdFromItemCommand=a=>a.parameters[0],exports.getNoteValue=(a,e)=>{const r=/<([^<>:]{1,100}):([^>]{1,1000})>/g,m=Array.from(a.matchAll(r)).find(i=>i[1]===e);return m?m[2]:void 0},exports.getSkillTypes=F,exports.getSwitches=V,exports.getVariableNames=v,exports.getWeaponTypes=U,exports.isUsingVariableItemCommand=a=>a.parameters[2]===1,exports.makeCommandShowMessage=(a,e=0)=>({code:101,indent:e,parameters:[(a==null?void 0:a.facename)??"",(a==null?void 0:a.faceIndex)??0,(a==null?void 0:a.background)??0,(a==null?void 0:a.positionType)??2,(a==null?void 0:a.speakerName)??""]}),exports.makeCommandShowMessageBody=(a,e=0)=>({code:401,indent:e,parameters:[a]}),exports.makeParamNamesArray=a=>[a.mhp??"",a.mmp??"",a.atk??"",a.def??"",a.mat??"",a.mdf??"",a.agi??"",a.luk??"",a.hit??"",a.eva??""],exports.makeParamNamesFromArray=a=>({mhp:a[0],mmp:a[1],atk:a[2],def:a[3],mat:a[4],mdf:a[5],agi:a[6],luk:a[7],hit:a[8],eva:a[9]}),exports.makeTermsBasic=a=>[a.level??"Level",a.levelA??"Level",a.hp??"HP",a.hpA??"HP",a.mp??"MP",a.mpA??"MP",a.tp??"TP",a.tpA??"TP",a.experience??"EXP",a.exp??"EXP"],exports.makeTermsBasicFromArray=a=>({level:a[0],levelA:a[1],hp:a[2],hpA:a[3],mp:a[4],mpA:a[5],tp:a[6],tpA:a[7],experience:a[8],exp:a[9]}),exports.makeTermsCommandArray=a=>L(a,""),exports.makeTermsCommandArrayWithNulls=L,exports.makeTermsCommandFromArray=a=>({fight:a[0],escape:a[1],attack:a[2],guard:a[3],item:a[4],skill:a[5],equip:a[6],status:a[7],formation:a[8],save:a[9],gameEnd:a[10],options:a[11],weapon:a[12],armor:a[13],keyItem:a[14],equip2:a[15],optimize:a[16],clear:a[17],newGame:a[18],continueGame:a[19],toTitle:a[21],cancel:a[22],buy:a[24],sell:a[25]}),exports.makeTermsMessages=a=>({actionFailure:t(a.actionFailure,"Action failed."),actorDamage:t(a.actorDamage,"%1 took %2 damage."),actorRecovery:t(a.actorRecovery,"%1 recovered %2 HP."),actorGain:t(a.actorGain,"%1 gained %2."),actorLoss:t(a.actorLoss,"%1 lost %2."),actorDrain:t(a.actorDrain,"%1 drained %2 HP."),actorNoDamage:t(a.actorNoDamage,"%1 was not damaged."),actorNoHit:t(a.actorNoHit,"%1 was not hit."),alwaysDash:t(a.alwaysDash,"Always dash."),bgmVolume:t(a.bgmVolume,"BGM volume"),bgsVolume:t(a.bgsVolume,"BGS volume"),commandRemember:t(a.commandRemember,"Command remember."),criticalToActor:t(a.criticalToActor,"%1 dealt %2 damage to %3."),criticalToEnemy:t(a.criticalToEnemy,"%1 dealt %2 damage to %3."),counterAttack:t(a.counterAttack,"%1 countered!"),debuffAdd:t(a.debuffAdd,"%1's %2 was lowered."),defeat:t(a.defeat,"Defeat."),enemyDamage:t(a.enemyDamage,"%1 took %2 damage."),enemyDrain:t(a.enemyDrain,"%1 drained %2 HP."),enemyGain:t(a.enemyGain,"%1 gained %2."),enemyLoss:t(a.enemyLoss,"%1 lost %2."),enemyNoDamage:t(a.enemyNoDamage,"%1 was not damaged."),enemyNoHit:t(a.enemyNoHit,"%1 was not hit."),enemyRecovery:t(a.enemyRecovery,"%1 recovered %2 HP."),evasion:t(a.evasion,"%1 evaded the attack!"),autosave:t(a.autosave,"Autosave"),escapeFailure:t(a.escapeFailure,"Escape failed."),escapeStart:t(a.escapeStart,"%1 started to escape!"),emerge:t(a.emerge,"%1 appeared!"),expNext:t(a.expNext,"Next level in %1 EXP."),expTotal:t(a.expTotal,"Total EXP: %1"),file:t(a.file,"File"),buffAdd:t(a.buffAdd,"%1's %2 was raised."),buffRemove:t(a.buffRemove,"%1's %2 was lowered."),obtainExp:t(a.obtainExp,"%1 EXP obtained."),obtainGold:t(a.obtainGold,"%1 gold obtained."),obtainItem:t(a.obtainItem,"%1 obtained %2."),obtainSkill:t(a.obtainSkill,"%1 learned %2."),levelUp:t(a.levelUp,"%1 leveled up!"),partyName:t(a.partyName,"Party"),loadMessage:t(a.loadMessage,"Load %1?"),meVolume:t(a.meVolume,"ME volume"),possession:t(a.possession,"Possession"),preemptive:t(a.preemptive,"%1 attacked first!"),saveMessage:t(a.saveMessage,"Save %1?"),seVolume:t(a.seVolume,"SE volume"),magicEvasion:t(a.magicEvasion,"%1 evaded the magic!"),magicReflection:t(a.magicReflection,"%1 reflected the magic!"),substitute:t(a.substitute,"%1 took the hit!"),surprise:t(a.surprise,"%1 surprised the enemy!"),touchUI:t(a.touchUI,"Touch UI"),useItem:t(a.useItem,"%1 used %2."),victory:t(a.victory,"Victory!")}),exports.normalizeNote=A,exports.partyAbilityToArray=g,exports.readNote=b,exports.readNoteEx=d,exports.readNoteObject=(a,e)=>d(a.note,(r,m)=>e(r,m,a)),exports.regularParamName=(a,e)=>{switch(a){case 0:return e.maxHp;case 1:return e.maxMp;case 2:return e.atk;case 3:return e.def;case 4:return e.matk;case 5:return e.mdef;case 6:return e.agi;case 7:return e.luk;default:return`?rparams[${a}]`}},exports.regularParamsToArray=O,exports.replaceNote=(a,e,r=`
`)=>{const m=A(a),i=m.items.map(s=>({key:s.key,value:e(s)}));return E({note:m.note,items:i},r)},exports.replaceNoteWithHandlers=(a,e,r=`
`)=>{const m=A(a),i=m.items.map(s=>((n,u)=>{if(u.isReplaceTargetNote(n)){const z=u.replaceText(n.value);return{key:n.key,value:z??n.value}}return n})(s,e));return E({note:m.note,items:i},r)},exports.resolveItemEffectLabels=a=>[Z(a),J(a),aa(a),ea(a),ta(a),ra(a),ma(a),oa(a),ia(a),j(a),sa(a),la(a),na(a)],exports.resolveTraitLabels=a=>[Aa(a.elementRate),da(a.debuffRate),_a(a.stateRate),Ta(a.stateResist),ca(a.regularParam),ua(a.extraParam),Ra(a.specialParam),pa(a.attackElement),Ia(a.attackState),Na(a.attackSpeed),Sa(a.attackTimes),Ca(a.attackSkill),Pa(a.skillTypeAdd),La(a.skillTypeSeal),ya(a.skillAdd),ka(a.skillSeal),Oa(a.equipWeaponType),Ma(a.equipArmorType),ga(a.equipLock),fa(a.equipSeal),ba(a.slotType),Ga(a.actionPlus),ha(a.specialFlag),va(a.collaps),Ha(a.partyAbility)],exports.setNoteValue=(a,e,r)=>{const m=/<([^<>:]{1,100}):([^>]{1,1000})>/g;return a.replace(m,(i,s)=>s===e?P(s,r):i)},exports.specialFlagToArray=f,exports.specialParamName=(a,e)=>{switch(a){case 9:return e.experienceRate;case 0:return e.targetRate;case 8:return e.floorDamageRate;case 1:return e.guardEffectRate;case 4:return e.mpCostRate;case 5:return e.tpChargeRate;case 6:return e.physicalDamageRate;case 7:return e.magicDamageRate;case 3:return e.pharmacology;case 2:return e.recoveryEffectRate}return`?sparams[${a}]`},exports.specialParamsToArray=M,exports.toArrayShowMessageHeader=a=>[a.facename,a.faceIndex,a.background,a.positionType,a.speakerName];
